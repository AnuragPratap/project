{"version":3,"file":"static/js/810.9960d8c1.chunk.js","mappings":"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","sources":["../node_modules/@material-ui/core/esm/CircularProgress/CircularProgress.js","../node_modules/@material-ui/core/esm/LinearProgress/LinearProgress.js","../node_modules/base64-js/index.js","../node_modules/buffer/index.js","../node_modules/events/events.js","../node_modules/ieee754/index.js","../node_modules/inherits/inherits_browser.js","../node_modules/react-html-parser/lib/HtmlParser.js","../node_modules/react-html-parser/lib/convertNodeToElement.js","../node_modules/react-html-parser/lib/dom/attributes/BooleanAttributes.js","../node_modules/react-html-parser/lib/dom/attributes/ReactAttributes.js","../node_modules/react-html-parser/lib/dom/elements/VoidElements.js","../node_modules/react-html-parser/lib/elementTypes/StyleElementType.js","../node_modules/react-html-parser/lib/elementTypes/TagElementType.js","../node_modules/react-html-parser/lib/elementTypes/TextElementType.js","../node_modules/react-html-parser/lib/elementTypes/UnsupportedElementType.js","../node_modules/react-html-parser/lib/elementTypes/index.js","../node_modules/react-html-parser/lib/index.js","../node_modules/react-html-parser/lib/processNodes.js","../node_modules/react-html-parser/lib/utils/generatePropsFromAttributes.js","../node_modules/react-html-parser/lib/utils/htmlAttributesToReact.js","../node_modules/react-html-parser/lib/utils/inlineStyleToObject.js","../node_modules/react-html-parser/lib/utils/isEmptyTextNode.js","../node_modules/react-html-parser/lib/utils/isValidTagOrAttributeName.js","../node_modules/react-html-parser/node_modules/dom-serializer/index.js","../node_modules/react-html-parser/node_modules/dom-serializer/node_modules/domelementtype/lib/index.js","../node_modules/react-html-parser/node_modules/dom-serializer/node_modules/entities/lib/decode.js","../node_modules/react-html-parser/node_modules/dom-serializer/node_modules/entities/lib/decode_codepoint.js","../node_modules/react-html-parser/node_modules/dom-serializer/node_modules/entities/lib/encode.js","../node_modules/react-html-parser/node_modules/dom-serializer/node_modules/entities/lib/index.js","../node_modules/react-html-parser/node_modules/domelementtype/index.js","../node_modules/react-html-parser/node_modules/domhandler/index.js","../node_modules/react-html-parser/node_modules/domhandler/lib/element.js","../node_modules/react-html-parser/node_modules/domhandler/lib/node.js","../node_modules/react-html-parser/node_modules/domutils/index.js","../node_modules/react-html-parser/node_modules/domutils/lib/helpers.js","../node_modules/react-html-parser/node_modules/domutils/lib/legacy.js","../node_modules/react-html-parser/node_modules/domutils/lib/manipulation.js","../node_modules/react-html-parser/node_modules/domutils/lib/querying.js","../node_modules/react-html-parser/node_modules/domutils/lib/stringify.js","../node_modules/react-html-parser/node_modules/domutils/lib/traversal.js","../node_modules/react-html-parser/node_modules/entities/lib/decode_codepoint.js","../node_modules/react-html-parser/node_modules/htmlparser2/lib/CollectingHandler.js","../node_modules/react-html-parser/node_modules/htmlparser2/lib/FeedHandler.js","../node_modules/react-html-parser/node_modules/htmlparser2/lib/Parser.js","../node_modules/react-html-parser/node_modules/htmlparser2/lib/ProxyHandler.js","../node_modules/react-html-parser/node_modules/htmlparser2/lib/Stream.js","../node_modules/react-html-parser/node_modules/htmlparser2/lib/Tokenizer.js","../node_modules/react-html-parser/node_modules/htmlparser2/lib/WritableStream.js","../node_modules/react-html-parser/node_modules/htmlparser2/lib/index.js","../node_modules/safe-buffer/index.js","../node_modules/string_decoder/lib/string_decoder.js","../node_modules/@kurkle/color/dist/color.esm.js","../node_modules/chart.js/src/helpers/helpers.core.ts","../node_modules/chart.js/src/helpers/helpers.math.ts","../node_modules/chart.js/src/helpers/helpers.collection.ts","../node_modules/chart.js/src/helpers/helpers.extras.ts","../node_modules/chart.js/src/helpers/helpers.easing.ts","../node_modules/chart.js/src/helpers/helpers.color.ts","../node_modules/chart.js/src/core/core.animations.defaults.js","../node_modules/chart.js/src/helpers/helpers.intl.ts","../node_modules/chart.js/src/core/core.ticks.js","../node_modules/chart.js/src/core/core.defaults.js","../node_modules/chart.js/src/core/core.layouts.defaults.js","../node_modules/chart.js/src/core/core.scale.defaults.js","../node_modules/chart.js/src/helpers/helpers.canvas.ts","../node_modules/chart.js/src/helpers/helpers.options.ts","../node_modules/chart.js/src/helpers/helpers.config.ts","../node_modules/chart.js/src/helpers/helpers.curve.ts","../node_modules/chart.js/src/helpers/helpers.dom.ts","../node_modules/chart.js/src/helpers/helpers.interpolation.ts","../node_modules/chart.js/src/helpers/helpers.rtl.ts","../node_modules/chart.js/src/helpers/helpers.segment.js","../node_modules/chart.js/src/core/core.animator.js","../node_modules/chart.js/src/core/core.animation.js","../node_modules/chart.js/src/core/core.animations.js","../node_modules/chart.js/src/core/core.datasetController.js","../node_modules/chart.js/src/controllers/controller.bar.js","../node_modules/chart.js/src/controllers/controller.bubble.js","../node_modules/chart.js/src/controllers/controller.doughnut.js","../node_modules/chart.js/src/controllers/controller.line.js","../node_modules/chart.js/src/controllers/controller.polarArea.js","../node_modules/chart.js/src/controllers/controller.pie.js","../node_modules/chart.js/src/controllers/controller.radar.js","../node_modules/chart.js/src/controllers/controller.scatter.js","../node_modules/chart.js/src/core/core.adapters.ts","../node_modules/chart.js/src/core/core.interaction.js","../node_modules/chart.js/src/core/core.layouts.js","../node_modules/chart.js/src/platform/platform.base.js","../node_modules/chart.js/src/platform/platform.basic.js","../node_modules/chart.js/src/platform/platform.dom.js","../node_modules/chart.js/src/core/core.element.ts","../node_modules/chart.js/src/core/core.scale.autoskip.js","../node_modules/chart.js/src/core/core.scale.js","../node_modules/chart.js/src/core/core.typedRegistry.js","../node_modules/chart.js/src/core/core.registry.js","../node_modules/chart.js/src/core/core.plugins.js","../node_modules/chart.js/src/core/core.config.js","../node_modules/chart.js/src/core/core.controller.js","../node_modules/chart.js/src/platform/index.js","../node_modules/chart.js/src/elements/element.arc.ts","../node_modules/chart.js/src/elements/element.line.js","../node_modules/chart.js/src/elements/element.point.ts","../node_modules/chart.js/src/elements/element.bar.js","../node_modules/chart.js/src/plugins/plugin.subtitle.js","../node_modules/chart.js/src/plugins/plugin.tooltip.js","../node_modules/chart.js/src/scales/scale.category.js","../node_modules/chart.js/src/scales/scale.linearbase.js","../node_modules/chart.js/src/scales/scale.linear.js","../node_modules/chart.js/src/scales/scale.logarithmic.js","../node_modules/chart.js/src/scales/scale.radialLinear.js","../node_modules/chart.js/src/scales/scale.time.js","../node_modules/chart.js/src/scales/scale.timeseries.js","../node_modules/react-chartjs-2/src/utils.ts","../node_modules/react-chartjs-2/src/chart.tsx","../node_modules/react-chartjs-2/src/typedCharts.tsx"],"sourcesContent":["import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/esm/objectWithoutProperties\";\nimport * as React from 'react';\nimport PropTypes from 'prop-types';\nimport clsx from 'clsx';\nimport { chainPropTypes } from '@material-ui/utils';\nimport withStyles from '../styles/withStyles';\nimport capitalize from '../utils/capitalize';\nvar SIZE = 44;\nexport var styles = function styles(theme) {\n  return {\n    /* Styles applied to the root element. */\n    root: {\n      display: 'inline-block'\n    },\n\n    /* Styles applied to the root element if `variant=\"static\"`. */\n    static: {\n      transition: theme.transitions.create('transform')\n    },\n\n    /* Styles applied to the root element if `variant=\"indeterminate\"`. */\n    indeterminate: {\n      animation: '$circular-rotate 1.4s linear infinite'\n    },\n\n    /* Styles applied to the root element if `variant=\"determinate\"`. */\n    determinate: {\n      transition: theme.transitions.create('transform')\n    },\n\n    /* Styles applied to the root element if `color=\"primary\"`. */\n    colorPrimary: {\n      color: theme.palette.primary.main\n    },\n\n    /* Styles applied to the root element if `color=\"secondary\"`. */\n    colorSecondary: {\n      color: theme.palette.secondary.main\n    },\n\n    /* Styles applied to the `svg` element. */\n    svg: {\n      display: 'block' // Keeps the progress centered\n\n    },\n\n    /* Styles applied to the `circle` svg path. */\n    circle: {\n      stroke: 'currentColor' // Use butt to follow the specification, by chance, it's already the default CSS value.\n      // strokeLinecap: 'butt',\n\n    },\n\n    /* Styles applied to the `circle` svg path if `variant=\"static\"`. */\n    circleStatic: {\n      transition: theme.transitions.create('stroke-dashoffset')\n    },\n\n    /* Styles applied to the `circle` svg path if `variant=\"indeterminate\"`. */\n    circleIndeterminate: {\n      animation: '$circular-dash 1.4s ease-in-out infinite',\n      // Some default value that looks fine waiting for the animation to kicks in.\n      strokeDasharray: '80px, 200px',\n      strokeDashoffset: '0px' // Add the unit to fix a Edge 16 and below bug.\n\n    },\n\n    /* Styles applied to the `circle` svg path if `variant=\"determinate\"`. */\n    circleDeterminate: {\n      transition: theme.transitions.create('stroke-dashoffset')\n    },\n    '@keyframes circular-rotate': {\n      '0%': {\n        // Fix IE 11 wobbly\n        transformOrigin: '50% 50%'\n      },\n      '100%': {\n        transform: 'rotate(360deg)'\n      }\n    },\n    '@keyframes circular-dash': {\n      '0%': {\n        strokeDasharray: '1px, 200px',\n        strokeDashoffset: '0px'\n      },\n      '50%': {\n        strokeDasharray: '100px, 200px',\n        strokeDashoffset: '-15px'\n      },\n      '100%': {\n        strokeDasharray: '100px, 200px',\n        strokeDashoffset: '-125px'\n      }\n    },\n\n    /* Styles applied to the `circle` svg path if `disableShrink={true}`. */\n    circleDisableShrink: {\n      animation: 'none'\n    }\n  };\n};\n/**\n * ## ARIA\n *\n * If the progress bar is describing the loading progress of a particular region of a page,\n * you should use `aria-describedby` to point to the progress bar, and set the `aria-busy`\n * attribute to `true` on that region until it has finished loading.\n */\n\nvar CircularProgress = /*#__PURE__*/React.forwardRef(function CircularProgress(props, ref) {\n  var classes = props.classes,\n      className = props.className,\n      _props$color = props.color,\n      color = _props$color === void 0 ? 'primary' : _props$color,\n      _props$disableShrink = props.disableShrink,\n      disableShrink = _props$disableShrink === void 0 ? false : _props$disableShrink,\n      _props$size = props.size,\n      size = _props$size === void 0 ? 40 : _props$size,\n      style = props.style,\n      _props$thickness = props.thickness,\n      thickness = _props$thickness === void 0 ? 3.6 : _props$thickness,\n      _props$value = props.value,\n      value = _props$value === void 0 ? 0 : _props$value,\n      _props$variant = props.variant,\n      variant = _props$variant === void 0 ? 'indeterminate' : _props$variant,\n      other = _objectWithoutProperties(props, [\"classes\", \"className\", \"color\", \"disableShrink\", \"size\", \"style\", \"thickness\", \"value\", \"variant\"]);\n\n  var circleStyle = {};\n  var rootStyle = {};\n  var rootProps = {};\n\n  if (variant === 'determinate' || variant === 'static') {\n    var circumference = 2 * Math.PI * ((SIZE - thickness) / 2);\n    circleStyle.strokeDasharray = circumference.toFixed(3);\n    rootProps['aria-valuenow'] = Math.round(value);\n    circleStyle.strokeDashoffset = \"\".concat(((100 - value) / 100 * circumference).toFixed(3), \"px\");\n    rootStyle.transform = 'rotate(-90deg)';\n  }\n\n  return /*#__PURE__*/React.createElement(\"div\", _extends({\n    className: clsx(classes.root, className, color !== 'inherit' && classes[\"color\".concat(capitalize(color))], {\n      'determinate': classes.determinate,\n      'indeterminate': classes.indeterminate,\n      'static': classes.static\n    }[variant]),\n    style: _extends({\n      width: size,\n      height: size\n    }, rootStyle, style),\n    ref: ref,\n    role: \"progressbar\"\n  }, rootProps, other), /*#__PURE__*/React.createElement(\"svg\", {\n    className: classes.svg,\n    viewBox: \"\".concat(SIZE / 2, \" \").concat(SIZE / 2, \" \").concat(SIZE, \" \").concat(SIZE)\n  }, /*#__PURE__*/React.createElement(\"circle\", {\n    className: clsx(classes.circle, disableShrink && classes.circleDisableShrink, {\n      'determinate': classes.circleDeterminate,\n      'indeterminate': classes.circleIndeterminate,\n      'static': classes.circleStatic\n    }[variant]),\n    style: circleStyle,\n    cx: SIZE,\n    cy: SIZE,\n    r: (SIZE - thickness) / 2,\n    fill: \"none\",\n    strokeWidth: thickness\n  })));\n});\nprocess.env.NODE_ENV !== \"production\" ? CircularProgress.propTypes = {\n  // ----------------------------- Warning --------------------------------\n  // | These PropTypes are generated from the TypeScript type definitions |\n  // |     To update them edit the d.ts file and run \"yarn proptypes\"     |\n  // ----------------------------------------------------------------------\n\n  /**\n   * Override or extend the styles applied to the component.\n   * See [CSS API](#css) below for more details.\n   */\n  classes: PropTypes.object,\n\n  /**\n   * @ignore\n   */\n  className: PropTypes.string,\n\n  /**\n   * The color of the component. It supports those theme colors that make sense for this component.\n   */\n  color: PropTypes.oneOf(['inherit', 'primary', 'secondary']),\n\n  /**\n   * If `true`, the shrink animation is disabled.\n   * This only works if variant is `indeterminate`.\n   */\n  disableShrink: chainPropTypes(PropTypes.bool, function (props) {\n    if (props.disableShrink && props.variant && props.variant !== 'indeterminate') {\n      return new Error('Material-UI: You have provided the `disableShrink` prop ' + 'with a variant other than `indeterminate`. This will have no effect.');\n    }\n\n    return null;\n  }),\n\n  /**\n   * The size of the circle.\n   * If using a number, the pixel unit is assumed.\n   * If using a string, you need to provide the CSS unit, e.g '3rem'.\n   */\n  size: PropTypes.oneOfType([PropTypes.number, PropTypes.string]),\n\n  /**\n   * @ignore\n   */\n  style: PropTypes.object,\n\n  /**\n   * The thickness of the circle.\n   */\n  thickness: PropTypes.number,\n\n  /**\n   * The value of the progress indicator for the determinate variant.\n   * Value between 0 and 100.\n   */\n  value: PropTypes.number,\n\n  /**\n   * The variant to use.\n   * Use indeterminate when there is no progress value.\n   */\n  variant: chainPropTypes(PropTypes.oneOf(['determinate', 'indeterminate', 'static']), function (props) {\n    var variant = props.variant;\n\n    if (variant === 'static') {\n      throw new Error('Material-UI: `variant=\"static\"` was deprecated. Use `variant=\"determinate\"` instead.');\n    }\n\n    return null;\n  })\n} : void 0;\nexport default withStyles(styles, {\n  name: 'MuiCircularProgress',\n  flip: false\n})(CircularProgress);","import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/esm/objectWithoutProperties\";\nimport * as React from 'react';\nimport PropTypes from 'prop-types';\nimport clsx from 'clsx';\nimport capitalize from '../utils/capitalize';\nimport withStyles from '../styles/withStyles';\nimport { darken, lighten } from '../styles/colorManipulator';\nimport useTheme from '../styles/useTheme';\nvar TRANSITION_DURATION = 4; // seconds\n\nexport var styles = function styles(theme) {\n  var getColor = function getColor(color) {\n    return theme.palette.type === 'light' ? lighten(color, 0.62) : darken(color, 0.5);\n  };\n\n  var backgroundPrimary = getColor(theme.palette.primary.main);\n  var backgroundSecondary = getColor(theme.palette.secondary.main);\n  return {\n    /* Styles applied to the root element. */\n    root: {\n      position: 'relative',\n      overflow: 'hidden',\n      height: 4,\n      '@media print': {\n        colorAdjust: 'exact'\n      }\n    },\n\n    /* Styles applied to the root and bar2 element if `color=\"primary\"`; bar2 if `variant=\"buffer\"`. */\n    colorPrimary: {\n      backgroundColor: backgroundPrimary\n    },\n\n    /* Styles applied to the root and bar2 elements if `color=\"secondary\"`; bar2 if `variant=\"buffer\"`. */\n    colorSecondary: {\n      backgroundColor: backgroundSecondary\n    },\n\n    /* Styles applied to the root element if `variant=\"determinate\"`. */\n    determinate: {},\n\n    /* Styles applied to the root element if `variant=\"indeterminate\"`. */\n    indeterminate: {},\n\n    /* Styles applied to the root element if `variant=\"buffer\"`. */\n    buffer: {\n      backgroundColor: 'transparent'\n    },\n\n    /* Styles applied to the root element if `variant=\"query\"`. */\n    query: {\n      transform: 'rotate(180deg)'\n    },\n\n    /* Styles applied to the additional bar element if `variant=\"buffer\"`. */\n    dashed: {\n      position: 'absolute',\n      marginTop: 0,\n      height: '100%',\n      width: '100%',\n      animation: '$buffer 3s infinite linear'\n    },\n\n    /* Styles applied to the additional bar element if `variant=\"buffer\"` and `color=\"primary\"`. */\n    dashedColorPrimary: {\n      backgroundImage: \"radial-gradient(\".concat(backgroundPrimary, \" 0%, \").concat(backgroundPrimary, \" 16%, transparent 42%)\"),\n      backgroundSize: '10px 10px',\n      backgroundPosition: '0 -23px'\n    },\n\n    /* Styles applied to the additional bar element if `variant=\"buffer\"` and `color=\"secondary\"`. */\n    dashedColorSecondary: {\n      backgroundImage: \"radial-gradient(\".concat(backgroundSecondary, \" 0%, \").concat(backgroundSecondary, \" 16%, transparent 42%)\"),\n      backgroundSize: '10px 10px',\n      backgroundPosition: '0 -23px'\n    },\n\n    /* Styles applied to the layered bar1 and bar2 elements. */\n    bar: {\n      width: '100%',\n      position: 'absolute',\n      left: 0,\n      bottom: 0,\n      top: 0,\n      transition: 'transform 0.2s linear',\n      transformOrigin: 'left'\n    },\n\n    /* Styles applied to the bar elements if `color=\"primary\"`; bar2 if `variant` not \"buffer\". */\n    barColorPrimary: {\n      backgroundColor: theme.palette.primary.main\n    },\n\n    /* Styles applied to the bar elements if `color=\"secondary\"`; bar2 if `variant` not \"buffer\". */\n    barColorSecondary: {\n      backgroundColor: theme.palette.secondary.main\n    },\n\n    /* Styles applied to the bar1 element if `variant=\"indeterminate or query\"`. */\n    bar1Indeterminate: {\n      width: 'auto',\n      animation: '$indeterminate1 2.1s cubic-bezier(0.65, 0.815, 0.735, 0.395) infinite'\n    },\n\n    /* Styles applied to the bar1 element if `variant=\"determinate\"`. */\n    bar1Determinate: {\n      transition: \"transform .\".concat(TRANSITION_DURATION, \"s linear\")\n    },\n\n    /* Styles applied to the bar1 element if `variant=\"buffer\"`. */\n    bar1Buffer: {\n      zIndex: 1,\n      transition: \"transform .\".concat(TRANSITION_DURATION, \"s linear\")\n    },\n\n    /* Styles applied to the bar2 element if `variant=\"indeterminate or query\"`. */\n    bar2Indeterminate: {\n      width: 'auto',\n      animation: '$indeterminate2 2.1s cubic-bezier(0.165, 0.84, 0.44, 1) 1.15s infinite'\n    },\n\n    /* Styles applied to the bar2 element if `variant=\"buffer\"`. */\n    bar2Buffer: {\n      transition: \"transform .\".concat(TRANSITION_DURATION, \"s linear\")\n    },\n    // Legends:\n    // || represents the viewport\n    // -  represents a light background\n    // x  represents a dark background\n    '@keyframes indeterminate1': {\n      //  |-----|---x-||-----||-----|\n      '0%': {\n        left: '-35%',\n        right: '100%'\n      },\n      //  |-----|-----||-----||xxxx-|\n      '60%': {\n        left: '100%',\n        right: '-90%'\n      },\n      '100%': {\n        left: '100%',\n        right: '-90%'\n      }\n    },\n    '@keyframes indeterminate2': {\n      //  |xxxxx|xxxxx||-----||-----|\n      '0%': {\n        left: '-200%',\n        right: '100%'\n      },\n      //  |-----|-----||-----||-x----|\n      '60%': {\n        left: '107%',\n        right: '-8%'\n      },\n      '100%': {\n        left: '107%',\n        right: '-8%'\n      }\n    },\n    '@keyframes buffer': {\n      '0%': {\n        opacity: 1,\n        backgroundPosition: '0 -23px'\n      },\n      '50%': {\n        opacity: 0,\n        backgroundPosition: '0 -23px'\n      },\n      '100%': {\n        opacity: 1,\n        backgroundPosition: '-200px -23px'\n      }\n    }\n  };\n};\n/**\n * ## ARIA\n *\n * If the progress bar is describing the loading progress of a particular region of a page,\n * you should use `aria-describedby` to point to the progress bar, and set the `aria-busy`\n * attribute to `true` on that region until it has finished loading.\n */\n\nvar LinearProgress = /*#__PURE__*/React.forwardRef(function LinearProgress(props, ref) {\n  var classes = props.classes,\n      className = props.className,\n      _props$color = props.color,\n      color = _props$color === void 0 ? 'primary' : _props$color,\n      value = props.value,\n      valueBuffer = props.valueBuffer,\n      _props$variant = props.variant,\n      variant = _props$variant === void 0 ? 'indeterminate' : _props$variant,\n      other = _objectWithoutProperties(props, [\"classes\", \"className\", \"color\", \"value\", \"valueBuffer\", \"variant\"]);\n\n  var theme = useTheme();\n  var rootProps = {};\n  var inlineStyles = {\n    bar1: {},\n    bar2: {}\n  };\n\n  if (variant === 'determinate' || variant === 'buffer') {\n    if (value !== undefined) {\n      rootProps['aria-valuenow'] = Math.round(value);\n      rootProps['aria-valuemin'] = 0;\n      rootProps['aria-valuemax'] = 100;\n      var transform = value - 100;\n\n      if (theme.direction === 'rtl') {\n        transform = -transform;\n      }\n\n      inlineStyles.bar1.transform = \"translateX(\".concat(transform, \"%)\");\n    } else if (process.env.NODE_ENV !== 'production') {\n      console.error('Material-UI: You need to provide a value prop ' + 'when using the determinate or buffer variant of LinearProgress .');\n    }\n  }\n\n  if (variant === 'buffer') {\n    if (valueBuffer !== undefined) {\n      var _transform = (valueBuffer || 0) - 100;\n\n      if (theme.direction === 'rtl') {\n        _transform = -_transform;\n      }\n\n      inlineStyles.bar2.transform = \"translateX(\".concat(_transform, \"%)\");\n    } else if (process.env.NODE_ENV !== 'production') {\n      console.error('Material-UI: You need to provide a valueBuffer prop ' + 'when using the buffer variant of LinearProgress.');\n    }\n  }\n\n  return /*#__PURE__*/React.createElement(\"div\", _extends({\n    className: clsx(classes.root, classes[\"color\".concat(capitalize(color))], className, {\n      'determinate': classes.determinate,\n      'indeterminate': classes.indeterminate,\n      'buffer': classes.buffer,\n      'query': classes.query\n    }[variant]),\n    role: \"progressbar\"\n  }, rootProps, {\n    ref: ref\n  }, other), variant === 'buffer' ? /*#__PURE__*/React.createElement(\"div\", {\n    className: clsx(classes.dashed, classes[\"dashedColor\".concat(capitalize(color))])\n  }) : null, /*#__PURE__*/React.createElement(\"div\", {\n    className: clsx(classes.bar, classes[\"barColor\".concat(capitalize(color))], (variant === 'indeterminate' || variant === 'query') && classes.bar1Indeterminate, {\n      'determinate': classes.bar1Determinate,\n      'buffer': classes.bar1Buffer\n    }[variant]),\n    style: inlineStyles.bar1\n  }), variant === 'determinate' ? null : /*#__PURE__*/React.createElement(\"div\", {\n    className: clsx(classes.bar, (variant === 'indeterminate' || variant === 'query') && classes.bar2Indeterminate, variant === 'buffer' ? [classes[\"color\".concat(capitalize(color))], classes.bar2Buffer] : classes[\"barColor\".concat(capitalize(color))]),\n    style: inlineStyles.bar2\n  }));\n});\nprocess.env.NODE_ENV !== \"production\" ? LinearProgress.propTypes = {\n  // ----------------------------- Warning --------------------------------\n  // | These PropTypes are generated from the TypeScript type definitions |\n  // |     To update them edit the d.ts file and run \"yarn proptypes\"     |\n  // ----------------------------------------------------------------------\n\n  /**\n   * Override or extend the styles applied to the component.\n   * See [CSS API](#css) below for more details.\n   */\n  classes: PropTypes.object,\n\n  /**\n   * @ignore\n   */\n  className: PropTypes.string,\n\n  /**\n   * The color of the component. It supports those theme colors that make sense for this component.\n   */\n  color: PropTypes.oneOf(['primary', 'secondary']),\n\n  /**\n   * The value of the progress indicator for the determinate and buffer variants.\n   * Value between 0 and 100.\n   */\n  value: PropTypes.number,\n\n  /**\n   * The value for the buffer variant.\n   * Value between 0 and 100.\n   */\n  valueBuffer: PropTypes.number,\n\n  /**\n   * The variant to use.\n   * Use indeterminate or query when there is no progress value.\n   */\n  variant: PropTypes.oneOf(['buffer', 'determinate', 'indeterminate', 'query'])\n} : void 0;\nexport default withStyles(styles, {\n  name: 'MuiLinearProgress'\n})(LinearProgress);","'use strict'\n\nexports.byteLength = byteLength\nexports.toByteArray = toByteArray\nexports.fromByteArray = fromByteArray\n\nvar lookup = []\nvar revLookup = []\nvar Arr = typeof Uint8Array !== 'undefined' ? Uint8Array : Array\n\nvar code = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/'\nfor (var i = 0, len = code.length; i < len; ++i) {\n  lookup[i] = code[i]\n  revLookup[code.charCodeAt(i)] = i\n}\n\n// Support decoding URL-safe base64 strings, as Node.js does.\n// See: https://en.wikipedia.org/wiki/Base64#URL_applications\nrevLookup['-'.charCodeAt(0)] = 62\nrevLookup['_'.charCodeAt(0)] = 63\n\nfunction getLens (b64) {\n  var len = b64.length\n\n  if (len % 4 > 0) {\n    throw new Error('Invalid string. Length must be a multiple of 4')\n  }\n\n  // Trim off extra bytes after placeholder bytes are found\n  // See: https://github.com/beatgammit/base64-js/issues/42\n  var validLen = b64.indexOf('=')\n  if (validLen === -1) validLen = len\n\n  var placeHoldersLen = validLen === len\n    ? 0\n    : 4 - (validLen % 4)\n\n  return [validLen, placeHoldersLen]\n}\n\n// base64 is 4/3 + up to two characters of the original data\nfunction byteLength (b64) {\n  var lens = getLens(b64)\n  var validLen = lens[0]\n  var placeHoldersLen = lens[1]\n  return ((validLen + placeHoldersLen) * 3 / 4) - placeHoldersLen\n}\n\nfunction _byteLength (b64, validLen, placeHoldersLen) {\n  return ((validLen + placeHoldersLen) * 3 / 4) - placeHoldersLen\n}\n\nfunction toByteArray (b64) {\n  var tmp\n  var lens = getLens(b64)\n  var validLen = lens[0]\n  var placeHoldersLen = lens[1]\n\n  var arr = new Arr(_byteLength(b64, validLen, placeHoldersLen))\n\n  var curByte = 0\n\n  // if there are placeholders, only get up to the last complete 4 chars\n  var len = placeHoldersLen > 0\n    ? validLen - 4\n    : validLen\n\n  var i\n  for (i = 0; i < len; i += 4) {\n    tmp =\n      (revLookup[b64.charCodeAt(i)] << 18) |\n      (revLookup[b64.charCodeAt(i + 1)] << 12) |\n      (revLookup[b64.charCodeAt(i + 2)] << 6) |\n      revLookup[b64.charCodeAt(i + 3)]\n    arr[curByte++] = (tmp >> 16) & 0xFF\n    arr[curByte++] = (tmp >> 8) & 0xFF\n    arr[curByte++] = tmp & 0xFF\n  }\n\n  if (placeHoldersLen === 2) {\n    tmp =\n      (revLookup[b64.charCodeAt(i)] << 2) |\n      (revLookup[b64.charCodeAt(i + 1)] >> 4)\n    arr[curByte++] = tmp & 0xFF\n  }\n\n  if (placeHoldersLen === 1) {\n    tmp =\n      (revLookup[b64.charCodeAt(i)] << 10) |\n      (revLookup[b64.charCodeAt(i + 1)] << 4) |\n      (revLookup[b64.charCodeAt(i + 2)] >> 2)\n    arr[curByte++] = (tmp >> 8) & 0xFF\n    arr[curByte++] = tmp & 0xFF\n  }\n\n  return arr\n}\n\nfunction tripletToBase64 (num) {\n  return lookup[num >> 18 & 0x3F] +\n    lookup[num >> 12 & 0x3F] +\n    lookup[num >> 6 & 0x3F] +\n    lookup[num & 0x3F]\n}\n\nfunction encodeChunk (uint8, start, end) {\n  var tmp\n  var output = []\n  for (var i = start; i < end; i += 3) {\n    tmp =\n      ((uint8[i] << 16) & 0xFF0000) +\n      ((uint8[i + 1] << 8) & 0xFF00) +\n      (uint8[i + 2] & 0xFF)\n    output.push(tripletToBase64(tmp))\n  }\n  return output.join('')\n}\n\nfunction fromByteArray (uint8) {\n  var tmp\n  var len = uint8.length\n  var extraBytes = len % 3 // if we have 1 byte left, pad 2 bytes\n  var parts = []\n  var maxChunkLength = 16383 // must be multiple of 3\n\n  // go through the array every three bytes, we'll deal with trailing stuff later\n  for (var i = 0, len2 = len - extraBytes; i < len2; i += maxChunkLength) {\n    parts.push(encodeChunk(uint8, i, (i + maxChunkLength) > len2 ? len2 : (i + maxChunkLength)))\n  }\n\n  // pad the end with zeros, but make sure to not forget the extra bytes\n  if (extraBytes === 1) {\n    tmp = uint8[len - 1]\n    parts.push(\n      lookup[tmp >> 2] +\n      lookup[(tmp << 4) & 0x3F] +\n      '=='\n    )\n  } else if (extraBytes === 2) {\n    tmp = (uint8[len - 2] << 8) + uint8[len - 1]\n    parts.push(\n      lookup[tmp >> 10] +\n      lookup[(tmp >> 4) & 0x3F] +\n      lookup[(tmp << 2) & 0x3F] +\n      '='\n    )\n  }\n\n  return parts.join('')\n}\n","/*!\n * The buffer module from node.js, for the browser.\n *\n * @author   Feross Aboukhadijeh <https://feross.org>\n * @license  MIT\n */\n/* eslint-disable no-proto */\n\n'use strict'\n\nconst base64 = require('base64-js')\nconst ieee754 = require('ieee754')\nconst customInspectSymbol =\n  (typeof Symbol === 'function' && typeof Symbol['for'] === 'function') // eslint-disable-line dot-notation\n    ? Symbol['for']('nodejs.util.inspect.custom') // eslint-disable-line dot-notation\n    : null\n\nexports.Buffer = Buffer\nexports.SlowBuffer = SlowBuffer\nexports.INSPECT_MAX_BYTES = 50\n\nconst K_MAX_LENGTH = 0x7fffffff\nexports.kMaxLength = K_MAX_LENGTH\n\n/**\n * If `Buffer.TYPED_ARRAY_SUPPORT`:\n *   === true    Use Uint8Array implementation (fastest)\n *   === false   Print warning and recommend using `buffer` v4.x which has an Object\n *               implementation (most compatible, even IE6)\n *\n * Browsers that support typed arrays are IE 10+, Firefox 4+, Chrome 7+, Safari 5.1+,\n * Opera 11.6+, iOS 4.2+.\n *\n * We report that the browser does not support typed arrays if the are not subclassable\n * using __proto__. Firefox 4-29 lacks support for adding new properties to `Uint8Array`\n * (See: https://bugzilla.mozilla.org/show_bug.cgi?id=695438). IE 10 lacks support\n * for __proto__ and has a buggy typed array implementation.\n */\nBuffer.TYPED_ARRAY_SUPPORT = typedArraySupport()\n\nif (!Buffer.TYPED_ARRAY_SUPPORT && typeof console !== 'undefined' &&\n    typeof console.error === 'function') {\n  console.error(\n    'This browser lacks typed array (Uint8Array) support which is required by ' +\n    '`buffer` v5.x. Use `buffer` v4.x if you require old browser support.'\n  )\n}\n\nfunction typedArraySupport () {\n  // Can typed array instances can be augmented?\n  try {\n    const arr = new Uint8Array(1)\n    const proto = { foo: function () { return 42 } }\n    Object.setPrototypeOf(proto, Uint8Array.prototype)\n    Object.setPrototypeOf(arr, proto)\n    return arr.foo() === 42\n  } catch (e) {\n    return false\n  }\n}\n\nObject.defineProperty(Buffer.prototype, 'parent', {\n  enumerable: true,\n  get: function () {\n    if (!Buffer.isBuffer(this)) return undefined\n    return this.buffer\n  }\n})\n\nObject.defineProperty(Buffer.prototype, 'offset', {\n  enumerable: true,\n  get: function () {\n    if (!Buffer.isBuffer(this)) return undefined\n    return this.byteOffset\n  }\n})\n\nfunction createBuffer (length) {\n  if (length > K_MAX_LENGTH) {\n    throw new RangeError('The value \"' + length + '\" is invalid for option \"size\"')\n  }\n  // Return an augmented `Uint8Array` instance\n  const buf = new Uint8Array(length)\n  Object.setPrototypeOf(buf, Buffer.prototype)\n  return buf\n}\n\n/**\n * The Buffer constructor returns instances of `Uint8Array` that have their\n * prototype changed to `Buffer.prototype`. Furthermore, `Buffer` is a subclass of\n * `Uint8Array`, so the returned instances will have all the node `Buffer` methods\n * and the `Uint8Array` methods. Square bracket notation works as expected -- it\n * returns a single octet.\n *\n * The `Uint8Array` prototype remains unmodified.\n */\n\nfunction Buffer (arg, encodingOrOffset, length) {\n  // Common case.\n  if (typeof arg === 'number') {\n    if (typeof encodingOrOffset === 'string') {\n      throw new TypeError(\n        'The \"string\" argument must be of type string. Received type number'\n      )\n    }\n    return allocUnsafe(arg)\n  }\n  return from(arg, encodingOrOffset, length)\n}\n\nBuffer.poolSize = 8192 // not used by this implementation\n\nfunction from (value, encodingOrOffset, length) {\n  if (typeof value === 'string') {\n    return fromString(value, encodingOrOffset)\n  }\n\n  if (ArrayBuffer.isView(value)) {\n    return fromArrayView(value)\n  }\n\n  if (value == null) {\n    throw new TypeError(\n      'The first argument must be one of type string, Buffer, ArrayBuffer, Array, ' +\n      'or Array-like Object. Received type ' + (typeof value)\n    )\n  }\n\n  if (isInstance(value, ArrayBuffer) ||\n      (value && isInstance(value.buffer, ArrayBuffer))) {\n    return fromArrayBuffer(value, encodingOrOffset, length)\n  }\n\n  if (typeof SharedArrayBuffer !== 'undefined' &&\n      (isInstance(value, SharedArrayBuffer) ||\n      (value && isInstance(value.buffer, SharedArrayBuffer)))) {\n    return fromArrayBuffer(value, encodingOrOffset, length)\n  }\n\n  if (typeof value === 'number') {\n    throw new TypeError(\n      'The \"value\" argument must not be of type number. Received type number'\n    )\n  }\n\n  const valueOf = value.valueOf && value.valueOf()\n  if (valueOf != null && valueOf !== value) {\n    return Buffer.from(valueOf, encodingOrOffset, length)\n  }\n\n  const b = fromObject(value)\n  if (b) return b\n\n  if (typeof Symbol !== 'undefined' && Symbol.toPrimitive != null &&\n      typeof value[Symbol.toPrimitive] === 'function') {\n    return Buffer.from(value[Symbol.toPrimitive]('string'), encodingOrOffset, length)\n  }\n\n  throw new TypeError(\n    'The first argument must be one of type string, Buffer, ArrayBuffer, Array, ' +\n    'or Array-like Object. Received type ' + (typeof value)\n  )\n}\n\n/**\n * Functionally equivalent to Buffer(arg, encoding) but throws a TypeError\n * if value is a number.\n * Buffer.from(str[, encoding])\n * Buffer.from(array)\n * Buffer.from(buffer)\n * Buffer.from(arrayBuffer[, byteOffset[, length]])\n **/\nBuffer.from = function (value, encodingOrOffset, length) {\n  return from(value, encodingOrOffset, length)\n}\n\n// Note: Change prototype *after* Buffer.from is defined to workaround Chrome bug:\n// https://github.com/feross/buffer/pull/148\nObject.setPrototypeOf(Buffer.prototype, Uint8Array.prototype)\nObject.setPrototypeOf(Buffer, Uint8Array)\n\nfunction assertSize (size) {\n  if (typeof size !== 'number') {\n    throw new TypeError('\"size\" argument must be of type number')\n  } else if (size < 0) {\n    throw new RangeError('The value \"' + size + '\" is invalid for option \"size\"')\n  }\n}\n\nfunction alloc (size, fill, encoding) {\n  assertSize(size)\n  if (size <= 0) {\n    return createBuffer(size)\n  }\n  if (fill !== undefined) {\n    // Only pay attention to encoding if it's a string. This\n    // prevents accidentally sending in a number that would\n    // be interpreted as a start offset.\n    return typeof encoding === 'string'\n      ? createBuffer(size).fill(fill, encoding)\n      : createBuffer(size).fill(fill)\n  }\n  return createBuffer(size)\n}\n\n/**\n * Creates a new filled Buffer instance.\n * alloc(size[, fill[, encoding]])\n **/\nBuffer.alloc = function (size, fill, encoding) {\n  return alloc(size, fill, encoding)\n}\n\nfunction allocUnsafe (size) {\n  assertSize(size)\n  return createBuffer(size < 0 ? 0 : checked(size) | 0)\n}\n\n/**\n * Equivalent to Buffer(num), by default creates a non-zero-filled Buffer instance.\n * */\nBuffer.allocUnsafe = function (size) {\n  return allocUnsafe(size)\n}\n/**\n * Equivalent to SlowBuffer(num), by default creates a non-zero-filled Buffer instance.\n */\nBuffer.allocUnsafeSlow = function (size) {\n  return allocUnsafe(size)\n}\n\nfunction fromString (string, encoding) {\n  if (typeof encoding !== 'string' || encoding === '') {\n    encoding = 'utf8'\n  }\n\n  if (!Buffer.isEncoding(encoding)) {\n    throw new TypeError('Unknown encoding: ' + encoding)\n  }\n\n  const length = byteLength(string, encoding) | 0\n  let buf = createBuffer(length)\n\n  const actual = buf.write(string, encoding)\n\n  if (actual !== length) {\n    // Writing a hex string, for example, that contains invalid characters will\n    // cause everything after the first invalid character to be ignored. (e.g.\n    // 'abxxcd' will be treated as 'ab')\n    buf = buf.slice(0, actual)\n  }\n\n  return buf\n}\n\nfunction fromArrayLike (array) {\n  const length = array.length < 0 ? 0 : checked(array.length) | 0\n  const buf = createBuffer(length)\n  for (let i = 0; i < length; i += 1) {\n    buf[i] = array[i] & 255\n  }\n  return buf\n}\n\nfunction fromArrayView (arrayView) {\n  if (isInstance(arrayView, Uint8Array)) {\n    const copy = new Uint8Array(arrayView)\n    return fromArrayBuffer(copy.buffer, copy.byteOffset, copy.byteLength)\n  }\n  return fromArrayLike(arrayView)\n}\n\nfunction fromArrayBuffer (array, byteOffset, length) {\n  if (byteOffset < 0 || array.byteLength < byteOffset) {\n    throw new RangeError('\"offset\" is outside of buffer bounds')\n  }\n\n  if (array.byteLength < byteOffset + (length || 0)) {\n    throw new RangeError('\"length\" is outside of buffer bounds')\n  }\n\n  let buf\n  if (byteOffset === undefined && length === undefined) {\n    buf = new Uint8Array(array)\n  } else if (length === undefined) {\n    buf = new Uint8Array(array, byteOffset)\n  } else {\n    buf = new Uint8Array(array, byteOffset, length)\n  }\n\n  // Return an augmented `Uint8Array` instance\n  Object.setPrototypeOf(buf, Buffer.prototype)\n\n  return buf\n}\n\nfunction fromObject (obj) {\n  if (Buffer.isBuffer(obj)) {\n    const len = checked(obj.length) | 0\n    const buf = createBuffer(len)\n\n    if (buf.length === 0) {\n      return buf\n    }\n\n    obj.copy(buf, 0, 0, len)\n    return buf\n  }\n\n  if (obj.length !== undefined) {\n    if (typeof obj.length !== 'number' || numberIsNaN(obj.length)) {\n      return createBuffer(0)\n    }\n    return fromArrayLike(obj)\n  }\n\n  if (obj.type === 'Buffer' && Array.isArray(obj.data)) {\n    return fromArrayLike(obj.data)\n  }\n}\n\nfunction checked (length) {\n  // Note: cannot use `length < K_MAX_LENGTH` here because that fails when\n  // length is NaN (which is otherwise coerced to zero.)\n  if (length >= K_MAX_LENGTH) {\n    throw new RangeError('Attempt to allocate Buffer larger than maximum ' +\n                         'size: 0x' + K_MAX_LENGTH.toString(16) + ' bytes')\n  }\n  return length | 0\n}\n\nfunction SlowBuffer (length) {\n  if (+length != length) { // eslint-disable-line eqeqeq\n    length = 0\n  }\n  return Buffer.alloc(+length)\n}\n\nBuffer.isBuffer = function isBuffer (b) {\n  return b != null && b._isBuffer === true &&\n    b !== Buffer.prototype // so Buffer.isBuffer(Buffer.prototype) will be false\n}\n\nBuffer.compare = function compare (a, b) {\n  if (isInstance(a, Uint8Array)) a = Buffer.from(a, a.offset, a.byteLength)\n  if (isInstance(b, Uint8Array)) b = Buffer.from(b, b.offset, b.byteLength)\n  if (!Buffer.isBuffer(a) || !Buffer.isBuffer(b)) {\n    throw new TypeError(\n      'The \"buf1\", \"buf2\" arguments must be one of type Buffer or Uint8Array'\n    )\n  }\n\n  if (a === b) return 0\n\n  let x = a.length\n  let y = b.length\n\n  for (let i = 0, len = Math.min(x, y); i < len; ++i) {\n    if (a[i] !== b[i]) {\n      x = a[i]\n      y = b[i]\n      break\n    }\n  }\n\n  if (x < y) return -1\n  if (y < x) return 1\n  return 0\n}\n\nBuffer.isEncoding = function isEncoding (encoding) {\n  switch (String(encoding).toLowerCase()) {\n    case 'hex':\n    case 'utf8':\n    case 'utf-8':\n    case 'ascii':\n    case 'latin1':\n    case 'binary':\n    case 'base64':\n    case 'ucs2':\n    case 'ucs-2':\n    case 'utf16le':\n    case 'utf-16le':\n      return true\n    default:\n      return false\n  }\n}\n\nBuffer.concat = function concat (list, length) {\n  if (!Array.isArray(list)) {\n    throw new TypeError('\"list\" argument must be an Array of Buffers')\n  }\n\n  if (list.length === 0) {\n    return Buffer.alloc(0)\n  }\n\n  let i\n  if (length === undefined) {\n    length = 0\n    for (i = 0; i < list.length; ++i) {\n      length += list[i].length\n    }\n  }\n\n  const buffer = Buffer.allocUnsafe(length)\n  let pos = 0\n  for (i = 0; i < list.length; ++i) {\n    let buf = list[i]\n    if (isInstance(buf, Uint8Array)) {\n      if (pos + buf.length > buffer.length) {\n        if (!Buffer.isBuffer(buf)) buf = Buffer.from(buf)\n        buf.copy(buffer, pos)\n      } else {\n        Uint8Array.prototype.set.call(\n          buffer,\n          buf,\n          pos\n        )\n      }\n    } else if (!Buffer.isBuffer(buf)) {\n      throw new TypeError('\"list\" argument must be an Array of Buffers')\n    } else {\n      buf.copy(buffer, pos)\n    }\n    pos += buf.length\n  }\n  return buffer\n}\n\nfunction byteLength (string, encoding) {\n  if (Buffer.isBuffer(string)) {\n    return string.length\n  }\n  if (ArrayBuffer.isView(string) || isInstance(string, ArrayBuffer)) {\n    return string.byteLength\n  }\n  if (typeof string !== 'string') {\n    throw new TypeError(\n      'The \"string\" argument must be one of type string, Buffer, or ArrayBuffer. ' +\n      'Received type ' + typeof string\n    )\n  }\n\n  const len = string.length\n  const mustMatch = (arguments.length > 2 && arguments[2] === true)\n  if (!mustMatch && len === 0) return 0\n\n  // Use a for loop to avoid recursion\n  let loweredCase = false\n  for (;;) {\n    switch (encoding) {\n      case 'ascii':\n      case 'latin1':\n      case 'binary':\n        return len\n      case 'utf8':\n      case 'utf-8':\n        return utf8ToBytes(string).length\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return len * 2\n      case 'hex':\n        return len >>> 1\n      case 'base64':\n        return base64ToBytes(string).length\n      default:\n        if (loweredCase) {\n          return mustMatch ? -1 : utf8ToBytes(string).length // assume utf8\n        }\n        encoding = ('' + encoding).toLowerCase()\n        loweredCase = true\n    }\n  }\n}\nBuffer.byteLength = byteLength\n\nfunction slowToString (encoding, start, end) {\n  let loweredCase = false\n\n  // No need to verify that \"this.length <= MAX_UINT32\" since it's a read-only\n  // property of a typed array.\n\n  // This behaves neither like String nor Uint8Array in that we set start/end\n  // to their upper/lower bounds if the value passed is out of range.\n  // undefined is handled specially as per ECMA-262 6th Edition,\n  // Section 13.3.3.7 Runtime Semantics: KeyedBindingInitialization.\n  if (start === undefined || start < 0) {\n    start = 0\n  }\n  // Return early if start > this.length. Done here to prevent potential uint32\n  // coercion fail below.\n  if (start > this.length) {\n    return ''\n  }\n\n  if (end === undefined || end > this.length) {\n    end = this.length\n  }\n\n  if (end <= 0) {\n    return ''\n  }\n\n  // Force coercion to uint32. This will also coerce falsey/NaN values to 0.\n  end >>>= 0\n  start >>>= 0\n\n  if (end <= start) {\n    return ''\n  }\n\n  if (!encoding) encoding = 'utf8'\n\n  while (true) {\n    switch (encoding) {\n      case 'hex':\n        return hexSlice(this, start, end)\n\n      case 'utf8':\n      case 'utf-8':\n        return utf8Slice(this, start, end)\n\n      case 'ascii':\n        return asciiSlice(this, start, end)\n\n      case 'latin1':\n      case 'binary':\n        return latin1Slice(this, start, end)\n\n      case 'base64':\n        return base64Slice(this, start, end)\n\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return utf16leSlice(this, start, end)\n\n      default:\n        if (loweredCase) throw new TypeError('Unknown encoding: ' + encoding)\n        encoding = (encoding + '').toLowerCase()\n        loweredCase = true\n    }\n  }\n}\n\n// This property is used by `Buffer.isBuffer` (and the `is-buffer` npm package)\n// to detect a Buffer instance. It's not possible to use `instanceof Buffer`\n// reliably in a browserify context because there could be multiple different\n// copies of the 'buffer' package in use. This method works even for Buffer\n// instances that were created from another copy of the `buffer` package.\n// See: https://github.com/feross/buffer/issues/154\nBuffer.prototype._isBuffer = true\n\nfunction swap (b, n, m) {\n  const i = b[n]\n  b[n] = b[m]\n  b[m] = i\n}\n\nBuffer.prototype.swap16 = function swap16 () {\n  const len = this.length\n  if (len % 2 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 16-bits')\n  }\n  for (let i = 0; i < len; i += 2) {\n    swap(this, i, i + 1)\n  }\n  return this\n}\n\nBuffer.prototype.swap32 = function swap32 () {\n  const len = this.length\n  if (len % 4 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 32-bits')\n  }\n  for (let i = 0; i < len; i += 4) {\n    swap(this, i, i + 3)\n    swap(this, i + 1, i + 2)\n  }\n  return this\n}\n\nBuffer.prototype.swap64 = function swap64 () {\n  const len = this.length\n  if (len % 8 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 64-bits')\n  }\n  for (let i = 0; i < len; i += 8) {\n    swap(this, i, i + 7)\n    swap(this, i + 1, i + 6)\n    swap(this, i + 2, i + 5)\n    swap(this, i + 3, i + 4)\n  }\n  return this\n}\n\nBuffer.prototype.toString = function toString () {\n  const length = this.length\n  if (length === 0) return ''\n  if (arguments.length === 0) return utf8Slice(this, 0, length)\n  return slowToString.apply(this, arguments)\n}\n\nBuffer.prototype.toLocaleString = Buffer.prototype.toString\n\nBuffer.prototype.equals = function equals (b) {\n  if (!Buffer.isBuffer(b)) throw new TypeError('Argument must be a Buffer')\n  if (this === b) return true\n  return Buffer.compare(this, b) === 0\n}\n\nBuffer.prototype.inspect = function inspect () {\n  let str = ''\n  const max = exports.INSPECT_MAX_BYTES\n  str = this.toString('hex', 0, max).replace(/(.{2})/g, '$1 ').trim()\n  if (this.length > max) str += ' ... '\n  return '<Buffer ' + str + '>'\n}\nif (customInspectSymbol) {\n  Buffer.prototype[customInspectSymbol] = Buffer.prototype.inspect\n}\n\nBuffer.prototype.compare = function compare (target, start, end, thisStart, thisEnd) {\n  if (isInstance(target, Uint8Array)) {\n    target = Buffer.from(target, target.offset, target.byteLength)\n  }\n  if (!Buffer.isBuffer(target)) {\n    throw new TypeError(\n      'The \"target\" argument must be one of type Buffer or Uint8Array. ' +\n      'Received type ' + (typeof target)\n    )\n  }\n\n  if (start === undefined) {\n    start = 0\n  }\n  if (end === undefined) {\n    end = target ? target.length : 0\n  }\n  if (thisStart === undefined) {\n    thisStart = 0\n  }\n  if (thisEnd === undefined) {\n    thisEnd = this.length\n  }\n\n  if (start < 0 || end > target.length || thisStart < 0 || thisEnd > this.length) {\n    throw new RangeError('out of range index')\n  }\n\n  if (thisStart >= thisEnd && start >= end) {\n    return 0\n  }\n  if (thisStart >= thisEnd) {\n    return -1\n  }\n  if (start >= end) {\n    return 1\n  }\n\n  start >>>= 0\n  end >>>= 0\n  thisStart >>>= 0\n  thisEnd >>>= 0\n\n  if (this === target) return 0\n\n  let x = thisEnd - thisStart\n  let y = end - start\n  const len = Math.min(x, y)\n\n  const thisCopy = this.slice(thisStart, thisEnd)\n  const targetCopy = target.slice(start, end)\n\n  for (let i = 0; i < len; ++i) {\n    if (thisCopy[i] !== targetCopy[i]) {\n      x = thisCopy[i]\n      y = targetCopy[i]\n      break\n    }\n  }\n\n  if (x < y) return -1\n  if (y < x) return 1\n  return 0\n}\n\n// Finds either the first index of `val` in `buffer` at offset >= `byteOffset`,\n// OR the last index of `val` in `buffer` at offset <= `byteOffset`.\n//\n// Arguments:\n// - buffer - a Buffer to search\n// - val - a string, Buffer, or number\n// - byteOffset - an index into `buffer`; will be clamped to an int32\n// - encoding - an optional encoding, relevant is val is a string\n// - dir - true for indexOf, false for lastIndexOf\nfunction bidirectionalIndexOf (buffer, val, byteOffset, encoding, dir) {\n  // Empty buffer means no match\n  if (buffer.length === 0) return -1\n\n  // Normalize byteOffset\n  if (typeof byteOffset === 'string') {\n    encoding = byteOffset\n    byteOffset = 0\n  } else if (byteOffset > 0x7fffffff) {\n    byteOffset = 0x7fffffff\n  } else if (byteOffset < -0x80000000) {\n    byteOffset = -0x80000000\n  }\n  byteOffset = +byteOffset // Coerce to Number.\n  if (numberIsNaN(byteOffset)) {\n    // byteOffset: it it's undefined, null, NaN, \"foo\", etc, search whole buffer\n    byteOffset = dir ? 0 : (buffer.length - 1)\n  }\n\n  // Normalize byteOffset: negative offsets start from the end of the buffer\n  if (byteOffset < 0) byteOffset = buffer.length + byteOffset\n  if (byteOffset >= buffer.length) {\n    if (dir) return -1\n    else byteOffset = buffer.length - 1\n  } else if (byteOffset < 0) {\n    if (dir) byteOffset = 0\n    else return -1\n  }\n\n  // Normalize val\n  if (typeof val === 'string') {\n    val = Buffer.from(val, encoding)\n  }\n\n  // Finally, search either indexOf (if dir is true) or lastIndexOf\n  if (Buffer.isBuffer(val)) {\n    // Special case: looking for empty string/buffer always fails\n    if (val.length === 0) {\n      return -1\n    }\n    return arrayIndexOf(buffer, val, byteOffset, encoding, dir)\n  } else if (typeof val === 'number') {\n    val = val & 0xFF // Search for a byte value [0-255]\n    if (typeof Uint8Array.prototype.indexOf === 'function') {\n      if (dir) {\n        return Uint8Array.prototype.indexOf.call(buffer, val, byteOffset)\n      } else {\n        return Uint8Array.prototype.lastIndexOf.call(buffer, val, byteOffset)\n      }\n    }\n    return arrayIndexOf(buffer, [val], byteOffset, encoding, dir)\n  }\n\n  throw new TypeError('val must be string, number or Buffer')\n}\n\nfunction arrayIndexOf (arr, val, byteOffset, encoding, dir) {\n  let indexSize = 1\n  let arrLength = arr.length\n  let valLength = val.length\n\n  if (encoding !== undefined) {\n    encoding = String(encoding).toLowerCase()\n    if (encoding === 'ucs2' || encoding === 'ucs-2' ||\n        encoding === 'utf16le' || encoding === 'utf-16le') {\n      if (arr.length < 2 || val.length < 2) {\n        return -1\n      }\n      indexSize = 2\n      arrLength /= 2\n      valLength /= 2\n      byteOffset /= 2\n    }\n  }\n\n  function read (buf, i) {\n    if (indexSize === 1) {\n      return buf[i]\n    } else {\n      return buf.readUInt16BE(i * indexSize)\n    }\n  }\n\n  let i\n  if (dir) {\n    let foundIndex = -1\n    for (i = byteOffset; i < arrLength; i++) {\n      if (read(arr, i) === read(val, foundIndex === -1 ? 0 : i - foundIndex)) {\n        if (foundIndex === -1) foundIndex = i\n        if (i - foundIndex + 1 === valLength) return foundIndex * indexSize\n      } else {\n        if (foundIndex !== -1) i -= i - foundIndex\n        foundIndex = -1\n      }\n    }\n  } else {\n    if (byteOffset + valLength > arrLength) byteOffset = arrLength - valLength\n    for (i = byteOffset; i >= 0; i--) {\n      let found = true\n      for (let j = 0; j < valLength; j++) {\n        if (read(arr, i + j) !== read(val, j)) {\n          found = false\n          break\n        }\n      }\n      if (found) return i\n    }\n  }\n\n  return -1\n}\n\nBuffer.prototype.includes = function includes (val, byteOffset, encoding) {\n  return this.indexOf(val, byteOffset, encoding) !== -1\n}\n\nBuffer.prototype.indexOf = function indexOf (val, byteOffset, encoding) {\n  return bidirectionalIndexOf(this, val, byteOffset, encoding, true)\n}\n\nBuffer.prototype.lastIndexOf = function lastIndexOf (val, byteOffset, encoding) {\n  return bidirectionalIndexOf(this, val, byteOffset, encoding, false)\n}\n\nfunction hexWrite (buf, string, offset, length) {\n  offset = Number(offset) || 0\n  const remaining = buf.length - offset\n  if (!length) {\n    length = remaining\n  } else {\n    length = Number(length)\n    if (length > remaining) {\n      length = remaining\n    }\n  }\n\n  const strLen = string.length\n\n  if (length > strLen / 2) {\n    length = strLen / 2\n  }\n  let i\n  for (i = 0; i < length; ++i) {\n    const parsed = parseInt(string.substr(i * 2, 2), 16)\n    if (numberIsNaN(parsed)) return i\n    buf[offset + i] = parsed\n  }\n  return i\n}\n\nfunction utf8Write (buf, string, offset, length) {\n  return blitBuffer(utf8ToBytes(string, buf.length - offset), buf, offset, length)\n}\n\nfunction asciiWrite (buf, string, offset, length) {\n  return blitBuffer(asciiToBytes(string), buf, offset, length)\n}\n\nfunction base64Write (buf, string, offset, length) {\n  return blitBuffer(base64ToBytes(string), buf, offset, length)\n}\n\nfunction ucs2Write (buf, string, offset, length) {\n  return blitBuffer(utf16leToBytes(string, buf.length - offset), buf, offset, length)\n}\n\nBuffer.prototype.write = function write (string, offset, length, encoding) {\n  // Buffer#write(string)\n  if (offset === undefined) {\n    encoding = 'utf8'\n    length = this.length\n    offset = 0\n  // Buffer#write(string, encoding)\n  } else if (length === undefined && typeof offset === 'string') {\n    encoding = offset\n    length = this.length\n    offset = 0\n  // Buffer#write(string, offset[, length][, encoding])\n  } else if (isFinite(offset)) {\n    offset = offset >>> 0\n    if (isFinite(length)) {\n      length = length >>> 0\n      if (encoding === undefined) encoding = 'utf8'\n    } else {\n      encoding = length\n      length = undefined\n    }\n  } else {\n    throw new Error(\n      'Buffer.write(string, encoding, offset[, length]) is no longer supported'\n    )\n  }\n\n  const remaining = this.length - offset\n  if (length === undefined || length > remaining) length = remaining\n\n  if ((string.length > 0 && (length < 0 || offset < 0)) || offset > this.length) {\n    throw new RangeError('Attempt to write outside buffer bounds')\n  }\n\n  if (!encoding) encoding = 'utf8'\n\n  let loweredCase = false\n  for (;;) {\n    switch (encoding) {\n      case 'hex':\n        return hexWrite(this, string, offset, length)\n\n      case 'utf8':\n      case 'utf-8':\n        return utf8Write(this, string, offset, length)\n\n      case 'ascii':\n      case 'latin1':\n      case 'binary':\n        return asciiWrite(this, string, offset, length)\n\n      case 'base64':\n        // Warning: maxLength not taken into account in base64Write\n        return base64Write(this, string, offset, length)\n\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return ucs2Write(this, string, offset, length)\n\n      default:\n        if (loweredCase) throw new TypeError('Unknown encoding: ' + encoding)\n        encoding = ('' + encoding).toLowerCase()\n        loweredCase = true\n    }\n  }\n}\n\nBuffer.prototype.toJSON = function toJSON () {\n  return {\n    type: 'Buffer',\n    data: Array.prototype.slice.call(this._arr || this, 0)\n  }\n}\n\nfunction base64Slice (buf, start, end) {\n  if (start === 0 && end === buf.length) {\n    return base64.fromByteArray(buf)\n  } else {\n    return base64.fromByteArray(buf.slice(start, end))\n  }\n}\n\nfunction utf8Slice (buf, start, end) {\n  end = Math.min(buf.length, end)\n  const res = []\n\n  let i = start\n  while (i < end) {\n    const firstByte = buf[i]\n    let codePoint = null\n    let bytesPerSequence = (firstByte > 0xEF)\n      ? 4\n      : (firstByte > 0xDF)\n          ? 3\n          : (firstByte > 0xBF)\n              ? 2\n              : 1\n\n    if (i + bytesPerSequence <= end) {\n      let secondByte, thirdByte, fourthByte, tempCodePoint\n\n      switch (bytesPerSequence) {\n        case 1:\n          if (firstByte < 0x80) {\n            codePoint = firstByte\n          }\n          break\n        case 2:\n          secondByte = buf[i + 1]\n          if ((secondByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0x1F) << 0x6 | (secondByte & 0x3F)\n            if (tempCodePoint > 0x7F) {\n              codePoint = tempCodePoint\n            }\n          }\n          break\n        case 3:\n          secondByte = buf[i + 1]\n          thirdByte = buf[i + 2]\n          if ((secondByte & 0xC0) === 0x80 && (thirdByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0xF) << 0xC | (secondByte & 0x3F) << 0x6 | (thirdByte & 0x3F)\n            if (tempCodePoint > 0x7FF && (tempCodePoint < 0xD800 || tempCodePoint > 0xDFFF)) {\n              codePoint = tempCodePoint\n            }\n          }\n          break\n        case 4:\n          secondByte = buf[i + 1]\n          thirdByte = buf[i + 2]\n          fourthByte = buf[i + 3]\n          if ((secondByte & 0xC0) === 0x80 && (thirdByte & 0xC0) === 0x80 && (fourthByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0xF) << 0x12 | (secondByte & 0x3F) << 0xC | (thirdByte & 0x3F) << 0x6 | (fourthByte & 0x3F)\n            if (tempCodePoint > 0xFFFF && tempCodePoint < 0x110000) {\n              codePoint = tempCodePoint\n            }\n          }\n      }\n    }\n\n    if (codePoint === null) {\n      // we did not generate a valid codePoint so insert a\n      // replacement char (U+FFFD) and advance only 1 byte\n      codePoint = 0xFFFD\n      bytesPerSequence = 1\n    } else if (codePoint > 0xFFFF) {\n      // encode to utf16 (surrogate pair dance)\n      codePoint -= 0x10000\n      res.push(codePoint >>> 10 & 0x3FF | 0xD800)\n      codePoint = 0xDC00 | codePoint & 0x3FF\n    }\n\n    res.push(codePoint)\n    i += bytesPerSequence\n  }\n\n  return decodeCodePointsArray(res)\n}\n\n// Based on http://stackoverflow.com/a/22747272/680742, the browser with\n// the lowest limit is Chrome, with 0x10000 args.\n// We go 1 magnitude less, for safety\nconst MAX_ARGUMENTS_LENGTH = 0x1000\n\nfunction decodeCodePointsArray (codePoints) {\n  const len = codePoints.length\n  if (len <= MAX_ARGUMENTS_LENGTH) {\n    return String.fromCharCode.apply(String, codePoints) // avoid extra slice()\n  }\n\n  // Decode in chunks to avoid \"call stack size exceeded\".\n  let res = ''\n  let i = 0\n  while (i < len) {\n    res += String.fromCharCode.apply(\n      String,\n      codePoints.slice(i, i += MAX_ARGUMENTS_LENGTH)\n    )\n  }\n  return res\n}\n\nfunction asciiSlice (buf, start, end) {\n  let ret = ''\n  end = Math.min(buf.length, end)\n\n  for (let i = start; i < end; ++i) {\n    ret += String.fromCharCode(buf[i] & 0x7F)\n  }\n  return ret\n}\n\nfunction latin1Slice (buf, start, end) {\n  let ret = ''\n  end = Math.min(buf.length, end)\n\n  for (let i = start; i < end; ++i) {\n    ret += String.fromCharCode(buf[i])\n  }\n  return ret\n}\n\nfunction hexSlice (buf, start, end) {\n  const len = buf.length\n\n  if (!start || start < 0) start = 0\n  if (!end || end < 0 || end > len) end = len\n\n  let out = ''\n  for (let i = start; i < end; ++i) {\n    out += hexSliceLookupTable[buf[i]]\n  }\n  return out\n}\n\nfunction utf16leSlice (buf, start, end) {\n  const bytes = buf.slice(start, end)\n  let res = ''\n  // If bytes.length is odd, the last 8 bits must be ignored (same as node.js)\n  for (let i = 0; i < bytes.length - 1; i += 2) {\n    res += String.fromCharCode(bytes[i] + (bytes[i + 1] * 256))\n  }\n  return res\n}\n\nBuffer.prototype.slice = function slice (start, end) {\n  const len = this.length\n  start = ~~start\n  end = end === undefined ? len : ~~end\n\n  if (start < 0) {\n    start += len\n    if (start < 0) start = 0\n  } else if (start > len) {\n    start = len\n  }\n\n  if (end < 0) {\n    end += len\n    if (end < 0) end = 0\n  } else if (end > len) {\n    end = len\n  }\n\n  if (end < start) end = start\n\n  const newBuf = this.subarray(start, end)\n  // Return an augmented `Uint8Array` instance\n  Object.setPrototypeOf(newBuf, Buffer.prototype)\n\n  return newBuf\n}\n\n/*\n * Need to make sure that buffer isn't trying to write out of bounds.\n */\nfunction checkOffset (offset, ext, length) {\n  if ((offset % 1) !== 0 || offset < 0) throw new RangeError('offset is not uint')\n  if (offset + ext > length) throw new RangeError('Trying to access beyond buffer length')\n}\n\nBuffer.prototype.readUintLE =\nBuffer.prototype.readUIntLE = function readUIntLE (offset, byteLength, noAssert) {\n  offset = offset >>> 0\n  byteLength = byteLength >>> 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  let val = this[offset]\n  let mul = 1\n  let i = 0\n  while (++i < byteLength && (mul *= 0x100)) {\n    val += this[offset + i] * mul\n  }\n\n  return val\n}\n\nBuffer.prototype.readUintBE =\nBuffer.prototype.readUIntBE = function readUIntBE (offset, byteLength, noAssert) {\n  offset = offset >>> 0\n  byteLength = byteLength >>> 0\n  if (!noAssert) {\n    checkOffset(offset, byteLength, this.length)\n  }\n\n  let val = this[offset + --byteLength]\n  let mul = 1\n  while (byteLength > 0 && (mul *= 0x100)) {\n    val += this[offset + --byteLength] * mul\n  }\n\n  return val\n}\n\nBuffer.prototype.readUint8 =\nBuffer.prototype.readUInt8 = function readUInt8 (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 1, this.length)\n  return this[offset]\n}\n\nBuffer.prototype.readUint16LE =\nBuffer.prototype.readUInt16LE = function readUInt16LE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  return this[offset] | (this[offset + 1] << 8)\n}\n\nBuffer.prototype.readUint16BE =\nBuffer.prototype.readUInt16BE = function readUInt16BE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  return (this[offset] << 8) | this[offset + 1]\n}\n\nBuffer.prototype.readUint32LE =\nBuffer.prototype.readUInt32LE = function readUInt32LE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return ((this[offset]) |\n      (this[offset + 1] << 8) |\n      (this[offset + 2] << 16)) +\n      (this[offset + 3] * 0x1000000)\n}\n\nBuffer.prototype.readUint32BE =\nBuffer.prototype.readUInt32BE = function readUInt32BE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset] * 0x1000000) +\n    ((this[offset + 1] << 16) |\n    (this[offset + 2] << 8) |\n    this[offset + 3])\n}\n\nBuffer.prototype.readBigUInt64LE = defineBigIntMethod(function readBigUInt64LE (offset) {\n  offset = offset >>> 0\n  validateNumber(offset, 'offset')\n  const first = this[offset]\n  const last = this[offset + 7]\n  if (first === undefined || last === undefined) {\n    boundsError(offset, this.length - 8)\n  }\n\n  const lo = first +\n    this[++offset] * 2 ** 8 +\n    this[++offset] * 2 ** 16 +\n    this[++offset] * 2 ** 24\n\n  const hi = this[++offset] +\n    this[++offset] * 2 ** 8 +\n    this[++offset] * 2 ** 16 +\n    last * 2 ** 24\n\n  return BigInt(lo) + (BigInt(hi) << BigInt(32))\n})\n\nBuffer.prototype.readBigUInt64BE = defineBigIntMethod(function readBigUInt64BE (offset) {\n  offset = offset >>> 0\n  validateNumber(offset, 'offset')\n  const first = this[offset]\n  const last = this[offset + 7]\n  if (first === undefined || last === undefined) {\n    boundsError(offset, this.length - 8)\n  }\n\n  const hi = first * 2 ** 24 +\n    this[++offset] * 2 ** 16 +\n    this[++offset] * 2 ** 8 +\n    this[++offset]\n\n  const lo = this[++offset] * 2 ** 24 +\n    this[++offset] * 2 ** 16 +\n    this[++offset] * 2 ** 8 +\n    last\n\n  return (BigInt(hi) << BigInt(32)) + BigInt(lo)\n})\n\nBuffer.prototype.readIntLE = function readIntLE (offset, byteLength, noAssert) {\n  offset = offset >>> 0\n  byteLength = byteLength >>> 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  let val = this[offset]\n  let mul = 1\n  let i = 0\n  while (++i < byteLength && (mul *= 0x100)) {\n    val += this[offset + i] * mul\n  }\n  mul *= 0x80\n\n  if (val >= mul) val -= Math.pow(2, 8 * byteLength)\n\n  return val\n}\n\nBuffer.prototype.readIntBE = function readIntBE (offset, byteLength, noAssert) {\n  offset = offset >>> 0\n  byteLength = byteLength >>> 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  let i = byteLength\n  let mul = 1\n  let val = this[offset + --i]\n  while (i > 0 && (mul *= 0x100)) {\n    val += this[offset + --i] * mul\n  }\n  mul *= 0x80\n\n  if (val >= mul) val -= Math.pow(2, 8 * byteLength)\n\n  return val\n}\n\nBuffer.prototype.readInt8 = function readInt8 (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 1, this.length)\n  if (!(this[offset] & 0x80)) return (this[offset])\n  return ((0xff - this[offset] + 1) * -1)\n}\n\nBuffer.prototype.readInt16LE = function readInt16LE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  const val = this[offset] | (this[offset + 1] << 8)\n  return (val & 0x8000) ? val | 0xFFFF0000 : val\n}\n\nBuffer.prototype.readInt16BE = function readInt16BE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  const val = this[offset + 1] | (this[offset] << 8)\n  return (val & 0x8000) ? val | 0xFFFF0000 : val\n}\n\nBuffer.prototype.readInt32LE = function readInt32LE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset]) |\n    (this[offset + 1] << 8) |\n    (this[offset + 2] << 16) |\n    (this[offset + 3] << 24)\n}\n\nBuffer.prototype.readInt32BE = function readInt32BE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset] << 24) |\n    (this[offset + 1] << 16) |\n    (this[offset + 2] << 8) |\n    (this[offset + 3])\n}\n\nBuffer.prototype.readBigInt64LE = defineBigIntMethod(function readBigInt64LE (offset) {\n  offset = offset >>> 0\n  validateNumber(offset, 'offset')\n  const first = this[offset]\n  const last = this[offset + 7]\n  if (first === undefined || last === undefined) {\n    boundsError(offset, this.length - 8)\n  }\n\n  const val = this[offset + 4] +\n    this[offset + 5] * 2 ** 8 +\n    this[offset + 6] * 2 ** 16 +\n    (last << 24) // Overflow\n\n  return (BigInt(val) << BigInt(32)) +\n    BigInt(first +\n    this[++offset] * 2 ** 8 +\n    this[++offset] * 2 ** 16 +\n    this[++offset] * 2 ** 24)\n})\n\nBuffer.prototype.readBigInt64BE = defineBigIntMethod(function readBigInt64BE (offset) {\n  offset = offset >>> 0\n  validateNumber(offset, 'offset')\n  const first = this[offset]\n  const last = this[offset + 7]\n  if (first === undefined || last === undefined) {\n    boundsError(offset, this.length - 8)\n  }\n\n  const val = (first << 24) + // Overflow\n    this[++offset] * 2 ** 16 +\n    this[++offset] * 2 ** 8 +\n    this[++offset]\n\n  return (BigInt(val) << BigInt(32)) +\n    BigInt(this[++offset] * 2 ** 24 +\n    this[++offset] * 2 ** 16 +\n    this[++offset] * 2 ** 8 +\n    last)\n})\n\nBuffer.prototype.readFloatLE = function readFloatLE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 4, this.length)\n  return ieee754.read(this, offset, true, 23, 4)\n}\n\nBuffer.prototype.readFloatBE = function readFloatBE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 4, this.length)\n  return ieee754.read(this, offset, false, 23, 4)\n}\n\nBuffer.prototype.readDoubleLE = function readDoubleLE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 8, this.length)\n  return ieee754.read(this, offset, true, 52, 8)\n}\n\nBuffer.prototype.readDoubleBE = function readDoubleBE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 8, this.length)\n  return ieee754.read(this, offset, false, 52, 8)\n}\n\nfunction checkInt (buf, value, offset, ext, max, min) {\n  if (!Buffer.isBuffer(buf)) throw new TypeError('\"buffer\" argument must be a Buffer instance')\n  if (value > max || value < min) throw new RangeError('\"value\" argument is out of bounds')\n  if (offset + ext > buf.length) throw new RangeError('Index out of range')\n}\n\nBuffer.prototype.writeUintLE =\nBuffer.prototype.writeUIntLE = function writeUIntLE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  byteLength = byteLength >>> 0\n  if (!noAssert) {\n    const maxBytes = Math.pow(2, 8 * byteLength) - 1\n    checkInt(this, value, offset, byteLength, maxBytes, 0)\n  }\n\n  let mul = 1\n  let i = 0\n  this[offset] = value & 0xFF\n  while (++i < byteLength && (mul *= 0x100)) {\n    this[offset + i] = (value / mul) & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeUintBE =\nBuffer.prototype.writeUIntBE = function writeUIntBE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  byteLength = byteLength >>> 0\n  if (!noAssert) {\n    const maxBytes = Math.pow(2, 8 * byteLength) - 1\n    checkInt(this, value, offset, byteLength, maxBytes, 0)\n  }\n\n  let i = byteLength - 1\n  let mul = 1\n  this[offset + i] = value & 0xFF\n  while (--i >= 0 && (mul *= 0x100)) {\n    this[offset + i] = (value / mul) & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeUint8 =\nBuffer.prototype.writeUInt8 = function writeUInt8 (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 1, 0xff, 0)\n  this[offset] = (value & 0xff)\n  return offset + 1\n}\n\nBuffer.prototype.writeUint16LE =\nBuffer.prototype.writeUInt16LE = function writeUInt16LE (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0xffff, 0)\n  this[offset] = (value & 0xff)\n  this[offset + 1] = (value >>> 8)\n  return offset + 2\n}\n\nBuffer.prototype.writeUint16BE =\nBuffer.prototype.writeUInt16BE = function writeUInt16BE (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0xffff, 0)\n  this[offset] = (value >>> 8)\n  this[offset + 1] = (value & 0xff)\n  return offset + 2\n}\n\nBuffer.prototype.writeUint32LE =\nBuffer.prototype.writeUInt32LE = function writeUInt32LE (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0xffffffff, 0)\n  this[offset + 3] = (value >>> 24)\n  this[offset + 2] = (value >>> 16)\n  this[offset + 1] = (value >>> 8)\n  this[offset] = (value & 0xff)\n  return offset + 4\n}\n\nBuffer.prototype.writeUint32BE =\nBuffer.prototype.writeUInt32BE = function writeUInt32BE (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0xffffffff, 0)\n  this[offset] = (value >>> 24)\n  this[offset + 1] = (value >>> 16)\n  this[offset + 2] = (value >>> 8)\n  this[offset + 3] = (value & 0xff)\n  return offset + 4\n}\n\nfunction wrtBigUInt64LE (buf, value, offset, min, max) {\n  checkIntBI(value, min, max, buf, offset, 7)\n\n  let lo = Number(value & BigInt(0xffffffff))\n  buf[offset++] = lo\n  lo = lo >> 8\n  buf[offset++] = lo\n  lo = lo >> 8\n  buf[offset++] = lo\n  lo = lo >> 8\n  buf[offset++] = lo\n  let hi = Number(value >> BigInt(32) & BigInt(0xffffffff))\n  buf[offset++] = hi\n  hi = hi >> 8\n  buf[offset++] = hi\n  hi = hi >> 8\n  buf[offset++] = hi\n  hi = hi >> 8\n  buf[offset++] = hi\n  return offset\n}\n\nfunction wrtBigUInt64BE (buf, value, offset, min, max) {\n  checkIntBI(value, min, max, buf, offset, 7)\n\n  let lo = Number(value & BigInt(0xffffffff))\n  buf[offset + 7] = lo\n  lo = lo >> 8\n  buf[offset + 6] = lo\n  lo = lo >> 8\n  buf[offset + 5] = lo\n  lo = lo >> 8\n  buf[offset + 4] = lo\n  let hi = Number(value >> BigInt(32) & BigInt(0xffffffff))\n  buf[offset + 3] = hi\n  hi = hi >> 8\n  buf[offset + 2] = hi\n  hi = hi >> 8\n  buf[offset + 1] = hi\n  hi = hi >> 8\n  buf[offset] = hi\n  return offset + 8\n}\n\nBuffer.prototype.writeBigUInt64LE = defineBigIntMethod(function writeBigUInt64LE (value, offset = 0) {\n  return wrtBigUInt64LE(this, value, offset, BigInt(0), BigInt('0xffffffffffffffff'))\n})\n\nBuffer.prototype.writeBigUInt64BE = defineBigIntMethod(function writeBigUInt64BE (value, offset = 0) {\n  return wrtBigUInt64BE(this, value, offset, BigInt(0), BigInt('0xffffffffffffffff'))\n})\n\nBuffer.prototype.writeIntLE = function writeIntLE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) {\n    const limit = Math.pow(2, (8 * byteLength) - 1)\n\n    checkInt(this, value, offset, byteLength, limit - 1, -limit)\n  }\n\n  let i = 0\n  let mul = 1\n  let sub = 0\n  this[offset] = value & 0xFF\n  while (++i < byteLength && (mul *= 0x100)) {\n    if (value < 0 && sub === 0 && this[offset + i - 1] !== 0) {\n      sub = 1\n    }\n    this[offset + i] = ((value / mul) >> 0) - sub & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeIntBE = function writeIntBE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) {\n    const limit = Math.pow(2, (8 * byteLength) - 1)\n\n    checkInt(this, value, offset, byteLength, limit - 1, -limit)\n  }\n\n  let i = byteLength - 1\n  let mul = 1\n  let sub = 0\n  this[offset + i] = value & 0xFF\n  while (--i >= 0 && (mul *= 0x100)) {\n    if (value < 0 && sub === 0 && this[offset + i + 1] !== 0) {\n      sub = 1\n    }\n    this[offset + i] = ((value / mul) >> 0) - sub & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeInt8 = function writeInt8 (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 1, 0x7f, -0x80)\n  if (value < 0) value = 0xff + value + 1\n  this[offset] = (value & 0xff)\n  return offset + 1\n}\n\nBuffer.prototype.writeInt16LE = function writeInt16LE (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0x7fff, -0x8000)\n  this[offset] = (value & 0xff)\n  this[offset + 1] = (value >>> 8)\n  return offset + 2\n}\n\nBuffer.prototype.writeInt16BE = function writeInt16BE (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0x7fff, -0x8000)\n  this[offset] = (value >>> 8)\n  this[offset + 1] = (value & 0xff)\n  return offset + 2\n}\n\nBuffer.prototype.writeInt32LE = function writeInt32LE (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000)\n  this[offset] = (value & 0xff)\n  this[offset + 1] = (value >>> 8)\n  this[offset + 2] = (value >>> 16)\n  this[offset + 3] = (value >>> 24)\n  return offset + 4\n}\n\nBuffer.prototype.writeInt32BE = function writeInt32BE (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000)\n  if (value < 0) value = 0xffffffff + value + 1\n  this[offset] = (value >>> 24)\n  this[offset + 1] = (value >>> 16)\n  this[offset + 2] = (value >>> 8)\n  this[offset + 3] = (value & 0xff)\n  return offset + 4\n}\n\nBuffer.prototype.writeBigInt64LE = defineBigIntMethod(function writeBigInt64LE (value, offset = 0) {\n  return wrtBigUInt64LE(this, value, offset, -BigInt('0x8000000000000000'), BigInt('0x7fffffffffffffff'))\n})\n\nBuffer.prototype.writeBigInt64BE = defineBigIntMethod(function writeBigInt64BE (value, offset = 0) {\n  return wrtBigUInt64BE(this, value, offset, -BigInt('0x8000000000000000'), BigInt('0x7fffffffffffffff'))\n})\n\nfunction checkIEEE754 (buf, value, offset, ext, max, min) {\n  if (offset + ext > buf.length) throw new RangeError('Index out of range')\n  if (offset < 0) throw new RangeError('Index out of range')\n}\n\nfunction writeFloat (buf, value, offset, littleEndian, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) {\n    checkIEEE754(buf, value, offset, 4, 3.4028234663852886e+38, -3.4028234663852886e+38)\n  }\n  ieee754.write(buf, value, offset, littleEndian, 23, 4)\n  return offset + 4\n}\n\nBuffer.prototype.writeFloatLE = function writeFloatLE (value, offset, noAssert) {\n  return writeFloat(this, value, offset, true, noAssert)\n}\n\nBuffer.prototype.writeFloatBE = function writeFloatBE (value, offset, noAssert) {\n  return writeFloat(this, value, offset, false, noAssert)\n}\n\nfunction writeDouble (buf, value, offset, littleEndian, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) {\n    checkIEEE754(buf, value, offset, 8, 1.7976931348623157E+308, -1.7976931348623157E+308)\n  }\n  ieee754.write(buf, value, offset, littleEndian, 52, 8)\n  return offset + 8\n}\n\nBuffer.prototype.writeDoubleLE = function writeDoubleLE (value, offset, noAssert) {\n  return writeDouble(this, value, offset, true, noAssert)\n}\n\nBuffer.prototype.writeDoubleBE = function writeDoubleBE (value, offset, noAssert) {\n  return writeDouble(this, value, offset, false, noAssert)\n}\n\n// copy(targetBuffer, targetStart=0, sourceStart=0, sourceEnd=buffer.length)\nBuffer.prototype.copy = function copy (target, targetStart, start, end) {\n  if (!Buffer.isBuffer(target)) throw new TypeError('argument should be a Buffer')\n  if (!start) start = 0\n  if (!end && end !== 0) end = this.length\n  if (targetStart >= target.length) targetStart = target.length\n  if (!targetStart) targetStart = 0\n  if (end > 0 && end < start) end = start\n\n  // Copy 0 bytes; we're done\n  if (end === start) return 0\n  if (target.length === 0 || this.length === 0) return 0\n\n  // Fatal error conditions\n  if (targetStart < 0) {\n    throw new RangeError('targetStart out of bounds')\n  }\n  if (start < 0 || start >= this.length) throw new RangeError('Index out of range')\n  if (end < 0) throw new RangeError('sourceEnd out of bounds')\n\n  // Are we oob?\n  if (end > this.length) end = this.length\n  if (target.length - targetStart < end - start) {\n    end = target.length - targetStart + start\n  }\n\n  const len = end - start\n\n  if (this === target && typeof Uint8Array.prototype.copyWithin === 'function') {\n    // Use built-in when available, missing from IE11\n    this.copyWithin(targetStart, start, end)\n  } else {\n    Uint8Array.prototype.set.call(\n      target,\n      this.subarray(start, end),\n      targetStart\n    )\n  }\n\n  return len\n}\n\n// Usage:\n//    buffer.fill(number[, offset[, end]])\n//    buffer.fill(buffer[, offset[, end]])\n//    buffer.fill(string[, offset[, end]][, encoding])\nBuffer.prototype.fill = function fill (val, start, end, encoding) {\n  // Handle string cases:\n  if (typeof val === 'string') {\n    if (typeof start === 'string') {\n      encoding = start\n      start = 0\n      end = this.length\n    } else if (typeof end === 'string') {\n      encoding = end\n      end = this.length\n    }\n    if (encoding !== undefined && typeof encoding !== 'string') {\n      throw new TypeError('encoding must be a string')\n    }\n    if (typeof encoding === 'string' && !Buffer.isEncoding(encoding)) {\n      throw new TypeError('Unknown encoding: ' + encoding)\n    }\n    if (val.length === 1) {\n      const code = val.charCodeAt(0)\n      if ((encoding === 'utf8' && code < 128) ||\n          encoding === 'latin1') {\n        // Fast path: If `val` fits into a single byte, use that numeric value.\n        val = code\n      }\n    }\n  } else if (typeof val === 'number') {\n    val = val & 255\n  } else if (typeof val === 'boolean') {\n    val = Number(val)\n  }\n\n  // Invalid ranges are not set to a default, so can range check early.\n  if (start < 0 || this.length < start || this.length < end) {\n    throw new RangeError('Out of range index')\n  }\n\n  if (end <= start) {\n    return this\n  }\n\n  start = start >>> 0\n  end = end === undefined ? this.length : end >>> 0\n\n  if (!val) val = 0\n\n  let i\n  if (typeof val === 'number') {\n    for (i = start; i < end; ++i) {\n      this[i] = val\n    }\n  } else {\n    const bytes = Buffer.isBuffer(val)\n      ? val\n      : Buffer.from(val, encoding)\n    const len = bytes.length\n    if (len === 0) {\n      throw new TypeError('The value \"' + val +\n        '\" is invalid for argument \"value\"')\n    }\n    for (i = 0; i < end - start; ++i) {\n      this[i + start] = bytes[i % len]\n    }\n  }\n\n  return this\n}\n\n// CUSTOM ERRORS\n// =============\n\n// Simplified versions from Node, changed for Buffer-only usage\nconst errors = {}\nfunction E (sym, getMessage, Base) {\n  errors[sym] = class NodeError extends Base {\n    constructor () {\n      super()\n\n      Object.defineProperty(this, 'message', {\n        value: getMessage.apply(this, arguments),\n        writable: true,\n        configurable: true\n      })\n\n      // Add the error code to the name to include it in the stack trace.\n      this.name = `${this.name} [${sym}]`\n      // Access the stack to generate the error message including the error code\n      // from the name.\n      this.stack // eslint-disable-line no-unused-expressions\n      // Reset the name to the actual name.\n      delete this.name\n    }\n\n    get code () {\n      return sym\n    }\n\n    set code (value) {\n      Object.defineProperty(this, 'code', {\n        configurable: true,\n        enumerable: true,\n        value,\n        writable: true\n      })\n    }\n\n    toString () {\n      return `${this.name} [${sym}]: ${this.message}`\n    }\n  }\n}\n\nE('ERR_BUFFER_OUT_OF_BOUNDS',\n  function (name) {\n    if (name) {\n      return `${name} is outside of buffer bounds`\n    }\n\n    return 'Attempt to access memory outside buffer bounds'\n  }, RangeError)\nE('ERR_INVALID_ARG_TYPE',\n  function (name, actual) {\n    return `The \"${name}\" argument must be of type number. Received type ${typeof actual}`\n  }, TypeError)\nE('ERR_OUT_OF_RANGE',\n  function (str, range, input) {\n    let msg = `The value of \"${str}\" is out of range.`\n    let received = input\n    if (Number.isInteger(input) && Math.abs(input) > 2 ** 32) {\n      received = addNumericalSeparator(String(input))\n    } else if (typeof input === 'bigint') {\n      received = String(input)\n      if (input > BigInt(2) ** BigInt(32) || input < -(BigInt(2) ** BigInt(32))) {\n        received = addNumericalSeparator(received)\n      }\n      received += 'n'\n    }\n    msg += ` It must be ${range}. Received ${received}`\n    return msg\n  }, RangeError)\n\nfunction addNumericalSeparator (val) {\n  let res = ''\n  let i = val.length\n  const start = val[0] === '-' ? 1 : 0\n  for (; i >= start + 4; i -= 3) {\n    res = `_${val.slice(i - 3, i)}${res}`\n  }\n  return `${val.slice(0, i)}${res}`\n}\n\n// CHECK FUNCTIONS\n// ===============\n\nfunction checkBounds (buf, offset, byteLength) {\n  validateNumber(offset, 'offset')\n  if (buf[offset] === undefined || buf[offset + byteLength] === undefined) {\n    boundsError(offset, buf.length - (byteLength + 1))\n  }\n}\n\nfunction checkIntBI (value, min, max, buf, offset, byteLength) {\n  if (value > max || value < min) {\n    const n = typeof min === 'bigint' ? 'n' : ''\n    let range\n    if (byteLength > 3) {\n      if (min === 0 || min === BigInt(0)) {\n        range = `>= 0${n} and < 2${n} ** ${(byteLength + 1) * 8}${n}`\n      } else {\n        range = `>= -(2${n} ** ${(byteLength + 1) * 8 - 1}${n}) and < 2 ** ` +\n                `${(byteLength + 1) * 8 - 1}${n}`\n      }\n    } else {\n      range = `>= ${min}${n} and <= ${max}${n}`\n    }\n    throw new errors.ERR_OUT_OF_RANGE('value', range, value)\n  }\n  checkBounds(buf, offset, byteLength)\n}\n\nfunction validateNumber (value, name) {\n  if (typeof value !== 'number') {\n    throw new errors.ERR_INVALID_ARG_TYPE(name, 'number', value)\n  }\n}\n\nfunction boundsError (value, length, type) {\n  if (Math.floor(value) !== value) {\n    validateNumber(value, type)\n    throw new errors.ERR_OUT_OF_RANGE(type || 'offset', 'an integer', value)\n  }\n\n  if (length < 0) {\n    throw new errors.ERR_BUFFER_OUT_OF_BOUNDS()\n  }\n\n  throw new errors.ERR_OUT_OF_RANGE(type || 'offset',\n                                    `>= ${type ? 1 : 0} and <= ${length}`,\n                                    value)\n}\n\n// HELPER FUNCTIONS\n// ================\n\nconst INVALID_BASE64_RE = /[^+/0-9A-Za-z-_]/g\n\nfunction base64clean (str) {\n  // Node takes equal signs as end of the Base64 encoding\n  str = str.split('=')[0]\n  // Node strips out invalid characters like \\n and \\t from the string, base64-js does not\n  str = str.trim().replace(INVALID_BASE64_RE, '')\n  // Node converts strings with length < 2 to ''\n  if (str.length < 2) return ''\n  // Node allows for non-padded base64 strings (missing trailing ===), base64-js does not\n  while (str.length % 4 !== 0) {\n    str = str + '='\n  }\n  return str\n}\n\nfunction utf8ToBytes (string, units) {\n  units = units || Infinity\n  let codePoint\n  const length = string.length\n  let leadSurrogate = null\n  const bytes = []\n\n  for (let i = 0; i < length; ++i) {\n    codePoint = string.charCodeAt(i)\n\n    // is surrogate component\n    if (codePoint > 0xD7FF && codePoint < 0xE000) {\n      // last char was a lead\n      if (!leadSurrogate) {\n        // no lead yet\n        if (codePoint > 0xDBFF) {\n          // unexpected trail\n          if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n          continue\n        } else if (i + 1 === length) {\n          // unpaired lead\n          if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n          continue\n        }\n\n        // valid lead\n        leadSurrogate = codePoint\n\n        continue\n      }\n\n      // 2 leads in a row\n      if (codePoint < 0xDC00) {\n        if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n        leadSurrogate = codePoint\n        continue\n      }\n\n      // valid surrogate pair\n      codePoint = (leadSurrogate - 0xD800 << 10 | codePoint - 0xDC00) + 0x10000\n    } else if (leadSurrogate) {\n      // valid bmp char, but last char was a lead\n      if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n    }\n\n    leadSurrogate = null\n\n    // encode utf8\n    if (codePoint < 0x80) {\n      if ((units -= 1) < 0) break\n      bytes.push(codePoint)\n    } else if (codePoint < 0x800) {\n      if ((units -= 2) < 0) break\n      bytes.push(\n        codePoint >> 0x6 | 0xC0,\n        codePoint & 0x3F | 0x80\n      )\n    } else if (codePoint < 0x10000) {\n      if ((units -= 3) < 0) break\n      bytes.push(\n        codePoint >> 0xC | 0xE0,\n        codePoint >> 0x6 & 0x3F | 0x80,\n        codePoint & 0x3F | 0x80\n      )\n    } else if (codePoint < 0x110000) {\n      if ((units -= 4) < 0) break\n      bytes.push(\n        codePoint >> 0x12 | 0xF0,\n        codePoint >> 0xC & 0x3F | 0x80,\n        codePoint >> 0x6 & 0x3F | 0x80,\n        codePoint & 0x3F | 0x80\n      )\n    } else {\n      throw new Error('Invalid code point')\n    }\n  }\n\n  return bytes\n}\n\nfunction asciiToBytes (str) {\n  const byteArray = []\n  for (let i = 0; i < str.length; ++i) {\n    // Node's code seems to be doing this and not & 0x7F..\n    byteArray.push(str.charCodeAt(i) & 0xFF)\n  }\n  return byteArray\n}\n\nfunction utf16leToBytes (str, units) {\n  let c, hi, lo\n  const byteArray = []\n  for (let i = 0; i < str.length; ++i) {\n    if ((units -= 2) < 0) break\n\n    c = str.charCodeAt(i)\n    hi = c >> 8\n    lo = c % 256\n    byteArray.push(lo)\n    byteArray.push(hi)\n  }\n\n  return byteArray\n}\n\nfunction base64ToBytes (str) {\n  return base64.toByteArray(base64clean(str))\n}\n\nfunction blitBuffer (src, dst, offset, length) {\n  let i\n  for (i = 0; i < length; ++i) {\n    if ((i + offset >= dst.length) || (i >= src.length)) break\n    dst[i + offset] = src[i]\n  }\n  return i\n}\n\n// ArrayBuffer or Uint8Array objects from other contexts (i.e. iframes) do not pass\n// the `instanceof` check but they should be treated as of that type.\n// See: https://github.com/feross/buffer/issues/166\nfunction isInstance (obj, type) {\n  return obj instanceof type ||\n    (obj != null && obj.constructor != null && obj.constructor.name != null &&\n      obj.constructor.name === type.name)\n}\nfunction numberIsNaN (obj) {\n  // For IE11 support\n  return obj !== obj // eslint-disable-line no-self-compare\n}\n\n// Create lookup table for `toString('hex')`\n// See: https://github.com/feross/buffer/issues/219\nconst hexSliceLookupTable = (function () {\n  const alphabet = '0123456789abcdef'\n  const table = new Array(256)\n  for (let i = 0; i < 16; ++i) {\n    const i16 = i * 16\n    for (let j = 0; j < 16; ++j) {\n      table[i16 + j] = alphabet[i] + alphabet[j]\n    }\n  }\n  return table\n})()\n\n// Return not function with Error if BigInt not supported\nfunction defineBigIntMethod (fn) {\n  return typeof BigInt === 'undefined' ? BufferBigIntNotDefined : fn\n}\n\nfunction BufferBigIntNotDefined () {\n  throw new Error('BigInt not supported')\n}\n","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n'use strict';\n\nvar R = typeof Reflect === 'object' ? Reflect : null\nvar ReflectApply = R && typeof R.apply === 'function'\n  ? R.apply\n  : function ReflectApply(target, receiver, args) {\n    return Function.prototype.apply.call(target, receiver, args);\n  }\n\nvar ReflectOwnKeys\nif (R && typeof R.ownKeys === 'function') {\n  ReflectOwnKeys = R.ownKeys\n} else if (Object.getOwnPropertySymbols) {\n  ReflectOwnKeys = function ReflectOwnKeys(target) {\n    return Object.getOwnPropertyNames(target)\n      .concat(Object.getOwnPropertySymbols(target));\n  };\n} else {\n  ReflectOwnKeys = function ReflectOwnKeys(target) {\n    return Object.getOwnPropertyNames(target);\n  };\n}\n\nfunction ProcessEmitWarning(warning) {\n  if (console && console.warn) console.warn(warning);\n}\n\nvar NumberIsNaN = Number.isNaN || function NumberIsNaN(value) {\n  return value !== value;\n}\n\nfunction EventEmitter() {\n  EventEmitter.init.call(this);\n}\nmodule.exports = EventEmitter;\nmodule.exports.once = once;\n\n// Backwards-compat with node 0.10.x\nEventEmitter.EventEmitter = EventEmitter;\n\nEventEmitter.prototype._events = undefined;\nEventEmitter.prototype._eventsCount = 0;\nEventEmitter.prototype._maxListeners = undefined;\n\n// By default EventEmitters will print a warning if more than 10 listeners are\n// added to it. This is a useful default which helps finding memory leaks.\nvar defaultMaxListeners = 10;\n\nfunction checkListener(listener) {\n  if (typeof listener !== 'function') {\n    throw new TypeError('The \"listener\" argument must be of type Function. Received type ' + typeof listener);\n  }\n}\n\nObject.defineProperty(EventEmitter, 'defaultMaxListeners', {\n  enumerable: true,\n  get: function() {\n    return defaultMaxListeners;\n  },\n  set: function(arg) {\n    if (typeof arg !== 'number' || arg < 0 || NumberIsNaN(arg)) {\n      throw new RangeError('The value of \"defaultMaxListeners\" is out of range. It must be a non-negative number. Received ' + arg + '.');\n    }\n    defaultMaxListeners = arg;\n  }\n});\n\nEventEmitter.init = function() {\n\n  if (this._events === undefined ||\n      this._events === Object.getPrototypeOf(this)._events) {\n    this._events = Object.create(null);\n    this._eventsCount = 0;\n  }\n\n  this._maxListeners = this._maxListeners || undefined;\n};\n\n// Obviously not all Emitters should be limited to 10. This function allows\n// that to be increased. Set to zero for unlimited.\nEventEmitter.prototype.setMaxListeners = function setMaxListeners(n) {\n  if (typeof n !== 'number' || n < 0 || NumberIsNaN(n)) {\n    throw new RangeError('The value of \"n\" is out of range. It must be a non-negative number. Received ' + n + '.');\n  }\n  this._maxListeners = n;\n  return this;\n};\n\nfunction _getMaxListeners(that) {\n  if (that._maxListeners === undefined)\n    return EventEmitter.defaultMaxListeners;\n  return that._maxListeners;\n}\n\nEventEmitter.prototype.getMaxListeners = function getMaxListeners() {\n  return _getMaxListeners(this);\n};\n\nEventEmitter.prototype.emit = function emit(type) {\n  var args = [];\n  for (var i = 1; i < arguments.length; i++) args.push(arguments[i]);\n  var doError = (type === 'error');\n\n  var events = this._events;\n  if (events !== undefined)\n    doError = (doError && events.error === undefined);\n  else if (!doError)\n    return false;\n\n  // If there is no 'error' event listener then throw.\n  if (doError) {\n    var er;\n    if (args.length > 0)\n      er = args[0];\n    if (er instanceof Error) {\n      // Note: The comments on the `throw` lines are intentional, they show\n      // up in Node's output if this results in an unhandled exception.\n      throw er; // Unhandled 'error' event\n    }\n    // At least give some kind of context to the user\n    var err = new Error('Unhandled error.' + (er ? ' (' + er.message + ')' : ''));\n    err.context = er;\n    throw err; // Unhandled 'error' event\n  }\n\n  var handler = events[type];\n\n  if (handler === undefined)\n    return false;\n\n  if (typeof handler === 'function') {\n    ReflectApply(handler, this, args);\n  } else {\n    var len = handler.length;\n    var listeners = arrayClone(handler, len);\n    for (var i = 0; i < len; ++i)\n      ReflectApply(listeners[i], this, args);\n  }\n\n  return true;\n};\n\nfunction _addListener(target, type, listener, prepend) {\n  var m;\n  var events;\n  var existing;\n\n  checkListener(listener);\n\n  events = target._events;\n  if (events === undefined) {\n    events = target._events = Object.create(null);\n    target._eventsCount = 0;\n  } else {\n    // To avoid recursion in the case that type === \"newListener\"! Before\n    // adding it to the listeners, first emit \"newListener\".\n    if (events.newListener !== undefined) {\n      target.emit('newListener', type,\n                  listener.listener ? listener.listener : listener);\n\n      // Re-assign `events` because a newListener handler could have caused the\n      // this._events to be assigned to a new object\n      events = target._events;\n    }\n    existing = events[type];\n  }\n\n  if (existing === undefined) {\n    // Optimize the case of one listener. Don't need the extra array object.\n    existing = events[type] = listener;\n    ++target._eventsCount;\n  } else {\n    if (typeof existing === 'function') {\n      // Adding the second element, need to change to array.\n      existing = events[type] =\n        prepend ? [listener, existing] : [existing, listener];\n      // If we've already got an array, just append.\n    } else if (prepend) {\n      existing.unshift(listener);\n    } else {\n      existing.push(listener);\n    }\n\n    // Check for listener leak\n    m = _getMaxListeners(target);\n    if (m > 0 && existing.length > m && !existing.warned) {\n      existing.warned = true;\n      // No error code for this since it is a Warning\n      // eslint-disable-next-line no-restricted-syntax\n      var w = new Error('Possible EventEmitter memory leak detected. ' +\n                          existing.length + ' ' + String(type) + ' listeners ' +\n                          'added. Use emitter.setMaxListeners() to ' +\n                          'increase limit');\n      w.name = 'MaxListenersExceededWarning';\n      w.emitter = target;\n      w.type = type;\n      w.count = existing.length;\n      ProcessEmitWarning(w);\n    }\n  }\n\n  return target;\n}\n\nEventEmitter.prototype.addListener = function addListener(type, listener) {\n  return _addListener(this, type, listener, false);\n};\n\nEventEmitter.prototype.on = EventEmitter.prototype.addListener;\n\nEventEmitter.prototype.prependListener =\n    function prependListener(type, listener) {\n      return _addListener(this, type, listener, true);\n    };\n\nfunction onceWrapper() {\n  if (!this.fired) {\n    this.target.removeListener(this.type, this.wrapFn);\n    this.fired = true;\n    if (arguments.length === 0)\n      return this.listener.call(this.target);\n    return this.listener.apply(this.target, arguments);\n  }\n}\n\nfunction _onceWrap(target, type, listener) {\n  var state = { fired: false, wrapFn: undefined, target: target, type: type, listener: listener };\n  var wrapped = onceWrapper.bind(state);\n  wrapped.listener = listener;\n  state.wrapFn = wrapped;\n  return wrapped;\n}\n\nEventEmitter.prototype.once = function once(type, listener) {\n  checkListener(listener);\n  this.on(type, _onceWrap(this, type, listener));\n  return this;\n};\n\nEventEmitter.prototype.prependOnceListener =\n    function prependOnceListener(type, listener) {\n      checkListener(listener);\n      this.prependListener(type, _onceWrap(this, type, listener));\n      return this;\n    };\n\n// Emits a 'removeListener' event if and only if the listener was removed.\nEventEmitter.prototype.removeListener =\n    function removeListener(type, listener) {\n      var list, events, position, i, originalListener;\n\n      checkListener(listener);\n\n      events = this._events;\n      if (events === undefined)\n        return this;\n\n      list = events[type];\n      if (list === undefined)\n        return this;\n\n      if (list === listener || list.listener === listener) {\n        if (--this._eventsCount === 0)\n          this._events = Object.create(null);\n        else {\n          delete events[type];\n          if (events.removeListener)\n            this.emit('removeListener', type, list.listener || listener);\n        }\n      } else if (typeof list !== 'function') {\n        position = -1;\n\n        for (i = list.length - 1; i >= 0; i--) {\n          if (list[i] === listener || list[i].listener === listener) {\n            originalListener = list[i].listener;\n            position = i;\n            break;\n          }\n        }\n\n        if (position < 0)\n          return this;\n\n        if (position === 0)\n          list.shift();\n        else {\n          spliceOne(list, position);\n        }\n\n        if (list.length === 1)\n          events[type] = list[0];\n\n        if (events.removeListener !== undefined)\n          this.emit('removeListener', type, originalListener || listener);\n      }\n\n      return this;\n    };\n\nEventEmitter.prototype.off = EventEmitter.prototype.removeListener;\n\nEventEmitter.prototype.removeAllListeners =\n    function removeAllListeners(type) {\n      var listeners, events, i;\n\n      events = this._events;\n      if (events === undefined)\n        return this;\n\n      // not listening for removeListener, no need to emit\n      if (events.removeListener === undefined) {\n        if (arguments.length === 0) {\n          this._events = Object.create(null);\n          this._eventsCount = 0;\n        } else if (events[type] !== undefined) {\n          if (--this._eventsCount === 0)\n            this._events = Object.create(null);\n          else\n            delete events[type];\n        }\n        return this;\n      }\n\n      // emit removeListener for all listeners on all events\n      if (arguments.length === 0) {\n        var keys = Object.keys(events);\n        var key;\n        for (i = 0; i < keys.length; ++i) {\n          key = keys[i];\n          if (key === 'removeListener') continue;\n          this.removeAllListeners(key);\n        }\n        this.removeAllListeners('removeListener');\n        this._events = Object.create(null);\n        this._eventsCount = 0;\n        return this;\n      }\n\n      listeners = events[type];\n\n      if (typeof listeners === 'function') {\n        this.removeListener(type, listeners);\n      } else if (listeners !== undefined) {\n        // LIFO order\n        for (i = listeners.length - 1; i >= 0; i--) {\n          this.removeListener(type, listeners[i]);\n        }\n      }\n\n      return this;\n    };\n\nfunction _listeners(target, type, unwrap) {\n  var events = target._events;\n\n  if (events === undefined)\n    return [];\n\n  var evlistener = events[type];\n  if (evlistener === undefined)\n    return [];\n\n  if (typeof evlistener === 'function')\n    return unwrap ? [evlistener.listener || evlistener] : [evlistener];\n\n  return unwrap ?\n    unwrapListeners(evlistener) : arrayClone(evlistener, evlistener.length);\n}\n\nEventEmitter.prototype.listeners = function listeners(type) {\n  return _listeners(this, type, true);\n};\n\nEventEmitter.prototype.rawListeners = function rawListeners(type) {\n  return _listeners(this, type, false);\n};\n\nEventEmitter.listenerCount = function(emitter, type) {\n  if (typeof emitter.listenerCount === 'function') {\n    return emitter.listenerCount(type);\n  } else {\n    return listenerCount.call(emitter, type);\n  }\n};\n\nEventEmitter.prototype.listenerCount = listenerCount;\nfunction listenerCount(type) {\n  var events = this._events;\n\n  if (events !== undefined) {\n    var evlistener = events[type];\n\n    if (typeof evlistener === 'function') {\n      return 1;\n    } else if (evlistener !== undefined) {\n      return evlistener.length;\n    }\n  }\n\n  return 0;\n}\n\nEventEmitter.prototype.eventNames = function eventNames() {\n  return this._eventsCount > 0 ? ReflectOwnKeys(this._events) : [];\n};\n\nfunction arrayClone(arr, n) {\n  var copy = new Array(n);\n  for (var i = 0; i < n; ++i)\n    copy[i] = arr[i];\n  return copy;\n}\n\nfunction spliceOne(list, index) {\n  for (; index + 1 < list.length; index++)\n    list[index] = list[index + 1];\n  list.pop();\n}\n\nfunction unwrapListeners(arr) {\n  var ret = new Array(arr.length);\n  for (var i = 0; i < ret.length; ++i) {\n    ret[i] = arr[i].listener || arr[i];\n  }\n  return ret;\n}\n\nfunction once(emitter, name) {\n  return new Promise(function (resolve, reject) {\n    function errorListener(err) {\n      emitter.removeListener(name, resolver);\n      reject(err);\n    }\n\n    function resolver() {\n      if (typeof emitter.removeListener === 'function') {\n        emitter.removeListener('error', errorListener);\n      }\n      resolve([].slice.call(arguments));\n    };\n\n    eventTargetAgnosticAddListener(emitter, name, resolver, { once: true });\n    if (name !== 'error') {\n      addErrorHandlerIfEventEmitter(emitter, errorListener, { once: true });\n    }\n  });\n}\n\nfunction addErrorHandlerIfEventEmitter(emitter, handler, flags) {\n  if (typeof emitter.on === 'function') {\n    eventTargetAgnosticAddListener(emitter, 'error', handler, flags);\n  }\n}\n\nfunction eventTargetAgnosticAddListener(emitter, name, listener, flags) {\n  if (typeof emitter.on === 'function') {\n    if (flags.once) {\n      emitter.once(name, listener);\n    } else {\n      emitter.on(name, listener);\n    }\n  } else if (typeof emitter.addEventListener === 'function') {\n    // EventTarget does not have `error` event semantics like Node\n    // EventEmitters, we do not listen for `error` events here.\n    emitter.addEventListener(name, function wrapListener(arg) {\n      // IE does not have builtin `{ once: true }` support so we\n      // have to do it manually.\n      if (flags.once) {\n        emitter.removeEventListener(name, wrapListener);\n      }\n      listener(arg);\n    });\n  } else {\n    throw new TypeError('The \"emitter\" argument must be of type EventEmitter. Received type ' + typeof emitter);\n  }\n}\n","/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */\nexports.read = function (buffer, offset, isLE, mLen, nBytes) {\n  var e, m\n  var eLen = (nBytes * 8) - mLen - 1\n  var eMax = (1 << eLen) - 1\n  var eBias = eMax >> 1\n  var nBits = -7\n  var i = isLE ? (nBytes - 1) : 0\n  var d = isLE ? -1 : 1\n  var s = buffer[offset + i]\n\n  i += d\n\n  e = s & ((1 << (-nBits)) - 1)\n  s >>= (-nBits)\n  nBits += eLen\n  for (; nBits > 0; e = (e * 256) + buffer[offset + i], i += d, nBits -= 8) {}\n\n  m = e & ((1 << (-nBits)) - 1)\n  e >>= (-nBits)\n  nBits += mLen\n  for (; nBits > 0; m = (m * 256) + buffer[offset + i], i += d, nBits -= 8) {}\n\n  if (e === 0) {\n    e = 1 - eBias\n  } else if (e === eMax) {\n    return m ? NaN : ((s ? -1 : 1) * Infinity)\n  } else {\n    m = m + Math.pow(2, mLen)\n    e = e - eBias\n  }\n  return (s ? -1 : 1) * m * Math.pow(2, e - mLen)\n}\n\nexports.write = function (buffer, value, offset, isLE, mLen, nBytes) {\n  var e, m, c\n  var eLen = (nBytes * 8) - mLen - 1\n  var eMax = (1 << eLen) - 1\n  var eBias = eMax >> 1\n  var rt = (mLen === 23 ? Math.pow(2, -24) - Math.pow(2, -77) : 0)\n  var i = isLE ? 0 : (nBytes - 1)\n  var d = isLE ? 1 : -1\n  var s = value < 0 || (value === 0 && 1 / value < 0) ? 1 : 0\n\n  value = Math.abs(value)\n\n  if (isNaN(value) || value === Infinity) {\n    m = isNaN(value) ? 1 : 0\n    e = eMax\n  } else {\n    e = Math.floor(Math.log(value) / Math.LN2)\n    if (value * (c = Math.pow(2, -e)) < 1) {\n      e--\n      c *= 2\n    }\n    if (e + eBias >= 1) {\n      value += rt / c\n    } else {\n      value += rt * Math.pow(2, 1 - eBias)\n    }\n    if (value * c >= 2) {\n      e++\n      c /= 2\n    }\n\n    if (e + eBias >= eMax) {\n      m = 0\n      e = eMax\n    } else if (e + eBias >= 1) {\n      m = ((value * c) - 1) * Math.pow(2, mLen)\n      e = e + eBias\n    } else {\n      m = value * Math.pow(2, eBias - 1) * Math.pow(2, mLen)\n      e = 0\n    }\n  }\n\n  for (; mLen >= 8; buffer[offset + i] = m & 0xff, i += d, m /= 256, mLen -= 8) {}\n\n  e = (e << mLen) | m\n  eLen += mLen\n  for (; eLen > 0; buffer[offset + i] = e & 0xff, i += d, e /= 256, eLen -= 8) {}\n\n  buffer[offset + i - d] |= s * 128\n}\n","if (typeof Object.create === 'function') {\n  // implementation from standard node.js 'util' module\n  module.exports = function inherits(ctor, superCtor) {\n    if (superCtor) {\n      ctor.super_ = superCtor\n      ctor.prototype = Object.create(superCtor.prototype, {\n        constructor: {\n          value: ctor,\n          enumerable: false,\n          writable: true,\n          configurable: true\n        }\n      })\n    }\n  };\n} else {\n  // old school shim for old browsers\n  module.exports = function inherits(ctor, superCtor) {\n    if (superCtor) {\n      ctor.super_ = superCtor\n      var TempCtor = function () {}\n      TempCtor.prototype = superCtor.prototype\n      ctor.prototype = new TempCtor()\n      ctor.prototype.constructor = ctor\n    }\n  }\n}\n","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = HtmlParser;\n\nvar _htmlparser = require('htmlparser2');\n\nvar _htmlparser2 = _interopRequireDefault(_htmlparser);\n\nvar _processNodes = require('./processNodes');\n\nvar _processNodes2 = _interopRequireDefault(_processNodes);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/**\n * Parses a HTML string and returns a list of React components generated from it\n *\n * @param {String} html The HTML to convert into React component\n * @param {Object} options Options to pass\n * @returns {Array} List of top level React elements\n */\nfunction HtmlParser(html) {\n  var _ref = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},\n      _ref$decodeEntities = _ref.decodeEntities,\n      decodeEntities = _ref$decodeEntities === undefined ? true : _ref$decodeEntities,\n      transform = _ref.transform,\n      _ref$preprocessNodes = _ref.preprocessNodes,\n      preprocessNodes = _ref$preprocessNodes === undefined ? function (nodes) {\n    return nodes;\n  } : _ref$preprocessNodes;\n\n  var nodes = preprocessNodes(_htmlparser2.default.parseDOM(html, { decodeEntities: decodeEntities }));\n  return (0, _processNodes2.default)(nodes, transform);\n}","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = convertNodeToElement;\n\nvar _elementTypes = require('./elementTypes');\n\nvar _elementTypes2 = _interopRequireDefault(_elementTypes);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/**\n * Converts a htmlparser2 node to a React element\n *\n * @param {Object} node The htmlparser2 node to convert\n * @param {Number} index The index of the current node\n * @param {Function} transform Transform function to apply to children of the node\n * @returns {React.Element}\n */\nfunction convertNodeToElement(node, index, transform) {\n  return _elementTypes2.default[node.type](node, index, transform);\n}","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n/**\n * List of boolean attributes\n * These attributes should have their React attribute value set to be the same as their name\n * E.g. <input disabled> = <input disabled>\n *      <input disabled=\"\"> = <input disabled>\n *      <input disabled=\"disabled\"> = <input disabled>\n * @type {Array}\n */\nexports.default = ['allowfullScreen', 'async', 'autoplay', 'capture', 'checked', 'controls', 'default', 'defer', 'disabled', 'formnovalidate', 'hidden', 'loop', 'multiple', 'muted', 'novalidate', 'open', 'playsinline', 'readonly', 'required', 'reversed', 'scoped', 'seamless', 'selected', 'itemscope'];","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n/**\n * Mapping of standard HTML attributes to their React counterparts\n * List taken and reversed from react/src/renderers/dom/shared/HTMLDOMPropertyConfig.js\n * https://github.com/facebook/react/blob/c9c3c339b757682f1154f1c915eb55e6a8766933/src/renderers/dom/shared/HTMLDOMPropertyConfig.js\n * @type {Object}\n */\nexports.default = {\n  /**\n   * Standard Properties\n   */\n  accept: 'accept',\n  'accept-charset': 'acceptCharset',\n  accesskey: 'accessKey',\n  action: 'action',\n  allowfullscreen: 'allowFullScreen',\n  allowtransparency: 'allowTransparency',\n  alt: 'alt',\n  as: 'as',\n  async: 'async',\n  autocomplete: 'autoComplete',\n  autoplay: 'autoPlay',\n  capture: 'capture',\n  cellpadding: 'cellPadding',\n  cellspacing: 'cellSpacing',\n  charset: 'charSet',\n  challenge: 'challenge',\n  checked: 'checked',\n  cite: 'cite',\n  classid: 'classID',\n  class: 'className',\n  cols: 'cols',\n  colspan: 'colSpan',\n  content: 'content',\n  contenteditable: 'contentEditable',\n  contextmenu: 'contextMenu',\n  controls: 'controls',\n  controlsList: 'controlsList',\n  coords: 'coords',\n  crossorigin: 'crossOrigin',\n  data: 'data',\n  datetime: 'dateTime',\n  default: 'default',\n  defer: 'defer',\n  dir: 'dir',\n  disabled: 'disabled',\n  download: 'download',\n  draggable: 'draggable',\n  enctype: 'encType',\n  form: 'form',\n  formaction: 'formAction',\n  formenctype: 'formEncType',\n  formmethod: 'formMethod',\n  formnovalidate: 'formNoValidate',\n  formtarget: 'formTarget',\n  frameborder: 'frameBorder',\n  headers: 'headers',\n  height: 'height',\n  hidden: 'hidden',\n  high: 'high',\n  href: 'href',\n  hreflang: 'hrefLang',\n  for: 'htmlFor',\n  'http-equiv': 'httpEquiv',\n  icon: 'icon',\n  id: 'id',\n  inputmode: 'inputMode',\n  integrity: 'integrity',\n  is: 'is',\n  keyparams: 'keyParams',\n  keytype: 'keyType',\n  kind: 'kind',\n  label: 'label',\n  lang: 'lang',\n  list: 'list',\n  loop: 'loop',\n  low: 'low',\n  manifest: 'manifest',\n  marginheight: 'marginHeight',\n  marginwidth: 'marginWidth',\n  max: 'max',\n  maxlength: 'maxLength',\n  media: 'media',\n  mediagroup: 'mediaGroup',\n  method: 'method',\n  min: 'min',\n  minlength: 'minLength',\n  multiple: 'multiple',\n  muted: 'muted',\n  name: 'name',\n  nonce: 'nonce',\n  novalidate: 'noValidate',\n  open: 'open',\n  optimum: 'optimum',\n  pattern: 'pattern',\n  placeholder: 'placeholder',\n  playsinline: 'playsInline',\n  poster: 'poster',\n  preload: 'preload',\n  profile: 'profile',\n  radiogroup: 'radioGroup',\n  readonly: 'readOnly',\n  referrerpolicy: 'referrerPolicy',\n  rel: 'rel',\n  required: 'required',\n  reversed: 'reversed',\n  role: 'role',\n  rows: 'rows',\n  rowspan: 'rowSpan',\n  sandbox: 'sandbox',\n  scope: 'scope',\n  scoped: 'scoped',\n  scrolling: 'scrolling',\n  seamless: 'seamless',\n  selected: 'selected',\n  shape: 'shape',\n  size: 'size',\n  sizes: 'sizes',\n  slot: 'slot',\n  span: 'span',\n  spellcheck: 'spellCheck',\n  src: 'src',\n  srcdoc: 'srcDoc',\n  srclang: 'srcLang',\n  srcset: 'srcSet',\n  start: 'start',\n  step: 'step',\n  style: 'style',\n  summary: 'summary',\n  tabindex: 'tabIndex',\n  target: 'target',\n  title: 'title',\n  type: 'type',\n  usemap: 'useMap',\n  value: 'value',\n  width: 'width',\n  wmode: 'wmode',\n  wrap: 'wrap',\n  /**\n   * RDFa Properties\n   */\n  about: 'about',\n  datatype: 'datatype',\n  inlist: 'inlist',\n  prefix: 'prefix',\n  property: 'property',\n  resource: 'resource',\n  typeof: 'typeof',\n  vocab: 'vocab',\n  /**\n   * Non-standard Properties\n   */\n  autocapitalize: 'autoCapitalize',\n  autocorrect: 'autoCorrect',\n  autosave: 'autoSave',\n  color: 'color',\n  itemprop: 'itemProp',\n  itemscope: 'itemScope',\n  itemtype: 'itemType',\n  itemid: 'itemID',\n  itemref: 'itemRef',\n  results: 'results',\n  security: 'security',\n  unselectable: 'unselectable'\n};","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n/**\n * List of void elements\n * These elements are not allowed to have children\n * @type {Array}\n */\nexports.default = ['area', 'base', 'br', 'col', 'command', 'embed', 'hr', 'img', 'input', 'keygen', 'link', 'meta', 'param', 'source', 'track', 'wbr'];","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = StyleElementType;\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _generatePropsFromAttributes = require('../utils/generatePropsFromAttributes');\n\nvar _generatePropsFromAttributes2 = _interopRequireDefault(_generatePropsFromAttributes);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/**\n * Converts a <style> element to a React element\n *\n * @param {Object} node The style node\n * @param {String} index The index of the React element relative to it's parent\n * @returns {React.Element} The React style element\n */\nfunction StyleElementType(node, index) {\n\n  // The style element only ever has a single child which is the styles so try and find this to add as\n  // a child to the style element that will be created\n  var styles = void 0;\n  if (node.children.length > 0) {\n    styles = node.children[0].data;\n  }\n\n  // generate props\n  var props = (0, _generatePropsFromAttributes2.default)(node.attribs, index);\n\n  // create and return the element\n  return _react2.default.createElement('style', props, styles);\n}","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = TagElementType;\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _processNodes = require('../processNodes');\n\nvar _processNodes2 = _interopRequireDefault(_processNodes);\n\nvar _generatePropsFromAttributes = require('../utils/generatePropsFromAttributes');\n\nvar _generatePropsFromAttributes2 = _interopRequireDefault(_generatePropsFromAttributes);\n\nvar _VoidElements = require('../dom/elements/VoidElements');\n\nvar _VoidElements2 = _interopRequireDefault(_VoidElements);\n\nvar _isValidTagOrAttributeName = require('../utils/isValidTagOrAttributeName');\n\nvar _isValidTagOrAttributeName2 = _interopRequireDefault(_isValidTagOrAttributeName);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/**\n * Converts any element (excluding style - see StyleElementType - and script) to a react element.\n *\n * @param {Object} node The tag node\n * @param {String} index The index of the React element relative to it's parent\n * @param {Function} transform The transform function to apply to all children\n * @returns {React.Element} The React tag element\n */\nfunction TagElementType(node, index, transform) {\n\n  var tagName = node.name;\n\n  // validate tag name\n  if (!(0, _isValidTagOrAttributeName2.default)(tagName)) {\n    return null;\n  }\n\n  // generate props\n  var props = (0, _generatePropsFromAttributes2.default)(node.attribs, index);\n\n  // If the node is not a void element and has children then process them\n  var children = null;\n  if (_VoidElements2.default.indexOf(tagName) === -1) {\n    children = (0, _processNodes2.default)(node.children, transform);\n  }\n\n  // create and return the element\n  return _react2.default.createElement(tagName, props, children);\n}","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = TextElementType;\n/**\n * Converts a text node to a React text element\n *\n * @param {Object} node The text node\n * @returns {String} The text\n */\nfunction TextElementType(node) {\n\n  // React will accept plain text for rendering so just return the node data\n  return node.data;\n}","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = UnsupportedElementType;\n/**\n * Handles an unsupported element type by returning null so nothing is rendered\n * @returns {null}\n */\nfunction UnsupportedElementType() {\n\n  // do nothing because the element type is unsupported\n  // comment, directive, script, cdata, doctype are all currently unsupported\n  return null;\n}","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _ElementType$Text$Ele;\n\nvar _htmlparser = require('htmlparser2');\n\nvar _TextElementType = require('./TextElementType');\n\nvar _TextElementType2 = _interopRequireDefault(_TextElementType);\n\nvar _TagElementType = require('./TagElementType');\n\nvar _TagElementType2 = _interopRequireDefault(_TagElementType);\n\nvar _StyleElementType = require('./StyleElementType');\n\nvar _StyleElementType2 = _interopRequireDefault(_StyleElementType);\n\nvar _UnsupportedElementType = require('./UnsupportedElementType');\n\nvar _UnsupportedElementType2 = _interopRequireDefault(_UnsupportedElementType);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; } /*\n                                                                                                                                                                                                                   * Map each htmlparser2 element type to a function which will convert that element type to a React element\n                                                                                                                                                                                                                   * Not all of the element types are supported so the UnsupportedElementType is used for them which will not return any\n                                                                                                                                                                                                                   * value\n                                                                                                                                                                                                                   */\n\nexports.default = (_ElementType$Text$Ele = {}, _defineProperty(_ElementType$Text$Ele, _htmlparser.ElementType.Text, _TextElementType2.default), _defineProperty(_ElementType$Text$Ele, _htmlparser.ElementType.Tag, _TagElementType2.default), _defineProperty(_ElementType$Text$Ele, _htmlparser.ElementType.Style, _StyleElementType2.default), _defineProperty(_ElementType$Text$Ele, _htmlparser.ElementType.Directive, _UnsupportedElementType2.default), _defineProperty(_ElementType$Text$Ele, _htmlparser.ElementType.Comment, _UnsupportedElementType2.default), _defineProperty(_ElementType$Text$Ele, _htmlparser.ElementType.Script, _UnsupportedElementType2.default), _defineProperty(_ElementType$Text$Ele, _htmlparser.ElementType.CDATA, _UnsupportedElementType2.default), _defineProperty(_ElementType$Text$Ele, _htmlparser.ElementType.Doctype, _UnsupportedElementType2.default), _ElementType$Text$Ele);","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.htmlparser2 = exports.convertNodeToElement = exports.processNodes = undefined;\n\nvar _processNodes = require('./processNodes');\n\nObject.defineProperty(exports, 'processNodes', {\n  enumerable: true,\n  get: function get() {\n    return _interopRequireDefault(_processNodes).default;\n  }\n});\n\nvar _convertNodeToElement = require('./convertNodeToElement');\n\nObject.defineProperty(exports, 'convertNodeToElement', {\n  enumerable: true,\n  get: function get() {\n    return _interopRequireDefault(_convertNodeToElement).default;\n  }\n});\n\nvar _htmlparser = require('htmlparser2');\n\nObject.defineProperty(exports, 'htmlparser2', {\n  enumerable: true,\n  get: function get() {\n    return _interopRequireDefault(_htmlparser).default;\n  }\n});\n\nvar _HtmlParser = require('./HtmlParser');\n\nvar _HtmlParser2 = _interopRequireDefault(_HtmlParser);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = _HtmlParser2.default;","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = processNodes;\n\nvar _isEmptyTextNode = require('./utils/isEmptyTextNode');\n\nvar _isEmptyTextNode2 = _interopRequireDefault(_isEmptyTextNode);\n\nvar _convertNodeToElement = require('./convertNodeToElement');\n\nvar _convertNodeToElement2 = _interopRequireDefault(_convertNodeToElement);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/**\n * Processes the nodes generated by htmlparser2 and convert them all into React elements\n *\n * @param {Object[]} nodes List of nodes to process\n * @param {Function} transform Transform function to optionally apply to nodes\n * @returns {React.Element[]} The list of processed React elements\n */\nfunction processNodes(nodes, transform) {\n\n  return nodes.filter(function (node) {\n    return !(0, _isEmptyTextNode2.default)(node);\n  }).map(function (node, index) {\n\n    // return the result of the transform function if applicable\n    var transformed = void 0;\n    if (typeof transform === 'function') {\n      transformed = transform(node, index);\n      if (transformed === null || !!transformed) {\n        return transformed;\n      }\n    }\n\n    // otherwise convert the node as standard\n    return (0, _convertNodeToElement2.default)(node, index, transform);\n  });\n}","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nexports.default = generatePropsFromAttributes;\n\nvar _htmlAttributesToReact = require('./htmlAttributesToReact');\n\nvar _htmlAttributesToReact2 = _interopRequireDefault(_htmlAttributesToReact);\n\nvar _inlineStyleToObject = require('./inlineStyleToObject');\n\nvar _inlineStyleToObject2 = _interopRequireDefault(_inlineStyleToObject);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/**\n * Generates props for a React element from an object of HTML attributes\n *\n * @param {Object} attributes The HTML attributes\n * @param {String} key The key to give the react element\n */\nfunction generatePropsFromAttributes(attributes, key) {\n\n  // generate props\n  var props = _extends({}, (0, _htmlAttributesToReact2.default)(attributes), { key: key });\n\n  // if there is an inline/string style prop then convert it to a React style object\n  // otherwise, it is invalid and omitted\n  if (typeof props.style === 'string' || props.style instanceof String) {\n    props.style = (0, _inlineStyleToObject2.default)(props.style);\n  } else {\n    delete props.style;\n  }\n\n  return props;\n}","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = htmlAttributesToReact;\n\nvar _BooleanAttributes = require('../dom/attributes/BooleanAttributes');\n\nvar _BooleanAttributes2 = _interopRequireDefault(_BooleanAttributes);\n\nvar _ReactAttributes = require('../dom/attributes/ReactAttributes');\n\nvar _ReactAttributes2 = _interopRequireDefault(_ReactAttributes);\n\nvar _isValidTagOrAttributeName = require('./isValidTagOrAttributeName');\n\nvar _isValidTagOrAttributeName2 = _interopRequireDefault(_isValidTagOrAttributeName);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/**\n * Returns the parsed attribute value taking into account things like boolean attributes\n *\n * @param {String} attribute The name of the attribute\n * @param {*} value The value of the attribute from the HTML\n * @returns {*} The parsed attribute value\n */\nvar getParsedAttributeValue = function getParsedAttributeValue(attribute, value) {\n\n  // if the attribute if a boolean then it's value should be the same as it's name\n  // e.g. disabled=\"disabled\"\n  var lowerBooleanAttributes = _BooleanAttributes2.default.map(function (attr) {\n    return attr.toLowerCase();\n  });\n  if (lowerBooleanAttributes.indexOf(attribute.toLowerCase()) >= 0) {\n    value = attribute;\n  }\n\n  return value;\n};\n\n/**\n * Takes an object of standard HTML property names and converts them to their React counterpart. If the react\n * version does not exist for an attribute then just use it as it is\n *\n * @param {Object} attributes The HTML attributes to convert\n * @returns {Object} The React attributes\n */\nfunction htmlAttributesToReact(attributes) {\n\n  return Object.keys(attributes).filter(function (attr) {\n    return (0, _isValidTagOrAttributeName2.default)(attr);\n  }).reduce(function (mappedAttributes, attribute) {\n\n    // lowercase the attribute name and find it in the react attribute map\n    var lowerCaseAttribute = attribute.toLowerCase();\n\n    // format the attribute name\n    var name = _ReactAttributes2.default[lowerCaseAttribute] || lowerCaseAttribute;\n\n    // add the parsed attribute value to the mapped attributes\n    mappedAttributes[name] = getParsedAttributeValue(name, attributes[attribute]);\n\n    return mappedAttributes;\n  }, {});\n}","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _slicedToArray = function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"]) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); } }; }();\n\nexports.default = InlineStyleToObject;\n/**\n * Converts an inline style string into an object of React style properties\n *\n * @param {String} inlineStyle='' The inline style to convert\n * @returns {Object} The converted style\n */\nfunction InlineStyleToObject() {\n  var inlineStyle = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : '';\n\n\n  // just return empty object if the inlineStyle is empty\n  if (inlineStyle === '') {\n    return {};\n  }\n\n  return inlineStyle.split(';').reduce(function (styleObject, stylePropertyValue) {\n\n    // extract the style property name and value\n    var _stylePropertyValue$s = stylePropertyValue.split(/^([^:]+):/).filter(function (val, i) {\n      return i > 0;\n    }).map(function (item) {\n      return item.trim().toLowerCase();\n    }),\n        _stylePropertyValue$s2 = _slicedToArray(_stylePropertyValue$s, 2),\n        property = _stylePropertyValue$s2[0],\n        value = _stylePropertyValue$s2[1];\n\n    // if there is no value (i.e. no : in the style) then ignore it\n\n\n    if (value === undefined) {\n      return styleObject;\n    }\n\n    // convert the property name into the correct React format\n    // remove all hyphens and convert the letter immediately after each hyphen to upper case\n    // additionally don't uppercase any -ms- prefix\n    // e.g. -ms-style-property = msStyleProperty\n    //      -webkit-style-property = WebkitStyleProperty\n    property = property.replace(/^-ms-/, 'ms-').replace(/-(.)/g, function (_, character) {\n      return character.toUpperCase();\n    });\n\n    // add the new style property and value to the style object\n    styleObject[property] = value;\n\n    return styleObject;\n  }, {});\n}","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = isEmptyTextNode;\n/**\n * Tests a htmlparser2 node and returns whether is it a text node at the start and end of the line containing only\n * white space. This allows these node types to be excluded from the rendering because they are unnecessary.\n *\n * @param {Object} node The element object as created by htmlparser2\n * @returns {boolean} Whether the node is an empty text node\n */\nfunction isEmptyTextNode(node) {\n  return node.type === 'text' && /\\r?\\n/.test(node.data) && node.data.trim() === '';\n}","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = isValidTagOrAttributeName;\nvar VALID_TAG_REGEX = /^[a-zA-Z][a-zA-Z:_\\.\\-\\d]*$/;\n\nvar nameCache = {};\n\nfunction isValidTagOrAttributeName(tagName) {\n  if (!nameCache.hasOwnProperty(tagName)) {\n    nameCache[tagName] = VALID_TAG_REGEX.test(tagName);\n  }\n  return nameCache[tagName];\n}","/*\n  Module dependencies\n*/\nvar ElementType = require('domelementtype');\nvar entities = require('entities');\n\n/* mixed-case SVG and MathML tags & attributes\n   recognized by the HTML parser, see\n   https://html.spec.whatwg.org/multipage/parsing.html#parsing-main-inforeign\n*/\nvar foreignNames = require('./foreignNames.json');\nforeignNames.elementNames.__proto__ = null; /* use as a simple dictionary */\nforeignNames.attributeNames.__proto__ = null;\n\nvar unencodedElements = {\n  __proto__: null,\n  style: true,\n  script: true,\n  xmp: true,\n  iframe: true,\n  noembed: true,\n  noframes: true,\n  plaintext: true,\n  noscript: true\n};\n\n/*\n  Format attributes\n*/\nfunction formatAttrs(attributes, opts) {\n  if (!attributes) return;\n\n  var output = '';\n  var value;\n\n  // Loop through the attributes\n  for (var key in attributes) {\n    value = attributes[key];\n    if (output) {\n      output += ' ';\n    }\n\n    if (opts.xmlMode === 'foreign') {\n      /* fix up mixed-case attribute names */\n      key = foreignNames.attributeNames[key] || key;\n    }\n    output += key;\n    if ((value !== null && value !== '') || opts.xmlMode) {\n      output +=\n        '=\"' +\n        (opts.decodeEntities\n          ? entities.encodeXML(value)\n          : value.replace(/\\\"/g, '&quot;')) +\n        '\"';\n    }\n  }\n\n  return output;\n}\n\n/*\n  Self-enclosing tags (stolen from node-htmlparser)\n*/\nvar singleTag = {\n  __proto__: null,\n  area: true,\n  base: true,\n  basefont: true,\n  br: true,\n  col: true,\n  command: true,\n  embed: true,\n  frame: true,\n  hr: true,\n  img: true,\n  input: true,\n  isindex: true,\n  keygen: true,\n  link: true,\n  meta: true,\n  param: true,\n  source: true,\n  track: true,\n  wbr: true\n};\n\nvar render = (module.exports = function(dom, opts) {\n  if (!Array.isArray(dom) && !dom.cheerio) dom = [dom];\n  opts = opts || {};\n\n  var output = '';\n\n  for (var i = 0; i < dom.length; i++) {\n    var elem = dom[i];\n\n    if (elem.type === 'root') output += render(elem.children, opts);\n    else if (ElementType.isTag(elem)) output += renderTag(elem, opts);\n    else if (elem.type === ElementType.Directive)\n      output += renderDirective(elem);\n    else if (elem.type === ElementType.Comment) output += renderComment(elem);\n    else if (elem.type === ElementType.CDATA) output += renderCdata(elem);\n    else output += renderText(elem, opts);\n  }\n\n  return output;\n});\n\nvar foreignModeIntegrationPoints = [\n  'mi',\n  'mo',\n  'mn',\n  'ms',\n  'mtext',\n  'annotation-xml',\n  'foreignObject',\n  'desc',\n  'title'\n];\n\nfunction renderTag(elem, opts) {\n  // Handle SVG / MathML in HTML\n  if (opts.xmlMode === 'foreign') {\n    /* fix up mixed-case element names */\n    elem.name = foreignNames.elementNames[elem.name] || elem.name;\n    /* exit foreign mode at integration points */\n    if (\n      elem.parent &&\n      foreignModeIntegrationPoints.indexOf(elem.parent.name) >= 0\n    )\n      opts = Object.assign({}, opts, { xmlMode: false });\n  }\n  if (!opts.xmlMode && ['svg', 'math'].indexOf(elem.name) >= 0) {\n    opts = Object.assign({}, opts, { xmlMode: 'foreign' });\n  }\n\n  var tag = '<' + elem.name;\n  var attribs = formatAttrs(elem.attribs, opts);\n\n  if (attribs) {\n    tag += ' ' + attribs;\n  }\n\n  if (opts.xmlMode && (!elem.children || elem.children.length === 0)) {\n    tag += '/>';\n  } else {\n    tag += '>';\n    if (elem.children) {\n      tag += render(elem.children, opts);\n    }\n\n    if (!singleTag[elem.name] || opts.xmlMode) {\n      tag += '</' + elem.name + '>';\n    }\n  }\n\n  return tag;\n}\n\nfunction renderDirective(elem) {\n  return '<' + elem.data + '>';\n}\n\nfunction renderText(elem, opts) {\n  var data = elem.data || '';\n\n  // if entities weren't decoded, no need to encode them back\n  if (\n    opts.decodeEntities &&\n    !(elem.parent && elem.parent.name in unencodedElements)\n  ) {\n    data = entities.encodeXML(data);\n  }\n\n  return data;\n}\n\nfunction renderCdata(elem) {\n  return '<![CDATA[' + elem.children[0].data + ']]>';\n}\n\nfunction renderComment(elem) {\n  return '<!--' + elem.data + '-->';\n}\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Doctype = exports.CDATA = exports.Tag = exports.Style = exports.Script = exports.Comment = exports.Directive = exports.Text = exports.Root = exports.isTag = exports.ElementType = void 0;\n/** Types of elements found in htmlparser2's DOM */\nvar ElementType;\n(function (ElementType) {\n    /** Type for the root element of a document */\n    ElementType[\"Root\"] = \"root\";\n    /** Type for Text */\n    ElementType[\"Text\"] = \"text\";\n    /** Type for <? ... ?> */\n    ElementType[\"Directive\"] = \"directive\";\n    /** Type for <!-- ... --> */\n    ElementType[\"Comment\"] = \"comment\";\n    /** Type for <script> tags */\n    ElementType[\"Script\"] = \"script\";\n    /** Type for <style> tags */\n    ElementType[\"Style\"] = \"style\";\n    /** Type for Any tag */\n    ElementType[\"Tag\"] = \"tag\";\n    /** Type for <![CDATA[ ... ]]> */\n    ElementType[\"CDATA\"] = \"cdata\";\n    /** Type for <!doctype ...> */\n    ElementType[\"Doctype\"] = \"doctype\";\n})(ElementType = exports.ElementType || (exports.ElementType = {}));\n/**\n * Tests whether an element is a tag or not.\n *\n * @param elem Element to test\n */\nfunction isTag(elem) {\n    return (elem.type === ElementType.Tag ||\n        elem.type === ElementType.Script ||\n        elem.type === ElementType.Style);\n}\nexports.isTag = isTag;\n// Exports for backwards compatibility\n/** Type for the root element of a document */\nexports.Root = ElementType.Root;\n/** Type for Text */\nexports.Text = ElementType.Text;\n/** Type for <? ... ?> */\nexports.Directive = ElementType.Directive;\n/** Type for <!-- ... --> */\nexports.Comment = ElementType.Comment;\n/** Type for <script> tags */\nexports.Script = ElementType.Script;\n/** Type for <style> tags */\nexports.Style = ElementType.Style;\n/** Type for Any tag */\nexports.Tag = ElementType.Tag;\n/** Type for <![CDATA[ ... ]]> */\nexports.CDATA = ElementType.CDATA;\n/** Type for <!doctype ...> */\nexports.Doctype = ElementType.Doctype;\n","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.decodeHTML = exports.decodeHTMLStrict = exports.decodeXML = void 0;\nvar entities_json_1 = __importDefault(require(\"./maps/entities.json\"));\nvar legacy_json_1 = __importDefault(require(\"./maps/legacy.json\"));\nvar xml_json_1 = __importDefault(require(\"./maps/xml.json\"));\nvar decode_codepoint_1 = __importDefault(require(\"./decode_codepoint\"));\nvar strictEntityRe = /&(?:[a-zA-Z0-9]+|#[xX][\\da-fA-F]+|#\\d+);/g;\nexports.decodeXML = getStrictDecoder(xml_json_1.default);\nexports.decodeHTMLStrict = getStrictDecoder(entities_json_1.default);\nfunction getStrictDecoder(map) {\n    var replace = getReplacer(map);\n    return function (str) { return String(str).replace(strictEntityRe, replace); };\n}\nvar sorter = function (a, b) { return (a < b ? 1 : -1); };\nexports.decodeHTML = (function () {\n    var legacy = Object.keys(legacy_json_1.default).sort(sorter);\n    var keys = Object.keys(entities_json_1.default).sort(sorter);\n    for (var i = 0, j = 0; i < keys.length; i++) {\n        if (legacy[j] === keys[i]) {\n            keys[i] += \";?\";\n            j++;\n        }\n        else {\n            keys[i] += \";\";\n        }\n    }\n    var re = new RegExp(\"&(?:\" + keys.join(\"|\") + \"|#[xX][\\\\da-fA-F]+;?|#\\\\d+;?)\", \"g\");\n    var replace = getReplacer(entities_json_1.default);\n    function replacer(str) {\n        if (str.substr(-1) !== \";\")\n            str += \";\";\n        return replace(str);\n    }\n    // TODO consider creating a merged map\n    return function (str) { return String(str).replace(re, replacer); };\n})();\nfunction getReplacer(map) {\n    return function replace(str) {\n        if (str.charAt(1) === \"#\") {\n            var secondChar = str.charAt(2);\n            if (secondChar === \"X\" || secondChar === \"x\") {\n                return decode_codepoint_1.default(parseInt(str.substr(3), 16));\n            }\n            return decode_codepoint_1.default(parseInt(str.substr(2), 10));\n        }\n        // eslint-disable-next-line @typescript-eslint/prefer-nullish-coalescing\n        return map[str.slice(1, -1)] || str;\n    };\n}\n","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar decode_json_1 = __importDefault(require(\"./maps/decode.json\"));\n// Adapted from https://github.com/mathiasbynens/he/blob/master/src/he.js#L94-L119\nvar fromCodePoint = \n// eslint-disable-next-line @typescript-eslint/no-unnecessary-condition\nString.fromCodePoint ||\n    function (codePoint) {\n        var output = \"\";\n        if (codePoint > 0xffff) {\n            codePoint -= 0x10000;\n            output += String.fromCharCode(((codePoint >>> 10) & 0x3ff) | 0xd800);\n            codePoint = 0xdc00 | (codePoint & 0x3ff);\n        }\n        output += String.fromCharCode(codePoint);\n        return output;\n    };\nfunction decodeCodePoint(codePoint) {\n    if ((codePoint >= 0xd800 && codePoint <= 0xdfff) || codePoint > 0x10ffff) {\n        return \"\\uFFFD\";\n    }\n    if (codePoint in decode_json_1.default) {\n        codePoint = decode_json_1.default[codePoint];\n    }\n    return fromCodePoint(codePoint);\n}\nexports.default = decodeCodePoint;\n","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.escapeUTF8 = exports.escape = exports.encodeNonAsciiHTML = exports.encodeHTML = exports.encodeXML = void 0;\nvar xml_json_1 = __importDefault(require(\"./maps/xml.json\"));\nvar inverseXML = getInverseObj(xml_json_1.default);\nvar xmlReplacer = getInverseReplacer(inverseXML);\n/**\n * Encodes all non-ASCII characters, as well as characters not valid in XML\n * documents using XML entities.\n *\n * If a character has no equivalent entity, a\n * numeric hexadecimal reference (eg. `&#xfc;`) will be used.\n */\nexports.encodeXML = getASCIIEncoder(inverseXML);\nvar entities_json_1 = __importDefault(require(\"./maps/entities.json\"));\nvar inverseHTML = getInverseObj(entities_json_1.default);\nvar htmlReplacer = getInverseReplacer(inverseHTML);\n/**\n * Encodes all entities and non-ASCII characters in the input.\n *\n * This includes characters that are valid ASCII characters in HTML documents.\n * For example `#` will be encoded as `&num;`. To get a more compact output,\n * consider using the `encodeNonAsciiHTML` function.\n *\n * If a character has no equivalent entity, a\n * numeric hexadecimal reference (eg. `&#xfc;`) will be used.\n */\nexports.encodeHTML = getInverse(inverseHTML, htmlReplacer);\n/**\n * Encodes all non-ASCII characters, as well as characters not valid in HTML\n * documents using HTML entities.\n *\n * If a character has no equivalent entity, a\n * numeric hexadecimal reference (eg. `&#xfc;`) will be used.\n */\nexports.encodeNonAsciiHTML = getASCIIEncoder(inverseHTML);\nfunction getInverseObj(obj) {\n    return Object.keys(obj)\n        .sort()\n        .reduce(function (inverse, name) {\n        inverse[obj[name]] = \"&\" + name + \";\";\n        return inverse;\n    }, {});\n}\nfunction getInverseReplacer(inverse) {\n    var single = [];\n    var multiple = [];\n    for (var _i = 0, _a = Object.keys(inverse); _i < _a.length; _i++) {\n        var k = _a[_i];\n        if (k.length === 1) {\n            // Add value to single array\n            single.push(\"\\\\\" + k);\n        }\n        else {\n            // Add value to multiple array\n            multiple.push(k);\n        }\n    }\n    // Add ranges to single characters.\n    single.sort();\n    for (var start = 0; start < single.length - 1; start++) {\n        // Find the end of a run of characters\n        var end = start;\n        while (end < single.length - 1 &&\n            single[end].charCodeAt(1) + 1 === single[end + 1].charCodeAt(1)) {\n            end += 1;\n        }\n        var count = 1 + end - start;\n        // We want to replace at least three characters\n        if (count < 3)\n            continue;\n        single.splice(start, count, single[start] + \"-\" + single[end]);\n    }\n    multiple.unshift(\"[\" + single.join(\"\") + \"]\");\n    return new RegExp(multiple.join(\"|\"), \"g\");\n}\n// /[^\\0-\\x7F]/gu\nvar reNonASCII = /(?:[\\x80-\\uD7FF\\uE000-\\uFFFF]|[\\uD800-\\uDBFF][\\uDC00-\\uDFFF]|[\\uD800-\\uDBFF](?![\\uDC00-\\uDFFF])|(?:[^\\uD800-\\uDBFF]|^)[\\uDC00-\\uDFFF])/g;\nvar getCodePoint = \n// eslint-disable-next-line @typescript-eslint/no-unnecessary-condition\nString.prototype.codePointAt != null\n    ? // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n        function (str) { return str.codePointAt(0); }\n    : // http://mathiasbynens.be/notes/javascript-encoding#surrogate-formulae\n        function (c) {\n            return (c.charCodeAt(0) - 0xd800) * 0x400 +\n                c.charCodeAt(1) -\n                0xdc00 +\n                0x10000;\n        };\nfunction singleCharReplacer(c) {\n    return \"&#x\" + (c.length > 1 ? getCodePoint(c) : c.charCodeAt(0))\n        .toString(16)\n        .toUpperCase() + \";\";\n}\nfunction getInverse(inverse, re) {\n    return function (data) {\n        return data\n            .replace(re, function (name) { return inverse[name]; })\n            .replace(reNonASCII, singleCharReplacer);\n    };\n}\nvar reEscapeChars = new RegExp(xmlReplacer.source + \"|\" + reNonASCII.source, \"g\");\n/**\n * Encodes all non-ASCII characters, as well as characters not valid in XML\n * documents using numeric hexadecimal reference (eg. `&#xfc;`).\n *\n * Have a look at `escapeUTF8` if you want a more concise output at the expense\n * of reduced transportability.\n *\n * @param data String to escape.\n */\nfunction escape(data) {\n    return data.replace(reEscapeChars, singleCharReplacer);\n}\nexports.escape = escape;\n/**\n * Encodes all characters not valid in XML documents using numeric hexadecimal\n * reference (eg. `&#xfc;`).\n *\n * Note that the output will be character-set dependent.\n *\n * @param data String to escape.\n */\nfunction escapeUTF8(data) {\n    return data.replace(xmlReplacer, singleCharReplacer);\n}\nexports.escapeUTF8 = escapeUTF8;\nfunction getASCIIEncoder(obj) {\n    return function (data) {\n        return data.replace(reEscapeChars, function (c) { return obj[c] || singleCharReplacer(c); });\n    };\n}\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.decodeXMLStrict = exports.decodeHTML5Strict = exports.decodeHTML4Strict = exports.decodeHTML5 = exports.decodeHTML4 = exports.decodeHTMLStrict = exports.decodeHTML = exports.decodeXML = exports.encodeHTML5 = exports.encodeHTML4 = exports.escapeUTF8 = exports.escape = exports.encodeNonAsciiHTML = exports.encodeHTML = exports.encodeXML = exports.encode = exports.decodeStrict = exports.decode = void 0;\nvar decode_1 = require(\"./decode\");\nvar encode_1 = require(\"./encode\");\n/**\n * Decodes a string with entities.\n *\n * @param data String to decode.\n * @param level Optional level to decode at. 0 = XML, 1 = HTML. Default is 0.\n * @deprecated Use `decodeXML` or `decodeHTML` directly.\n */\nfunction decode(data, level) {\n    return (!level || level <= 0 ? decode_1.decodeXML : decode_1.decodeHTML)(data);\n}\nexports.decode = decode;\n/**\n * Decodes a string with entities. Does not allow missing trailing semicolons for entities.\n *\n * @param data String to decode.\n * @param level Optional level to decode at. 0 = XML, 1 = HTML. Default is 0.\n * @deprecated Use `decodeHTMLStrict` or `decodeXML` directly.\n */\nfunction decodeStrict(data, level) {\n    return (!level || level <= 0 ? decode_1.decodeXML : decode_1.decodeHTMLStrict)(data);\n}\nexports.decodeStrict = decodeStrict;\n/**\n * Encodes a string with entities.\n *\n * @param data String to encode.\n * @param level Optional level to encode at. 0 = XML, 1 = HTML. Default is 0.\n * @deprecated Use `encodeHTML`, `encodeXML` or `encodeNonAsciiHTML` directly.\n */\nfunction encode(data, level) {\n    return (!level || level <= 0 ? encode_1.encodeXML : encode_1.encodeHTML)(data);\n}\nexports.encode = encode;\nvar encode_2 = require(\"./encode\");\nObject.defineProperty(exports, \"encodeXML\", { enumerable: true, get: function () { return encode_2.encodeXML; } });\nObject.defineProperty(exports, \"encodeHTML\", { enumerable: true, get: function () { return encode_2.encodeHTML; } });\nObject.defineProperty(exports, \"encodeNonAsciiHTML\", { enumerable: true, get: function () { return encode_2.encodeNonAsciiHTML; } });\nObject.defineProperty(exports, \"escape\", { enumerable: true, get: function () { return encode_2.escape; } });\nObject.defineProperty(exports, \"escapeUTF8\", { enumerable: true, get: function () { return encode_2.escapeUTF8; } });\n// Legacy aliases (deprecated)\nObject.defineProperty(exports, \"encodeHTML4\", { enumerable: true, get: function () { return encode_2.encodeHTML; } });\nObject.defineProperty(exports, \"encodeHTML5\", { enumerable: true, get: function () { return encode_2.encodeHTML; } });\nvar decode_2 = require(\"./decode\");\nObject.defineProperty(exports, \"decodeXML\", { enumerable: true, get: function () { return decode_2.decodeXML; } });\nObject.defineProperty(exports, \"decodeHTML\", { enumerable: true, get: function () { return decode_2.decodeHTML; } });\nObject.defineProperty(exports, \"decodeHTMLStrict\", { enumerable: true, get: function () { return decode_2.decodeHTMLStrict; } });\n// Legacy aliases (deprecated)\nObject.defineProperty(exports, \"decodeHTML4\", { enumerable: true, get: function () { return decode_2.decodeHTML; } });\nObject.defineProperty(exports, \"decodeHTML5\", { enumerable: true, get: function () { return decode_2.decodeHTML; } });\nObject.defineProperty(exports, \"decodeHTML4Strict\", { enumerable: true, get: function () { return decode_2.decodeHTMLStrict; } });\nObject.defineProperty(exports, \"decodeHTML5Strict\", { enumerable: true, get: function () { return decode_2.decodeHTMLStrict; } });\nObject.defineProperty(exports, \"decodeXMLStrict\", { enumerable: true, get: function () { return decode_2.decodeXML; } });\n","//Types of elements found in the DOM\nmodule.exports = {\n\tText: \"text\", //Text\n\tDirective: \"directive\", //<? ... ?>\n\tComment: \"comment\", //<!-- ... -->\n\tScript: \"script\", //<script> tags\n\tStyle: \"style\", //<style> tags\n\tTag: \"tag\", //Any tag\n\tCDATA: \"cdata\", //<![CDATA[ ... ]]>\n\tDoctype: \"doctype\",\n\n\tisTag: function(elem){\n\t\treturn elem.type === \"tag\" || elem.type === \"script\" || elem.type === \"style\";\n\t}\n};\n","var ElementType = require(\"domelementtype\");\n\nvar re_whitespace = /\\s+/g;\nvar NodePrototype = require(\"./lib/node\");\nvar ElementPrototype = require(\"./lib/element\");\n\nfunction DomHandler(callback, options, elementCB){\n\tif(typeof callback === \"object\"){\n\t\telementCB = options;\n\t\toptions = callback;\n\t\tcallback = null;\n\t} else if(typeof options === \"function\"){\n\t\telementCB = options;\n\t\toptions = defaultOpts;\n\t}\n\tthis._callback = callback;\n\tthis._options = options || defaultOpts;\n\tthis._elementCB = elementCB;\n\tthis.dom = [];\n\tthis._done = false;\n\tthis._tagStack = [];\n\tthis._parser = this._parser || null;\n}\n\n//default options\nvar defaultOpts = {\n\tnormalizeWhitespace: false, //Replace all whitespace with single spaces\n\twithStartIndices: false, //Add startIndex properties to nodes\n\twithEndIndices: false, //Add endIndex properties to nodes\n};\n\nDomHandler.prototype.onparserinit = function(parser){\n\tthis._parser = parser;\n};\n\n//Resets the handler back to starting state\nDomHandler.prototype.onreset = function(){\n\tDomHandler.call(this, this._callback, this._options, this._elementCB);\n};\n\n//Signals the handler that parsing is done\nDomHandler.prototype.onend = function(){\n\tif(this._done) return;\n\tthis._done = true;\n\tthis._parser = null;\n\tthis._handleCallback(null);\n};\n\nDomHandler.prototype._handleCallback =\nDomHandler.prototype.onerror = function(error){\n\tif(typeof this._callback === \"function\"){\n\t\tthis._callback(error, this.dom);\n\t} else {\n\t\tif(error) throw error;\n\t}\n};\n\nDomHandler.prototype.onclosetag = function(){\n\t//if(this._tagStack.pop().name !== name) this._handleCallback(Error(\"Tagname didn't match!\"));\n\t\n\tvar elem = this._tagStack.pop();\n\n\tif(this._options.withEndIndices && elem){\n\t\telem.endIndex = this._parser.endIndex;\n\t}\n\n\tif(this._elementCB) this._elementCB(elem);\n};\n\nDomHandler.prototype._createDomElement = function(properties){\n\tif (!this._options.withDomLvl1) return properties;\n\n\tvar element;\n\tif (properties.type === \"tag\") {\n\t\telement = Object.create(ElementPrototype);\n\t} else {\n\t\telement = Object.create(NodePrototype);\n\t}\n\n\tfor (var key in properties) {\n\t\tif (properties.hasOwnProperty(key)) {\n\t\t\telement[key] = properties[key];\n\t\t}\n\t}\n\n\treturn element;\n};\n\nDomHandler.prototype._addDomElement = function(element){\n\tvar parent = this._tagStack[this._tagStack.length - 1];\n\tvar siblings = parent ? parent.children : this.dom;\n\tvar previousSibling = siblings[siblings.length - 1];\n\n\telement.next = null;\n\n\tif(this._options.withStartIndices){\n\t\telement.startIndex = this._parser.startIndex;\n\t}\n\tif(this._options.withEndIndices){\n\t\telement.endIndex = this._parser.endIndex;\n\t}\n\n\tif(previousSibling){\n\t\telement.prev = previousSibling;\n\t\tpreviousSibling.next = element;\n\t} else {\n\t\telement.prev = null;\n\t}\n\n\tsiblings.push(element);\n\telement.parent = parent || null;\n};\n\nDomHandler.prototype.onopentag = function(name, attribs){\n\tvar properties = {\n\t\ttype: name === \"script\" ? ElementType.Script : name === \"style\" ? ElementType.Style : ElementType.Tag,\n\t\tname: name,\n\t\tattribs: attribs,\n\t\tchildren: []\n\t};\n\n\tvar element = this._createDomElement(properties);\n\n\tthis._addDomElement(element);\n\n\tthis._tagStack.push(element);\n};\n\nDomHandler.prototype.ontext = function(data){\n\t//the ignoreWhitespace is officially dropped, but for now,\n\t//it's an alias for normalizeWhitespace\n\tvar normalize = this._options.normalizeWhitespace || this._options.ignoreWhitespace;\n\n\tvar lastTag;\n\n\tif(!this._tagStack.length && this.dom.length && (lastTag = this.dom[this.dom.length-1]).type === ElementType.Text){\n\t\tif(normalize){\n\t\t\tlastTag.data = (lastTag.data + data).replace(re_whitespace, \" \");\n\t\t} else {\n\t\t\tlastTag.data += data;\n\t\t}\n\t} else {\n\t\tif(\n\t\t\tthis._tagStack.length &&\n\t\t\t(lastTag = this._tagStack[this._tagStack.length - 1]) &&\n\t\t\t(lastTag = lastTag.children[lastTag.children.length - 1]) &&\n\t\t\tlastTag.type === ElementType.Text\n\t\t){\n\t\t\tif(normalize){\n\t\t\t\tlastTag.data = (lastTag.data + data).replace(re_whitespace, \" \");\n\t\t\t} else {\n\t\t\t\tlastTag.data += data;\n\t\t\t}\n\t\t} else {\n\t\t\tif(normalize){\n\t\t\t\tdata = data.replace(re_whitespace, \" \");\n\t\t\t}\n\n\t\t\tvar element = this._createDomElement({\n\t\t\t\tdata: data,\n\t\t\t\ttype: ElementType.Text\n\t\t\t});\n\n\t\t\tthis._addDomElement(element);\n\t\t}\n\t}\n};\n\nDomHandler.prototype.oncomment = function(data){\n\tvar lastTag = this._tagStack[this._tagStack.length - 1];\n\n\tif(lastTag && lastTag.type === ElementType.Comment){\n\t\tlastTag.data += data;\n\t\treturn;\n\t}\n\n\tvar properties = {\n\t\tdata: data,\n\t\ttype: ElementType.Comment\n\t};\n\n\tvar element = this._createDomElement(properties);\n\n\tthis._addDomElement(element);\n\tthis._tagStack.push(element);\n};\n\nDomHandler.prototype.oncdatastart = function(){\n\tvar properties = {\n\t\tchildren: [{\n\t\t\tdata: \"\",\n\t\t\ttype: ElementType.Text\n\t\t}],\n\t\ttype: ElementType.CDATA\n\t};\n\n\tvar element = this._createDomElement(properties);\n\n\tthis._addDomElement(element);\n\tthis._tagStack.push(element);\n};\n\nDomHandler.prototype.oncommentend = DomHandler.prototype.oncdataend = function(){\n\tthis._tagStack.pop();\n};\n\nDomHandler.prototype.onprocessinginstruction = function(name, data){\n\tvar element = this._createDomElement({\n\t\tname: name,\n\t\tdata: data,\n\t\ttype: ElementType.Directive\n\t});\n\n\tthis._addDomElement(element);\n};\n\nmodule.exports = DomHandler;\n","// DOM-Level-1-compliant structure\nvar NodePrototype = require('./node');\nvar ElementPrototype = module.exports = Object.create(NodePrototype);\n\nvar domLvl1 = {\n\ttagName: \"name\"\n};\n\nObject.keys(domLvl1).forEach(function(key) {\n\tvar shorthand = domLvl1[key];\n\tObject.defineProperty(ElementPrototype, key, {\n\t\tget: function() {\n\t\t\treturn this[shorthand] || null;\n\t\t},\n\t\tset: function(val) {\n\t\t\tthis[shorthand] = val;\n\t\t\treturn val;\n\t\t}\n\t});\n});\n","// This object will be used as the prototype for Nodes when creating a\n// DOM-Level-1-compliant structure.\nvar NodePrototype = module.exports = {\n\tget firstChild() {\n\t\tvar children = this.children;\n\t\treturn children && children[0] || null;\n\t},\n\tget lastChild() {\n\t\tvar children = this.children;\n\t\treturn children && children[children.length - 1] || null;\n\t},\n\tget nodeType() {\n\t\treturn nodeTypes[this.type] || nodeTypes.element;\n\t}\n};\n\nvar domLvl1 = {\n\ttagName: \"name\",\n\tchildNodes: \"children\",\n\tparentNode: \"parent\",\n\tpreviousSibling: \"prev\",\n\tnextSibling: \"next\",\n\tnodeValue: \"data\"\n};\n\nvar nodeTypes = {\n\telement: 1,\n\ttext: 3,\n\tcdata: 4,\n\tcomment: 8\n};\n\nObject.keys(domLvl1).forEach(function(key) {\n\tvar shorthand = domLvl1[key];\n\tObject.defineProperty(NodePrototype, key, {\n\t\tget: function() {\n\t\t\treturn this[shorthand] || null;\n\t\t},\n\t\tset: function(val) {\n\t\t\tthis[shorthand] = val;\n\t\t\treturn val;\n\t\t}\n\t});\n});\n","var DomUtils = module.exports;\n\n[\n\trequire(\"./lib/stringify\"),\n\trequire(\"./lib/traversal\"),\n\trequire(\"./lib/manipulation\"),\n\trequire(\"./lib/querying\"),\n\trequire(\"./lib/legacy\"),\n\trequire(\"./lib/helpers\")\n].forEach(function(ext){\n\tObject.keys(ext).forEach(function(key){\n\t\tDomUtils[key] = ext[key].bind(DomUtils);\n\t});\n});\n","// removeSubsets\n// Given an array of nodes, remove any member that is contained by another.\nexports.removeSubsets = function(nodes) {\n\tvar idx = nodes.length, node, ancestor, replace;\n\n\t// Check if each node (or one of its ancestors) is already contained in the\n\t// array.\n\twhile (--idx > -1) {\n\t\tnode = ancestor = nodes[idx];\n\n\t\t// Temporarily remove the node under consideration\n\t\tnodes[idx] = null;\n\t\treplace = true;\n\n\t\twhile (ancestor) {\n\t\t\tif (nodes.indexOf(ancestor) > -1) {\n\t\t\t\treplace = false;\n\t\t\t\tnodes.splice(idx, 1);\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tancestor = ancestor.parent;\n\t\t}\n\n\t\t// If the node has been found to be unique, re-insert it.\n\t\tif (replace) {\n\t\t\tnodes[idx] = node;\n\t\t}\n\t}\n\n\treturn nodes;\n};\n\n// Source: http://dom.spec.whatwg.org/#dom-node-comparedocumentposition\nvar POSITION = {\n\tDISCONNECTED: 1,\n\tPRECEDING: 2,\n\tFOLLOWING: 4,\n\tCONTAINS: 8,\n\tCONTAINED_BY: 16\n};\n\n// Compare the position of one node against another node in any other document.\n// The return value is a bitmask with the following values:\n//\n// document order:\n// > There is an ordering, document order, defined on all the nodes in the\n// > document corresponding to the order in which the first character of the\n// > XML representation of each node occurs in the XML representation of the\n// > document after expansion of general entities. Thus, the document element\n// > node will be the first node. Element nodes occur before their children.\n// > Thus, document order orders element nodes in order of the occurrence of\n// > their start-tag in the XML (after expansion of entities). The attribute\n// > nodes of an element occur after the element and before its children. The\n// > relative order of attribute nodes is implementation-dependent./\n// Source:\n// http://www.w3.org/TR/DOM-Level-3-Core/glossary.html#dt-document-order\n//\n// @argument {Node} nodaA The first node to use in the comparison\n// @argument {Node} nodeB The second node to use in the comparison\n//\n// @return {Number} A bitmask describing the input nodes' relative position.\n//         See http://dom.spec.whatwg.org/#dom-node-comparedocumentposition for\n//         a description of these values.\nvar comparePos = exports.compareDocumentPosition = function(nodeA, nodeB) {\n\tvar aParents = [];\n\tvar bParents = [];\n\tvar current, sharedParent, siblings, aSibling, bSibling, idx;\n\n\tif (nodeA === nodeB) {\n\t\treturn 0;\n\t}\n\n\tcurrent = nodeA;\n\twhile (current) {\n\t\taParents.unshift(current);\n\t\tcurrent = current.parent;\n\t}\n\tcurrent = nodeB;\n\twhile (current) {\n\t\tbParents.unshift(current);\n\t\tcurrent = current.parent;\n\t}\n\n\tidx = 0;\n\twhile (aParents[idx] === bParents[idx]) {\n\t\tidx++;\n\t}\n\n\tif (idx === 0) {\n\t\treturn POSITION.DISCONNECTED;\n\t}\n\n\tsharedParent = aParents[idx - 1];\n\tsiblings = sharedParent.children;\n\taSibling = aParents[idx];\n\tbSibling = bParents[idx];\n\n\tif (siblings.indexOf(aSibling) > siblings.indexOf(bSibling)) {\n\t\tif (sharedParent === nodeB) {\n\t\t\treturn POSITION.FOLLOWING | POSITION.CONTAINED_BY;\n\t\t}\n\t\treturn POSITION.FOLLOWING;\n\t} else {\n\t\tif (sharedParent === nodeA) {\n\t\t\treturn POSITION.PRECEDING | POSITION.CONTAINS;\n\t\t}\n\t\treturn POSITION.PRECEDING;\n\t}\n};\n\n// Sort an array of nodes based on their relative position in the document and\n// remove any duplicate nodes. If the array contains nodes that do not belong\n// to the same document, sort order is unspecified.\n//\n// @argument {Array} nodes Array of DOM nodes\n//\n// @returns {Array} collection of unique nodes, sorted in document order\nexports.uniqueSort = function(nodes) {\n\tvar idx = nodes.length, node, position;\n\n\tnodes = nodes.slice();\n\n\twhile (--idx > -1) {\n\t\tnode = nodes[idx];\n\t\tposition = nodes.indexOf(node);\n\t\tif (position > -1 && position < idx) {\n\t\t\tnodes.splice(idx, 1);\n\t\t}\n\t}\n\tnodes.sort(function(a, b) {\n\t\tvar relative = comparePos(a, b);\n\t\tif (relative & POSITION.PRECEDING) {\n\t\t\treturn -1;\n\t\t} else if (relative & POSITION.FOLLOWING) {\n\t\t\treturn 1;\n\t\t}\n\t\treturn 0;\n\t});\n\n\treturn nodes;\n};\n","var ElementType = require(\"domelementtype\");\nvar isTag = exports.isTag = ElementType.isTag;\n\nexports.testElement = function(options, element){\n\tfor(var key in options){\n\t\tif(!options.hasOwnProperty(key));\n\t\telse if(key === \"tag_name\"){\n\t\t\tif(!isTag(element) || !options.tag_name(element.name)){\n\t\t\t\treturn false;\n\t\t\t}\n\t\t} else if(key === \"tag_type\"){\n\t\t\tif(!options.tag_type(element.type)) return false;\n\t\t} else if(key === \"tag_contains\"){\n\t\t\tif(isTag(element) || !options.tag_contains(element.data)){\n\t\t\t\treturn false;\n\t\t\t}\n\t\t} else if(!element.attribs || !options[key](element.attribs[key])){\n\t\t\treturn false;\n\t\t}\n\t}\n\treturn true;\n};\n\nvar Checks = {\n\ttag_name: function(name){\n\t\tif(typeof name === \"function\"){\n\t\t\treturn function(elem){ return isTag(elem) && name(elem.name); };\n\t\t} else if(name === \"*\"){\n\t\t\treturn isTag;\n\t\t} else {\n\t\t\treturn function(elem){ return isTag(elem) && elem.name === name; };\n\t\t}\n\t},\n\ttag_type: function(type){\n\t\tif(typeof type === \"function\"){\n\t\t\treturn function(elem){ return type(elem.type); };\n\t\t} else {\n\t\t\treturn function(elem){ return elem.type === type; };\n\t\t}\n\t},\n\ttag_contains: function(data){\n\t\tif(typeof data === \"function\"){\n\t\t\treturn function(elem){ return !isTag(elem) && data(elem.data); };\n\t\t} else {\n\t\t\treturn function(elem){ return !isTag(elem) && elem.data === data; };\n\t\t}\n\t}\n};\n\nfunction getAttribCheck(attrib, value){\n\tif(typeof value === \"function\"){\n\t\treturn function(elem){ return elem.attribs && value(elem.attribs[attrib]); };\n\t} else {\n\t\treturn function(elem){ return elem.attribs && elem.attribs[attrib] === value; };\n\t}\n}\n\nfunction combineFuncs(a, b){\n\treturn function(elem){\n\t\treturn a(elem) || b(elem);\n\t};\n}\n\nexports.getElements = function(options, element, recurse, limit){\n\tvar funcs = Object.keys(options).map(function(key){\n\t\tvar value = options[key];\n\t\treturn key in Checks ? Checks[key](value) : getAttribCheck(key, value);\n\t});\n\n\treturn funcs.length === 0 ? [] : this.filter(\n\t\tfuncs.reduce(combineFuncs),\n\t\telement, recurse, limit\n\t);\n};\n\nexports.getElementById = function(id, element, recurse){\n\tif(!Array.isArray(element)) element = [element];\n\treturn this.findOne(getAttribCheck(\"id\", id), element, recurse !== false);\n};\n\nexports.getElementsByTagName = function(name, element, recurse, limit){\n\treturn this.filter(Checks.tag_name(name), element, recurse, limit);\n};\n\nexports.getElementsByTagType = function(type, element, recurse, limit){\n\treturn this.filter(Checks.tag_type(type), element, recurse, limit);\n};\n","exports.removeElement = function(elem){\n\tif(elem.prev) elem.prev.next = elem.next;\n\tif(elem.next) elem.next.prev = elem.prev;\n\n\tif(elem.parent){\n\t\tvar childs = elem.parent.children;\n\t\tchilds.splice(childs.lastIndexOf(elem), 1);\n\t}\n};\n\nexports.replaceElement = function(elem, replacement){\n\tvar prev = replacement.prev = elem.prev;\n\tif(prev){\n\t\tprev.next = replacement;\n\t}\n\n\tvar next = replacement.next = elem.next;\n\tif(next){\n\t\tnext.prev = replacement;\n\t}\n\n\tvar parent = replacement.parent = elem.parent;\n\tif(parent){\n\t\tvar childs = parent.children;\n\t\tchilds[childs.lastIndexOf(elem)] = replacement;\n\t}\n};\n\nexports.appendChild = function(elem, child){\n\tchild.parent = elem;\n\n\tif(elem.children.push(child) !== 1){\n\t\tvar sibling = elem.children[elem.children.length - 2];\n\t\tsibling.next = child;\n\t\tchild.prev = sibling;\n\t\tchild.next = null;\n\t}\n};\n\nexports.append = function(elem, next){\n\tvar parent = elem.parent,\n\t\tcurrNext = elem.next;\n\n\tnext.next = currNext;\n\tnext.prev = elem;\n\telem.next = next;\n\tnext.parent = parent;\n\n\tif(currNext){\n\t\tcurrNext.prev = next;\n\t\tif(parent){\n\t\t\tvar childs = parent.children;\n\t\t\tchilds.splice(childs.lastIndexOf(currNext), 0, next);\n\t\t}\n\t} else if(parent){\n\t\tparent.children.push(next);\n\t}\n};\n\nexports.prepend = function(elem, prev){\n\tvar parent = elem.parent;\n\tif(parent){\n\t\tvar childs = parent.children;\n\t\tchilds.splice(childs.lastIndexOf(elem), 0, prev);\n\t}\n\n\tif(elem.prev){\n\t\telem.prev.next = prev;\n\t}\n\t\n\tprev.parent = parent;\n\tprev.prev = elem.prev;\n\tprev.next = elem;\n\telem.prev = prev;\n};\n\n\n","var isTag = require(\"domelementtype\").isTag;\n\nmodule.exports = {\n\tfilter: filter,\n\tfind: find,\n\tfindOneChild: findOneChild,\n\tfindOne: findOne,\n\texistsOne: existsOne,\n\tfindAll: findAll\n};\n\nfunction filter(test, element, recurse, limit){\n\tif(!Array.isArray(element)) element = [element];\n\n\tif(typeof limit !== \"number\" || !isFinite(limit)){\n\t\tlimit = Infinity;\n\t}\n\treturn find(test, element, recurse !== false, limit);\n}\n\nfunction find(test, elems, recurse, limit){\n\tvar result = [], childs;\n\n\tfor(var i = 0, j = elems.length; i < j; i++){\n\t\tif(test(elems[i])){\n\t\t\tresult.push(elems[i]);\n\t\t\tif(--limit <= 0) break;\n\t\t}\n\n\t\tchilds = elems[i].children;\n\t\tif(recurse && childs && childs.length > 0){\n\t\t\tchilds = find(test, childs, recurse, limit);\n\t\t\tresult = result.concat(childs);\n\t\t\tlimit -= childs.length;\n\t\t\tif(limit <= 0) break;\n\t\t}\n\t}\n\n\treturn result;\n}\n\nfunction findOneChild(test, elems){\n\tfor(var i = 0, l = elems.length; i < l; i++){\n\t\tif(test(elems[i])) return elems[i];\n\t}\n\n\treturn null;\n}\n\nfunction findOne(test, elems){\n\tvar elem = null;\n\n\tfor(var i = 0, l = elems.length; i < l && !elem; i++){\n\t\tif(!isTag(elems[i])){\n\t\t\tcontinue;\n\t\t} else if(test(elems[i])){\n\t\t\telem = elems[i];\n\t\t} else if(elems[i].children.length > 0){\n\t\t\telem = findOne(test, elems[i].children);\n\t\t}\n\t}\n\n\treturn elem;\n}\n\nfunction existsOne(test, elems){\n\tfor(var i = 0, l = elems.length; i < l; i++){\n\t\tif(\n\t\t\tisTag(elems[i]) && (\n\t\t\t\ttest(elems[i]) || (\n\t\t\t\t\telems[i].children.length > 0 &&\n\t\t\t\t\texistsOne(test, elems[i].children)\n\t\t\t\t)\n\t\t\t)\n\t\t){\n\t\t\treturn true;\n\t\t}\n\t}\n\n\treturn false;\n}\n\nfunction findAll(test, rootElems){\n\tvar result = [];\n\tvar stack = rootElems.slice();\n\twhile(stack.length){\n\t\tvar elem = stack.shift();\n\t\tif(!isTag(elem)) continue;\n\t\tif (elem.children && elem.children.length > 0) {\n\t\t\tstack.unshift.apply(stack, elem.children);\n\t\t}\n\t\tif(test(elem)) result.push(elem);\n\t}\n\treturn result;\n}\n","var ElementType = require(\"domelementtype\"),\n    getOuterHTML = require(\"dom-serializer\"),\n    isTag = ElementType.isTag;\n\nmodule.exports = {\n\tgetInnerHTML: getInnerHTML,\n\tgetOuterHTML: getOuterHTML,\n\tgetText: getText\n};\n\nfunction getInnerHTML(elem, opts){\n\treturn elem.children ? elem.children.map(function(elem){\n\t\treturn getOuterHTML(elem, opts);\n\t}).join(\"\") : \"\";\n}\n\nfunction getText(elem){\n\tif(Array.isArray(elem)) return elem.map(getText).join(\"\");\n\tif(isTag(elem)) return elem.name === \"br\" ? \"\\n\" : getText(elem.children);\n\tif(elem.type === ElementType.CDATA) return getText(elem.children);\n\tif(elem.type === ElementType.Text) return elem.data;\n\treturn \"\";\n}\n","var getChildren = exports.getChildren = function(elem){\n\treturn elem.children;\n};\n\nvar getParent = exports.getParent = function(elem){\n\treturn elem.parent;\n};\n\nexports.getSiblings = function(elem){\n\tvar parent = getParent(elem);\n\treturn parent ? getChildren(parent) : [elem];\n};\n\nexports.getAttributeValue = function(elem, name){\n\treturn elem.attribs && elem.attribs[name];\n};\n\nexports.hasAttrib = function(elem, name){\n\treturn !!elem.attribs && hasOwnProperty.call(elem.attribs, name);\n};\n\nexports.getName = function(elem){\n\treturn elem.name;\n};\n","var decodeMap = require(\"../maps/decode.json\");\n\nmodule.exports = decodeCodePoint;\n\n// modified version of https://github.com/mathiasbynens/he/blob/master/src/he.js#L94-L119\nfunction decodeCodePoint(codePoint) {\n    if ((codePoint >= 0xd800 && codePoint <= 0xdfff) || codePoint > 0x10ffff) {\n        return \"\\uFFFD\";\n    }\n\n    if (codePoint in decodeMap) {\n        codePoint = decodeMap[codePoint];\n    }\n\n    var output = \"\";\n\n    if (codePoint > 0xffff) {\n        codePoint -= 0x10000;\n        output += String.fromCharCode(((codePoint >>> 10) & 0x3ff) | 0xd800);\n        codePoint = 0xdc00 | (codePoint & 0x3ff);\n    }\n\n    output += String.fromCharCode(codePoint);\n    return output;\n}\n","module.exports = CollectingHandler;\n\nfunction CollectingHandler(cbs) {\n    this._cbs = cbs || {};\n    this.events = [];\n}\n\nvar EVENTS = require(\"./\").EVENTS;\nObject.keys(EVENTS).forEach(function(name) {\n    if (EVENTS[name] === 0) {\n        name = \"on\" + name;\n        CollectingHandler.prototype[name] = function() {\n            this.events.push([name]);\n            if (this._cbs[name]) this._cbs[name]();\n        };\n    } else if (EVENTS[name] === 1) {\n        name = \"on\" + name;\n        CollectingHandler.prototype[name] = function(a) {\n            this.events.push([name, a]);\n            if (this._cbs[name]) this._cbs[name](a);\n        };\n    } else if (EVENTS[name] === 2) {\n        name = \"on\" + name;\n        CollectingHandler.prototype[name] = function(a, b) {\n            this.events.push([name, a, b]);\n            if (this._cbs[name]) this._cbs[name](a, b);\n        };\n    } else {\n        throw Error(\"wrong number of arguments\");\n    }\n});\n\nCollectingHandler.prototype.onreset = function() {\n    this.events = [];\n    if (this._cbs.onreset) this._cbs.onreset();\n};\n\nCollectingHandler.prototype.restart = function() {\n    if (this._cbs.onreset) this._cbs.onreset();\n\n    for (var i = 0, len = this.events.length; i < len; i++) {\n        if (this._cbs[this.events[i][0]]) {\n            var num = this.events[i].length;\n\n            if (num === 1) {\n                this._cbs[this.events[i][0]]();\n            } else if (num === 2) {\n                this._cbs[this.events[i][0]](this.events[i][1]);\n            } else {\n                this._cbs[this.events[i][0]](\n                    this.events[i][1],\n                    this.events[i][2]\n                );\n            }\n        }\n    }\n};\n","var DomHandler = require(\"domhandler\");\nvar DomUtils = require(\"domutils\");\n\n//TODO: make this a streamable handler\nfunction FeedHandler(callback, options) {\n    this.init(callback, options);\n}\n\nrequire(\"inherits\")(FeedHandler, DomHandler);\n\nFeedHandler.prototype.init = DomHandler;\n\nfunction getElements(what, where) {\n    return DomUtils.getElementsByTagName(what, where, true);\n}\nfunction getOneElement(what, where) {\n    return DomUtils.getElementsByTagName(what, where, true, 1)[0];\n}\nfunction fetch(what, where, recurse) {\n    return DomUtils.getText(\n        DomUtils.getElementsByTagName(what, where, recurse, 1)\n    ).trim();\n}\n\nfunction addConditionally(obj, prop, what, where, recurse) {\n    var tmp = fetch(what, where, recurse);\n    if (tmp) obj[prop] = tmp;\n}\n\nvar isValidFeed = function(value) {\n    return value === \"rss\" || value === \"feed\" || value === \"rdf:RDF\";\n};\n\nFeedHandler.prototype.onend = function() {\n    var feed = {},\n        feedRoot = getOneElement(isValidFeed, this.dom),\n        tmp,\n        childs;\n\n    if (feedRoot) {\n        if (feedRoot.name === \"feed\") {\n            childs = feedRoot.children;\n\n            feed.type = \"atom\";\n            addConditionally(feed, \"id\", \"id\", childs);\n            addConditionally(feed, \"title\", \"title\", childs);\n            if (\n                (tmp = getOneElement(\"link\", childs)) &&\n                (tmp = tmp.attribs) &&\n                (tmp = tmp.href)\n            )\n                feed.link = tmp;\n            addConditionally(feed, \"description\", \"subtitle\", childs);\n            if ((tmp = fetch(\"updated\", childs))) feed.updated = new Date(tmp);\n            addConditionally(feed, \"author\", \"email\", childs, true);\n\n            feed.items = getElements(\"entry\", childs).map(function(item) {\n                var entry = {},\n                    tmp;\n\n                item = item.children;\n\n                addConditionally(entry, \"id\", \"id\", item);\n                addConditionally(entry, \"title\", \"title\", item);\n                if (\n                    (tmp = getOneElement(\"link\", item)) &&\n                    (tmp = tmp.attribs) &&\n                    (tmp = tmp.href)\n                )\n                    entry.link = tmp;\n                if ((tmp = fetch(\"summary\", item) || fetch(\"content\", item)))\n                    entry.description = tmp;\n                if ((tmp = fetch(\"updated\", item)))\n                    entry.pubDate = new Date(tmp);\n                return entry;\n            });\n        } else {\n            childs = getOneElement(\"channel\", feedRoot.children).children;\n\n            feed.type = feedRoot.name.substr(0, 3);\n            feed.id = \"\";\n            addConditionally(feed, \"title\", \"title\", childs);\n            addConditionally(feed, \"link\", \"link\", childs);\n            addConditionally(feed, \"description\", \"description\", childs);\n            if ((tmp = fetch(\"lastBuildDate\", childs)))\n                feed.updated = new Date(tmp);\n            addConditionally(feed, \"author\", \"managingEditor\", childs, true);\n\n            feed.items = getElements(\"item\", feedRoot.children).map(function(\n                item\n            ) {\n                var entry = {},\n                    tmp;\n\n                item = item.children;\n\n                addConditionally(entry, \"id\", \"guid\", item);\n                addConditionally(entry, \"title\", \"title\", item);\n                addConditionally(entry, \"link\", \"link\", item);\n                addConditionally(entry, \"description\", \"description\", item);\n                if ((tmp = fetch(\"pubDate\", item)))\n                    entry.pubDate = new Date(tmp);\n                return entry;\n            });\n        }\n    }\n    this.dom = feed;\n    DomHandler.prototype._handleCallback.call(\n        this,\n        feedRoot ? null : Error(\"couldn't find root of feed\")\n    );\n};\n\nmodule.exports = FeedHandler;\n","var Tokenizer = require(\"./Tokenizer.js\");\n\n/*\n\tOptions:\n\n\txmlMode: Disables the special behavior for script/style tags (false by default)\n\tlowerCaseAttributeNames: call .toLowerCase for each attribute name (true if xmlMode is `false`)\n\tlowerCaseTags: call .toLowerCase for each tag name (true if xmlMode is `false`)\n*/\n\n/*\n\tCallbacks:\n\n\toncdataend,\n\toncdatastart,\n\tonclosetag,\n\toncomment,\n\toncommentend,\n\tonerror,\n\tonopentag,\n\tonprocessinginstruction,\n\tonreset,\n\tontext\n*/\n\nvar formTags = {\n    input: true,\n    option: true,\n    optgroup: true,\n    select: true,\n    button: true,\n    datalist: true,\n    textarea: true\n};\n\nvar openImpliesClose = {\n    tr: { tr: true, th: true, td: true },\n    th: { th: true },\n    td: { thead: true, th: true, td: true },\n    body: { head: true, link: true, script: true },\n    li: { li: true },\n    p: { p: true },\n    h1: { p: true },\n    h2: { p: true },\n    h3: { p: true },\n    h4: { p: true },\n    h5: { p: true },\n    h6: { p: true },\n    select: formTags,\n    input: formTags,\n    output: formTags,\n    button: formTags,\n    datalist: formTags,\n    textarea: formTags,\n    option: { option: true },\n    optgroup: { optgroup: true }\n};\n\nvar voidElements = {\n    __proto__: null,\n    area: true,\n    base: true,\n    basefont: true,\n    br: true,\n    col: true,\n    command: true,\n    embed: true,\n    frame: true,\n    hr: true,\n    img: true,\n    input: true,\n    isindex: true,\n    keygen: true,\n    link: true,\n    meta: true,\n    param: true,\n    source: true,\n    track: true,\n    wbr: true\n};\n\nvar foreignContextElements = {\n    __proto__: null,\n    math: true,\n    svg: true\n};\nvar htmlIntegrationElements = {\n    __proto__: null,\n    mi: true,\n    mo: true,\n    mn: true,\n    ms: true,\n    mtext: true,\n    \"annotation-xml\": true,\n    foreignObject: true,\n    desc: true,\n    title: true\n};\n\nvar re_nameEnd = /\\s|\\//;\n\nfunction Parser(cbs, options) {\n    this._options = options || {};\n    this._cbs = cbs || {};\n\n    this._tagname = \"\";\n    this._attribname = \"\";\n    this._attribvalue = \"\";\n    this._attribs = null;\n    this._stack = [];\n    this._foreignContext = [];\n\n    this.startIndex = 0;\n    this.endIndex = null;\n\n    this._lowerCaseTagNames =\n        \"lowerCaseTags\" in this._options\n            ? !!this._options.lowerCaseTags\n            : !this._options.xmlMode;\n    this._lowerCaseAttributeNames =\n        \"lowerCaseAttributeNames\" in this._options\n            ? !!this._options.lowerCaseAttributeNames\n            : !this._options.xmlMode;\n\n    if (this._options.Tokenizer) {\n        Tokenizer = this._options.Tokenizer;\n    }\n    this._tokenizer = new Tokenizer(this._options, this);\n\n    if (this._cbs.onparserinit) this._cbs.onparserinit(this);\n}\n\nrequire(\"inherits\")(Parser, require(\"events\").EventEmitter);\n\nParser.prototype._updatePosition = function(initialOffset) {\n    if (this.endIndex === null) {\n        if (this._tokenizer._sectionStart <= initialOffset) {\n            this.startIndex = 0;\n        } else {\n            this.startIndex = this._tokenizer._sectionStart - initialOffset;\n        }\n    } else this.startIndex = this.endIndex + 1;\n    this.endIndex = this._tokenizer.getAbsoluteIndex();\n};\n\n//Tokenizer event handlers\nParser.prototype.ontext = function(data) {\n    this._updatePosition(1);\n    this.endIndex--;\n\n    if (this._cbs.ontext) this._cbs.ontext(data);\n};\n\nParser.prototype.onopentagname = function(name) {\n    if (this._lowerCaseTagNames) {\n        name = name.toLowerCase();\n    }\n\n    this._tagname = name;\n\n    if (!this._options.xmlMode && name in openImpliesClose) {\n        for (\n            var el;\n            (el = this._stack[this._stack.length - 1]) in\n            openImpliesClose[name];\n            this.onclosetag(el)\n        );\n    }\n\n    if (this._options.xmlMode || !(name in voidElements)) {\n        this._stack.push(name);\n        if (name in foreignContextElements) this._foreignContext.push(true);\n        else if (name in htmlIntegrationElements)\n            this._foreignContext.push(false);\n    }\n\n    if (this._cbs.onopentagname) this._cbs.onopentagname(name);\n    if (this._cbs.onopentag) this._attribs = {};\n};\n\nParser.prototype.onopentagend = function() {\n    this._updatePosition(1);\n\n    if (this._attribs) {\n        if (this._cbs.onopentag)\n            this._cbs.onopentag(this._tagname, this._attribs);\n        this._attribs = null;\n    }\n\n    if (\n        !this._options.xmlMode &&\n        this._cbs.onclosetag &&\n        this._tagname in voidElements\n    ) {\n        this._cbs.onclosetag(this._tagname);\n    }\n\n    this._tagname = \"\";\n};\n\nParser.prototype.onclosetag = function(name) {\n    this._updatePosition(1);\n\n    if (this._lowerCaseTagNames) {\n        name = name.toLowerCase();\n    }\n    \n    if (name in foreignContextElements || name in htmlIntegrationElements) {\n        this._foreignContext.pop();\n    }\n\n    if (\n        this._stack.length &&\n        (!(name in voidElements) || this._options.xmlMode)\n    ) {\n        var pos = this._stack.lastIndexOf(name);\n        if (pos !== -1) {\n            if (this._cbs.onclosetag) {\n                pos = this._stack.length - pos;\n                while (pos--) this._cbs.onclosetag(this._stack.pop());\n            } else this._stack.length = pos;\n        } else if (name === \"p\" && !this._options.xmlMode) {\n            this.onopentagname(name);\n            this._closeCurrentTag();\n        }\n    } else if (!this._options.xmlMode && (name === \"br\" || name === \"p\")) {\n        this.onopentagname(name);\n        this._closeCurrentTag();\n    }\n};\n\nParser.prototype.onselfclosingtag = function() {\n    if (\n        this._options.xmlMode ||\n        this._options.recognizeSelfClosing ||\n        this._foreignContext[this._foreignContext.length - 1]\n    ) {\n        this._closeCurrentTag();\n    } else {\n        this.onopentagend();\n    }\n};\n\nParser.prototype._closeCurrentTag = function() {\n    var name = this._tagname;\n\n    this.onopentagend();\n\n    //self-closing tags will be on the top of the stack\n    //(cheaper check than in onclosetag)\n    if (this._stack[this._stack.length - 1] === name) {\n        if (this._cbs.onclosetag) {\n            this._cbs.onclosetag(name);\n        }\n        this._stack.pop();\n        \n    }\n};\n\nParser.prototype.onattribname = function(name) {\n    if (this._lowerCaseAttributeNames) {\n        name = name.toLowerCase();\n    }\n    this._attribname = name;\n};\n\nParser.prototype.onattribdata = function(value) {\n    this._attribvalue += value;\n};\n\nParser.prototype.onattribend = function() {\n    if (this._cbs.onattribute)\n        this._cbs.onattribute(this._attribname, this._attribvalue);\n    if (\n        this._attribs &&\n        !Object.prototype.hasOwnProperty.call(this._attribs, this._attribname)\n    ) {\n        this._attribs[this._attribname] = this._attribvalue;\n    }\n    this._attribname = \"\";\n    this._attribvalue = \"\";\n};\n\nParser.prototype._getInstructionName = function(value) {\n    var idx = value.search(re_nameEnd),\n        name = idx < 0 ? value : value.substr(0, idx);\n\n    if (this._lowerCaseTagNames) {\n        name = name.toLowerCase();\n    }\n\n    return name;\n};\n\nParser.prototype.ondeclaration = function(value) {\n    if (this._cbs.onprocessinginstruction) {\n        var name = this._getInstructionName(value);\n        this._cbs.onprocessinginstruction(\"!\" + name, \"!\" + value);\n    }\n};\n\nParser.prototype.onprocessinginstruction = function(value) {\n    if (this._cbs.onprocessinginstruction) {\n        var name = this._getInstructionName(value);\n        this._cbs.onprocessinginstruction(\"?\" + name, \"?\" + value);\n    }\n};\n\nParser.prototype.oncomment = function(value) {\n    this._updatePosition(4);\n\n    if (this._cbs.oncomment) this._cbs.oncomment(value);\n    if (this._cbs.oncommentend) this._cbs.oncommentend();\n};\n\nParser.prototype.oncdata = function(value) {\n    this._updatePosition(1);\n\n    if (this._options.xmlMode || this._options.recognizeCDATA) {\n        if (this._cbs.oncdatastart) this._cbs.oncdatastart();\n        if (this._cbs.ontext) this._cbs.ontext(value);\n        if (this._cbs.oncdataend) this._cbs.oncdataend();\n    } else {\n        this.oncomment(\"[CDATA[\" + value + \"]]\");\n    }\n};\n\nParser.prototype.onerror = function(err) {\n    if (this._cbs.onerror) this._cbs.onerror(err);\n};\n\nParser.prototype.onend = function() {\n    if (this._cbs.onclosetag) {\n        for (\n            var i = this._stack.length;\n            i > 0;\n            this._cbs.onclosetag(this._stack[--i])\n        );\n    }\n    if (this._cbs.onend) this._cbs.onend();\n};\n\n//Resets the parser to a blank state, ready to parse a new HTML document\nParser.prototype.reset = function() {\n    if (this._cbs.onreset) this._cbs.onreset();\n    this._tokenizer.reset();\n\n    this._tagname = \"\";\n    this._attribname = \"\";\n    this._attribs = null;\n    this._stack = [];\n\n    if (this._cbs.onparserinit) this._cbs.onparserinit(this);\n};\n\n//Parses a complete HTML document and pushes it to the handler\nParser.prototype.parseComplete = function(data) {\n    this.reset();\n    this.end(data);\n};\n\nParser.prototype.write = function(chunk) {\n    this._tokenizer.write(chunk);\n};\n\nParser.prototype.end = function(chunk) {\n    this._tokenizer.end(chunk);\n};\n\nParser.prototype.pause = function() {\n    this._tokenizer.pause();\n};\n\nParser.prototype.resume = function() {\n    this._tokenizer.resume();\n};\n\n//alias for backwards compat\nParser.prototype.parseChunk = Parser.prototype.write;\nParser.prototype.done = Parser.prototype.end;\n\nmodule.exports = Parser;\n","module.exports = ProxyHandler;\n\nfunction ProxyHandler(cbs) {\n    this._cbs = cbs || {};\n}\n\nvar EVENTS = require(\"./\").EVENTS;\nObject.keys(EVENTS).forEach(function(name) {\n    if (EVENTS[name] === 0) {\n        name = \"on\" + name;\n        ProxyHandler.prototype[name] = function() {\n            if (this._cbs[name]) this._cbs[name]();\n        };\n    } else if (EVENTS[name] === 1) {\n        name = \"on\" + name;\n        ProxyHandler.prototype[name] = function(a) {\n            if (this._cbs[name]) this._cbs[name](a);\n        };\n    } else if (EVENTS[name] === 2) {\n        name = \"on\" + name;\n        ProxyHandler.prototype[name] = function(a, b) {\n            if (this._cbs[name]) this._cbs[name](a, b);\n        };\n    } else {\n        throw Error(\"wrong number of arguments\");\n    }\n});\n","module.exports = Stream;\n\nvar Parser = require(\"./WritableStream.js\");\n\nfunction Stream(options) {\n    Parser.call(this, new Cbs(this), options);\n}\n\nrequire(\"inherits\")(Stream, Parser);\n\nStream.prototype.readable = true;\n\nfunction Cbs(scope) {\n    this.scope = scope;\n}\n\nvar EVENTS = require(\"../\").EVENTS;\n\nObject.keys(EVENTS).forEach(function(name) {\n    if (EVENTS[name] === 0) {\n        Cbs.prototype[\"on\" + name] = function() {\n            this.scope.emit(name);\n        };\n    } else if (EVENTS[name] === 1) {\n        Cbs.prototype[\"on\" + name] = function(a) {\n            this.scope.emit(name, a);\n        };\n    } else if (EVENTS[name] === 2) {\n        Cbs.prototype[\"on\" + name] = function(a, b) {\n            this.scope.emit(name, a, b);\n        };\n    } else {\n        throw Error(\"wrong number of arguments!\");\n    }\n});\n","module.exports = Tokenizer;\n\nvar decodeCodePoint = require(\"entities/lib/decode_codepoint.js\");\nvar entityMap = require(\"entities/maps/entities.json\");\nvar legacyMap = require(\"entities/maps/legacy.json\");\nvar xmlMap = require(\"entities/maps/xml.json\");\n\nvar i = 0;\n\nvar TEXT = i++;\nvar BEFORE_TAG_NAME = i++; //after <\nvar IN_TAG_NAME = i++;\nvar IN_SELF_CLOSING_TAG = i++;\nvar BEFORE_CLOSING_TAG_NAME = i++;\nvar IN_CLOSING_TAG_NAME = i++;\nvar AFTER_CLOSING_TAG_NAME = i++;\n\n//attributes\nvar BEFORE_ATTRIBUTE_NAME = i++;\nvar IN_ATTRIBUTE_NAME = i++;\nvar AFTER_ATTRIBUTE_NAME = i++;\nvar BEFORE_ATTRIBUTE_VALUE = i++;\nvar IN_ATTRIBUTE_VALUE_DQ = i++; // \"\nvar IN_ATTRIBUTE_VALUE_SQ = i++; // '\nvar IN_ATTRIBUTE_VALUE_NQ = i++;\n\n//declarations\nvar BEFORE_DECLARATION = i++; // !\nvar IN_DECLARATION = i++;\n\n//processing instructions\nvar IN_PROCESSING_INSTRUCTION = i++; // ?\n\n//comments\nvar BEFORE_COMMENT = i++;\nvar IN_COMMENT = i++;\nvar AFTER_COMMENT_1 = i++;\nvar AFTER_COMMENT_2 = i++;\n\n//cdata\nvar BEFORE_CDATA_1 = i++; // [\nvar BEFORE_CDATA_2 = i++; // C\nvar BEFORE_CDATA_3 = i++; // D\nvar BEFORE_CDATA_4 = i++; // A\nvar BEFORE_CDATA_5 = i++; // T\nvar BEFORE_CDATA_6 = i++; // A\nvar IN_CDATA = i++; // [\nvar AFTER_CDATA_1 = i++; // ]\nvar AFTER_CDATA_2 = i++; // ]\n\n//special tags\nvar BEFORE_SPECIAL = i++; //S\nvar BEFORE_SPECIAL_END = i++; //S\n\nvar BEFORE_SCRIPT_1 = i++; //C\nvar BEFORE_SCRIPT_2 = i++; //R\nvar BEFORE_SCRIPT_3 = i++; //I\nvar BEFORE_SCRIPT_4 = i++; //P\nvar BEFORE_SCRIPT_5 = i++; //T\nvar AFTER_SCRIPT_1 = i++; //C\nvar AFTER_SCRIPT_2 = i++; //R\nvar AFTER_SCRIPT_3 = i++; //I\nvar AFTER_SCRIPT_4 = i++; //P\nvar AFTER_SCRIPT_5 = i++; //T\n\nvar BEFORE_STYLE_1 = i++; //T\nvar BEFORE_STYLE_2 = i++; //Y\nvar BEFORE_STYLE_3 = i++; //L\nvar BEFORE_STYLE_4 = i++; //E\nvar AFTER_STYLE_1 = i++; //T\nvar AFTER_STYLE_2 = i++; //Y\nvar AFTER_STYLE_3 = i++; //L\nvar AFTER_STYLE_4 = i++; //E\n\nvar BEFORE_ENTITY = i++; //&\nvar BEFORE_NUMERIC_ENTITY = i++; //#\nvar IN_NAMED_ENTITY = i++;\nvar IN_NUMERIC_ENTITY = i++;\nvar IN_HEX_ENTITY = i++; //X\n\nvar j = 0;\n\nvar SPECIAL_NONE = j++;\nvar SPECIAL_SCRIPT = j++;\nvar SPECIAL_STYLE = j++;\n\nfunction whitespace(c) {\n    return c === \" \" || c === \"\\n\" || c === \"\\t\" || c === \"\\f\" || c === \"\\r\";\n}\n\nfunction ifElseState(upper, SUCCESS, FAILURE) {\n    var lower = upper.toLowerCase();\n\n    if (upper === lower) {\n        return function(c) {\n            if (c === lower) {\n                this._state = SUCCESS;\n            } else {\n                this._state = FAILURE;\n                this._index--;\n            }\n        };\n    } else {\n        return function(c) {\n            if (c === lower || c === upper) {\n                this._state = SUCCESS;\n            } else {\n                this._state = FAILURE;\n                this._index--;\n            }\n        };\n    }\n}\n\nfunction consumeSpecialNameChar(upper, NEXT_STATE) {\n    var lower = upper.toLowerCase();\n\n    return function(c) {\n        if (c === lower || c === upper) {\n            this._state = NEXT_STATE;\n        } else {\n            this._state = IN_TAG_NAME;\n            this._index--; //consume the token again\n        }\n    };\n}\n\nfunction Tokenizer(options, cbs) {\n    this._state = TEXT;\n    this._buffer = \"\";\n    this._sectionStart = 0;\n    this._index = 0;\n    this._bufferOffset = 0; //chars removed from _buffer\n    this._baseState = TEXT;\n    this._special = SPECIAL_NONE;\n    this._cbs = cbs;\n    this._running = true;\n    this._ended = false;\n    this._xmlMode = !!(options && options.xmlMode);\n    this._decodeEntities = !!(options && options.decodeEntities);\n}\n\nTokenizer.prototype._stateText = function(c) {\n    if (c === \"<\") {\n        if (this._index > this._sectionStart) {\n            this._cbs.ontext(this._getSection());\n        }\n        this._state = BEFORE_TAG_NAME;\n        this._sectionStart = this._index;\n    } else if (\n        this._decodeEntities &&\n        this._special === SPECIAL_NONE &&\n        c === \"&\"\n    ) {\n        if (this._index > this._sectionStart) {\n            this._cbs.ontext(this._getSection());\n        }\n        this._baseState = TEXT;\n        this._state = BEFORE_ENTITY;\n        this._sectionStart = this._index;\n    }\n};\n\nTokenizer.prototype._stateBeforeTagName = function(c) {\n    if (c === \"/\") {\n        this._state = BEFORE_CLOSING_TAG_NAME;\n    } else if (c === \"<\") {\n        this._cbs.ontext(this._getSection());\n        this._sectionStart = this._index;\n    } else if (c === \">\" || this._special !== SPECIAL_NONE || whitespace(c)) {\n        this._state = TEXT;\n    } else if (c === \"!\") {\n        this._state = BEFORE_DECLARATION;\n        this._sectionStart = this._index + 1;\n    } else if (c === \"?\") {\n        this._state = IN_PROCESSING_INSTRUCTION;\n        this._sectionStart = this._index + 1;\n    } else {\n        this._state =\n            !this._xmlMode && (c === \"s\" || c === \"S\")\n                ? BEFORE_SPECIAL\n                : IN_TAG_NAME;\n        this._sectionStart = this._index;\n    }\n};\n\nTokenizer.prototype._stateInTagName = function(c) {\n    if (c === \"/\" || c === \">\" || whitespace(c)) {\n        this._emitToken(\"onopentagname\");\n        this._state = BEFORE_ATTRIBUTE_NAME;\n        this._index--;\n    }\n};\n\nTokenizer.prototype._stateBeforeCloseingTagName = function(c) {\n    if (whitespace(c));\n    else if (c === \">\") {\n        this._state = TEXT;\n    } else if (this._special !== SPECIAL_NONE) {\n        if (c === \"s\" || c === \"S\") {\n            this._state = BEFORE_SPECIAL_END;\n        } else {\n            this._state = TEXT;\n            this._index--;\n        }\n    } else {\n        this._state = IN_CLOSING_TAG_NAME;\n        this._sectionStart = this._index;\n    }\n};\n\nTokenizer.prototype._stateInCloseingTagName = function(c) {\n    if (c === \">\" || whitespace(c)) {\n        this._emitToken(\"onclosetag\");\n        this._state = AFTER_CLOSING_TAG_NAME;\n        this._index--;\n    }\n};\n\nTokenizer.prototype._stateAfterCloseingTagName = function(c) {\n    //skip everything until \">\"\n    if (c === \">\") {\n        this._state = TEXT;\n        this._sectionStart = this._index + 1;\n    }\n};\n\nTokenizer.prototype._stateBeforeAttributeName = function(c) {\n    if (c === \">\") {\n        this._cbs.onopentagend();\n        this._state = TEXT;\n        this._sectionStart = this._index + 1;\n    } else if (c === \"/\") {\n        this._state = IN_SELF_CLOSING_TAG;\n    } else if (!whitespace(c)) {\n        this._state = IN_ATTRIBUTE_NAME;\n        this._sectionStart = this._index;\n    }\n};\n\nTokenizer.prototype._stateInSelfClosingTag = function(c) {\n    if (c === \">\") {\n        this._cbs.onselfclosingtag();\n        this._state = TEXT;\n        this._sectionStart = this._index + 1;\n    } else if (!whitespace(c)) {\n        this._state = BEFORE_ATTRIBUTE_NAME;\n        this._index--;\n    }\n};\n\nTokenizer.prototype._stateInAttributeName = function(c) {\n    if (c === \"=\" || c === \"/\" || c === \">\" || whitespace(c)) {\n        this._cbs.onattribname(this._getSection());\n        this._sectionStart = -1;\n        this._state = AFTER_ATTRIBUTE_NAME;\n        this._index--;\n    }\n};\n\nTokenizer.prototype._stateAfterAttributeName = function(c) {\n    if (c === \"=\") {\n        this._state = BEFORE_ATTRIBUTE_VALUE;\n    } else if (c === \"/\" || c === \">\") {\n        this._cbs.onattribend();\n        this._state = BEFORE_ATTRIBUTE_NAME;\n        this._index--;\n    } else if (!whitespace(c)) {\n        this._cbs.onattribend();\n        this._state = IN_ATTRIBUTE_NAME;\n        this._sectionStart = this._index;\n    }\n};\n\nTokenizer.prototype._stateBeforeAttributeValue = function(c) {\n    if (c === '\"') {\n        this._state = IN_ATTRIBUTE_VALUE_DQ;\n        this._sectionStart = this._index + 1;\n    } else if (c === \"'\") {\n        this._state = IN_ATTRIBUTE_VALUE_SQ;\n        this._sectionStart = this._index + 1;\n    } else if (!whitespace(c)) {\n        this._state = IN_ATTRIBUTE_VALUE_NQ;\n        this._sectionStart = this._index;\n        this._index--; //reconsume token\n    }\n};\n\nTokenizer.prototype._stateInAttributeValueDoubleQuotes = function(c) {\n    if (c === '\"') {\n        this._emitToken(\"onattribdata\");\n        this._cbs.onattribend();\n        this._state = BEFORE_ATTRIBUTE_NAME;\n    } else if (this._decodeEntities && c === \"&\") {\n        this._emitToken(\"onattribdata\");\n        this._baseState = this._state;\n        this._state = BEFORE_ENTITY;\n        this._sectionStart = this._index;\n    }\n};\n\nTokenizer.prototype._stateInAttributeValueSingleQuotes = function(c) {\n    if (c === \"'\") {\n        this._emitToken(\"onattribdata\");\n        this._cbs.onattribend();\n        this._state = BEFORE_ATTRIBUTE_NAME;\n    } else if (this._decodeEntities && c === \"&\") {\n        this._emitToken(\"onattribdata\");\n        this._baseState = this._state;\n        this._state = BEFORE_ENTITY;\n        this._sectionStart = this._index;\n    }\n};\n\nTokenizer.prototype._stateInAttributeValueNoQuotes = function(c) {\n    if (whitespace(c) || c === \">\") {\n        this._emitToken(\"onattribdata\");\n        this._cbs.onattribend();\n        this._state = BEFORE_ATTRIBUTE_NAME;\n        this._index--;\n    } else if (this._decodeEntities && c === \"&\") {\n        this._emitToken(\"onattribdata\");\n        this._baseState = this._state;\n        this._state = BEFORE_ENTITY;\n        this._sectionStart = this._index;\n    }\n};\n\nTokenizer.prototype._stateBeforeDeclaration = function(c) {\n    this._state =\n        c === \"[\"\n            ? BEFORE_CDATA_1\n            : c === \"-\"\n                ? BEFORE_COMMENT\n                : IN_DECLARATION;\n};\n\nTokenizer.prototype._stateInDeclaration = function(c) {\n    if (c === \">\") {\n        this._cbs.ondeclaration(this._getSection());\n        this._state = TEXT;\n        this._sectionStart = this._index + 1;\n    }\n};\n\nTokenizer.prototype._stateInProcessingInstruction = function(c) {\n    if (c === \">\") {\n        this._cbs.onprocessinginstruction(this._getSection());\n        this._state = TEXT;\n        this._sectionStart = this._index + 1;\n    }\n};\n\nTokenizer.prototype._stateBeforeComment = function(c) {\n    if (c === \"-\") {\n        this._state = IN_COMMENT;\n        this._sectionStart = this._index + 1;\n    } else {\n        this._state = IN_DECLARATION;\n    }\n};\n\nTokenizer.prototype._stateInComment = function(c) {\n    if (c === \"-\") this._state = AFTER_COMMENT_1;\n};\n\nTokenizer.prototype._stateAfterComment1 = function(c) {\n    if (c === \"-\") {\n        this._state = AFTER_COMMENT_2;\n    } else {\n        this._state = IN_COMMENT;\n    }\n};\n\nTokenizer.prototype._stateAfterComment2 = function(c) {\n    if (c === \">\") {\n        //remove 2 trailing chars\n        this._cbs.oncomment(\n            this._buffer.substring(this._sectionStart, this._index - 2)\n        );\n        this._state = TEXT;\n        this._sectionStart = this._index + 1;\n    } else if (c !== \"-\") {\n        this._state = IN_COMMENT;\n    }\n    // else: stay in AFTER_COMMENT_2 (`--->`)\n};\n\nTokenizer.prototype._stateBeforeCdata1 = ifElseState(\n    \"C\",\n    BEFORE_CDATA_2,\n    IN_DECLARATION\n);\nTokenizer.prototype._stateBeforeCdata2 = ifElseState(\n    \"D\",\n    BEFORE_CDATA_3,\n    IN_DECLARATION\n);\nTokenizer.prototype._stateBeforeCdata3 = ifElseState(\n    \"A\",\n    BEFORE_CDATA_4,\n    IN_DECLARATION\n);\nTokenizer.prototype._stateBeforeCdata4 = ifElseState(\n    \"T\",\n    BEFORE_CDATA_5,\n    IN_DECLARATION\n);\nTokenizer.prototype._stateBeforeCdata5 = ifElseState(\n    \"A\",\n    BEFORE_CDATA_6,\n    IN_DECLARATION\n);\n\nTokenizer.prototype._stateBeforeCdata6 = function(c) {\n    if (c === \"[\") {\n        this._state = IN_CDATA;\n        this._sectionStart = this._index + 1;\n    } else {\n        this._state = IN_DECLARATION;\n        this._index--;\n    }\n};\n\nTokenizer.prototype._stateInCdata = function(c) {\n    if (c === \"]\") this._state = AFTER_CDATA_1;\n};\n\nTokenizer.prototype._stateAfterCdata1 = function(c) {\n    if (c === \"]\") this._state = AFTER_CDATA_2;\n    else this._state = IN_CDATA;\n};\n\nTokenizer.prototype._stateAfterCdata2 = function(c) {\n    if (c === \">\") {\n        //remove 2 trailing chars\n        this._cbs.oncdata(\n            this._buffer.substring(this._sectionStart, this._index - 2)\n        );\n        this._state = TEXT;\n        this._sectionStart = this._index + 1;\n    } else if (c !== \"]\") {\n        this._state = IN_CDATA;\n    }\n    //else: stay in AFTER_CDATA_2 (`]]]>`)\n};\n\nTokenizer.prototype._stateBeforeSpecial = function(c) {\n    if (c === \"c\" || c === \"C\") {\n        this._state = BEFORE_SCRIPT_1;\n    } else if (c === \"t\" || c === \"T\") {\n        this._state = BEFORE_STYLE_1;\n    } else {\n        this._state = IN_TAG_NAME;\n        this._index--; //consume the token again\n    }\n};\n\nTokenizer.prototype._stateBeforeSpecialEnd = function(c) {\n    if (this._special === SPECIAL_SCRIPT && (c === \"c\" || c === \"C\")) {\n        this._state = AFTER_SCRIPT_1;\n    } else if (this._special === SPECIAL_STYLE && (c === \"t\" || c === \"T\")) {\n        this._state = AFTER_STYLE_1;\n    } else this._state = TEXT;\n};\n\nTokenizer.prototype._stateBeforeScript1 = consumeSpecialNameChar(\n    \"R\",\n    BEFORE_SCRIPT_2\n);\nTokenizer.prototype._stateBeforeScript2 = consumeSpecialNameChar(\n    \"I\",\n    BEFORE_SCRIPT_3\n);\nTokenizer.prototype._stateBeforeScript3 = consumeSpecialNameChar(\n    \"P\",\n    BEFORE_SCRIPT_4\n);\nTokenizer.prototype._stateBeforeScript4 = consumeSpecialNameChar(\n    \"T\",\n    BEFORE_SCRIPT_5\n);\n\nTokenizer.prototype._stateBeforeScript5 = function(c) {\n    if (c === \"/\" || c === \">\" || whitespace(c)) {\n        this._special = SPECIAL_SCRIPT;\n    }\n    this._state = IN_TAG_NAME;\n    this._index--; //consume the token again\n};\n\nTokenizer.prototype._stateAfterScript1 = ifElseState(\"R\", AFTER_SCRIPT_2, TEXT);\nTokenizer.prototype._stateAfterScript2 = ifElseState(\"I\", AFTER_SCRIPT_3, TEXT);\nTokenizer.prototype._stateAfterScript3 = ifElseState(\"P\", AFTER_SCRIPT_4, TEXT);\nTokenizer.prototype._stateAfterScript4 = ifElseState(\"T\", AFTER_SCRIPT_5, TEXT);\n\nTokenizer.prototype._stateAfterScript5 = function(c) {\n    if (c === \">\" || whitespace(c)) {\n        this._special = SPECIAL_NONE;\n        this._state = IN_CLOSING_TAG_NAME;\n        this._sectionStart = this._index - 6;\n        this._index--; //reconsume the token\n    } else this._state = TEXT;\n};\n\nTokenizer.prototype._stateBeforeStyle1 = consumeSpecialNameChar(\n    \"Y\",\n    BEFORE_STYLE_2\n);\nTokenizer.prototype._stateBeforeStyle2 = consumeSpecialNameChar(\n    \"L\",\n    BEFORE_STYLE_3\n);\nTokenizer.prototype._stateBeforeStyle3 = consumeSpecialNameChar(\n    \"E\",\n    BEFORE_STYLE_4\n);\n\nTokenizer.prototype._stateBeforeStyle4 = function(c) {\n    if (c === \"/\" || c === \">\" || whitespace(c)) {\n        this._special = SPECIAL_STYLE;\n    }\n    this._state = IN_TAG_NAME;\n    this._index--; //consume the token again\n};\n\nTokenizer.prototype._stateAfterStyle1 = ifElseState(\"Y\", AFTER_STYLE_2, TEXT);\nTokenizer.prototype._stateAfterStyle2 = ifElseState(\"L\", AFTER_STYLE_3, TEXT);\nTokenizer.prototype._stateAfterStyle3 = ifElseState(\"E\", AFTER_STYLE_4, TEXT);\n\nTokenizer.prototype._stateAfterStyle4 = function(c) {\n    if (c === \">\" || whitespace(c)) {\n        this._special = SPECIAL_NONE;\n        this._state = IN_CLOSING_TAG_NAME;\n        this._sectionStart = this._index - 5;\n        this._index--; //reconsume the token\n    } else this._state = TEXT;\n};\n\nTokenizer.prototype._stateBeforeEntity = ifElseState(\n    \"#\",\n    BEFORE_NUMERIC_ENTITY,\n    IN_NAMED_ENTITY\n);\nTokenizer.prototype._stateBeforeNumericEntity = ifElseState(\n    \"X\",\n    IN_HEX_ENTITY,\n    IN_NUMERIC_ENTITY\n);\n\n//for entities terminated with a semicolon\nTokenizer.prototype._parseNamedEntityStrict = function() {\n    //offset = 1\n    if (this._sectionStart + 1 < this._index) {\n        var entity = this._buffer.substring(\n                this._sectionStart + 1,\n                this._index\n            ),\n            map = this._xmlMode ? xmlMap : entityMap;\n\n        if (map.hasOwnProperty(entity)) {\n            this._emitPartial(map[entity]);\n            this._sectionStart = this._index + 1;\n        }\n    }\n};\n\n//parses legacy entities (without trailing semicolon)\nTokenizer.prototype._parseLegacyEntity = function() {\n    var start = this._sectionStart + 1,\n        limit = this._index - start;\n\n    if (limit > 6) limit = 6; //the max length of legacy entities is 6\n\n    while (limit >= 2) {\n        //the min length of legacy entities is 2\n        var entity = this._buffer.substr(start, limit);\n\n        if (legacyMap.hasOwnProperty(entity)) {\n            this._emitPartial(legacyMap[entity]);\n            this._sectionStart += limit + 1;\n            return;\n        } else {\n            limit--;\n        }\n    }\n};\n\nTokenizer.prototype._stateInNamedEntity = function(c) {\n    if (c === \";\") {\n        this._parseNamedEntityStrict();\n        if (this._sectionStart + 1 < this._index && !this._xmlMode) {\n            this._parseLegacyEntity();\n        }\n        this._state = this._baseState;\n    } else if (\n        (c < \"a\" || c > \"z\") &&\n        (c < \"A\" || c > \"Z\") &&\n        (c < \"0\" || c > \"9\")\n    ) {\n        if (this._xmlMode);\n        else if (this._sectionStart + 1 === this._index);\n        else if (this._baseState !== TEXT) {\n            if (c !== \"=\") {\n                this._parseNamedEntityStrict();\n            }\n        } else {\n            this._parseLegacyEntity();\n        }\n\n        this._state = this._baseState;\n        this._index--;\n    }\n};\n\nTokenizer.prototype._decodeNumericEntity = function(offset, base) {\n    var sectionStart = this._sectionStart + offset;\n\n    if (sectionStart !== this._index) {\n        //parse entity\n        var entity = this._buffer.substring(sectionStart, this._index);\n        var parsed = parseInt(entity, base);\n\n        this._emitPartial(decodeCodePoint(parsed));\n        this._sectionStart = this._index;\n    } else {\n        this._sectionStart--;\n    }\n\n    this._state = this._baseState;\n};\n\nTokenizer.prototype._stateInNumericEntity = function(c) {\n    if (c === \";\") {\n        this._decodeNumericEntity(2, 10);\n        this._sectionStart++;\n    } else if (c < \"0\" || c > \"9\") {\n        if (!this._xmlMode) {\n            this._decodeNumericEntity(2, 10);\n        } else {\n            this._state = this._baseState;\n        }\n        this._index--;\n    }\n};\n\nTokenizer.prototype._stateInHexEntity = function(c) {\n    if (c === \";\") {\n        this._decodeNumericEntity(3, 16);\n        this._sectionStart++;\n    } else if (\n        (c < \"a\" || c > \"f\") &&\n        (c < \"A\" || c > \"F\") &&\n        (c < \"0\" || c > \"9\")\n    ) {\n        if (!this._xmlMode) {\n            this._decodeNumericEntity(3, 16);\n        } else {\n            this._state = this._baseState;\n        }\n        this._index--;\n    }\n};\n\nTokenizer.prototype._cleanup = function() {\n    if (this._sectionStart < 0) {\n        this._buffer = \"\";\n        this._bufferOffset += this._index;\n        this._index = 0;\n    } else if (this._running) {\n        if (this._state === TEXT) {\n            if (this._sectionStart !== this._index) {\n                this._cbs.ontext(this._buffer.substr(this._sectionStart));\n            }\n            this._buffer = \"\";\n            this._bufferOffset += this._index;\n            this._index = 0;\n        } else if (this._sectionStart === this._index) {\n            //the section just started\n            this._buffer = \"\";\n            this._bufferOffset += this._index;\n            this._index = 0;\n        } else {\n            //remove everything unnecessary\n            this._buffer = this._buffer.substr(this._sectionStart);\n            this._index -= this._sectionStart;\n            this._bufferOffset += this._sectionStart;\n        }\n\n        this._sectionStart = 0;\n    }\n};\n\n//TODO make events conditional\nTokenizer.prototype.write = function(chunk) {\n    if (this._ended) this._cbs.onerror(Error(\".write() after done!\"));\n\n    this._buffer += chunk;\n    this._parse();\n};\n\nTokenizer.prototype._parse = function() {\n    while (this._index < this._buffer.length && this._running) {\n        var c = this._buffer.charAt(this._index);\n        if (this._state === TEXT) {\n            this._stateText(c);\n        } else if (this._state === BEFORE_TAG_NAME) {\n            this._stateBeforeTagName(c);\n        } else if (this._state === IN_TAG_NAME) {\n            this._stateInTagName(c);\n        } else if (this._state === BEFORE_CLOSING_TAG_NAME) {\n            this._stateBeforeCloseingTagName(c);\n        } else if (this._state === IN_CLOSING_TAG_NAME) {\n            this._stateInCloseingTagName(c);\n        } else if (this._state === AFTER_CLOSING_TAG_NAME) {\n            this._stateAfterCloseingTagName(c);\n        } else if (this._state === IN_SELF_CLOSING_TAG) {\n            this._stateInSelfClosingTag(c);\n        } else if (this._state === BEFORE_ATTRIBUTE_NAME) {\n\n        /*\n\t\t*\tattributes\n\t\t*/\n            this._stateBeforeAttributeName(c);\n        } else if (this._state === IN_ATTRIBUTE_NAME) {\n            this._stateInAttributeName(c);\n        } else if (this._state === AFTER_ATTRIBUTE_NAME) {\n            this._stateAfterAttributeName(c);\n        } else if (this._state === BEFORE_ATTRIBUTE_VALUE) {\n            this._stateBeforeAttributeValue(c);\n        } else if (this._state === IN_ATTRIBUTE_VALUE_DQ) {\n            this._stateInAttributeValueDoubleQuotes(c);\n        } else if (this._state === IN_ATTRIBUTE_VALUE_SQ) {\n            this._stateInAttributeValueSingleQuotes(c);\n        } else if (this._state === IN_ATTRIBUTE_VALUE_NQ) {\n            this._stateInAttributeValueNoQuotes(c);\n        } else if (this._state === BEFORE_DECLARATION) {\n\n        /*\n\t\t*\tdeclarations\n\t\t*/\n            this._stateBeforeDeclaration(c);\n        } else if (this._state === IN_DECLARATION) {\n            this._stateInDeclaration(c);\n        } else if (this._state === IN_PROCESSING_INSTRUCTION) {\n\n        /*\n\t\t*\tprocessing instructions\n\t\t*/\n            this._stateInProcessingInstruction(c);\n        } else if (this._state === BEFORE_COMMENT) {\n\n        /*\n\t\t*\tcomments\n\t\t*/\n            this._stateBeforeComment(c);\n        } else if (this._state === IN_COMMENT) {\n            this._stateInComment(c);\n        } else if (this._state === AFTER_COMMENT_1) {\n            this._stateAfterComment1(c);\n        } else if (this._state === AFTER_COMMENT_2) {\n            this._stateAfterComment2(c);\n        } else if (this._state === BEFORE_CDATA_1) {\n\n        /*\n\t\t*\tcdata\n\t\t*/\n            this._stateBeforeCdata1(c);\n        } else if (this._state === BEFORE_CDATA_2) {\n            this._stateBeforeCdata2(c);\n        } else if (this._state === BEFORE_CDATA_3) {\n            this._stateBeforeCdata3(c);\n        } else if (this._state === BEFORE_CDATA_4) {\n            this._stateBeforeCdata4(c);\n        } else if (this._state === BEFORE_CDATA_5) {\n            this._stateBeforeCdata5(c);\n        } else if (this._state === BEFORE_CDATA_6) {\n            this._stateBeforeCdata6(c);\n        } else if (this._state === IN_CDATA) {\n            this._stateInCdata(c);\n        } else if (this._state === AFTER_CDATA_1) {\n            this._stateAfterCdata1(c);\n        } else if (this._state === AFTER_CDATA_2) {\n            this._stateAfterCdata2(c);\n        } else if (this._state === BEFORE_SPECIAL) {\n\n        /*\n\t\t* special tags\n\t\t*/\n            this._stateBeforeSpecial(c);\n        } else if (this._state === BEFORE_SPECIAL_END) {\n            this._stateBeforeSpecialEnd(c);\n        } else if (this._state === BEFORE_SCRIPT_1) {\n\n        /*\n\t\t* script\n\t\t*/\n            this._stateBeforeScript1(c);\n        } else if (this._state === BEFORE_SCRIPT_2) {\n            this._stateBeforeScript2(c);\n        } else if (this._state === BEFORE_SCRIPT_3) {\n            this._stateBeforeScript3(c);\n        } else if (this._state === BEFORE_SCRIPT_4) {\n            this._stateBeforeScript4(c);\n        } else if (this._state === BEFORE_SCRIPT_5) {\n            this._stateBeforeScript5(c);\n        } else if (this._state === AFTER_SCRIPT_1) {\n            this._stateAfterScript1(c);\n        } else if (this._state === AFTER_SCRIPT_2) {\n            this._stateAfterScript2(c);\n        } else if (this._state === AFTER_SCRIPT_3) {\n            this._stateAfterScript3(c);\n        } else if (this._state === AFTER_SCRIPT_4) {\n            this._stateAfterScript4(c);\n        } else if (this._state === AFTER_SCRIPT_5) {\n            this._stateAfterScript5(c);\n        } else if (this._state === BEFORE_STYLE_1) {\n\n        /*\n\t\t* style\n\t\t*/\n            this._stateBeforeStyle1(c);\n        } else if (this._state === BEFORE_STYLE_2) {\n            this._stateBeforeStyle2(c);\n        } else if (this._state === BEFORE_STYLE_3) {\n            this._stateBeforeStyle3(c);\n        } else if (this._state === BEFORE_STYLE_4) {\n            this._stateBeforeStyle4(c);\n        } else if (this._state === AFTER_STYLE_1) {\n            this._stateAfterStyle1(c);\n        } else if (this._state === AFTER_STYLE_2) {\n            this._stateAfterStyle2(c);\n        } else if (this._state === AFTER_STYLE_3) {\n            this._stateAfterStyle3(c);\n        } else if (this._state === AFTER_STYLE_4) {\n            this._stateAfterStyle4(c);\n        } else if (this._state === BEFORE_ENTITY) {\n\n        /*\n\t\t* entities\n\t\t*/\n            this._stateBeforeEntity(c);\n        } else if (this._state === BEFORE_NUMERIC_ENTITY) {\n            this._stateBeforeNumericEntity(c);\n        } else if (this._state === IN_NAMED_ENTITY) {\n            this._stateInNamedEntity(c);\n        } else if (this._state === IN_NUMERIC_ENTITY) {\n            this._stateInNumericEntity(c);\n        } else if (this._state === IN_HEX_ENTITY) {\n            this._stateInHexEntity(c);\n        } else {\n            this._cbs.onerror(Error(\"unknown _state\"), this._state);\n        }\n\n        this._index++;\n    }\n\n    this._cleanup();\n};\n\nTokenizer.prototype.pause = function() {\n    this._running = false;\n};\nTokenizer.prototype.resume = function() {\n    this._running = true;\n\n    if (this._index < this._buffer.length) {\n        this._parse();\n    }\n    if (this._ended) {\n        this._finish();\n    }\n};\n\nTokenizer.prototype.end = function(chunk) {\n    if (this._ended) this._cbs.onerror(Error(\".end() after done!\"));\n    if (chunk) this.write(chunk);\n\n    this._ended = true;\n\n    if (this._running) this._finish();\n};\n\nTokenizer.prototype._finish = function() {\n    //if there is remaining data, emit it in a reasonable way\n    if (this._sectionStart < this._index) {\n        this._handleTrailingData();\n    }\n\n    this._cbs.onend();\n};\n\nTokenizer.prototype._handleTrailingData = function() {\n    var data = this._buffer.substr(this._sectionStart);\n\n    if (\n        this._state === IN_CDATA ||\n        this._state === AFTER_CDATA_1 ||\n        this._state === AFTER_CDATA_2\n    ) {\n        this._cbs.oncdata(data);\n    } else if (\n        this._state === IN_COMMENT ||\n        this._state === AFTER_COMMENT_1 ||\n        this._state === AFTER_COMMENT_2\n    ) {\n        this._cbs.oncomment(data);\n    } else if (this._state === IN_NAMED_ENTITY && !this._xmlMode) {\n        this._parseLegacyEntity();\n        if (this._sectionStart < this._index) {\n            this._state = this._baseState;\n            this._handleTrailingData();\n        }\n    } else if (this._state === IN_NUMERIC_ENTITY && !this._xmlMode) {\n        this._decodeNumericEntity(2, 10);\n        if (this._sectionStart < this._index) {\n            this._state = this._baseState;\n            this._handleTrailingData();\n        }\n    } else if (this._state === IN_HEX_ENTITY && !this._xmlMode) {\n        this._decodeNumericEntity(3, 16);\n        if (this._sectionStart < this._index) {\n            this._state = this._baseState;\n            this._handleTrailingData();\n        }\n    } else if (\n        this._state !== IN_TAG_NAME &&\n        this._state !== BEFORE_ATTRIBUTE_NAME &&\n        this._state !== BEFORE_ATTRIBUTE_VALUE &&\n        this._state !== AFTER_ATTRIBUTE_NAME &&\n        this._state !== IN_ATTRIBUTE_NAME &&\n        this._state !== IN_ATTRIBUTE_VALUE_SQ &&\n        this._state !== IN_ATTRIBUTE_VALUE_DQ &&\n        this._state !== IN_ATTRIBUTE_VALUE_NQ &&\n        this._state !== IN_CLOSING_TAG_NAME\n    ) {\n        this._cbs.ontext(data);\n    }\n    //else, ignore remaining data\n    //TODO add a way to remove current tag\n};\n\nTokenizer.prototype.reset = function() {\n    Tokenizer.call(\n        this,\n        { xmlMode: this._xmlMode, decodeEntities: this._decodeEntities },\n        this._cbs\n    );\n};\n\nTokenizer.prototype.getAbsoluteIndex = function() {\n    return this._bufferOffset + this._index;\n};\n\nTokenizer.prototype._getSection = function() {\n    return this._buffer.substring(this._sectionStart, this._index);\n};\n\nTokenizer.prototype._emitToken = function(name) {\n    this._cbs[name](this._getSection());\n    this._sectionStart = -1;\n};\n\nTokenizer.prototype._emitPartial = function(value) {\n    if (this._baseState !== TEXT) {\n        this._cbs.onattribdata(value); //TODO implement the new event\n    } else {\n        this._cbs.ontext(value);\n    }\n};\n","module.exports = Stream;\n\nvar Parser = require(\"./Parser.js\");\nvar WritableStream = require(\"readable-stream\").Writable;\nvar StringDecoder = require(\"string_decoder\").StringDecoder;\nvar Buffer = require(\"buffer\").Buffer;\n\nfunction Stream(cbs, options) {\n    var parser = (this._parser = new Parser(cbs, options));\n    var decoder = (this._decoder = new StringDecoder());\n\n    WritableStream.call(this, { decodeStrings: false });\n\n    this.once(\"finish\", function() {\n        parser.end(decoder.end());\n    });\n}\n\nrequire(\"inherits\")(Stream, WritableStream);\n\nStream.prototype._write = function(chunk, encoding, cb) {\n    if (chunk instanceof Buffer) chunk = this._decoder.write(chunk);\n    this._parser.write(chunk);\n    cb();\n};\n","var Parser = require(\"./Parser.js\");\nvar DomHandler = require(\"domhandler\");\n\nfunction defineProp(name, value) {\n    delete module.exports[name];\n    module.exports[name] = value;\n    return value;\n}\n\nmodule.exports = {\n    Parser: Parser,\n    Tokenizer: require(\"./Tokenizer.js\"),\n    ElementType: require(\"domelementtype\"),\n    DomHandler: DomHandler,\n    get FeedHandler() {\n        return defineProp(\"FeedHandler\", require(\"./FeedHandler.js\"));\n    },\n    get Stream() {\n        return defineProp(\"Stream\", require(\"./Stream.js\"));\n    },\n    get WritableStream() {\n        return defineProp(\"WritableStream\", require(\"./WritableStream.js\"));\n    },\n    get ProxyHandler() {\n        return defineProp(\"ProxyHandler\", require(\"./ProxyHandler.js\"));\n    },\n    get DomUtils() {\n        return defineProp(\"DomUtils\", require(\"domutils\"));\n    },\n    get CollectingHandler() {\n        return defineProp(\n            \"CollectingHandler\",\n            require(\"./CollectingHandler.js\")\n        );\n    },\n    // For legacy support\n    DefaultHandler: DomHandler,\n    get RssHandler() {\n        return defineProp(\"RssHandler\", this.FeedHandler);\n    },\n    //helper methods\n    parseDOM: function(data, options) {\n        var handler = new DomHandler(options);\n        new Parser(handler, options).end(data);\n        return handler.dom;\n    },\n    parseFeed: function(feed, options) {\n        var handler = new module.exports.FeedHandler(options);\n        new Parser(handler, options).end(feed);\n        return handler.dom;\n    },\n    createDomStream: function(cb, options, elementCb) {\n        var handler = new DomHandler(cb, options, elementCb);\n        return new Parser(handler, options);\n    },\n    // List of all events that the parser emits\n    EVENTS: {\n        /* Format: eventname: number of arguments */\n        attribute: 2,\n        cdatastart: 0,\n        cdataend: 0,\n        text: 1,\n        processinginstruction: 2,\n        comment: 1,\n        commentend: 0,\n        closetag: 1,\n        opentag: 2,\n        opentagname: 1,\n        error: 1,\n        end: 0\n    }\n};\n","/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */\n/* eslint-disable node/no-deprecated-api */\nvar buffer = require('buffer')\nvar Buffer = buffer.Buffer\n\n// alternative to using Object.keys for old browsers\nfunction copyProps (src, dst) {\n  for (var key in src) {\n    dst[key] = src[key]\n  }\n}\nif (Buffer.from && Buffer.alloc && Buffer.allocUnsafe && Buffer.allocUnsafeSlow) {\n  module.exports = buffer\n} else {\n  // Copy properties from require('buffer')\n  copyProps(buffer, exports)\n  exports.Buffer = SafeBuffer\n}\n\nfunction SafeBuffer (arg, encodingOrOffset, length) {\n  return Buffer(arg, encodingOrOffset, length)\n}\n\nSafeBuffer.prototype = Object.create(Buffer.prototype)\n\n// Copy static methods from Buffer\ncopyProps(Buffer, SafeBuffer)\n\nSafeBuffer.from = function (arg, encodingOrOffset, length) {\n  if (typeof arg === 'number') {\n    throw new TypeError('Argument must not be a number')\n  }\n  return Buffer(arg, encodingOrOffset, length)\n}\n\nSafeBuffer.alloc = function (size, fill, encoding) {\n  if (typeof size !== 'number') {\n    throw new TypeError('Argument must be a number')\n  }\n  var buf = Buffer(size)\n  if (fill !== undefined) {\n    if (typeof encoding === 'string') {\n      buf.fill(fill, encoding)\n    } else {\n      buf.fill(fill)\n    }\n  } else {\n    buf.fill(0)\n  }\n  return buf\n}\n\nSafeBuffer.allocUnsafe = function (size) {\n  if (typeof size !== 'number') {\n    throw new TypeError('Argument must be a number')\n  }\n  return Buffer(size)\n}\n\nSafeBuffer.allocUnsafeSlow = function (size) {\n  if (typeof size !== 'number') {\n    throw new TypeError('Argument must be a number')\n  }\n  return buffer.SlowBuffer(size)\n}\n","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n'use strict';\n\n/*<replacement>*/\n\nvar Buffer = require('safe-buffer').Buffer;\n/*</replacement>*/\n\nvar isEncoding = Buffer.isEncoding || function (encoding) {\n  encoding = '' + encoding;\n  switch (encoding && encoding.toLowerCase()) {\n    case 'hex':case 'utf8':case 'utf-8':case 'ascii':case 'binary':case 'base64':case 'ucs2':case 'ucs-2':case 'utf16le':case 'utf-16le':case 'raw':\n      return true;\n    default:\n      return false;\n  }\n};\n\nfunction _normalizeEncoding(enc) {\n  if (!enc) return 'utf8';\n  var retried;\n  while (true) {\n    switch (enc) {\n      case 'utf8':\n      case 'utf-8':\n        return 'utf8';\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return 'utf16le';\n      case 'latin1':\n      case 'binary':\n        return 'latin1';\n      case 'base64':\n      case 'ascii':\n      case 'hex':\n        return enc;\n      default:\n        if (retried) return; // undefined\n        enc = ('' + enc).toLowerCase();\n        retried = true;\n    }\n  }\n};\n\n// Do not cache `Buffer.isEncoding` when checking encoding names as some\n// modules monkey-patch it to support additional encodings\nfunction normalizeEncoding(enc) {\n  var nenc = _normalizeEncoding(enc);\n  if (typeof nenc !== 'string' && (Buffer.isEncoding === isEncoding || !isEncoding(enc))) throw new Error('Unknown encoding: ' + enc);\n  return nenc || enc;\n}\n\n// StringDecoder provides an interface for efficiently splitting a series of\n// buffers into a series of JS strings without breaking apart multi-byte\n// characters.\nexports.StringDecoder = StringDecoder;\nfunction StringDecoder(encoding) {\n  this.encoding = normalizeEncoding(encoding);\n  var nb;\n  switch (this.encoding) {\n    case 'utf16le':\n      this.text = utf16Text;\n      this.end = utf16End;\n      nb = 4;\n      break;\n    case 'utf8':\n      this.fillLast = utf8FillLast;\n      nb = 4;\n      break;\n    case 'base64':\n      this.text = base64Text;\n      this.end = base64End;\n      nb = 3;\n      break;\n    default:\n      this.write = simpleWrite;\n      this.end = simpleEnd;\n      return;\n  }\n  this.lastNeed = 0;\n  this.lastTotal = 0;\n  this.lastChar = Buffer.allocUnsafe(nb);\n}\n\nStringDecoder.prototype.write = function (buf) {\n  if (buf.length === 0) return '';\n  var r;\n  var i;\n  if (this.lastNeed) {\n    r = this.fillLast(buf);\n    if (r === undefined) return '';\n    i = this.lastNeed;\n    this.lastNeed = 0;\n  } else {\n    i = 0;\n  }\n  if (i < buf.length) return r ? r + this.text(buf, i) : this.text(buf, i);\n  return r || '';\n};\n\nStringDecoder.prototype.end = utf8End;\n\n// Returns only complete characters in a Buffer\nStringDecoder.prototype.text = utf8Text;\n\n// Attempts to complete a partial non-UTF-8 character using bytes from a Buffer\nStringDecoder.prototype.fillLast = function (buf) {\n  if (this.lastNeed <= buf.length) {\n    buf.copy(this.lastChar, this.lastTotal - this.lastNeed, 0, this.lastNeed);\n    return this.lastChar.toString(this.encoding, 0, this.lastTotal);\n  }\n  buf.copy(this.lastChar, this.lastTotal - this.lastNeed, 0, buf.length);\n  this.lastNeed -= buf.length;\n};\n\n// Checks the type of a UTF-8 byte, whether it's ASCII, a leading byte, or a\n// continuation byte. If an invalid byte is detected, -2 is returned.\nfunction utf8CheckByte(byte) {\n  if (byte <= 0x7F) return 0;else if (byte >> 5 === 0x06) return 2;else if (byte >> 4 === 0x0E) return 3;else if (byte >> 3 === 0x1E) return 4;\n  return byte >> 6 === 0x02 ? -1 : -2;\n}\n\n// Checks at most 3 bytes at the end of a Buffer in order to detect an\n// incomplete multi-byte UTF-8 character. The total number of bytes (2, 3, or 4)\n// needed to complete the UTF-8 character (if applicable) are returned.\nfunction utf8CheckIncomplete(self, buf, i) {\n  var j = buf.length - 1;\n  if (j < i) return 0;\n  var nb = utf8CheckByte(buf[j]);\n  if (nb >= 0) {\n    if (nb > 0) self.lastNeed = nb - 1;\n    return nb;\n  }\n  if (--j < i || nb === -2) return 0;\n  nb = utf8CheckByte(buf[j]);\n  if (nb >= 0) {\n    if (nb > 0) self.lastNeed = nb - 2;\n    return nb;\n  }\n  if (--j < i || nb === -2) return 0;\n  nb = utf8CheckByte(buf[j]);\n  if (nb >= 0) {\n    if (nb > 0) {\n      if (nb === 2) nb = 0;else self.lastNeed = nb - 3;\n    }\n    return nb;\n  }\n  return 0;\n}\n\n// Validates as many continuation bytes for a multi-byte UTF-8 character as\n// needed or are available. If we see a non-continuation byte where we expect\n// one, we \"replace\" the validated continuation bytes we've seen so far with\n// a single UTF-8 replacement character ('\\ufffd'), to match v8's UTF-8 decoding\n// behavior. The continuation byte check is included three times in the case\n// where all of the continuation bytes for a character exist in the same buffer.\n// It is also done this way as a slight performance increase instead of using a\n// loop.\nfunction utf8CheckExtraBytes(self, buf, p) {\n  if ((buf[0] & 0xC0) !== 0x80) {\n    self.lastNeed = 0;\n    return '\\ufffd';\n  }\n  if (self.lastNeed > 1 && buf.length > 1) {\n    if ((buf[1] & 0xC0) !== 0x80) {\n      self.lastNeed = 1;\n      return '\\ufffd';\n    }\n    if (self.lastNeed > 2 && buf.length > 2) {\n      if ((buf[2] & 0xC0) !== 0x80) {\n        self.lastNeed = 2;\n        return '\\ufffd';\n      }\n    }\n  }\n}\n\n// Attempts to complete a multi-byte UTF-8 character using bytes from a Buffer.\nfunction utf8FillLast(buf) {\n  var p = this.lastTotal - this.lastNeed;\n  var r = utf8CheckExtraBytes(this, buf, p);\n  if (r !== undefined) return r;\n  if (this.lastNeed <= buf.length) {\n    buf.copy(this.lastChar, p, 0, this.lastNeed);\n    return this.lastChar.toString(this.encoding, 0, this.lastTotal);\n  }\n  buf.copy(this.lastChar, p, 0, buf.length);\n  this.lastNeed -= buf.length;\n}\n\n// Returns all complete UTF-8 characters in a Buffer. If the Buffer ended on a\n// partial character, the character's bytes are buffered until the required\n// number of bytes are available.\nfunction utf8Text(buf, i) {\n  var total = utf8CheckIncomplete(this, buf, i);\n  if (!this.lastNeed) return buf.toString('utf8', i);\n  this.lastTotal = total;\n  var end = buf.length - (total - this.lastNeed);\n  buf.copy(this.lastChar, 0, end);\n  return buf.toString('utf8', i, end);\n}\n\n// For UTF-8, a replacement character is added when ending on a partial\n// character.\nfunction utf8End(buf) {\n  var r = buf && buf.length ? this.write(buf) : '';\n  if (this.lastNeed) return r + '\\ufffd';\n  return r;\n}\n\n// UTF-16LE typically needs two bytes per character, but even if we have an even\n// number of bytes available, we need to check if we end on a leading/high\n// surrogate. In that case, we need to wait for the next two bytes in order to\n// decode the last character properly.\nfunction utf16Text(buf, i) {\n  if ((buf.length - i) % 2 === 0) {\n    var r = buf.toString('utf16le', i);\n    if (r) {\n      var c = r.charCodeAt(r.length - 1);\n      if (c >= 0xD800 && c <= 0xDBFF) {\n        this.lastNeed = 2;\n        this.lastTotal = 4;\n        this.lastChar[0] = buf[buf.length - 2];\n        this.lastChar[1] = buf[buf.length - 1];\n        return r.slice(0, -1);\n      }\n    }\n    return r;\n  }\n  this.lastNeed = 1;\n  this.lastTotal = 2;\n  this.lastChar[0] = buf[buf.length - 1];\n  return buf.toString('utf16le', i, buf.length - 1);\n}\n\n// For UTF-16LE we do not explicitly append special replacement characters if we\n// end on a partial character, we simply let v8 handle that.\nfunction utf16End(buf) {\n  var r = buf && buf.length ? this.write(buf) : '';\n  if (this.lastNeed) {\n    var end = this.lastTotal - this.lastNeed;\n    return r + this.lastChar.toString('utf16le', 0, end);\n  }\n  return r;\n}\n\nfunction base64Text(buf, i) {\n  var n = (buf.length - i) % 3;\n  if (n === 0) return buf.toString('base64', i);\n  this.lastNeed = 3 - n;\n  this.lastTotal = 3;\n  if (n === 1) {\n    this.lastChar[0] = buf[buf.length - 1];\n  } else {\n    this.lastChar[0] = buf[buf.length - 2];\n    this.lastChar[1] = buf[buf.length - 1];\n  }\n  return buf.toString('base64', i, buf.length - n);\n}\n\nfunction base64End(buf) {\n  var r = buf && buf.length ? this.write(buf) : '';\n  if (this.lastNeed) return r + this.lastChar.toString('base64', 0, 3 - this.lastNeed);\n  return r;\n}\n\n// Pass bytes on through for single-byte encodings (e.g. ascii, latin1, hex)\nfunction simpleWrite(buf) {\n  return buf.toString(this.encoding);\n}\n\nfunction simpleEnd(buf) {\n  return buf && buf.length ? this.write(buf) : '';\n}","/*!\n * @kurkle/color v0.3.2\n * https://github.com/kurkle/color#readme\n * (c) 2023 Jukka Kurkela\n * Released under the MIT License\n */\nfunction round(v) {\n  return v + 0.5 | 0;\n}\nconst lim = (v, l, h) => Math.max(Math.min(v, h), l);\nfunction p2b(v) {\n  return lim(round(v * 2.55), 0, 255);\n}\nfunction b2p(v) {\n  return lim(round(v / 2.55), 0, 100);\n}\nfunction n2b(v) {\n  return lim(round(v * 255), 0, 255);\n}\nfunction b2n(v) {\n  return lim(round(v / 2.55) / 100, 0, 1);\n}\nfunction n2p(v) {\n  return lim(round(v * 100), 0, 100);\n}\n\nconst map$1 = {0: 0, 1: 1, 2: 2, 3: 3, 4: 4, 5: 5, 6: 6, 7: 7, 8: 8, 9: 9, A: 10, B: 11, C: 12, D: 13, E: 14, F: 15, a: 10, b: 11, c: 12, d: 13, e: 14, f: 15};\nconst hex = [...'0123456789ABCDEF'];\nconst h1 = b => hex[b & 0xF];\nconst h2 = b => hex[(b & 0xF0) >> 4] + hex[b & 0xF];\nconst eq = b => ((b & 0xF0) >> 4) === (b & 0xF);\nconst isShort = v => eq(v.r) && eq(v.g) && eq(v.b) && eq(v.a);\nfunction hexParse(str) {\n  var len = str.length;\n  var ret;\n  if (str[0] === '#') {\n    if (len === 4 || len === 5) {\n      ret = {\n        r: 255 & map$1[str[1]] * 17,\n        g: 255 & map$1[str[2]] * 17,\n        b: 255 & map$1[str[3]] * 17,\n        a: len === 5 ? map$1[str[4]] * 17 : 255\n      };\n    } else if (len === 7 || len === 9) {\n      ret = {\n        r: map$1[str[1]] << 4 | map$1[str[2]],\n        g: map$1[str[3]] << 4 | map$1[str[4]],\n        b: map$1[str[5]] << 4 | map$1[str[6]],\n        a: len === 9 ? (map$1[str[7]] << 4 | map$1[str[8]]) : 255\n      };\n    }\n  }\n  return ret;\n}\nconst alpha = (a, f) => a < 255 ? f(a) : '';\nfunction hexString(v) {\n  var f = isShort(v) ? h1 : h2;\n  return v\n    ? '#' + f(v.r) + f(v.g) + f(v.b) + alpha(v.a, f)\n    : undefined;\n}\n\nconst HUE_RE = /^(hsla?|hwb|hsv)\\(\\s*([-+.e\\d]+)(?:deg)?[\\s,]+([-+.e\\d]+)%[\\s,]+([-+.e\\d]+)%(?:[\\s,]+([-+.e\\d]+)(%)?)?\\s*\\)$/;\nfunction hsl2rgbn(h, s, l) {\n  const a = s * Math.min(l, 1 - l);\n  const f = (n, k = (n + h / 30) % 12) => l - a * Math.max(Math.min(k - 3, 9 - k, 1), -1);\n  return [f(0), f(8), f(4)];\n}\nfunction hsv2rgbn(h, s, v) {\n  const f = (n, k = (n + h / 60) % 6) => v - v * s * Math.max(Math.min(k, 4 - k, 1), 0);\n  return [f(5), f(3), f(1)];\n}\nfunction hwb2rgbn(h, w, b) {\n  const rgb = hsl2rgbn(h, 1, 0.5);\n  let i;\n  if (w + b > 1) {\n    i = 1 / (w + b);\n    w *= i;\n    b *= i;\n  }\n  for (i = 0; i < 3; i++) {\n    rgb[i] *= 1 - w - b;\n    rgb[i] += w;\n  }\n  return rgb;\n}\nfunction hueValue(r, g, b, d, max) {\n  if (r === max) {\n    return ((g - b) / d) + (g < b ? 6 : 0);\n  }\n  if (g === max) {\n    return (b - r) / d + 2;\n  }\n  return (r - g) / d + 4;\n}\nfunction rgb2hsl(v) {\n  const range = 255;\n  const r = v.r / range;\n  const g = v.g / range;\n  const b = v.b / range;\n  const max = Math.max(r, g, b);\n  const min = Math.min(r, g, b);\n  const l = (max + min) / 2;\n  let h, s, d;\n  if (max !== min) {\n    d = max - min;\n    s = l > 0.5 ? d / (2 - max - min) : d / (max + min);\n    h = hueValue(r, g, b, d, max);\n    h = h * 60 + 0.5;\n  }\n  return [h | 0, s || 0, l];\n}\nfunction calln(f, a, b, c) {\n  return (\n    Array.isArray(a)\n      ? f(a[0], a[1], a[2])\n      : f(a, b, c)\n  ).map(n2b);\n}\nfunction hsl2rgb(h, s, l) {\n  return calln(hsl2rgbn, h, s, l);\n}\nfunction hwb2rgb(h, w, b) {\n  return calln(hwb2rgbn, h, w, b);\n}\nfunction hsv2rgb(h, s, v) {\n  return calln(hsv2rgbn, h, s, v);\n}\nfunction hue(h) {\n  return (h % 360 + 360) % 360;\n}\nfunction hueParse(str) {\n  const m = HUE_RE.exec(str);\n  let a = 255;\n  let v;\n  if (!m) {\n    return;\n  }\n  if (m[5] !== v) {\n    a = m[6] ? p2b(+m[5]) : n2b(+m[5]);\n  }\n  const h = hue(+m[2]);\n  const p1 = +m[3] / 100;\n  const p2 = +m[4] / 100;\n  if (m[1] === 'hwb') {\n    v = hwb2rgb(h, p1, p2);\n  } else if (m[1] === 'hsv') {\n    v = hsv2rgb(h, p1, p2);\n  } else {\n    v = hsl2rgb(h, p1, p2);\n  }\n  return {\n    r: v[0],\n    g: v[1],\n    b: v[2],\n    a: a\n  };\n}\nfunction rotate(v, deg) {\n  var h = rgb2hsl(v);\n  h[0] = hue(h[0] + deg);\n  h = hsl2rgb(h);\n  v.r = h[0];\n  v.g = h[1];\n  v.b = h[2];\n}\nfunction hslString(v) {\n  if (!v) {\n    return;\n  }\n  const a = rgb2hsl(v);\n  const h = a[0];\n  const s = n2p(a[1]);\n  const l = n2p(a[2]);\n  return v.a < 255\n    ? `hsla(${h}, ${s}%, ${l}%, ${b2n(v.a)})`\n    : `hsl(${h}, ${s}%, ${l}%)`;\n}\n\nconst map = {\n  x: 'dark',\n  Z: 'light',\n  Y: 're',\n  X: 'blu',\n  W: 'gr',\n  V: 'medium',\n  U: 'slate',\n  A: 'ee',\n  T: 'ol',\n  S: 'or',\n  B: 'ra',\n  C: 'lateg',\n  D: 'ights',\n  R: 'in',\n  Q: 'turquois',\n  E: 'hi',\n  P: 'ro',\n  O: 'al',\n  N: 'le',\n  M: 'de',\n  L: 'yello',\n  F: 'en',\n  K: 'ch',\n  G: 'arks',\n  H: 'ea',\n  I: 'ightg',\n  J: 'wh'\n};\nconst names$1 = {\n  OiceXe: 'f0f8ff',\n  antiquewEte: 'faebd7',\n  aqua: 'ffff',\n  aquamarRe: '7fffd4',\n  azuY: 'f0ffff',\n  beige: 'f5f5dc',\n  bisque: 'ffe4c4',\n  black: '0',\n  blanKedOmond: 'ffebcd',\n  Xe: 'ff',\n  XeviTet: '8a2be2',\n  bPwn: 'a52a2a',\n  burlywood: 'deb887',\n  caMtXe: '5f9ea0',\n  KartYuse: '7fff00',\n  KocTate: 'd2691e',\n  cSO: 'ff7f50',\n  cSnflowerXe: '6495ed',\n  cSnsilk: 'fff8dc',\n  crimson: 'dc143c',\n  cyan: 'ffff',\n  xXe: '8b',\n  xcyan: '8b8b',\n  xgTMnPd: 'b8860b',\n  xWay: 'a9a9a9',\n  xgYF: '6400',\n  xgYy: 'a9a9a9',\n  xkhaki: 'bdb76b',\n  xmagFta: '8b008b',\n  xTivegYF: '556b2f',\n  xSange: 'ff8c00',\n  xScEd: '9932cc',\n  xYd: '8b0000',\n  xsOmon: 'e9967a',\n  xsHgYF: '8fbc8f',\n  xUXe: '483d8b',\n  xUWay: '2f4f4f',\n  xUgYy: '2f4f4f',\n  xQe: 'ced1',\n  xviTet: '9400d3',\n  dAppRk: 'ff1493',\n  dApskyXe: 'bfff',\n  dimWay: '696969',\n  dimgYy: '696969',\n  dodgerXe: '1e90ff',\n  fiYbrick: 'b22222',\n  flSOwEte: 'fffaf0',\n  foYstWAn: '228b22',\n  fuKsia: 'ff00ff',\n  gaRsbSo: 'dcdcdc',\n  ghostwEte: 'f8f8ff',\n  gTd: 'ffd700',\n  gTMnPd: 'daa520',\n  Way: '808080',\n  gYF: '8000',\n  gYFLw: 'adff2f',\n  gYy: '808080',\n  honeyMw: 'f0fff0',\n  hotpRk: 'ff69b4',\n  RdianYd: 'cd5c5c',\n  Rdigo: '4b0082',\n  ivSy: 'fffff0',\n  khaki: 'f0e68c',\n  lavFMr: 'e6e6fa',\n  lavFMrXsh: 'fff0f5',\n  lawngYF: '7cfc00',\n  NmoncEffon: 'fffacd',\n  ZXe: 'add8e6',\n  ZcSO: 'f08080',\n  Zcyan: 'e0ffff',\n  ZgTMnPdLw: 'fafad2',\n  ZWay: 'd3d3d3',\n  ZgYF: '90ee90',\n  ZgYy: 'd3d3d3',\n  ZpRk: 'ffb6c1',\n  ZsOmon: 'ffa07a',\n  ZsHgYF: '20b2aa',\n  ZskyXe: '87cefa',\n  ZUWay: '778899',\n  ZUgYy: '778899',\n  ZstAlXe: 'b0c4de',\n  ZLw: 'ffffe0',\n  lime: 'ff00',\n  limegYF: '32cd32',\n  lRF: 'faf0e6',\n  magFta: 'ff00ff',\n  maPon: '800000',\n  VaquamarRe: '66cdaa',\n  VXe: 'cd',\n  VScEd: 'ba55d3',\n  VpurpN: '9370db',\n  VsHgYF: '3cb371',\n  VUXe: '7b68ee',\n  VsprRggYF: 'fa9a',\n  VQe: '48d1cc',\n  VviTetYd: 'c71585',\n  midnightXe: '191970',\n  mRtcYam: 'f5fffa',\n  mistyPse: 'ffe4e1',\n  moccasR: 'ffe4b5',\n  navajowEte: 'ffdead',\n  navy: '80',\n  Tdlace: 'fdf5e6',\n  Tive: '808000',\n  TivedBb: '6b8e23',\n  Sange: 'ffa500',\n  SangeYd: 'ff4500',\n  ScEd: 'da70d6',\n  pOegTMnPd: 'eee8aa',\n  pOegYF: '98fb98',\n  pOeQe: 'afeeee',\n  pOeviTetYd: 'db7093',\n  papayawEp: 'ffefd5',\n  pHKpuff: 'ffdab9',\n  peru: 'cd853f',\n  pRk: 'ffc0cb',\n  plum: 'dda0dd',\n  powMrXe: 'b0e0e6',\n  purpN: '800080',\n  YbeccapurpN: '663399',\n  Yd: 'ff0000',\n  Psybrown: 'bc8f8f',\n  PyOXe: '4169e1',\n  saddNbPwn: '8b4513',\n  sOmon: 'fa8072',\n  sandybPwn: 'f4a460',\n  sHgYF: '2e8b57',\n  sHshell: 'fff5ee',\n  siFna: 'a0522d',\n  silver: 'c0c0c0',\n  skyXe: '87ceeb',\n  UXe: '6a5acd',\n  UWay: '708090',\n  UgYy: '708090',\n  snow: 'fffafa',\n  sprRggYF: 'ff7f',\n  stAlXe: '4682b4',\n  tan: 'd2b48c',\n  teO: '8080',\n  tEstN: 'd8bfd8',\n  tomato: 'ff6347',\n  Qe: '40e0d0',\n  viTet: 'ee82ee',\n  JHt: 'f5deb3',\n  wEte: 'ffffff',\n  wEtesmoke: 'f5f5f5',\n  Lw: 'ffff00',\n  LwgYF: '9acd32'\n};\nfunction unpack() {\n  const unpacked = {};\n  const keys = Object.keys(names$1);\n  const tkeys = Object.keys(map);\n  let i, j, k, ok, nk;\n  for (i = 0; i < keys.length; i++) {\n    ok = nk = keys[i];\n    for (j = 0; j < tkeys.length; j++) {\n      k = tkeys[j];\n      nk = nk.replace(k, map[k]);\n    }\n    k = parseInt(names$1[ok], 16);\n    unpacked[nk] = [k >> 16 & 0xFF, k >> 8 & 0xFF, k & 0xFF];\n  }\n  return unpacked;\n}\n\nlet names;\nfunction nameParse(str) {\n  if (!names) {\n    names = unpack();\n    names.transparent = [0, 0, 0, 0];\n  }\n  const a = names[str.toLowerCase()];\n  return a && {\n    r: a[0],\n    g: a[1],\n    b: a[2],\n    a: a.length === 4 ? a[3] : 255\n  };\n}\n\nconst RGB_RE = /^rgba?\\(\\s*([-+.\\d]+)(%)?[\\s,]+([-+.e\\d]+)(%)?[\\s,]+([-+.e\\d]+)(%)?(?:[\\s,/]+([-+.e\\d]+)(%)?)?\\s*\\)$/;\nfunction rgbParse(str) {\n  const m = RGB_RE.exec(str);\n  let a = 255;\n  let r, g, b;\n  if (!m) {\n    return;\n  }\n  if (m[7] !== r) {\n    const v = +m[7];\n    a = m[8] ? p2b(v) : lim(v * 255, 0, 255);\n  }\n  r = +m[1];\n  g = +m[3];\n  b = +m[5];\n  r = 255 & (m[2] ? p2b(r) : lim(r, 0, 255));\n  g = 255 & (m[4] ? p2b(g) : lim(g, 0, 255));\n  b = 255 & (m[6] ? p2b(b) : lim(b, 0, 255));\n  return {\n    r: r,\n    g: g,\n    b: b,\n    a: a\n  };\n}\nfunction rgbString(v) {\n  return v && (\n    v.a < 255\n      ? `rgba(${v.r}, ${v.g}, ${v.b}, ${b2n(v.a)})`\n      : `rgb(${v.r}, ${v.g}, ${v.b})`\n  );\n}\n\nconst to = v => v <= 0.0031308 ? v * 12.92 : Math.pow(v, 1.0 / 2.4) * 1.055 - 0.055;\nconst from = v => v <= 0.04045 ? v / 12.92 : Math.pow((v + 0.055) / 1.055, 2.4);\nfunction interpolate(rgb1, rgb2, t) {\n  const r = from(b2n(rgb1.r));\n  const g = from(b2n(rgb1.g));\n  const b = from(b2n(rgb1.b));\n  return {\n    r: n2b(to(r + t * (from(b2n(rgb2.r)) - r))),\n    g: n2b(to(g + t * (from(b2n(rgb2.g)) - g))),\n    b: n2b(to(b + t * (from(b2n(rgb2.b)) - b))),\n    a: rgb1.a + t * (rgb2.a - rgb1.a)\n  };\n}\n\nfunction modHSL(v, i, ratio) {\n  if (v) {\n    let tmp = rgb2hsl(v);\n    tmp[i] = Math.max(0, Math.min(tmp[i] + tmp[i] * ratio, i === 0 ? 360 : 1));\n    tmp = hsl2rgb(tmp);\n    v.r = tmp[0];\n    v.g = tmp[1];\n    v.b = tmp[2];\n  }\n}\nfunction clone(v, proto) {\n  return v ? Object.assign(proto || {}, v) : v;\n}\nfunction fromObject(input) {\n  var v = {r: 0, g: 0, b: 0, a: 255};\n  if (Array.isArray(input)) {\n    if (input.length >= 3) {\n      v = {r: input[0], g: input[1], b: input[2], a: 255};\n      if (input.length > 3) {\n        v.a = n2b(input[3]);\n      }\n    }\n  } else {\n    v = clone(input, {r: 0, g: 0, b: 0, a: 1});\n    v.a = n2b(v.a);\n  }\n  return v;\n}\nfunction functionParse(str) {\n  if (str.charAt(0) === 'r') {\n    return rgbParse(str);\n  }\n  return hueParse(str);\n}\nclass Color {\n  constructor(input) {\n    if (input instanceof Color) {\n      return input;\n    }\n    const type = typeof input;\n    let v;\n    if (type === 'object') {\n      v = fromObject(input);\n    } else if (type === 'string') {\n      v = hexParse(input) || nameParse(input) || functionParse(input);\n    }\n    this._rgb = v;\n    this._valid = !!v;\n  }\n  get valid() {\n    return this._valid;\n  }\n  get rgb() {\n    var v = clone(this._rgb);\n    if (v) {\n      v.a = b2n(v.a);\n    }\n    return v;\n  }\n  set rgb(obj) {\n    this._rgb = fromObject(obj);\n  }\n  rgbString() {\n    return this._valid ? rgbString(this._rgb) : undefined;\n  }\n  hexString() {\n    return this._valid ? hexString(this._rgb) : undefined;\n  }\n  hslString() {\n    return this._valid ? hslString(this._rgb) : undefined;\n  }\n  mix(color, weight) {\n    if (color) {\n      const c1 = this.rgb;\n      const c2 = color.rgb;\n      let w2;\n      const p = weight === w2 ? 0.5 : weight;\n      const w = 2 * p - 1;\n      const a = c1.a - c2.a;\n      const w1 = ((w * a === -1 ? w : (w + a) / (1 + w * a)) + 1) / 2.0;\n      w2 = 1 - w1;\n      c1.r = 0xFF & w1 * c1.r + w2 * c2.r + 0.5;\n      c1.g = 0xFF & w1 * c1.g + w2 * c2.g + 0.5;\n      c1.b = 0xFF & w1 * c1.b + w2 * c2.b + 0.5;\n      c1.a = p * c1.a + (1 - p) * c2.a;\n      this.rgb = c1;\n    }\n    return this;\n  }\n  interpolate(color, t) {\n    if (color) {\n      this._rgb = interpolate(this._rgb, color._rgb, t);\n    }\n    return this;\n  }\n  clone() {\n    return new Color(this.rgb);\n  }\n  alpha(a) {\n    this._rgb.a = n2b(a);\n    return this;\n  }\n  clearer(ratio) {\n    const rgb = this._rgb;\n    rgb.a *= 1 - ratio;\n    return this;\n  }\n  greyscale() {\n    const rgb = this._rgb;\n    const val = round(rgb.r * 0.3 + rgb.g * 0.59 + rgb.b * 0.11);\n    rgb.r = rgb.g = rgb.b = val;\n    return this;\n  }\n  opaquer(ratio) {\n    const rgb = this._rgb;\n    rgb.a *= 1 + ratio;\n    return this;\n  }\n  negate() {\n    const v = this._rgb;\n    v.r = 255 - v.r;\n    v.g = 255 - v.g;\n    v.b = 255 - v.b;\n    return this;\n  }\n  lighten(ratio) {\n    modHSL(this._rgb, 2, ratio);\n    return this;\n  }\n  darken(ratio) {\n    modHSL(this._rgb, 2, -ratio);\n    return this;\n  }\n  saturate(ratio) {\n    modHSL(this._rgb, 1, ratio);\n    return this;\n  }\n  desaturate(ratio) {\n    modHSL(this._rgb, 1, -ratio);\n    return this;\n  }\n  rotate(deg) {\n    rotate(this._rgb, deg);\n    return this;\n  }\n}\n\nfunction index_esm(input) {\n  return new Color(input);\n}\n\nexport { Color, b2n, b2p, index_esm as default, hexParse, hexString, hsl2rgb, hslString, hsv2rgb, hueParse, hwb2rgb, lim, n2b, n2p, nameParse, p2b, rgb2hsl, rgbParse, rgbString, rotate, round };\n","/**\n * @namespace Chart.helpers\n */\n\nimport type {AnyObject} from '../types/basic.js';\nimport type {ActiveDataPoint, ChartEvent} from '../types/index.js';\n\n/**\n * An empty function that can be used, for example, for optional callback.\n */\nexport function noop() {\n  /* noop */\n}\n\n/**\n * Returns a unique id, sequentially generated from a global variable.\n */\nexport const uid = (() => {\n  let id = 0;\n  return () => id++;\n})();\n\n/**\n * Returns true if `value` is neither null nor undefined, else returns false.\n * @param value - The value to test.\n * @since 2.7.0\n */\nexport function isNullOrUndef(value: unknown): value is null | undefined {\n  return value === null || typeof value === 'undefined';\n}\n\n/**\n * Returns true if `value` is an array (including typed arrays), else returns false.\n * @param value - The value to test.\n * @function\n */\nexport function isArray<T = unknown>(value: unknown): value is T[] {\n  if (Array.isArray && Array.isArray(value)) {\n    return true;\n  }\n  const type = Object.prototype.toString.call(value);\n  if (type.slice(0, 7) === '[object' && type.slice(-6) === 'Array]') {\n    return true;\n  }\n  return false;\n}\n\n/**\n * Returns true if `value` is an object (excluding null), else returns false.\n * @param value - The value to test.\n * @since 2.7.0\n */\nexport function isObject(value: unknown): value is AnyObject {\n  return value !== null && Object.prototype.toString.call(value) === '[object Object]';\n}\n\n/**\n * Returns true if `value` is a finite number, else returns false\n * @param value  - The value to test.\n */\nfunction isNumberFinite(value: unknown): value is number {\n  return (typeof value === 'number' || value instanceof Number) && isFinite(+value);\n}\nexport {\n  isNumberFinite as isFinite,\n};\n\n/**\n * Returns `value` if finite, else returns `defaultValue`.\n * @param value - The value to return if defined.\n * @param defaultValue - The value to return if `value` is not finite.\n */\nexport function finiteOrDefault(value: unknown, defaultValue: number) {\n  return isNumberFinite(value) ? value : defaultValue;\n}\n\n/**\n * Returns `value` if defined, else returns `defaultValue`.\n * @param value - The value to return if defined.\n * @param defaultValue - The value to return if `value` is undefined.\n */\nexport function valueOrDefault<T>(value: T | undefined, defaultValue: T) {\n  return typeof value === 'undefined' ? defaultValue : value;\n}\n\nexport const toPercentage = (value: number | string, dimension: number) =>\n  typeof value === 'string' && value.endsWith('%') ?\n    parseFloat(value) / 100\n    : +value / dimension;\n\nexport const toDimension = (value: number | string, dimension: number) =>\n  typeof value === 'string' && value.endsWith('%') ?\n    parseFloat(value) / 100 * dimension\n    : +value;\n\n/**\n * Calls `fn` with the given `args` in the scope defined by `thisArg` and returns the\n * value returned by `fn`. If `fn` is not a function, this method returns undefined.\n * @param fn - The function to call.\n * @param args - The arguments with which `fn` should be called.\n * @param [thisArg] - The value of `this` provided for the call to `fn`.\n */\nexport function callback<T extends (this: TA, ...restArgs: unknown[]) => R, TA, R>(\n  fn: T | undefined,\n  args: unknown[],\n  thisArg?: TA\n): R | undefined {\n  if (fn && typeof fn.call === 'function') {\n    return fn.apply(thisArg, args);\n  }\n}\n\n/**\n * Note(SB) for performance sake, this method should only be used when loopable type\n * is unknown or in none intensive code (not called often and small loopable). Else\n * it's preferable to use a regular for() loop and save extra function calls.\n * @param loopable - The object or array to be iterated.\n * @param fn - The function to call for each item.\n * @param [thisArg] - The value of `this` provided for the call to `fn`.\n * @param [reverse] - If true, iterates backward on the loopable.\n */\nexport function each<T, TA>(\n  loopable: Record<string, T>,\n  fn: (this: TA, v: T, i: string) => void,\n  thisArg?: TA,\n  reverse?: boolean\n): void;\nexport function each<T, TA>(\n  loopable: T[],\n  fn: (this: TA, v: T, i: number) => void,\n  thisArg?: TA,\n  reverse?: boolean\n): void;\nexport function each<T, TA>(\n  loopable: T[] | Record<string, T>,\n  fn: (this: TA, v: T, i: any) => void,\n  thisArg?: TA,\n  reverse?: boolean\n) {\n  let i: number, len: number, keys: string[];\n  if (isArray(loopable)) {\n    len = loopable.length;\n    if (reverse) {\n      for (i = len - 1; i >= 0; i--) {\n        fn.call(thisArg, loopable[i], i);\n      }\n    } else {\n      for (i = 0; i < len; i++) {\n        fn.call(thisArg, loopable[i], i);\n      }\n    }\n  } else if (isObject(loopable)) {\n    keys = Object.keys(loopable);\n    len = keys.length;\n    for (i = 0; i < len; i++) {\n      fn.call(thisArg, loopable[keys[i]], keys[i]);\n    }\n  }\n}\n\n/**\n * Returns true if the `a0` and `a1` arrays have the same content, else returns false.\n * @param a0 - The array to compare\n * @param a1 - The array to compare\n * @private\n */\nexport function _elementsEqual(a0: ActiveDataPoint[], a1: ActiveDataPoint[]) {\n  let i: number, ilen: number, v0: ActiveDataPoint, v1: ActiveDataPoint;\n\n  if (!a0 || !a1 || a0.length !== a1.length) {\n    return false;\n  }\n\n  for (i = 0, ilen = a0.length; i < ilen; ++i) {\n    v0 = a0[i];\n    v1 = a1[i];\n\n    if (v0.datasetIndex !== v1.datasetIndex || v0.index !== v1.index) {\n      return false;\n    }\n  }\n\n  return true;\n}\n\n/**\n * Returns a deep copy of `source` without keeping references on objects and arrays.\n * @param source - The value to clone.\n */\nexport function clone<T>(source: T): T {\n  if (isArray(source)) {\n    return source.map(clone) as unknown as T;\n  }\n\n  if (isObject(source)) {\n    const target = Object.create(null);\n    const keys = Object.keys(source);\n    const klen = keys.length;\n    let k = 0;\n\n    for (; k < klen; ++k) {\n      target[keys[k]] = clone(source[keys[k]]);\n    }\n\n    return target;\n  }\n\n  return source;\n}\n\nfunction isValidKey(key: string) {\n  return ['__proto__', 'prototype', 'constructor'].indexOf(key) === -1;\n}\n\n/**\n * The default merger when Chart.helpers.merge is called without merger option.\n * Note(SB): also used by mergeConfig and mergeScaleConfig as fallback.\n * @private\n */\nexport function _merger(key: string, target: AnyObject, source: AnyObject, options: AnyObject) {\n  if (!isValidKey(key)) {\n    return;\n  }\n\n  const tval = target[key];\n  const sval = source[key];\n\n  if (isObject(tval) && isObject(sval)) {\n    // eslint-disable-next-line @typescript-eslint/no-use-before-define\n    merge(tval, sval, options);\n  } else {\n    target[key] = clone(sval);\n  }\n}\n\nexport interface MergeOptions {\n  merger?: (key: string, target: AnyObject, source: AnyObject, options?: AnyObject) => void;\n}\n\n/**\n * Recursively deep copies `source` properties into `target` with the given `options`.\n * IMPORTANT: `target` is not cloned and will be updated with `source` properties.\n * @param target - The target object in which all sources are merged into.\n * @param source - Object(s) to merge into `target`.\n * @param [options] - Merging options:\n * @param [options.merger] - The merge method (key, target, source, options)\n * @returns The `target` object.\n */\nexport function merge<T>(target: T, source: [], options?: MergeOptions): T;\nexport function merge<T, S1>(target: T, source: S1, options?: MergeOptions): T & S1;\nexport function merge<T, S1>(target: T, source: [S1], options?: MergeOptions): T & S1;\nexport function merge<T, S1, S2>(target: T, source: [S1, S2], options?: MergeOptions): T & S1 & S2;\nexport function merge<T, S1, S2, S3>(target: T, source: [S1, S2, S3], options?: MergeOptions): T & S1 & S2 & S3;\nexport function merge<T, S1, S2, S3, S4>(\n  target: T,\n  source: [S1, S2, S3, S4],\n  options?: MergeOptions\n): T & S1 & S2 & S3 & S4;\nexport function merge<T>(target: T, source: AnyObject[], options?: MergeOptions): AnyObject;\nexport function merge<T>(target: T, source: AnyObject[], options?: MergeOptions): AnyObject {\n  const sources = isArray(source) ? source : [source];\n  const ilen = sources.length;\n\n  if (!isObject(target)) {\n    return target as AnyObject;\n  }\n\n  options = options || {};\n  const merger = options.merger || _merger;\n  let current: AnyObject;\n\n  for (let i = 0; i < ilen; ++i) {\n    current = sources[i];\n    if (!isObject(current)) {\n      continue;\n    }\n\n    const keys = Object.keys(current);\n    for (let k = 0, klen = keys.length; k < klen; ++k) {\n      merger(keys[k], target, current, options as AnyObject);\n    }\n  }\n\n  return target;\n}\n\n/**\n * Recursively deep copies `source` properties into `target` *only* if not defined in target.\n * IMPORTANT: `target` is not cloned and will be updated with `source` properties.\n * @param target - The target object in which all sources are merged into.\n * @param source - Object(s) to merge into `target`.\n * @returns The `target` object.\n */\nexport function mergeIf<T>(target: T, source: []): T;\nexport function mergeIf<T, S1>(target: T, source: S1): T & S1;\nexport function mergeIf<T, S1>(target: T, source: [S1]): T & S1;\nexport function mergeIf<T, S1, S2>(target: T, source: [S1, S2]): T & S1 & S2;\nexport function mergeIf<T, S1, S2, S3>(target: T, source: [S1, S2, S3]): T & S1 & S2 & S3;\nexport function mergeIf<T, S1, S2, S3, S4>(target: T, source: [S1, S2, S3, S4]): T & S1 & S2 & S3 & S4;\nexport function mergeIf<T>(target: T, source: AnyObject[]): AnyObject;\nexport function mergeIf<T>(target: T, source: AnyObject[]): AnyObject {\n  // eslint-disable-next-line @typescript-eslint/no-use-before-define\n  return merge<T>(target, source, {merger: _mergerIf});\n}\n\n/**\n * Merges source[key] in target[key] only if target[key] is undefined.\n * @private\n */\nexport function _mergerIf(key: string, target: AnyObject, source: AnyObject) {\n  if (!isValidKey(key)) {\n    return;\n  }\n\n  const tval = target[key];\n  const sval = source[key];\n\n  if (isObject(tval) && isObject(sval)) {\n    mergeIf(tval, sval);\n  } else if (!Object.prototype.hasOwnProperty.call(target, key)) {\n    target[key] = clone(sval);\n  }\n}\n\n/**\n * @private\n */\nexport function _deprecated(scope: string, value: unknown, previous: string, current: string) {\n  if (value !== undefined) {\n    console.warn(scope + ': \"' + previous +\n      '\" is deprecated. Please use \"' + current + '\" instead');\n  }\n}\n\n// resolveObjectKey resolver cache\nconst keyResolvers = {\n  // Chart.helpers.core resolveObjectKey should resolve empty key to root object\n  '': v => v,\n  // default resolvers\n  x: o => o.x,\n  y: o => o.y\n};\n\n/**\n * @private\n */\nexport function _splitKey(key: string) {\n  const parts = key.split('.');\n  const keys: string[] = [];\n  let tmp = '';\n  for (const part of parts) {\n    tmp += part;\n    if (tmp.endsWith('\\\\')) {\n      tmp = tmp.slice(0, -1) + '.';\n    } else {\n      keys.push(tmp);\n      tmp = '';\n    }\n  }\n  return keys;\n}\n\nfunction _getKeyResolver(key: string) {\n  const keys = _splitKey(key);\n  return obj => {\n    for (const k of keys) {\n      if (k === '') {\n        // For backward compatibility:\n        // Chart.helpers.core resolveObjectKey should break at empty key\n        break;\n      }\n      obj = obj && obj[k];\n    }\n    return obj;\n  };\n}\n\nexport function resolveObjectKey(obj: AnyObject, key: string): any {\n  const resolver = keyResolvers[key] || (keyResolvers[key] = _getKeyResolver(key));\n  return resolver(obj);\n}\n\n/**\n * @private\n */\nexport function _capitalize(str: string) {\n  return str.charAt(0).toUpperCase() + str.slice(1);\n}\n\n\nexport const defined = (value: unknown) => typeof value !== 'undefined';\n\nexport const isFunction = (value: unknown): value is (...args: any[]) => any => typeof value === 'function';\n\n// Adapted from https://stackoverflow.com/questions/31128855/comparing-ecma6-sets-for-equality#31129384\nexport const setsEqual = <T>(a: Set<T>, b: Set<T>) => {\n  if (a.size !== b.size) {\n    return false;\n  }\n\n  for (const item of a) {\n    if (!b.has(item)) {\n      return false;\n    }\n  }\n\n  return true;\n};\n\n/**\n * @param e - The event\n * @private\n */\nexport function _isClickEvent(e: ChartEvent) {\n  return e.type === 'mouseup' || e.type === 'click' || e.type === 'contextmenu';\n}\n","import type {Point} from '../types/geometric.js';\nimport {isFinite as isFiniteNumber} from './helpers.core.js';\n\n/**\n * @alias Chart.helpers.math\n * @namespace\n */\n\nexport const PI = Math.PI;\nexport const TAU = 2 * PI;\nexport const PITAU = TAU + PI;\nexport const INFINITY = Number.POSITIVE_INFINITY;\nexport const RAD_PER_DEG = PI / 180;\nexport const HALF_PI = PI / 2;\nexport const QUARTER_PI = PI / 4;\nexport const TWO_THIRDS_PI = PI * 2 / 3;\n\nexport const log10 = Math.log10;\nexport const sign = Math.sign;\n\nexport function almostEquals(x: number, y: number, epsilon: number) {\n  return Math.abs(x - y) < epsilon;\n}\n\n/**\n * Implementation of the nice number algorithm used in determining where axis labels will go\n */\nexport function niceNum(range: number) {\n  const roundedRange = Math.round(range);\n  range = almostEquals(range, roundedRange, range / 1000) ? roundedRange : range;\n  const niceRange = Math.pow(10, Math.floor(log10(range)));\n  const fraction = range / niceRange;\n  const niceFraction = fraction <= 1 ? 1 : fraction <= 2 ? 2 : fraction <= 5 ? 5 : 10;\n  return niceFraction * niceRange;\n}\n\n/**\n * Returns an array of factors sorted from 1 to sqrt(value)\n * @private\n */\nexport function _factorize(value: number) {\n  const result: number[] = [];\n  const sqrt = Math.sqrt(value);\n  let i: number;\n\n  for (i = 1; i < sqrt; i++) {\n    if (value % i === 0) {\n      result.push(i);\n      result.push(value / i);\n    }\n  }\n  if (sqrt === (sqrt | 0)) { // if value is a square number\n    result.push(sqrt);\n  }\n\n  result.sort((a, b) => a - b).pop();\n  return result;\n}\n\nexport function isNumber(n: unknown): n is number {\n  return !isNaN(parseFloat(n as string)) && isFinite(n as number);\n}\n\nexport function almostWhole(x: number, epsilon: number) {\n  const rounded = Math.round(x);\n  return ((rounded - epsilon) <= x) && ((rounded + epsilon) >= x);\n}\n\n/**\n * @private\n */\nexport function _setMinAndMaxByKey(\n  array: Record<string, number>[],\n  target: { min: number, max: number },\n  property: string\n) {\n  let i: number, ilen: number, value: number;\n\n  for (i = 0, ilen = array.length; i < ilen; i++) {\n    value = array[i][property];\n    if (!isNaN(value)) {\n      target.min = Math.min(target.min, value);\n      target.max = Math.max(target.max, value);\n    }\n  }\n}\n\nexport function toRadians(degrees: number) {\n  return degrees * (PI / 180);\n}\n\nexport function toDegrees(radians: number) {\n  return radians * (180 / PI);\n}\n\n/**\n * Returns the number of decimal places\n * i.e. the number of digits after the decimal point, of the value of this Number.\n * @param x - A number.\n * @returns The number of decimal places.\n * @private\n */\nexport function _decimalPlaces(x: number) {\n  if (!isFiniteNumber(x)) {\n    return;\n  }\n  let e = 1;\n  let p = 0;\n  while (Math.round(x * e) / e !== x) {\n    e *= 10;\n    p++;\n  }\n  return p;\n}\n\n// Gets the angle from vertical upright to the point about a centre.\nexport function getAngleFromPoint(\n  centrePoint: Point,\n  anglePoint: Point\n) {\n  const distanceFromXCenter = anglePoint.x - centrePoint.x;\n  const distanceFromYCenter = anglePoint.y - centrePoint.y;\n  const radialDistanceFromCenter = Math.sqrt(distanceFromXCenter * distanceFromXCenter + distanceFromYCenter * distanceFromYCenter);\n\n  let angle = Math.atan2(distanceFromYCenter, distanceFromXCenter);\n\n  if (angle < (-0.5 * PI)) {\n    angle += TAU; // make sure the returned angle is in the range of (-PI/2, 3PI/2]\n  }\n\n  return {\n    angle,\n    distance: radialDistanceFromCenter\n  };\n}\n\nexport function distanceBetweenPoints(pt1: Point, pt2: Point) {\n  return Math.sqrt(Math.pow(pt2.x - pt1.x, 2) + Math.pow(pt2.y - pt1.y, 2));\n}\n\n/**\n * Shortest distance between angles, in either direction.\n * @private\n */\nexport function _angleDiff(a: number, b: number) {\n  return (a - b + PITAU) % TAU - PI;\n}\n\n/**\n * Normalize angle to be between 0 and 2*PI\n * @private\n */\nexport function _normalizeAngle(a: number) {\n  return (a % TAU + TAU) % TAU;\n}\n\n/**\n * @private\n */\nexport function _angleBetween(angle: number, start: number, end: number, sameAngleIsFullCircle?: boolean) {\n  const a = _normalizeAngle(angle);\n  const s = _normalizeAngle(start);\n  const e = _normalizeAngle(end);\n  const angleToStart = _normalizeAngle(s - a);\n  const angleToEnd = _normalizeAngle(e - a);\n  const startToAngle = _normalizeAngle(a - s);\n  const endToAngle = _normalizeAngle(a - e);\n  return a === s || a === e || (sameAngleIsFullCircle && s === e)\n    || (angleToStart > angleToEnd && startToAngle < endToAngle);\n}\n\n/**\n * Limit `value` between `min` and `max`\n * @param value\n * @param min\n * @param max\n * @private\n */\nexport function _limitValue(value: number, min: number, max: number) {\n  return Math.max(min, Math.min(max, value));\n}\n\n/**\n * @param {number} value\n * @private\n */\nexport function _int16Range(value: number) {\n  return _limitValue(value, -32768, 32767);\n}\n\n/**\n * @param value\n * @param start\n * @param end\n * @param [epsilon]\n * @private\n */\nexport function _isBetween(value: number, start: number, end: number, epsilon = 1e-6) {\n  return value >= Math.min(start, end) - epsilon && value <= Math.max(start, end) + epsilon;\n}\n","import {_capitalize} from './helpers.core.js';\n\n/**\n * Binary search\n * @param table - the table search. must be sorted!\n * @param value - value to find\n * @param cmp\n * @private\n */\nexport function _lookup(\n  table: number[],\n  value: number,\n  cmp?: (value: number) => boolean\n): {lo: number, hi: number};\nexport function _lookup<T>(\n  table: T[],\n  value: number,\n  cmp: (value: number) => boolean\n): {lo: number, hi: number};\nexport function _lookup(\n  table: unknown[],\n  value: number,\n  cmp?: (value: number) => boolean\n) {\n  cmp = cmp || ((index) => table[index] < value);\n  let hi = table.length - 1;\n  let lo = 0;\n  let mid: number;\n\n  while (hi - lo > 1) {\n    mid = (lo + hi) >> 1;\n    if (cmp(mid)) {\n      lo = mid;\n    } else {\n      hi = mid;\n    }\n  }\n\n  return {lo, hi};\n}\n\n/**\n * Binary search\n * @param table - the table search. must be sorted!\n * @param key - property name for the value in each entry\n * @param value - value to find\n * @param last - lookup last index\n * @private\n */\nexport const _lookupByKey = (\n  table: Record<string, number>[],\n  key: string,\n  value: number,\n  last?: boolean\n) =>\n  _lookup(table, value, last\n    ? index => {\n      const ti = table[index][key];\n      return ti < value || ti === value && table[index + 1][key] === value;\n    }\n    : index => table[index][key] < value);\n\n/**\n * Reverse binary search\n * @param table - the table search. must be sorted!\n * @param key - property name for the value in each entry\n * @param value - value to find\n * @private\n */\nexport const _rlookupByKey = (\n  table: Record<string, number>[],\n  key: string,\n  value: number\n) =>\n  _lookup(table, value, index => table[index][key] >= value);\n\n/**\n * Return subset of `values` between `min` and `max` inclusive.\n * Values are assumed to be in sorted order.\n * @param values - sorted array of values\n * @param min - min value\n * @param max - max value\n */\nexport function _filterBetween(values: number[], min: number, max: number) {\n  let start = 0;\n  let end = values.length;\n\n  while (start < end && values[start] < min) {\n    start++;\n  }\n  while (end > start && values[end - 1] > max) {\n    end--;\n  }\n\n  return start > 0 || end < values.length\n    ? values.slice(start, end)\n    : values;\n}\n\nconst arrayEvents = ['push', 'pop', 'shift', 'splice', 'unshift'] as const;\n\nexport interface ArrayListener<T> {\n  _onDataPush?(...item: T[]): void;\n  _onDataPop?(): void;\n  _onDataShift?(): void;\n  _onDataSplice?(index: number, deleteCount: number, ...items: T[]): void;\n  _onDataUnshift?(...item: T[]): void;\n}\n\n/**\n * Hooks the array methods that add or remove values ('push', pop', 'shift', 'splice',\n * 'unshift') and notify the listener AFTER the array has been altered. Listeners are\n * called on the '_onData*' callbacks (e.g. _onDataPush, etc.) with same arguments.\n */\nexport function listenArrayEvents<T>(array: T[], listener: ArrayListener<T>): void;\nexport function listenArrayEvents(array, listener) {\n  if (array._chartjs) {\n    array._chartjs.listeners.push(listener);\n    return;\n  }\n\n  Object.defineProperty(array, '_chartjs', {\n    configurable: true,\n    enumerable: false,\n    value: {\n      listeners: [listener]\n    }\n  });\n\n  arrayEvents.forEach((key) => {\n    const method = '_onData' + _capitalize(key);\n    const base = array[key];\n\n    Object.defineProperty(array, key, {\n      configurable: true,\n      enumerable: false,\n      value(...args) {\n        const res = base.apply(this, args);\n\n        array._chartjs.listeners.forEach((object) => {\n          if (typeof object[method] === 'function') {\n            object[method](...args);\n          }\n        });\n\n        return res;\n      }\n    });\n  });\n}\n\n\n/**\n * Removes the given array event listener and cleanup extra attached properties (such as\n * the _chartjs stub and overridden methods) if array doesn't have any more listeners.\n */\nexport function unlistenArrayEvents<T>(array: T[], listener: ArrayListener<T>): void;\nexport function unlistenArrayEvents(array, listener) {\n  const stub = array._chartjs;\n  if (!stub) {\n    return;\n  }\n\n  const listeners = stub.listeners;\n  const index = listeners.indexOf(listener);\n  if (index !== -1) {\n    listeners.splice(index, 1);\n  }\n\n  if (listeners.length > 0) {\n    return;\n  }\n\n  arrayEvents.forEach((key) => {\n    delete array[key];\n  });\n\n  delete array._chartjs;\n}\n\n/**\n * @param items\n */\nexport function _arrayUnique<T>(items: T[]) {\n  const set = new Set<T>(items);\n\n  if (set.size === items.length) {\n    return items;\n  }\n\n  return Array.from(set);\n}\n","import type {ChartMeta, PointElement} from '../types/index.js';\n\nimport {_limitValue} from './helpers.math.js';\nimport {_lookupByKey} from './helpers.collection.js';\n\nexport function fontString(pixelSize: number, fontStyle: string, fontFamily: string) {\n  return fontStyle + ' ' + pixelSize + 'px ' + fontFamily;\n}\n\n/**\n* Request animation polyfill\n*/\nexport const requestAnimFrame = (function() {\n  if (typeof window === 'undefined') {\n    return function(callback) {\n      return callback();\n    };\n  }\n  return window.requestAnimationFrame;\n}());\n\n/**\n * Throttles calling `fn` once per animation frame\n * Latest arguments are used on the actual call\n */\nexport function throttled<TArgs extends Array<any>>(\n  fn: (...args: TArgs) => void,\n  thisArg: any,\n) {\n  let argsToUse = [] as TArgs;\n  let ticking = false;\n\n  return function(...args: TArgs) {\n    // Save the args for use later\n    argsToUse = args;\n    if (!ticking) {\n      ticking = true;\n      requestAnimFrame.call(window, () => {\n        ticking = false;\n        fn.apply(thisArg, argsToUse);\n      });\n    }\n  };\n}\n\n/**\n * Debounces calling `fn` for `delay` ms\n */\nexport function debounce<TArgs extends Array<any>>(fn: (...args: TArgs) => void, delay: number) {\n  let timeout;\n  return function(...args: TArgs) {\n    if (delay) {\n      clearTimeout(timeout);\n      timeout = setTimeout(fn, delay, args);\n    } else {\n      fn.apply(this, args);\n    }\n    return delay;\n  };\n}\n\n/**\n * Converts 'start' to 'left', 'end' to 'right' and others to 'center'\n * @private\n */\nexport const _toLeftRightCenter = (align: 'start' | 'end' | 'center') => align === 'start' ? 'left' : align === 'end' ? 'right' : 'center';\n\n/**\n * Returns `start`, `end` or `(start + end) / 2` depending on `align`. Defaults to `center`\n * @private\n */\nexport const _alignStartEnd = (align: 'start' | 'end' | 'center', start: number, end: number) => align === 'start' ? start : align === 'end' ? end : (start + end) / 2;\n\n/**\n * Returns `left`, `right` or `(left + right) / 2` depending on `align`. Defaults to `left`\n * @private\n */\nexport const _textX = (align: 'left' | 'right' | 'center', left: number, right: number, rtl: boolean) => {\n  const check = rtl ? 'left' : 'right';\n  return align === check ? right : align === 'center' ? (left + right) / 2 : left;\n};\n\n/**\n * Return start and count of visible points.\n * @private\n */\nexport function _getStartAndCountOfVisiblePoints(meta: ChartMeta<'line' | 'scatter'>, points: PointElement[], animationsDisabled: boolean) {\n  const pointCount = points.length;\n\n  let start = 0;\n  let count = pointCount;\n\n  if (meta._sorted) {\n    const {iScale, _parsed} = meta;\n    const axis = iScale.axis;\n    const {min, max, minDefined, maxDefined} = iScale.getUserBounds();\n\n    if (minDefined) {\n      start = _limitValue(Math.min(\n        // @ts-expect-error Need to type _parsed\n        _lookupByKey(_parsed, axis, min).lo,\n        // @ts-expect-error Need to fix types on _lookupByKey\n        animationsDisabled ? pointCount : _lookupByKey(points, axis, iScale.getPixelForValue(min)).lo),\n      0, pointCount - 1);\n    }\n    if (maxDefined) {\n      count = _limitValue(Math.max(\n        // @ts-expect-error Need to type _parsed\n        _lookupByKey(_parsed, iScale.axis, max, true).hi + 1,\n        // @ts-expect-error Need to fix types on _lookupByKey\n        animationsDisabled ? 0 : _lookupByKey(points, axis, iScale.getPixelForValue(max), true).hi + 1),\n      start, pointCount) - start;\n    } else {\n      count = pointCount - start;\n    }\n  }\n\n  return {start, count};\n}\n\n/**\n * Checks if the scale ranges have changed.\n * @param {object} meta - dataset meta.\n * @returns {boolean}\n * @private\n */\nexport function _scaleRangesChanged(meta) {\n  const {xScale, yScale, _scaleRanges} = meta;\n  const newRanges = {\n    xmin: xScale.min,\n    xmax: xScale.max,\n    ymin: yScale.min,\n    ymax: yScale.max\n  };\n  if (!_scaleRanges) {\n    meta._scaleRanges = newRanges;\n    return true;\n  }\n  const changed = _scaleRanges.xmin !== xScale.min\n\t\t|| _scaleRanges.xmax !== xScale.max\n\t\t|| _scaleRanges.ymin !== yScale.min\n\t\t|| _scaleRanges.ymax !== yScale.max;\n\n  Object.assign(_scaleRanges, newRanges);\n  return changed;\n}\n","import {PI, TAU, HALF_PI} from './helpers.math.js';\n\nconst atEdge = (t: number) => t === 0 || t === 1;\nconst elasticIn = (t: number, s: number, p: number) => -(Math.pow(2, 10 * (t -= 1)) * Math.sin((t - s) * TAU / p));\nconst elasticOut = (t: number, s: number, p: number) => Math.pow(2, -10 * t) * Math.sin((t - s) * TAU / p) + 1;\n\n/**\n * Easing functions adapted from Robert Penner's easing equations.\n * @namespace Chart.helpers.easing.effects\n * @see http://www.robertpenner.com/easing/\n */\nconst effects = {\n  linear: (t: number) => t,\n\n  easeInQuad: (t: number) => t * t,\n\n  easeOutQuad: (t: number) => -t * (t - 2),\n\n  easeInOutQuad: (t: number) => ((t /= 0.5) < 1)\n    ? 0.5 * t * t\n    : -0.5 * ((--t) * (t - 2) - 1),\n\n  easeInCubic: (t: number) => t * t * t,\n\n  easeOutCubic: (t: number) => (t -= 1) * t * t + 1,\n\n  easeInOutCubic: (t: number) => ((t /= 0.5) < 1)\n    ? 0.5 * t * t * t\n    : 0.5 * ((t -= 2) * t * t + 2),\n\n  easeInQuart: (t: number) => t * t * t * t,\n\n  easeOutQuart: (t: number) => -((t -= 1) * t * t * t - 1),\n\n  easeInOutQuart: (t: number) => ((t /= 0.5) < 1)\n    ? 0.5 * t * t * t * t\n    : -0.5 * ((t -= 2) * t * t * t - 2),\n\n  easeInQuint: (t: number) => t * t * t * t * t,\n\n  easeOutQuint: (t: number) => (t -= 1) * t * t * t * t + 1,\n\n  easeInOutQuint: (t: number) => ((t /= 0.5) < 1)\n    ? 0.5 * t * t * t * t * t\n    : 0.5 * ((t -= 2) * t * t * t * t + 2),\n\n  easeInSine: (t: number) => -Math.cos(t * HALF_PI) + 1,\n\n  easeOutSine: (t: number) => Math.sin(t * HALF_PI),\n\n  easeInOutSine: (t: number) => -0.5 * (Math.cos(PI * t) - 1),\n\n  easeInExpo: (t: number) => (t === 0) ? 0 : Math.pow(2, 10 * (t - 1)),\n\n  easeOutExpo: (t: number) => (t === 1) ? 1 : -Math.pow(2, -10 * t) + 1,\n\n  easeInOutExpo: (t: number) => atEdge(t) ? t : t < 0.5\n    ? 0.5 * Math.pow(2, 10 * (t * 2 - 1))\n    : 0.5 * (-Math.pow(2, -10 * (t * 2 - 1)) + 2),\n\n  easeInCirc: (t: number) => (t >= 1) ? t : -(Math.sqrt(1 - t * t) - 1),\n\n  easeOutCirc: (t: number) => Math.sqrt(1 - (t -= 1) * t),\n\n  easeInOutCirc: (t: number) => ((t /= 0.5) < 1)\n    ? -0.5 * (Math.sqrt(1 - t * t) - 1)\n    : 0.5 * (Math.sqrt(1 - (t -= 2) * t) + 1),\n\n  easeInElastic: (t: number) => atEdge(t) ? t : elasticIn(t, 0.075, 0.3),\n\n  easeOutElastic: (t: number) => atEdge(t) ? t : elasticOut(t, 0.075, 0.3),\n\n  easeInOutElastic(t: number) {\n    const s = 0.1125;\n    const p = 0.45;\n    return atEdge(t) ? t :\n      t < 0.5\n        ? 0.5 * elasticIn(t * 2, s, p)\n        : 0.5 + 0.5 * elasticOut(t * 2 - 1, s, p);\n  },\n\n  easeInBack(t: number) {\n    const s = 1.70158;\n    return t * t * ((s + 1) * t - s);\n  },\n\n  easeOutBack(t: number) {\n    const s = 1.70158;\n    return (t -= 1) * t * ((s + 1) * t + s) + 1;\n  },\n\n  easeInOutBack(t: number) {\n    let s = 1.70158;\n    if ((t /= 0.5) < 1) {\n      return 0.5 * (t * t * (((s *= (1.525)) + 1) * t - s));\n    }\n    return 0.5 * ((t -= 2) * t * (((s *= (1.525)) + 1) * t + s) + 2);\n  },\n\n  easeInBounce: (t: number) => 1 - effects.easeOutBounce(1 - t),\n\n  easeOutBounce(t: number) {\n    const m = 7.5625;\n    const d = 2.75;\n    if (t < (1 / d)) {\n      return m * t * t;\n    }\n    if (t < (2 / d)) {\n      return m * (t -= (1.5 / d)) * t + 0.75;\n    }\n    if (t < (2.5 / d)) {\n      return m * (t -= (2.25 / d)) * t + 0.9375;\n    }\n    return m * (t -= (2.625 / d)) * t + 0.984375;\n  },\n\n  easeInOutBounce: (t: number) => (t < 0.5)\n    ? effects.easeInBounce(t * 2) * 0.5\n    : effects.easeOutBounce(t * 2 - 1) * 0.5 + 0.5,\n} as const;\n\nexport type EasingFunction = keyof typeof effects\n\nexport default effects;\n","import {Color} from '@kurkle/color';\n\nexport function isPatternOrGradient(value: unknown): value is CanvasPattern | CanvasGradient {\n  if (value && typeof value === 'object') {\n    const type = value.toString();\n    return type === '[object CanvasPattern]' || type === '[object CanvasGradient]';\n  }\n\n  return false;\n}\n\nexport function color(value: CanvasGradient): CanvasGradient;\nexport function color(value: CanvasPattern): CanvasPattern;\nexport function color(\n  value:\n  | string\n  | { r: number; g: number; b: number; a: number }\n  | [number, number, number]\n  | [number, number, number, number]\n): Color;\nexport function color(value) {\n  return isPatternOrGradient(value) ? value : new Color(value);\n}\n\nexport function getHoverColor(value: CanvasGradient): CanvasGradient;\nexport function getHoverColor(value: CanvasPattern): CanvasPattern;\nexport function getHoverColor(value: string): string;\nexport function getHoverColor(value) {\n  return isPatternOrGradient(value)\n    ? value\n    : new Color(value).saturate(0.5).darken(0.1).hexString();\n}\n","const numbers = ['x', 'y', 'borderWidth', 'radius', 'tension'];\nconst colors = ['color', 'borderColor', 'backgroundColor'];\n\nexport function applyAnimationsDefaults(defaults) {\n  defaults.set('animation', {\n    delay: undefined,\n    duration: 1000,\n    easing: 'easeOutQuart',\n    fn: undefined,\n    from: undefined,\n    loop: undefined,\n    to: undefined,\n    type: undefined,\n  });\n\n  defaults.describe('animation', {\n    _fallback: false,\n    _indexable: false,\n    _scriptable: (name) => name !== 'onProgress' && name !== 'onComplete' && name !== 'fn',\n  });\n\n  defaults.set('animations', {\n    colors: {\n      type: 'color',\n      properties: colors\n    },\n    numbers: {\n      type: 'number',\n      properties: numbers\n    },\n  });\n\n  defaults.describe('animations', {\n    _fallback: 'animation',\n  });\n\n  defaults.set('transitions', {\n    active: {\n      animation: {\n        duration: 400\n      }\n    },\n    resize: {\n      animation: {\n        duration: 0\n      }\n    },\n    show: {\n      animations: {\n        colors: {\n          from: 'transparent'\n        },\n        visible: {\n          type: 'boolean',\n          duration: 0 // show immediately\n        },\n      }\n    },\n    hide: {\n      animations: {\n        colors: {\n          to: 'transparent'\n        },\n        visible: {\n          type: 'boolean',\n          easing: 'linear',\n          fn: v => v | 0 // for keeping the dataset visible all the way through the animation\n        },\n      }\n    }\n  });\n}\n","\nconst intlCache = new Map<string, Intl.NumberFormat>();\n\nfunction getNumberFormat(locale: string, options?: Intl.NumberFormatOptions) {\n  options = options || {};\n  const cacheKey = locale + JSON.stringify(options);\n  let formatter = intlCache.get(cacheKey);\n  if (!formatter) {\n    formatter = new Intl.NumberFormat(locale, options);\n    intlCache.set(cacheKey, formatter);\n  }\n  return formatter;\n}\n\nexport function formatNumber(num: number, locale: string, options?: Intl.NumberFormatOptions) {\n  return getNumberFormat(locale, options).format(num);\n}\n","import {isArray} from '../helpers/helpers.core.js';\nimport {formatNumber} from '../helpers/helpers.intl.js';\nimport {log10} from '../helpers/helpers.math.js';\n\n/**\n * Namespace to hold formatters for different types of ticks\n * @namespace Chart.Ticks.formatters\n */\nconst formatters = {\n  /**\n   * Formatter for value labels\n   * @method Chart.Ticks.formatters.values\n   * @param value the value to display\n   * @return {string|string[]} the label to display\n   */\n  values(value) {\n    return isArray(value) ? /** @type {string[]} */ (value) : '' + value;\n  },\n\n  /**\n   * Formatter for numeric ticks\n   * @method Chart.Ticks.formatters.numeric\n   * @param tickValue {number} the value to be formatted\n   * @param index {number} the position of the tickValue parameter in the ticks array\n   * @param ticks {object[]} the list of ticks being converted\n   * @return {string} string representation of the tickValue parameter\n   */\n  numeric(tickValue, index, ticks) {\n    if (tickValue === 0) {\n      return '0'; // never show decimal places for 0\n    }\n\n    const locale = this.chart.options.locale;\n    let notation;\n    let delta = tickValue; // This is used when there are less than 2 ticks as the tick interval.\n\n    if (ticks.length > 1) {\n      // all ticks are small or there huge numbers; use scientific notation\n      const maxTick = Math.max(Math.abs(ticks[0].value), Math.abs(ticks[ticks.length - 1].value));\n      if (maxTick < 1e-4 || maxTick > 1e+15) {\n        notation = 'scientific';\n      }\n\n      delta = calculateDelta(tickValue, ticks);\n    }\n\n    const logDelta = log10(Math.abs(delta));\n\n    // When datasets have values approaching Number.MAX_VALUE, the tick calculations might result in\n    // infinity and eventually NaN. Passing NaN for minimumFractionDigits or maximumFractionDigits\n    // will make the number formatter throw. So instead we check for isNaN and use a fallback value.\n    //\n    // toFixed has a max of 20 decimal places\n    const numDecimal = isNaN(logDelta) ? 1 : Math.max(Math.min(-1 * Math.floor(logDelta), 20), 0);\n\n    const options = {notation, minimumFractionDigits: numDecimal, maximumFractionDigits: numDecimal};\n    Object.assign(options, this.options.ticks.format);\n\n    return formatNumber(tickValue, locale, options);\n  },\n\n\n  /**\n   * Formatter for logarithmic ticks\n   * @method Chart.Ticks.formatters.logarithmic\n   * @param tickValue {number} the value to be formatted\n   * @param index {number} the position of the tickValue parameter in the ticks array\n   * @param ticks {object[]} the list of ticks being converted\n   * @return {string} string representation of the tickValue parameter\n   */\n  logarithmic(tickValue, index, ticks) {\n    if (tickValue === 0) {\n      return '0';\n    }\n    const remain = ticks[index].significand || (tickValue / (Math.pow(10, Math.floor(log10(tickValue)))));\n    if ([1, 2, 3, 5, 10, 15].includes(remain) || index > 0.8 * ticks.length) {\n      return formatters.numeric.call(this, tickValue, index, ticks);\n    }\n    return '';\n  }\n\n};\n\n\nfunction calculateDelta(tickValue, ticks) {\n  // Figure out how many digits to show\n  // The space between the first two ticks might be smaller than normal spacing\n  let delta = ticks.length > 3 ? ticks[2].value - ticks[1].value : ticks[1].value - ticks[0].value;\n\n  // If we have a number like 2.5 as the delta, figure out how many decimal places we need\n  if (Math.abs(delta) >= 1 && tickValue !== Math.floor(tickValue)) {\n    // not an integer\n    delta = tickValue - Math.floor(tickValue);\n  }\n  return delta;\n}\n\n/**\n * Namespace to hold static tick generation functions\n * @namespace Chart.Ticks\n */\nexport default {formatters};\n","import {getHoverColor} from '../helpers/helpers.color.js';\nimport {isObject, merge, valueOrDefault} from '../helpers/helpers.core.js';\nimport {applyAnimationsDefaults} from './core.animations.defaults.js';\nimport {applyLayoutsDefaults} from './core.layouts.defaults.js';\nimport {applyScaleDefaults} from './core.scale.defaults.js';\n\nexport const overrides = Object.create(null);\nexport const descriptors = Object.create(null);\n\n/**\n * @param {object} node\n * @param {string} key\n * @return {object}\n */\nfunction getScope(node, key) {\n  if (!key) {\n    return node;\n  }\n  const keys = key.split('.');\n  for (let i = 0, n = keys.length; i < n; ++i) {\n    const k = keys[i];\n    node = node[k] || (node[k] = Object.create(null));\n  }\n  return node;\n}\n\nfunction set(root, scope, values) {\n  if (typeof scope === 'string') {\n    return merge(getScope(root, scope), values);\n  }\n  return merge(getScope(root, ''), scope);\n}\n\n/**\n * Please use the module's default export which provides a singleton instance\n * Note: class is exported for typedoc\n */\nexport class Defaults {\n  constructor(_descriptors, _appliers) {\n    this.animation = undefined;\n    this.backgroundColor = 'rgba(0,0,0,0.1)';\n    this.borderColor = 'rgba(0,0,0,0.1)';\n    this.color = '#666';\n    this.datasets = {};\n    this.devicePixelRatio = (context) => context.chart.platform.getDevicePixelRatio();\n    this.elements = {};\n    this.events = [\n      'mousemove',\n      'mouseout',\n      'click',\n      'touchstart',\n      'touchmove'\n    ];\n    this.font = {\n      family: \"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif\",\n      size: 12,\n      style: 'normal',\n      lineHeight: 1.2,\n      weight: null\n    };\n    this.hover = {};\n    this.hoverBackgroundColor = (ctx, options) => getHoverColor(options.backgroundColor);\n    this.hoverBorderColor = (ctx, options) => getHoverColor(options.borderColor);\n    this.hoverColor = (ctx, options) => getHoverColor(options.color);\n    this.indexAxis = 'x';\n    this.interaction = {\n      mode: 'nearest',\n      intersect: true,\n      includeInvisible: false\n    };\n    this.maintainAspectRatio = true;\n    this.onHover = null;\n    this.onClick = null;\n    this.parsing = true;\n    this.plugins = {};\n    this.responsive = true;\n    this.scale = undefined;\n    this.scales = {};\n    this.showLine = true;\n    this.drawActiveElementsOnTop = true;\n\n    this.describe(_descriptors);\n    this.apply(_appliers);\n  }\n\n  /**\n\t * @param {string|object} scope\n\t * @param {object} [values]\n\t */\n  set(scope, values) {\n    return set(this, scope, values);\n  }\n\n  /**\n\t * @param {string} scope\n\t */\n  get(scope) {\n    return getScope(this, scope);\n  }\n\n  /**\n\t * @param {string|object} scope\n\t * @param {object} [values]\n\t */\n  describe(scope, values) {\n    return set(descriptors, scope, values);\n  }\n\n  override(scope, values) {\n    return set(overrides, scope, values);\n  }\n\n  /**\n\t * Routes the named defaults to fallback to another scope/name.\n\t * This routing is useful when those target values, like defaults.color, are changed runtime.\n\t * If the values would be copied, the runtime change would not take effect. By routing, the\n\t * fallback is evaluated at each access, so its always up to date.\n\t *\n\t * Example:\n\t *\n\t * \tdefaults.route('elements.arc', 'backgroundColor', '', 'color')\n\t *   - reads the backgroundColor from defaults.color when undefined locally\n\t *\n\t * @param {string} scope Scope this route applies to.\n\t * @param {string} name Property name that should be routed to different namespace when not defined here.\n\t * @param {string} targetScope The namespace where those properties should be routed to.\n\t * Empty string ('') is the root of defaults.\n\t * @param {string} targetName The target name in the target scope the property should be routed to.\n\t */\n  route(scope, name, targetScope, targetName) {\n    const scopeObject = getScope(this, scope);\n    const targetScopeObject = getScope(this, targetScope);\n    const privateName = '_' + name;\n\n    Object.defineProperties(scopeObject, {\n      // A private property is defined to hold the actual value, when this property is set in its scope (set in the setter)\n      [privateName]: {\n        value: scopeObject[name],\n        writable: true\n      },\n      // The actual property is defined as getter/setter so we can do the routing when value is not locally set.\n      [name]: {\n        enumerable: true,\n        get() {\n          const local = this[privateName];\n          const target = targetScopeObject[targetName];\n          if (isObject(local)) {\n            return Object.assign({}, target, local);\n          }\n          return valueOrDefault(local, target);\n        },\n        set(value) {\n          this[privateName] = value;\n        }\n      }\n    });\n  }\n\n  apply(appliers) {\n    appliers.forEach((apply) => apply(this));\n  }\n}\n\n// singleton instance\nexport default /* #__PURE__ */ new Defaults({\n  _scriptable: (name) => !name.startsWith('on'),\n  _indexable: (name) => name !== 'events',\n  hover: {\n    _fallback: 'interaction'\n  },\n  interaction: {\n    _scriptable: false,\n    _indexable: false,\n  }\n}, [applyAnimationsDefaults, applyLayoutsDefaults, applyScaleDefaults]);\n","export function applyLayoutsDefaults(defaults) {\n  defaults.set('layout', {\n    autoPadding: true,\n    padding: {\n      top: 0,\n      right: 0,\n      bottom: 0,\n      left: 0\n    }\n  });\n}\n","import Ticks from './core.ticks.js';\n\nexport function applyScaleDefaults(defaults) {\n  defaults.set('scale', {\n    display: true,\n    offset: false,\n    reverse: false,\n    beginAtZero: false,\n\n    /**\n     * Scale boundary strategy (bypassed by min/max time options)\n     * - `data`: make sure data are fully visible, ticks outside are removed\n     * - `ticks`: make sure ticks are fully visible, data outside are truncated\n     * @see https://github.com/chartjs/Chart.js/pull/4556\n     * @since 3.0.0\n     */\n    bounds: 'ticks',\n\n    clip: true,\n\n    /**\n     * Addition grace added to max and reduced from min data value.\n     * @since 3.0.0\n     */\n    grace: 0,\n\n    // grid line settings\n    grid: {\n      display: true,\n      lineWidth: 1,\n      drawOnChartArea: true,\n      drawTicks: true,\n      tickLength: 8,\n      tickWidth: (_ctx, options) => options.lineWidth,\n      tickColor: (_ctx, options) => options.color,\n      offset: false,\n    },\n\n    border: {\n      display: true,\n      dash: [],\n      dashOffset: 0.0,\n      width: 1\n    },\n\n    // scale title\n    title: {\n      // display property\n      display: false,\n\n      // actual label\n      text: '',\n\n      // top/bottom padding\n      padding: {\n        top: 4,\n        bottom: 4\n      }\n    },\n\n    // label settings\n    ticks: {\n      minRotation: 0,\n      maxRotation: 50,\n      mirror: false,\n      textStrokeWidth: 0,\n      textStrokeColor: '',\n      padding: 3,\n      display: true,\n      autoSkip: true,\n      autoSkipPadding: 3,\n      labelOffset: 0,\n      // We pass through arrays to be rendered as multiline labels, we convert Others to strings here.\n      callback: Ticks.formatters.values,\n      minor: {},\n      major: {},\n      align: 'center',\n      crossAlign: 'near',\n\n      showLabelBackdrop: false,\n      backdropColor: 'rgba(255, 255, 255, 0.75)',\n      backdropPadding: 2,\n    }\n  });\n\n  defaults.route('scale.ticks', 'color', '', 'color');\n  defaults.route('scale.grid', 'color', '', 'borderColor');\n  defaults.route('scale.border', 'color', '', 'borderColor');\n  defaults.route('scale.title', 'color', '', 'color');\n\n  defaults.describe('scale', {\n    _fallback: false,\n    _scriptable: (name) => !name.startsWith('before') && !name.startsWith('after') && name !== 'callback' && name !== 'parser',\n    _indexable: (name) => name !== 'borderDash' && name !== 'tickBorderDash' && name !== 'dash',\n  });\n\n  defaults.describe('scales', {\n    _fallback: 'scale',\n  });\n\n  defaults.describe('scale.ticks', {\n    _scriptable: (name) => name !== 'backdropPadding' && name !== 'callback',\n    _indexable: (name) => name !== 'backdropPadding',\n  });\n}\n","import type {\n  Chart,\n  Point,\n  FontSpec,\n  CanvasFontSpec,\n  PointStyle,\n  RenderTextOpts,\n  BackdropOptions\n} from '../types/index.js';\nimport type {\n  TRBL,\n  SplinePoint,\n  RoundedRect,\n  TRBLCorners\n} from '../types/geometric.js';\nimport {isArray, isNullOrUndef} from './helpers.core.js';\nimport {PI, TAU, HALF_PI, QUARTER_PI, TWO_THIRDS_PI, RAD_PER_DEG} from './helpers.math.js';\n\n/**\n * Converts the given font object into a CSS font string.\n * @param font - A font object.\n * @return The CSS font string. See https://developer.mozilla.org/en-US/docs/Web/CSS/font\n * @private\n */\nexport function toFontString(font: FontSpec) {\n  if (!font || isNullOrUndef(font.size) || isNullOrUndef(font.family)) {\n    return null;\n  }\n\n  return (font.style ? font.style + ' ' : '')\n\t\t+ (font.weight ? font.weight + ' ' : '')\n\t\t+ font.size + 'px '\n\t\t+ font.family;\n}\n\n/**\n * @private\n */\nexport function _measureText(\n  ctx: CanvasRenderingContext2D,\n  data: Record<string, number>,\n  gc: string[],\n  longest: number,\n  string: string\n) {\n  let textWidth = data[string];\n  if (!textWidth) {\n    textWidth = data[string] = ctx.measureText(string).width;\n    gc.push(string);\n  }\n  if (textWidth > longest) {\n    longest = textWidth;\n  }\n  return longest;\n}\n\ntype Thing = string | undefined | null\ntype Things = (Thing | Thing[])[]\n\n/**\n * @private\n */\n// eslint-disable-next-line complexity\nexport function _longestText(\n  ctx: CanvasRenderingContext2D,\n  font: string,\n  arrayOfThings: Things,\n  cache?: {data?: Record<string, number>, garbageCollect?: string[], font?: string}\n) {\n  cache = cache || {};\n  let data = cache.data = cache.data || {};\n  let gc = cache.garbageCollect = cache.garbageCollect || [];\n\n  if (cache.font !== font) {\n    data = cache.data = {};\n    gc = cache.garbageCollect = [];\n    cache.font = font;\n  }\n\n  ctx.save();\n\n  ctx.font = font;\n  let longest = 0;\n  const ilen = arrayOfThings.length;\n  let i: number, j: number, jlen: number, thing: Thing | Thing[], nestedThing: Thing | Thing[];\n  for (i = 0; i < ilen; i++) {\n    thing = arrayOfThings[i];\n\n    // Undefined strings and arrays should not be measured\n    if (thing !== undefined && thing !== null && !isArray(thing)) {\n      longest = _measureText(ctx, data, gc, longest, thing);\n    } else if (isArray(thing)) {\n      // if it is an array lets measure each element\n      // to do maybe simplify this function a bit so we can do this more recursively?\n      for (j = 0, jlen = thing.length; j < jlen; j++) {\n        nestedThing = thing[j];\n        // Undefined strings and arrays should not be measured\n        if (nestedThing !== undefined && nestedThing !== null && !isArray(nestedThing)) {\n          longest = _measureText(ctx, data, gc, longest, nestedThing);\n        }\n      }\n    }\n  }\n\n  ctx.restore();\n\n  const gcLen = gc.length / 2;\n  if (gcLen > arrayOfThings.length) {\n    for (i = 0; i < gcLen; i++) {\n      delete data[gc[i]];\n    }\n    gc.splice(0, gcLen);\n  }\n  return longest;\n}\n\n/**\n * Returns the aligned pixel value to avoid anti-aliasing blur\n * @param chart - The chart instance.\n * @param pixel - A pixel value.\n * @param width - The width of the element.\n * @returns The aligned pixel value.\n * @private\n */\nexport function _alignPixel(chart: Chart, pixel: number, width: number) {\n  const devicePixelRatio = chart.currentDevicePixelRatio;\n  const halfWidth = width !== 0 ? Math.max(width / 2, 0.5) : 0;\n  return Math.round((pixel - halfWidth) * devicePixelRatio) / devicePixelRatio + halfWidth;\n}\n\n/**\n * Clears the entire canvas.\n */\nexport function clearCanvas(canvas: HTMLCanvasElement, ctx?: CanvasRenderingContext2D) {\n  ctx = ctx || canvas.getContext('2d');\n\n  ctx.save();\n  // canvas.width and canvas.height do not consider the canvas transform,\n  // while clearRect does\n  ctx.resetTransform();\n  ctx.clearRect(0, 0, canvas.width, canvas.height);\n  ctx.restore();\n}\n\nexport interface DrawPointOptions {\n  pointStyle: PointStyle;\n  rotation?: number;\n  radius: number;\n  borderWidth: number;\n}\n\nexport function drawPoint(\n  ctx: CanvasRenderingContext2D,\n  options: DrawPointOptions,\n  x: number,\n  y: number\n) {\n  // eslint-disable-next-line @typescript-eslint/no-use-before-define\n  drawPointLegend(ctx, options, x, y, null);\n}\n\n// eslint-disable-next-line complexity\nexport function drawPointLegend(\n  ctx: CanvasRenderingContext2D,\n  options: DrawPointOptions,\n  x: number,\n  y: number,\n  w: number\n) {\n  let type: string, xOffset: number, yOffset: number, size: number, cornerRadius: number, width: number, xOffsetW: number, yOffsetW: number;\n  const style = options.pointStyle;\n  const rotation = options.rotation;\n  const radius = options.radius;\n  let rad = (rotation || 0) * RAD_PER_DEG;\n\n  if (style && typeof style === 'object') {\n    type = style.toString();\n    if (type === '[object HTMLImageElement]' || type === '[object HTMLCanvasElement]') {\n      ctx.save();\n      ctx.translate(x, y);\n      ctx.rotate(rad);\n      ctx.drawImage(style, -style.width / 2, -style.height / 2, style.width, style.height);\n      ctx.restore();\n      return;\n    }\n  }\n\n  if (isNaN(radius) || radius <= 0) {\n    return;\n  }\n\n  ctx.beginPath();\n\n  switch (style) {\n  // Default includes circle\n    default:\n      if (w) {\n        ctx.ellipse(x, y, w / 2, radius, 0, 0, TAU);\n      } else {\n        ctx.arc(x, y, radius, 0, TAU);\n      }\n      ctx.closePath();\n      break;\n    case 'triangle':\n      width = w ? w / 2 : radius;\n      ctx.moveTo(x + Math.sin(rad) * width, y - Math.cos(rad) * radius);\n      rad += TWO_THIRDS_PI;\n      ctx.lineTo(x + Math.sin(rad) * width, y - Math.cos(rad) * radius);\n      rad += TWO_THIRDS_PI;\n      ctx.lineTo(x + Math.sin(rad) * width, y - Math.cos(rad) * radius);\n      ctx.closePath();\n      break;\n    case 'rectRounded':\n    // NOTE: the rounded rect implementation changed to use `arc` instead of\n    // `quadraticCurveTo` since it generates better results when rect is\n    // almost a circle. 0.516 (instead of 0.5) produces results with visually\n    // closer proportion to the previous impl and it is inscribed in the\n    // circle with `radius`. For more details, see the following PRs:\n    // https://github.com/chartjs/Chart.js/issues/5597\n    // https://github.com/chartjs/Chart.js/issues/5858\n      cornerRadius = radius * 0.516;\n      size = radius - cornerRadius;\n      xOffset = Math.cos(rad + QUARTER_PI) * size;\n      xOffsetW = Math.cos(rad + QUARTER_PI) * (w ? w / 2 - cornerRadius : size);\n      yOffset = Math.sin(rad + QUARTER_PI) * size;\n      yOffsetW = Math.sin(rad + QUARTER_PI) * (w ? w / 2 - cornerRadius : size);\n      ctx.arc(x - xOffsetW, y - yOffset, cornerRadius, rad - PI, rad - HALF_PI);\n      ctx.arc(x + yOffsetW, y - xOffset, cornerRadius, rad - HALF_PI, rad);\n      ctx.arc(x + xOffsetW, y + yOffset, cornerRadius, rad, rad + HALF_PI);\n      ctx.arc(x - yOffsetW, y + xOffset, cornerRadius, rad + HALF_PI, rad + PI);\n      ctx.closePath();\n      break;\n    case 'rect':\n      if (!rotation) {\n        size = Math.SQRT1_2 * radius;\n        width = w ? w / 2 : size;\n        ctx.rect(x - width, y - size, 2 * width, 2 * size);\n        break;\n      }\n      rad += QUARTER_PI;\n    /* falls through */\n    case 'rectRot':\n      xOffsetW = Math.cos(rad) * (w ? w / 2 : radius);\n      xOffset = Math.cos(rad) * radius;\n      yOffset = Math.sin(rad) * radius;\n      yOffsetW = Math.sin(rad) * (w ? w / 2 : radius);\n      ctx.moveTo(x - xOffsetW, y - yOffset);\n      ctx.lineTo(x + yOffsetW, y - xOffset);\n      ctx.lineTo(x + xOffsetW, y + yOffset);\n      ctx.lineTo(x - yOffsetW, y + xOffset);\n      ctx.closePath();\n      break;\n    case 'crossRot':\n      rad += QUARTER_PI;\n    /* falls through */\n    case 'cross':\n      xOffsetW = Math.cos(rad) * (w ? w / 2 : radius);\n      xOffset = Math.cos(rad) * radius;\n      yOffset = Math.sin(rad) * radius;\n      yOffsetW = Math.sin(rad) * (w ? w / 2 : radius);\n      ctx.moveTo(x - xOffsetW, y - yOffset);\n      ctx.lineTo(x + xOffsetW, y + yOffset);\n      ctx.moveTo(x + yOffsetW, y - xOffset);\n      ctx.lineTo(x - yOffsetW, y + xOffset);\n      break;\n    case 'star':\n      xOffsetW = Math.cos(rad) * (w ? w / 2 : radius);\n      xOffset = Math.cos(rad) * radius;\n      yOffset = Math.sin(rad) * radius;\n      yOffsetW = Math.sin(rad) * (w ? w / 2 : radius);\n      ctx.moveTo(x - xOffsetW, y - yOffset);\n      ctx.lineTo(x + xOffsetW, y + yOffset);\n      ctx.moveTo(x + yOffsetW, y - xOffset);\n      ctx.lineTo(x - yOffsetW, y + xOffset);\n      rad += QUARTER_PI;\n      xOffsetW = Math.cos(rad) * (w ? w / 2 : radius);\n      xOffset = Math.cos(rad) * radius;\n      yOffset = Math.sin(rad) * radius;\n      yOffsetW = Math.sin(rad) * (w ? w / 2 : radius);\n      ctx.moveTo(x - xOffsetW, y - yOffset);\n      ctx.lineTo(x + xOffsetW, y + yOffset);\n      ctx.moveTo(x + yOffsetW, y - xOffset);\n      ctx.lineTo(x - yOffsetW, y + xOffset);\n      break;\n    case 'line':\n      xOffset = w ? w / 2 : Math.cos(rad) * radius;\n      yOffset = Math.sin(rad) * radius;\n      ctx.moveTo(x - xOffset, y - yOffset);\n      ctx.lineTo(x + xOffset, y + yOffset);\n      break;\n    case 'dash':\n      ctx.moveTo(x, y);\n      ctx.lineTo(x + Math.cos(rad) * (w ? w / 2 : radius), y + Math.sin(rad) * radius);\n      break;\n    case false:\n      ctx.closePath();\n      break;\n  }\n\n  ctx.fill();\n  if (options.borderWidth > 0) {\n    ctx.stroke();\n  }\n}\n\n/**\n * Returns true if the point is inside the rectangle\n * @param point - The point to test\n * @param area - The rectangle\n * @param margin - allowed margin\n * @private\n */\nexport function _isPointInArea(\n  point: Point,\n  area: TRBL,\n  margin?: number\n) {\n  margin = margin || 0.5; // margin - default is to match rounded decimals\n\n  return !area || (point && point.x > area.left - margin && point.x < area.right + margin &&\n\t\tpoint.y > area.top - margin && point.y < area.bottom + margin);\n}\n\nexport function clipArea(ctx: CanvasRenderingContext2D, area: TRBL) {\n  ctx.save();\n  ctx.beginPath();\n  ctx.rect(area.left, area.top, area.right - area.left, area.bottom - area.top);\n  ctx.clip();\n}\n\nexport function unclipArea(ctx: CanvasRenderingContext2D) {\n  ctx.restore();\n}\n\n/**\n * @private\n */\nexport function _steppedLineTo(\n  ctx: CanvasRenderingContext2D,\n  previous: Point,\n  target: Point,\n  flip?: boolean,\n  mode?: string\n) {\n  if (!previous) {\n    return ctx.lineTo(target.x, target.y);\n  }\n  if (mode === 'middle') {\n    const midpoint = (previous.x + target.x) / 2.0;\n    ctx.lineTo(midpoint, previous.y);\n    ctx.lineTo(midpoint, target.y);\n  } else if (mode === 'after' !== !!flip) {\n    ctx.lineTo(previous.x, target.y);\n  } else {\n    ctx.lineTo(target.x, previous.y);\n  }\n  ctx.lineTo(target.x, target.y);\n}\n\n/**\n * @private\n */\nexport function _bezierCurveTo(\n  ctx: CanvasRenderingContext2D,\n  previous: SplinePoint,\n  target: SplinePoint,\n  flip?: boolean\n) {\n  if (!previous) {\n    return ctx.lineTo(target.x, target.y);\n  }\n  ctx.bezierCurveTo(\n    flip ? previous.cp1x : previous.cp2x,\n    flip ? previous.cp1y : previous.cp2y,\n    flip ? target.cp2x : target.cp1x,\n    flip ? target.cp2y : target.cp1y,\n    target.x,\n    target.y);\n}\n\nfunction setRenderOpts(ctx: CanvasRenderingContext2D, opts: RenderTextOpts) {\n  if (opts.translation) {\n    ctx.translate(opts.translation[0], opts.translation[1]);\n  }\n\n  if (!isNullOrUndef(opts.rotation)) {\n    ctx.rotate(opts.rotation);\n  }\n\n  if (opts.color) {\n    ctx.fillStyle = opts.color;\n  }\n\n  if (opts.textAlign) {\n    ctx.textAlign = opts.textAlign;\n  }\n\n  if (opts.textBaseline) {\n    ctx.textBaseline = opts.textBaseline;\n  }\n}\n\nfunction decorateText(\n  ctx: CanvasRenderingContext2D,\n  x: number,\n  y: number,\n  line: string,\n  opts: RenderTextOpts\n) {\n  if (opts.strikethrough || opts.underline) {\n    /**\n     * Now that IE11 support has been dropped, we can use more\n     * of the TextMetrics object. The actual bounding boxes\n     * are unflagged in Chrome, Firefox, Edge, and Safari so they\n     * can be safely used.\n     * See https://developer.mozilla.org/en-US/docs/Web/API/TextMetrics#Browser_compatibility\n     */\n    const metrics = ctx.measureText(line);\n    const left = x - metrics.actualBoundingBoxLeft;\n    const right = x + metrics.actualBoundingBoxRight;\n    const top = y - metrics.actualBoundingBoxAscent;\n    const bottom = y + metrics.actualBoundingBoxDescent;\n    const yDecoration = opts.strikethrough ? (top + bottom) / 2 : bottom;\n\n    ctx.strokeStyle = ctx.fillStyle;\n    ctx.beginPath();\n    ctx.lineWidth = opts.decorationWidth || 2;\n    ctx.moveTo(left, yDecoration);\n    ctx.lineTo(right, yDecoration);\n    ctx.stroke();\n  }\n}\n\nfunction drawBackdrop(ctx: CanvasRenderingContext2D, opts: BackdropOptions) {\n  const oldColor = ctx.fillStyle;\n\n  ctx.fillStyle = opts.color as string;\n  ctx.fillRect(opts.left, opts.top, opts.width, opts.height);\n  ctx.fillStyle = oldColor;\n}\n\n/**\n * Render text onto the canvas\n */\nexport function renderText(\n  ctx: CanvasRenderingContext2D,\n  text: string | string[],\n  x: number,\n  y: number,\n  font: CanvasFontSpec,\n  opts: RenderTextOpts = {}\n) {\n  const lines = isArray(text) ? text : [text];\n  const stroke = opts.strokeWidth > 0 && opts.strokeColor !== '';\n  let i: number, line: string;\n\n  ctx.save();\n  ctx.font = font.string;\n  setRenderOpts(ctx, opts);\n\n  for (i = 0; i < lines.length; ++i) {\n    line = lines[i];\n\n    if (opts.backdrop) {\n      drawBackdrop(ctx, opts.backdrop);\n    }\n\n    if (stroke) {\n      if (opts.strokeColor) {\n        ctx.strokeStyle = opts.strokeColor;\n      }\n\n      if (!isNullOrUndef(opts.strokeWidth)) {\n        ctx.lineWidth = opts.strokeWidth;\n      }\n\n      ctx.strokeText(line, x, y, opts.maxWidth);\n    }\n\n    ctx.fillText(line, x, y, opts.maxWidth);\n    decorateText(ctx, x, y, line, opts);\n\n    y += Number(font.lineHeight);\n  }\n\n  ctx.restore();\n}\n\n/**\n * Add a path of a rectangle with rounded corners to the current sub-path\n * @param ctx - Context\n * @param rect - Bounding rect\n */\nexport function addRoundedRectPath(\n  ctx: CanvasRenderingContext2D,\n  rect: RoundedRect & { radius: TRBLCorners }\n) {\n  const {x, y, w, h, radius} = rect;\n\n  // top left arc\n  ctx.arc(x + radius.topLeft, y + radius.topLeft, radius.topLeft, 1.5 * PI, PI, true);\n\n  // line from top left to bottom left\n  ctx.lineTo(x, y + h - radius.bottomLeft);\n\n  // bottom left arc\n  ctx.arc(x + radius.bottomLeft, y + h - radius.bottomLeft, radius.bottomLeft, PI, HALF_PI, true);\n\n  // line from bottom left to bottom right\n  ctx.lineTo(x + w - radius.bottomRight, y + h);\n\n  // bottom right arc\n  ctx.arc(x + w - radius.bottomRight, y + h - radius.bottomRight, radius.bottomRight, HALF_PI, 0, true);\n\n  // line from bottom right to top right\n  ctx.lineTo(x + w, y + radius.topRight);\n\n  // top right arc\n  ctx.arc(x + w - radius.topRight, y + radius.topRight, radius.topRight, 0, -HALF_PI, true);\n\n  // line from top right to top left\n  ctx.lineTo(x + radius.topLeft, y);\n}\n","import defaults from '../core/core.defaults.js';\nimport {isArray, isObject, toDimension, valueOrDefault} from './helpers.core.js';\nimport {toFontString} from './helpers.canvas.js';\nimport type {ChartArea, FontSpec, Point} from '../types/index.js';\nimport type {TRBL, TRBLCorners} from '../types/geometric.js';\n\nconst LINE_HEIGHT = /^(normal|(\\d+(?:\\.\\d+)?)(px|em|%)?)$/;\nconst FONT_STYLE = /^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;\n\n/**\n * @alias Chart.helpers.options\n * @namespace\n */\n/**\n * Converts the given line height `value` in pixels for a specific font `size`.\n * @param value - The lineHeight to parse (eg. 1.6, '14px', '75%', '1.6em').\n * @param size - The font size (in pixels) used to resolve relative `value`.\n * @returns The effective line height in pixels (size * 1.2 if value is invalid).\n * @see https://developer.mozilla.org/en-US/docs/Web/CSS/line-height\n * @since 2.7.0\n */\nexport function toLineHeight(value: number | string, size: number): number {\n  const matches = ('' + value).match(LINE_HEIGHT);\n  if (!matches || matches[1] === 'normal') {\n    return size * 1.2;\n  }\n\n  value = +matches[2];\n\n  switch (matches[3]) {\n    case 'px':\n      return value;\n    case '%':\n      value /= 100;\n      break;\n    default:\n      break;\n  }\n\n  return size * value;\n}\n\nconst numberOrZero = (v: unknown) => +v || 0;\n\n/**\n * @param value\n * @param props\n */\nexport function _readValueToProps<K extends string>(value: number | Record<K, number>, props: K[]): Record<K, number>;\nexport function _readValueToProps<K extends string, T extends string>(value: number | Record<K & T, number>, props: Record<T, K>): Record<T, number>;\nexport function _readValueToProps(value: number | Record<string, number>, props: string[] | Record<string, string>) {\n  const ret = {};\n  const objProps = isObject(props);\n  const keys = objProps ? Object.keys(props) : props;\n  const read = isObject(value)\n    ? objProps\n      ? prop => valueOrDefault(value[prop], value[props[prop]])\n      : prop => value[prop]\n    : () => value;\n\n  for (const prop of keys) {\n    ret[prop] = numberOrZero(read(prop));\n  }\n  return ret;\n}\n\n/**\n * Converts the given value into a TRBL object.\n * @param value - If a number, set the value to all TRBL component,\n *  else, if an object, use defined properties and sets undefined ones to 0.\n *  x / y are shorthands for same value for left/right and top/bottom.\n * @returns The padding values (top, right, bottom, left)\n * @since 3.0.0\n */\nexport function toTRBL(value: number | TRBL | Point) {\n  return _readValueToProps(value, {top: 'y', right: 'x', bottom: 'y', left: 'x'});\n}\n\n/**\n * Converts the given value into a TRBL corners object (similar with css border-radius).\n * @param value - If a number, set the value to all TRBL corner components,\n *  else, if an object, use defined properties and sets undefined ones to 0.\n * @returns The TRBL corner values (topLeft, topRight, bottomLeft, bottomRight)\n * @since 3.0.0\n */\nexport function toTRBLCorners(value: number | TRBLCorners) {\n  return _readValueToProps(value, ['topLeft', 'topRight', 'bottomLeft', 'bottomRight']);\n}\n\n/**\n * Converts the given value into a padding object with pre-computed width/height.\n * @param value - If a number, set the value to all TRBL component,\n *  else, if an object, use defined properties and sets undefined ones to 0.\n *  x / y are shorthands for same value for left/right and top/bottom.\n * @returns The padding values (top, right, bottom, left, width, height)\n * @since 2.7.0\n */\nexport function toPadding(value?: number | TRBL): ChartArea {\n  const obj = toTRBL(value) as ChartArea;\n\n  obj.width = obj.left + obj.right;\n  obj.height = obj.top + obj.bottom;\n\n  return obj;\n}\n\n/**\n * Parses font options and returns the font object.\n * @param options - A object that contains font options to be parsed.\n * @param fallback - A object that contains fallback font options.\n * @return The font object.\n * @private\n */\n\nexport function toFont(options: Partial<FontSpec>, fallback?: Partial<FontSpec>) {\n  options = options || {};\n  fallback = fallback || defaults.font as FontSpec;\n\n  let size = valueOrDefault(options.size, fallback.size);\n\n  if (typeof size === 'string') {\n    size = parseInt(size, 10);\n  }\n  let style = valueOrDefault(options.style, fallback.style);\n  if (style && !('' + style).match(FONT_STYLE)) {\n    console.warn('Invalid font style specified: \"' + style + '\"');\n    style = undefined;\n  }\n\n  const font = {\n    family: valueOrDefault(options.family, fallback.family),\n    lineHeight: toLineHeight(valueOrDefault(options.lineHeight, fallback.lineHeight), size),\n    size,\n    style,\n    weight: valueOrDefault(options.weight, fallback.weight),\n    string: ''\n  };\n\n  font.string = toFontString(font);\n  return font;\n}\n\n/**\n * Evaluates the given `inputs` sequentially and returns the first defined value.\n * @param inputs - An array of values, falling back to the last value.\n * @param context - If defined and the current value is a function, the value\n * is called with `context` as first argument and the result becomes the new input.\n * @param index - If defined and the current value is an array, the value\n * at `index` become the new input.\n * @param info - object to return information about resolution in\n * @param info.cacheable - Will be set to `false` if option is not cacheable.\n * @since 2.7.0\n */\nexport function resolve(inputs: Array<unknown>, context?: object, index?: number, info?: { cacheable: boolean }) {\n  let cacheable = true;\n  let i: number, ilen: number, value: unknown;\n\n  for (i = 0, ilen = inputs.length; i < ilen; ++i) {\n    value = inputs[i];\n    if (value === undefined) {\n      continue;\n    }\n    if (context !== undefined && typeof value === 'function') {\n      value = value(context);\n      cacheable = false;\n    }\n    if (index !== undefined && isArray(value)) {\n      value = value[index % value.length];\n      cacheable = false;\n    }\n    if (value !== undefined) {\n      if (info && !cacheable) {\n        info.cacheable = false;\n      }\n      return value;\n    }\n  }\n}\n\n/**\n * @param minmax\n * @param grace\n * @param beginAtZero\n * @private\n */\nexport function _addGrace(minmax: { min: number; max: number; }, grace: number | string, beginAtZero: boolean) {\n  const {min, max} = minmax;\n  const change = toDimension(grace, (max - min) / 2);\n  const keepZero = (value: number, add: number) => beginAtZero && value === 0 ? 0 : value + add;\n  return {\n    min: keepZero(min, -Math.abs(change)),\n    max: keepZero(max, change)\n  };\n}\n\n/**\n * Create a context inheriting parentContext\n * @param parentContext\n * @param context\n * @returns\n */\nexport function createContext<T extends object>(parentContext: null, context: T): T;\nexport function createContext<T extends object, P extends T>(parentContext: P, context: T): P & T;\nexport function createContext(parentContext: object, context: object) {\n  return Object.assign(Object.create(parentContext), context);\n}\n","/* eslint-disable @typescript-eslint/no-use-before-define */\nimport type {AnyObject} from '../types/basic.js';\nimport type {ChartMeta} from '../types/index.js';\nimport type {\n  ResolverObjectKey,\n  ResolverCache,\n  ResolverProxy,\n  DescriptorDefaults,\n  Descriptor,\n  ContextCache,\n  ContextProxy\n} from './helpers.config.types.js';\nimport {isArray, isFunction, isObject, resolveObjectKey, _capitalize} from './helpers.core.js';\n\nexport * from './helpers.config.types.js';\n\n/**\n * Creates a Proxy for resolving raw values for options.\n * @param scopes - The option scopes to look for values, in resolution order\n * @param prefixes - The prefixes for values, in resolution order.\n * @param rootScopes - The root option scopes\n * @param fallback - Parent scopes fallback\n * @param getTarget - callback for getting the target for changed values\n * @returns Proxy\n * @private\n */\nexport function _createResolver<\n  T extends AnyObject[] = AnyObject[],\n  R extends AnyObject[] = T\n>(\n  scopes: T,\n  prefixes = [''],\n  rootScopes?: R,\n  fallback?: ResolverObjectKey,\n  getTarget = () => scopes[0]\n) {\n  const finalRootScopes = rootScopes || scopes;\n  if (typeof fallback === 'undefined') {\n    fallback = _resolve('_fallback', scopes);\n  }\n  const cache: ResolverCache<T, R> = {\n    [Symbol.toStringTag]: 'Object',\n    _cacheable: true,\n    _scopes: scopes,\n    _rootScopes: finalRootScopes,\n    _fallback: fallback,\n    _getTarget: getTarget,\n    override: (scope: AnyObject) => _createResolver([scope, ...scopes], prefixes, finalRootScopes, fallback),\n  };\n  return new Proxy(cache, {\n    /**\n     * A trap for the delete operator.\n     */\n    deleteProperty(target, prop: string) {\n      delete target[prop]; // remove from cache\n      delete target._keys; // remove cached keys\n      delete scopes[0][prop]; // remove from top level scope\n      return true;\n    },\n\n    /**\n     * A trap for getting property values.\n     */\n    get(target, prop: string) {\n      return _cached(target, prop,\n        () => _resolveWithPrefixes(prop, prefixes, scopes, target));\n    },\n\n    /**\n     * A trap for Object.getOwnPropertyDescriptor.\n     * Also used by Object.hasOwnProperty.\n     */\n    getOwnPropertyDescriptor(target, prop) {\n      return Reflect.getOwnPropertyDescriptor(target._scopes[0], prop);\n    },\n\n    /**\n     * A trap for Object.getPrototypeOf.\n     */\n    getPrototypeOf() {\n      return Reflect.getPrototypeOf(scopes[0]);\n    },\n\n    /**\n     * A trap for the in operator.\n     */\n    has(target, prop: string) {\n      return getKeysFromAllScopes(target).includes(prop);\n    },\n\n    /**\n     * A trap for Object.getOwnPropertyNames and Object.getOwnPropertySymbols.\n     */\n    ownKeys(target) {\n      return getKeysFromAllScopes(target);\n    },\n\n    /**\n     * A trap for setting property values.\n     */\n    set(target, prop: string, value) {\n      const storage = target._storage || (target._storage = getTarget());\n      target[prop] = storage[prop] = value; // set to top level scope + cache\n      delete target._keys; // remove cached keys\n      return true;\n    }\n  }) as ResolverProxy<T, R>;\n}\n\n/**\n * Returns an Proxy for resolving option values with context.\n * @param proxy - The Proxy returned by `_createResolver`\n * @param context - Context object for scriptable/indexable options\n * @param subProxy - The proxy provided for scriptable options\n * @param descriptorDefaults - Defaults for descriptors\n * @private\n */\nexport function _attachContext<\n  T extends AnyObject[] = AnyObject[],\n  R extends AnyObject[] = T\n>(\n  proxy: ResolverProxy<T, R>,\n  context: AnyObject,\n  subProxy?: ResolverProxy<T, R>,\n  descriptorDefaults?: DescriptorDefaults\n) {\n  const cache: ContextCache<T, R> = {\n    _cacheable: false,\n    _proxy: proxy,\n    _context: context,\n    _subProxy: subProxy,\n    _stack: new Set(),\n    _descriptors: _descriptors(proxy, descriptorDefaults),\n    setContext: (ctx: AnyObject) => _attachContext(proxy, ctx, subProxy, descriptorDefaults),\n    override: (scope: AnyObject) => _attachContext(proxy.override(scope), context, subProxy, descriptorDefaults)\n  };\n  return new Proxy(cache, {\n    /**\n     * A trap for the delete operator.\n     */\n    deleteProperty(target, prop) {\n      delete target[prop]; // remove from cache\n      delete proxy[prop]; // remove from proxy\n      return true;\n    },\n\n    /**\n     * A trap for getting property values.\n     */\n    get(target, prop: string, receiver) {\n      return _cached(target, prop,\n        () => _resolveWithContext(target, prop, receiver));\n    },\n\n    /**\n     * A trap for Object.getOwnPropertyDescriptor.\n     * Also used by Object.hasOwnProperty.\n     */\n    getOwnPropertyDescriptor(target, prop) {\n      return target._descriptors.allKeys\n        ? Reflect.has(proxy, prop) ? {enumerable: true, configurable: true} : undefined\n        : Reflect.getOwnPropertyDescriptor(proxy, prop);\n    },\n\n    /**\n     * A trap for Object.getPrototypeOf.\n     */\n    getPrototypeOf() {\n      return Reflect.getPrototypeOf(proxy);\n    },\n\n    /**\n     * A trap for the in operator.\n     */\n    has(target, prop) {\n      return Reflect.has(proxy, prop);\n    },\n\n    /**\n     * A trap for Object.getOwnPropertyNames and Object.getOwnPropertySymbols.\n     */\n    ownKeys() {\n      return Reflect.ownKeys(proxy);\n    },\n\n    /**\n     * A trap for setting property values.\n     */\n    set(target, prop, value) {\n      proxy[prop] = value; // set to proxy\n      delete target[prop]; // remove from cache\n      return true;\n    }\n  }) as ContextProxy<T, R>;\n}\n\n/**\n * @private\n */\nexport function _descriptors(\n  proxy: ResolverCache,\n  defaults: DescriptorDefaults = {scriptable: true, indexable: true}\n): Descriptor {\n  const {_scriptable = defaults.scriptable, _indexable = defaults.indexable, _allKeys = defaults.allKeys} = proxy;\n  return {\n    allKeys: _allKeys,\n    scriptable: _scriptable,\n    indexable: _indexable,\n    isScriptable: isFunction(_scriptable) ? _scriptable : () => _scriptable,\n    isIndexable: isFunction(_indexable) ? _indexable : () => _indexable\n  };\n}\n\nconst readKey = (prefix: string, name: string) => prefix ? prefix + _capitalize(name) : name;\nconst needsSubResolver = (prop: string, value: unknown) => isObject(value) && prop !== 'adapters' &&\n  (Object.getPrototypeOf(value) === null || value.constructor === Object);\n\nfunction _cached(\n  target: AnyObject,\n  prop: string,\n  resolve: () => unknown\n) {\n  if (Object.prototype.hasOwnProperty.call(target, prop)) {\n    return target[prop];\n  }\n\n  const value = resolve();\n  // cache the resolved value\n  target[prop] = value;\n  return value;\n}\n\nfunction _resolveWithContext(\n  target: ContextCache,\n  prop: string,\n  receiver: AnyObject\n) {\n  const {_proxy, _context, _subProxy, _descriptors: descriptors} = target;\n  let value = _proxy[prop]; // resolve from proxy\n\n  // resolve with context\n  if (isFunction(value) && descriptors.isScriptable(prop)) {\n    value = _resolveScriptable(prop, value, target, receiver);\n  }\n  if (isArray(value) && value.length) {\n    value = _resolveArray(prop, value, target, descriptors.isIndexable);\n  }\n  if (needsSubResolver(prop, value)) {\n    // if the resolved value is an object, create a sub resolver for it\n    value = _attachContext(value, _context, _subProxy && _subProxy[prop], descriptors);\n  }\n  return value;\n}\n\nfunction _resolveScriptable(\n  prop: string,\n  getValue: (ctx: AnyObject, sub: AnyObject) => unknown,\n  target: ContextCache,\n  receiver: AnyObject\n) {\n  const {_proxy, _context, _subProxy, _stack} = target;\n  if (_stack.has(prop)) {\n    throw new Error('Recursion detected: ' + Array.from(_stack).join('->') + '->' + prop);\n  }\n  _stack.add(prop);\n  let value = getValue(_context, _subProxy || receiver);\n  _stack.delete(prop);\n  if (needsSubResolver(prop, value)) {\n    // When scriptable option returns an object, create a resolver on that.\n    value = createSubResolver(_proxy._scopes, _proxy, prop, value);\n  }\n  return value;\n}\n\nfunction _resolveArray(\n  prop: string,\n  value: unknown[],\n  target: ContextCache,\n  isIndexable: (key: string) => boolean\n) {\n  const {_proxy, _context, _subProxy, _descriptors: descriptors} = target;\n\n  if (typeof _context.index !== 'undefined' && isIndexable(prop)) {\n    return value[_context.index % value.length];\n  } else if (isObject(value[0])) {\n    // Array of objects, return array or resolvers\n    const arr = value;\n    const scopes = _proxy._scopes.filter(s => s !== arr);\n    value = [];\n    for (const item of arr) {\n      const resolver = createSubResolver(scopes, _proxy, prop, item);\n      value.push(_attachContext(resolver, _context, _subProxy && _subProxy[prop], descriptors));\n    }\n  }\n  return value;\n}\n\nfunction resolveFallback(\n  fallback: ResolverObjectKey | ((prop: ResolverObjectKey, value: unknown) => ResolverObjectKey),\n  prop: ResolverObjectKey,\n  value: unknown\n) {\n  return isFunction(fallback) ? fallback(prop, value) : fallback;\n}\n\nconst getScope = (key: ResolverObjectKey, parent: AnyObject) => key === true ? parent\n  : typeof key === 'string' ? resolveObjectKey(parent, key) : undefined;\n\nfunction addScopes(\n  set: Set<AnyObject>,\n  parentScopes: AnyObject[],\n  key: ResolverObjectKey,\n  parentFallback: ResolverObjectKey,\n  value: unknown\n) {\n  for (const parent of parentScopes) {\n    const scope = getScope(key, parent);\n    if (scope) {\n      set.add(scope);\n      const fallback = resolveFallback(scope._fallback, key, value);\n      if (typeof fallback !== 'undefined' && fallback !== key && fallback !== parentFallback) {\n        // When we reach the descriptor that defines a new _fallback, return that.\n        // The fallback will resume to that new scope.\n        return fallback;\n      }\n    } else if (scope === false && typeof parentFallback !== 'undefined' && key !== parentFallback) {\n      // Fallback to `false` results to `false`, when falling back to different key.\n      // For example `interaction` from `hover` or `plugins.tooltip` and `animation` from `animations`\n      return null;\n    }\n  }\n  return false;\n}\n\nfunction createSubResolver(\n  parentScopes: AnyObject[],\n  resolver: ResolverCache,\n  prop: ResolverObjectKey,\n  value: unknown\n) {\n  const rootScopes = resolver._rootScopes;\n  const fallback = resolveFallback(resolver._fallback, prop, value);\n  const allScopes = [...parentScopes, ...rootScopes];\n  const set = new Set<AnyObject>();\n  set.add(value);\n  let key = addScopesFromKey(set, allScopes, prop, fallback || prop, value);\n  if (key === null) {\n    return false;\n  }\n  if (typeof fallback !== 'undefined' && fallback !== prop) {\n    key = addScopesFromKey(set, allScopes, fallback, key, value);\n    if (key === null) {\n      return false;\n    }\n  }\n  return _createResolver(Array.from(set), [''], rootScopes, fallback,\n    () => subGetTarget(resolver, prop as string, value));\n}\n\nfunction addScopesFromKey(\n  set: Set<AnyObject>,\n  allScopes: AnyObject[],\n  key: ResolverObjectKey,\n  fallback: ResolverObjectKey,\n  item: unknown\n) {\n  while (key) {\n    key = addScopes(set, allScopes, key, fallback, item);\n  }\n  return key;\n}\n\nfunction subGetTarget(\n  resolver: ResolverCache,\n  prop: string,\n  value: unknown\n) {\n  const parent = resolver._getTarget();\n  if (!(prop in parent)) {\n    parent[prop] = {};\n  }\n  const target = parent[prop];\n  if (isArray(target) && isObject(value)) {\n    // For array of objects, the object is used to store updated values\n    return value;\n  }\n  return target || {};\n}\n\nfunction _resolveWithPrefixes(\n  prop: string,\n  prefixes: string[],\n  scopes: AnyObject[],\n  proxy: ResolverProxy\n) {\n  let value: unknown;\n  for (const prefix of prefixes) {\n    value = _resolve(readKey(prefix, prop), scopes);\n    if (typeof value !== 'undefined') {\n      return needsSubResolver(prop, value)\n        ? createSubResolver(scopes, proxy, prop, value)\n        : value;\n    }\n  }\n}\n\nfunction _resolve(key: string, scopes: AnyObject[]) {\n  for (const scope of scopes) {\n    if (!scope) {\n      continue;\n    }\n    const value = scope[key];\n    if (typeof value !== 'undefined') {\n      return value;\n    }\n  }\n}\n\nfunction getKeysFromAllScopes(target: ResolverCache) {\n  let keys = target._keys;\n  if (!keys) {\n    keys = target._keys = resolveKeysFromAllScopes(target._scopes);\n  }\n  return keys;\n}\n\nfunction resolveKeysFromAllScopes(scopes: AnyObject[]) {\n  const set = new Set<string>();\n  for (const scope of scopes) {\n    for (const key of Object.keys(scope).filter(k => !k.startsWith('_'))) {\n      set.add(key);\n    }\n  }\n  return Array.from(set);\n}\n\nexport function _parseObjectDataRadialScale(\n  meta: ChartMeta<'line' | 'scatter'>,\n  data: AnyObject[],\n  start: number,\n  count: number\n) {\n  const {iScale} = meta;\n  const {key = 'r'} = this._parsing;\n  const parsed = new Array<{r: unknown}>(count);\n  let i: number, ilen: number, index: number, item: AnyObject;\n\n  for (i = 0, ilen = count; i < ilen; ++i) {\n    index = i + start;\n    item = data[index];\n    parsed[i] = {\n      r: iScale.parse(resolveObjectKey(item, key), index)\n    };\n  }\n  return parsed;\n}\n","import {almostEquals, distanceBetweenPoints, sign} from './helpers.math.js';\nimport {_isPointInArea} from './helpers.canvas.js';\nimport type {ChartArea} from '../types/index.js';\nimport type {SplinePoint} from '../types/geometric.js';\n\nconst EPSILON = Number.EPSILON || 1e-14;\n\ntype OptionalSplinePoint = SplinePoint | false\nconst getPoint = (points: SplinePoint[], i: number): OptionalSplinePoint => i < points.length && !points[i].skip && points[i];\nconst getValueAxis = (indexAxis: 'x' | 'y') => indexAxis === 'x' ? 'y' : 'x';\n\nexport function splineCurve(\n  firstPoint: SplinePoint,\n  middlePoint: SplinePoint,\n  afterPoint: SplinePoint,\n  t: number\n): {\n    previous: SplinePoint\n    next: SplinePoint\n  } {\n  // Props to Rob Spencer at scaled innovation for his post on splining between points\n  // http://scaledinnovation.com/analytics/splines/aboutSplines.html\n\n  // This function must also respect \"skipped\" points\n\n  const previous = firstPoint.skip ? middlePoint : firstPoint;\n  const current = middlePoint;\n  const next = afterPoint.skip ? middlePoint : afterPoint;\n  const d01 = distanceBetweenPoints(current, previous);\n  const d12 = distanceBetweenPoints(next, current);\n\n  let s01 = d01 / (d01 + d12);\n  let s12 = d12 / (d01 + d12);\n\n  // If all points are the same, s01 & s02 will be inf\n  s01 = isNaN(s01) ? 0 : s01;\n  s12 = isNaN(s12) ? 0 : s12;\n\n  const fa = t * s01; // scaling factor for triangle Ta\n  const fb = t * s12;\n\n  return {\n    previous: {\n      x: current.x - fa * (next.x - previous.x),\n      y: current.y - fa * (next.y - previous.y)\n    },\n    next: {\n      x: current.x + fb * (next.x - previous.x),\n      y: current.y + fb * (next.y - previous.y)\n    }\n  };\n}\n\n/**\n * Adjust tangents to ensure monotonic properties\n */\nfunction monotoneAdjust(points: SplinePoint[], deltaK: number[], mK: number[]) {\n  const pointsLen = points.length;\n\n  let alphaK: number, betaK: number, tauK: number, squaredMagnitude: number, pointCurrent: OptionalSplinePoint;\n  let pointAfter = getPoint(points, 0);\n  for (let i = 0; i < pointsLen - 1; ++i) {\n    pointCurrent = pointAfter;\n    pointAfter = getPoint(points, i + 1);\n    if (!pointCurrent || !pointAfter) {\n      continue;\n    }\n\n    if (almostEquals(deltaK[i], 0, EPSILON)) {\n      mK[i] = mK[i + 1] = 0;\n      continue;\n    }\n\n    alphaK = mK[i] / deltaK[i];\n    betaK = mK[i + 1] / deltaK[i];\n    squaredMagnitude = Math.pow(alphaK, 2) + Math.pow(betaK, 2);\n    if (squaredMagnitude <= 9) {\n      continue;\n    }\n\n    tauK = 3 / Math.sqrt(squaredMagnitude);\n    mK[i] = alphaK * tauK * deltaK[i];\n    mK[i + 1] = betaK * tauK * deltaK[i];\n  }\n}\n\nfunction monotoneCompute(points: SplinePoint[], mK: number[], indexAxis: 'x' | 'y' = 'x') {\n  const valueAxis = getValueAxis(indexAxis);\n  const pointsLen = points.length;\n  let delta: number, pointBefore: OptionalSplinePoint, pointCurrent: OptionalSplinePoint;\n  let pointAfter = getPoint(points, 0);\n\n  for (let i = 0; i < pointsLen; ++i) {\n    pointBefore = pointCurrent;\n    pointCurrent = pointAfter;\n    pointAfter = getPoint(points, i + 1);\n    if (!pointCurrent) {\n      continue;\n    }\n\n    const iPixel = pointCurrent[indexAxis];\n    const vPixel = pointCurrent[valueAxis];\n    if (pointBefore) {\n      delta = (iPixel - pointBefore[indexAxis]) / 3;\n      pointCurrent[`cp1${indexAxis}`] = iPixel - delta;\n      pointCurrent[`cp1${valueAxis}`] = vPixel - delta * mK[i];\n    }\n    if (pointAfter) {\n      delta = (pointAfter[indexAxis] - iPixel) / 3;\n      pointCurrent[`cp2${indexAxis}`] = iPixel + delta;\n      pointCurrent[`cp2${valueAxis}`] = vPixel + delta * mK[i];\n    }\n  }\n}\n\n/**\n * This function calculates Bézier control points in a similar way than |splineCurve|,\n * but preserves monotonicity of the provided data and ensures no local extremums are added\n * between the dataset discrete points due to the interpolation.\n * See : https://en.wikipedia.org/wiki/Monotone_cubic_interpolation\n */\nexport function splineCurveMonotone(points: SplinePoint[], indexAxis: 'x' | 'y' = 'x') {\n  const valueAxis = getValueAxis(indexAxis);\n  const pointsLen = points.length;\n  const deltaK: number[] = Array(pointsLen).fill(0);\n  const mK: number[] = Array(pointsLen);\n\n  // Calculate slopes (deltaK) and initialize tangents (mK)\n  let i, pointBefore: OptionalSplinePoint, pointCurrent: OptionalSplinePoint;\n  let pointAfter = getPoint(points, 0);\n\n  for (i = 0; i < pointsLen; ++i) {\n    pointBefore = pointCurrent;\n    pointCurrent = pointAfter;\n    pointAfter = getPoint(points, i + 1);\n    if (!pointCurrent) {\n      continue;\n    }\n\n    if (pointAfter) {\n      const slopeDelta = pointAfter[indexAxis] - pointCurrent[indexAxis];\n\n      // In the case of two points that appear at the same x pixel, slopeDeltaX is 0\n      deltaK[i] = slopeDelta !== 0 ? (pointAfter[valueAxis] - pointCurrent[valueAxis]) / slopeDelta : 0;\n    }\n    mK[i] = !pointBefore ? deltaK[i]\n      : !pointAfter ? deltaK[i - 1]\n        : (sign(deltaK[i - 1]) !== sign(deltaK[i])) ? 0\n          : (deltaK[i - 1] + deltaK[i]) / 2;\n  }\n\n  monotoneAdjust(points, deltaK, mK);\n\n  monotoneCompute(points, mK, indexAxis);\n}\n\nfunction capControlPoint(pt: number, min: number, max: number) {\n  return Math.max(Math.min(pt, max), min);\n}\n\nfunction capBezierPoints(points: SplinePoint[], area: ChartArea) {\n  let i, ilen, point, inArea, inAreaPrev;\n  let inAreaNext = _isPointInArea(points[0], area);\n  for (i = 0, ilen = points.length; i < ilen; ++i) {\n    inAreaPrev = inArea;\n    inArea = inAreaNext;\n    inAreaNext = i < ilen - 1 && _isPointInArea(points[i + 1], area);\n    if (!inArea) {\n      continue;\n    }\n    point = points[i];\n    if (inAreaPrev) {\n      point.cp1x = capControlPoint(point.cp1x, area.left, area.right);\n      point.cp1y = capControlPoint(point.cp1y, area.top, area.bottom);\n    }\n    if (inAreaNext) {\n      point.cp2x = capControlPoint(point.cp2x, area.left, area.right);\n      point.cp2y = capControlPoint(point.cp2y, area.top, area.bottom);\n    }\n  }\n}\n\n/**\n * @private\n */\nexport function _updateBezierControlPoints(\n  points: SplinePoint[],\n  options,\n  area: ChartArea,\n  loop: boolean,\n  indexAxis: 'x' | 'y'\n) {\n  let i: number, ilen: number, point: SplinePoint, controlPoints: ReturnType<typeof splineCurve>;\n\n  // Only consider points that are drawn in case the spanGaps option is used\n  if (options.spanGaps) {\n    points = points.filter((pt) => !pt.skip);\n  }\n\n  if (options.cubicInterpolationMode === 'monotone') {\n    splineCurveMonotone(points, indexAxis);\n  } else {\n    let prev = loop ? points[points.length - 1] : points[0];\n    for (i = 0, ilen = points.length; i < ilen; ++i) {\n      point = points[i];\n      controlPoints = splineCurve(\n        prev,\n        point,\n        points[Math.min(i + 1, ilen - (loop ? 0 : 1)) % ilen],\n        options.tension\n      );\n      point.cp1x = controlPoints.previous.x;\n      point.cp1y = controlPoints.previous.y;\n      point.cp2x = controlPoints.next.x;\n      point.cp2y = controlPoints.next.y;\n      prev = point;\n    }\n  }\n\n  if (options.capBezierPoints) {\n    capBezierPoints(points, area);\n  }\n}\n","import type {ChartArea, Scale} from '../types/index.js';\nimport type Chart from '../core/core.controller.js';\nimport type {ChartEvent} from '../types.js';\nimport {INFINITY} from './helpers.math.js';\n\n/**\n * Note: typedefs are auto-exported, so use a made-up `dom` namespace where\n * necessary to avoid duplicates with `export * from './helpers`; see\n * https://github.com/microsoft/TypeScript/issues/46011\n * @typedef { import('../core/core.controller.js').default } dom.Chart\n * @typedef { import('../../types').ChartEvent } ChartEvent\n */\n\n/**\n * @private\n */\nexport function _isDomSupported(): boolean {\n  return typeof window !== 'undefined' && typeof document !== 'undefined';\n}\n\n/**\n * @private\n */\nexport function _getParentNode(domNode: HTMLCanvasElement): HTMLCanvasElement {\n  let parent = domNode.parentNode;\n  if (parent && parent.toString() === '[object ShadowRoot]') {\n    parent = (parent as ShadowRoot).host;\n  }\n  return parent as HTMLCanvasElement;\n}\n\n/**\n * convert max-width/max-height values that may be percentages into a number\n * @private\n */\n\nfunction parseMaxStyle(styleValue: string | number, node: HTMLElement, parentProperty: string) {\n  let valueInPixels: number;\n  if (typeof styleValue === 'string') {\n    valueInPixels = parseInt(styleValue, 10);\n\n    if (styleValue.indexOf('%') !== -1) {\n      // percentage * size in dimension\n      valueInPixels = (valueInPixels / 100) * node.parentNode[parentProperty];\n    }\n  } else {\n    valueInPixels = styleValue;\n  }\n\n  return valueInPixels;\n}\n\nconst getComputedStyle = (element: HTMLElement): CSSStyleDeclaration =>\n  element.ownerDocument.defaultView.getComputedStyle(element, null);\n\nexport function getStyle(el: HTMLElement, property: string): string {\n  return getComputedStyle(el).getPropertyValue(property);\n}\n\nconst positions = ['top', 'right', 'bottom', 'left'];\nfunction getPositionedStyle(styles: CSSStyleDeclaration, style: string, suffix?: string): ChartArea {\n  const result = {} as ChartArea;\n  suffix = suffix ? '-' + suffix : '';\n  for (let i = 0; i < 4; i++) {\n    const pos = positions[i];\n    result[pos] = parseFloat(styles[style + '-' + pos + suffix]) || 0;\n  }\n  result.width = result.left + result.right;\n  result.height = result.top + result.bottom;\n  return result;\n}\n\nconst useOffsetPos = (x: number, y: number, target: HTMLElement | EventTarget) =>\n  (x > 0 || y > 0) && (!target || !(target as HTMLElement).shadowRoot);\n\n/**\n * @param e\n * @param canvas\n * @returns Canvas position\n */\nfunction getCanvasPosition(\n  e: Event | TouchEvent | MouseEvent,\n  canvas: HTMLCanvasElement\n): {\n    x: number;\n    y: number;\n    box: boolean;\n  } {\n  const touches = (e as TouchEvent).touches;\n  const source = (touches && touches.length ? touches[0] : e) as MouseEvent;\n  const {offsetX, offsetY} = source as MouseEvent;\n  let box = false;\n  let x, y;\n  if (useOffsetPos(offsetX, offsetY, e.target)) {\n    x = offsetX;\n    y = offsetY;\n  } else {\n    const rect = canvas.getBoundingClientRect();\n    x = source.clientX - rect.left;\n    y = source.clientY - rect.top;\n    box = true;\n  }\n  return {x, y, box};\n}\n\n/**\n * Gets an event's x, y coordinates, relative to the chart area\n * @param event\n * @param chart\n * @returns x and y coordinates of the event\n */\n\nexport function getRelativePosition(\n  event: Event | ChartEvent | TouchEvent | MouseEvent,\n  chart: Chart\n): { x: number; y: number } {\n  if ('native' in event) {\n    return event;\n  }\n\n  const {canvas, currentDevicePixelRatio} = chart;\n  const style = getComputedStyle(canvas);\n  const borderBox = style.boxSizing === 'border-box';\n  const paddings = getPositionedStyle(style, 'padding');\n  const borders = getPositionedStyle(style, 'border', 'width');\n  const {x, y, box} = getCanvasPosition(event, canvas);\n  const xOffset = paddings.left + (box && borders.left);\n  const yOffset = paddings.top + (box && borders.top);\n\n  let {width, height} = chart;\n  if (borderBox) {\n    width -= paddings.width + borders.width;\n    height -= paddings.height + borders.height;\n  }\n  return {\n    x: Math.round((x - xOffset) / width * canvas.width / currentDevicePixelRatio),\n    y: Math.round((y - yOffset) / height * canvas.height / currentDevicePixelRatio)\n  };\n}\n\nfunction getContainerSize(canvas: HTMLCanvasElement, width: number, height: number): Partial<Scale> {\n  let maxWidth: number, maxHeight: number;\n\n  if (width === undefined || height === undefined) {\n    const container = _getParentNode(canvas);\n    if (!container) {\n      width = canvas.clientWidth;\n      height = canvas.clientHeight;\n    } else {\n      const rect = container.getBoundingClientRect(); // this is the border box of the container\n      const containerStyle = getComputedStyle(container);\n      const containerBorder = getPositionedStyle(containerStyle, 'border', 'width');\n      const containerPadding = getPositionedStyle(containerStyle, 'padding');\n      width = rect.width - containerPadding.width - containerBorder.width;\n      height = rect.height - containerPadding.height - containerBorder.height;\n      maxWidth = parseMaxStyle(containerStyle.maxWidth, container, 'clientWidth');\n      maxHeight = parseMaxStyle(containerStyle.maxHeight, container, 'clientHeight');\n    }\n  }\n  return {\n    width,\n    height,\n    maxWidth: maxWidth || INFINITY,\n    maxHeight: maxHeight || INFINITY\n  };\n}\n\nconst round1 = (v: number) => Math.round(v * 10) / 10;\n\n// eslint-disable-next-line complexity\nexport function getMaximumSize(\n  canvas: HTMLCanvasElement,\n  bbWidth?: number,\n  bbHeight?: number,\n  aspectRatio?: number\n): { width: number; height: number } {\n  const style = getComputedStyle(canvas);\n  const margins = getPositionedStyle(style, 'margin');\n  const maxWidth = parseMaxStyle(style.maxWidth, canvas, 'clientWidth') || INFINITY;\n  const maxHeight = parseMaxStyle(style.maxHeight, canvas, 'clientHeight') || INFINITY;\n  const containerSize = getContainerSize(canvas, bbWidth, bbHeight);\n  let {width, height} = containerSize;\n\n  if (style.boxSizing === 'content-box') {\n    const borders = getPositionedStyle(style, 'border', 'width');\n    const paddings = getPositionedStyle(style, 'padding');\n    width -= paddings.width + borders.width;\n    height -= paddings.height + borders.height;\n  }\n  width = Math.max(0, width - margins.width);\n  height = Math.max(0, aspectRatio ? width / aspectRatio : height - margins.height);\n  width = round1(Math.min(width, maxWidth, containerSize.maxWidth));\n  height = round1(Math.min(height, maxHeight, containerSize.maxHeight));\n  if (width && !height) {\n    // https://github.com/chartjs/Chart.js/issues/4659\n    // If the canvas has width, but no height, default to aspectRatio of 2 (canvas default)\n    height = round1(width / 2);\n  }\n\n  const maintainHeight = bbWidth !== undefined || bbHeight !== undefined;\n\n  if (maintainHeight && aspectRatio && containerSize.height && height > containerSize.height) {\n    height = containerSize.height;\n    width = round1(Math.floor(height * aspectRatio));\n  }\n\n  return {width, height};\n}\n\n/**\n * @param chart\n * @param forceRatio\n * @param forceStyle\n * @returns True if the canvas context size or transformation has changed.\n */\nexport function retinaScale(\n  chart: Chart,\n  forceRatio: number,\n  forceStyle?: boolean\n): boolean | void {\n  const pixelRatio = forceRatio || 1;\n  const deviceHeight = Math.floor(chart.height * pixelRatio);\n  const deviceWidth = Math.floor(chart.width * pixelRatio);\n\n  chart.height = Math.floor(chart.height);\n  chart.width = Math.floor(chart.width);\n\n  const canvas = chart.canvas;\n\n  // If no style has been set on the canvas, the render size is used as display size,\n  // making the chart visually bigger, so let's enforce it to the \"correct\" values.\n  // See https://github.com/chartjs/Chart.js/issues/3575\n  if (canvas.style && (forceStyle || (!canvas.style.height && !canvas.style.width))) {\n    canvas.style.height = `${chart.height}px`;\n    canvas.style.width = `${chart.width}px`;\n  }\n\n  if (chart.currentDevicePixelRatio !== pixelRatio\n      || canvas.height !== deviceHeight\n      || canvas.width !== deviceWidth) {\n    chart.currentDevicePixelRatio = pixelRatio;\n    canvas.height = deviceHeight;\n    canvas.width = deviceWidth;\n    chart.ctx.setTransform(pixelRatio, 0, 0, pixelRatio, 0, 0);\n    return true;\n  }\n  return false;\n}\n\n/**\n * Detects support for options object argument in addEventListener.\n * https://developer.mozilla.org/en-US/docs/Web/API/EventTarget/addEventListener#Safely_detecting_option_support\n * @private\n */\nexport const supportsEventListenerOptions = (function() {\n  let passiveSupported = false;\n  try {\n    const options = {\n      get passive() { // This function will be called when the browser attempts to access the passive property.\n        passiveSupported = true;\n        return false;\n      }\n    } as EventListenerOptions;\n\n    if (_isDomSupported()) {\n      window.addEventListener('test', null, options);\n      window.removeEventListener('test', null, options);\n    }\n  } catch (e) {\n    // continue regardless of error\n  }\n  return passiveSupported;\n}());\n\n/**\n * The \"used\" size is the final value of a dimension property after all calculations have\n * been performed. This method uses the computed style of `element` but returns undefined\n * if the computed style is not expressed in pixels. That can happen in some cases where\n * `element` has a size relative to its parent and this last one is not yet displayed,\n * for example because of `display: none` on a parent node.\n * @see https://developer.mozilla.org/en-US/docs/Web/CSS/used_value\n * @returns Size in pixels or undefined if unknown.\n */\n\nexport function readUsedSize(\n  element: HTMLElement,\n  property: 'width' | 'height'\n): number | undefined {\n  const value = getStyle(element, property);\n  const matches = value && value.match(/^(\\d+)(\\.\\d+)?px$/);\n  return matches ? +matches[1] : undefined;\n}\n","import type {Point, SplinePoint} from '../types/geometric.js';\n\n/**\n * @private\n */\nexport function _pointInLine(p1: Point, p2: Point, t: number, mode?) { // eslint-disable-line @typescript-eslint/no-unused-vars\n  return {\n    x: p1.x + t * (p2.x - p1.x),\n    y: p1.y + t * (p2.y - p1.y)\n  };\n}\n\n/**\n * @private\n */\nexport function _steppedInterpolation(\n  p1: Point,\n  p2: Point,\n  t: number, mode: 'middle' | 'after' | unknown\n) {\n  return {\n    x: p1.x + t * (p2.x - p1.x),\n    y: mode === 'middle' ? t < 0.5 ? p1.y : p2.y\n      : mode === 'after' ? t < 1 ? p1.y : p2.y\n        : t > 0 ? p2.y : p1.y\n  };\n}\n\n/**\n * @private\n */\nexport function _bezierInterpolation(p1: SplinePoint, p2: SplinePoint, t: number, mode?) { // eslint-disable-line @typescript-eslint/no-unused-vars\n  const cp1 = {x: p1.cp2x, y: p1.cp2y};\n  const cp2 = {x: p2.cp1x, y: p2.cp1y};\n  const a = _pointInLine(p1, cp1, t);\n  const b = _pointInLine(cp1, cp2, t);\n  const c = _pointInLine(cp2, p2, t);\n  const d = _pointInLine(a, b, t);\n  const e = _pointInLine(b, c, t);\n  return _pointInLine(d, e, t);\n}\n","export interface RTLAdapter {\n  x(x: number): number;\n  setWidth(w: number): void;\n  textAlign(align: 'center' | 'left' | 'right'): 'center' | 'left' | 'right';\n  xPlus(x: number, value: number): number;\n  leftForLtr(x: number, itemWidth: number): number;\n}\n\nconst getRightToLeftAdapter = function(rectX: number, width: number): RTLAdapter {\n  return {\n    x(x) {\n      return rectX + rectX + width - x;\n    },\n    setWidth(w) {\n      width = w;\n    },\n    textAlign(align) {\n      if (align === 'center') {\n        return align;\n      }\n      return align === 'right' ? 'left' : 'right';\n    },\n    xPlus(x, value) {\n      return x - value;\n    },\n    leftForLtr(x, itemWidth) {\n      return x - itemWidth;\n    },\n  };\n};\n\nconst getLeftToRightAdapter = function(): RTLAdapter {\n  return {\n    x(x) {\n      return x;\n    },\n    setWidth(w) { // eslint-disable-line no-unused-vars\n    },\n    textAlign(align) {\n      return align;\n    },\n    xPlus(x, value) {\n      return x + value;\n    },\n    leftForLtr(x, _itemWidth) { // eslint-disable-line @typescript-eslint/no-unused-vars\n      return x;\n    },\n  };\n};\n\nexport function getRtlAdapter(rtl: boolean, rectX: number, width: number) {\n  return rtl ? getRightToLeftAdapter(rectX, width) : getLeftToRightAdapter();\n}\n\nexport function overrideTextDirection(ctx: CanvasRenderingContext2D, direction: 'ltr' | 'rtl') {\n  let style: CSSStyleDeclaration, original: [string, string];\n  if (direction === 'ltr' || direction === 'rtl') {\n    style = ctx.canvas.style;\n    original = [\n      style.getPropertyValue('direction'),\n      style.getPropertyPriority('direction'),\n    ];\n\n    style.setProperty('direction', direction, 'important');\n    (ctx as { prevTextDirection?: [string, string] }).prevTextDirection = original;\n  }\n}\n\nexport function restoreTextDirection(ctx: CanvasRenderingContext2D, original?: [string, string]) {\n  if (original !== undefined) {\n    delete (ctx as { prevTextDirection?: [string, string] }).prevTextDirection;\n    ctx.canvas.style.setProperty('direction', original[0], original[1]);\n  }\n}\n","import {_angleBetween, _angleDiff, _isBetween, _normalizeAngle} from './helpers.math.js';\nimport {createContext} from './helpers.options.js';\nimport {isPatternOrGradient} from './helpers.color.js';\n\n/**\n * @typedef { import('../elements/element.line.js').default } LineElement\n * @typedef { import('../elements/element.point.js').default } PointElement\n * @typedef {{start: number, end: number, loop: boolean, style?: any}} Segment\n */\n\nfunction propertyFn(property) {\n  if (property === 'angle') {\n    return {\n      between: _angleBetween,\n      compare: _angleDiff,\n      normalize: _normalizeAngle,\n    };\n  }\n  return {\n    between: _isBetween,\n    compare: (a, b) => a - b,\n    normalize: x => x\n  };\n}\n\nfunction normalizeSegment({start, end, count, loop, style}) {\n  return {\n    start: start % count,\n    end: end % count,\n    loop: loop && (end - start + 1) % count === 0,\n    style\n  };\n}\n\nfunction getSegment(segment, points, bounds) {\n  const {property, start: startBound, end: endBound} = bounds;\n  const {between, normalize} = propertyFn(property);\n  const count = points.length;\n  // eslint-disable-next-line prefer-const\n  let {start, end, loop} = segment;\n  let i, ilen;\n\n  if (loop) {\n    start += count;\n    end += count;\n    for (i = 0, ilen = count; i < ilen; ++i) {\n      if (!between(normalize(points[start % count][property]), startBound, endBound)) {\n        break;\n      }\n      start--;\n      end--;\n    }\n    start %= count;\n    end %= count;\n  }\n\n  if (end < start) {\n    end += count;\n  }\n  return {start, end, loop, style: segment.style};\n}\n\n/**\n * Returns the sub-segment(s) of a line segment that fall in the given bounds\n * @param {object} segment\n * @param {number} segment.start - start index of the segment, referring the points array\n * @param {number} segment.end - end index of the segment, referring the points array\n * @param {boolean} segment.loop - indicates that the segment is a loop\n * @param {object} [segment.style] - segment style\n * @param {PointElement[]} points - the points that this segment refers to\n * @param {object} [bounds]\n * @param {string} bounds.property - the property of a `PointElement` we are bounding. `x`, `y` or `angle`.\n * @param {number} bounds.start - start value of the property\n * @param {number} bounds.end - end value of the property\n * @private\n **/\nexport function _boundSegment(segment, points, bounds) {\n  if (!bounds) {\n    return [segment];\n  }\n\n  const {property, start: startBound, end: endBound} = bounds;\n  const count = points.length;\n  const {compare, between, normalize} = propertyFn(property);\n  const {start, end, loop, style} = getSegment(segment, points, bounds);\n\n  const result = [];\n  let inside = false;\n  let subStart = null;\n  let value, point, prevValue;\n\n  const startIsBefore = () => between(startBound, prevValue, value) && compare(startBound, prevValue) !== 0;\n  const endIsBefore = () => compare(endBound, value) === 0 || between(endBound, prevValue, value);\n  const shouldStart = () => inside || startIsBefore();\n  const shouldStop = () => !inside || endIsBefore();\n\n  for (let i = start, prev = start; i <= end; ++i) {\n    point = points[i % count];\n\n    if (point.skip) {\n      continue;\n    }\n\n    value = normalize(point[property]);\n\n    if (value === prevValue) {\n      continue;\n    }\n\n    inside = between(value, startBound, endBound);\n\n    if (subStart === null && shouldStart()) {\n      subStart = compare(value, startBound) === 0 ? i : prev;\n    }\n\n    if (subStart !== null && shouldStop()) {\n      result.push(normalizeSegment({start: subStart, end: i, loop, count, style}));\n      subStart = null;\n    }\n    prev = i;\n    prevValue = value;\n  }\n\n  if (subStart !== null) {\n    result.push(normalizeSegment({start: subStart, end, loop, count, style}));\n  }\n\n  return result;\n}\n\n\n/**\n * Returns the segments of the line that are inside given bounds\n * @param {LineElement} line\n * @param {object} [bounds]\n * @param {string} bounds.property - the property we are bounding with. `x`, `y` or `angle`.\n * @param {number} bounds.start - start value of the `property`\n * @param {number} bounds.end - end value of the `property`\n * @private\n */\nexport function _boundSegments(line, bounds) {\n  const result = [];\n  const segments = line.segments;\n\n  for (let i = 0; i < segments.length; i++) {\n    const sub = _boundSegment(segments[i], line.points, bounds);\n    if (sub.length) {\n      result.push(...sub);\n    }\n  }\n  return result;\n}\n\n/**\n * Find start and end index of a line.\n */\nfunction findStartAndEnd(points, count, loop, spanGaps) {\n  let start = 0;\n  let end = count - 1;\n\n  if (loop && !spanGaps) {\n    // loop and not spanning gaps, first find a gap to start from\n    while (start < count && !points[start].skip) {\n      start++;\n    }\n  }\n\n  // find first non skipped point (after the first gap possibly)\n  while (start < count && points[start].skip) {\n    start++;\n  }\n\n  // if we looped to count, start needs to be 0\n  start %= count;\n\n  if (loop) {\n    // loop will go past count, if start > 0\n    end += start;\n  }\n\n  while (end > start && points[end % count].skip) {\n    end--;\n  }\n\n  // end could be more than count, normalize\n  end %= count;\n\n  return {start, end};\n}\n\n/**\n * Compute solid segments from Points, when spanGaps === false\n * @param {PointElement[]} points - the points\n * @param {number} start - start index\n * @param {number} max - max index (can go past count on a loop)\n * @param {boolean} loop - boolean indicating that this would be a loop if no gaps are found\n */\nfunction solidSegments(points, start, max, loop) {\n  const count = points.length;\n  const result = [];\n  let last = start;\n  let prev = points[start];\n  let end;\n\n  for (end = start + 1; end <= max; ++end) {\n    const cur = points[end % count];\n    if (cur.skip || cur.stop) {\n      if (!prev.skip) {\n        loop = false;\n        result.push({start: start % count, end: (end - 1) % count, loop});\n        // @ts-ignore\n        start = last = cur.stop ? end : null;\n      }\n    } else {\n      last = end;\n      if (prev.skip) {\n        start = end;\n      }\n    }\n    prev = cur;\n  }\n\n  if (last !== null) {\n    result.push({start: start % count, end: last % count, loop});\n  }\n\n  return result;\n}\n\n/**\n * Compute the continuous segments that define the whole line\n * There can be skipped points within a segment, if spanGaps is true.\n * @param {LineElement} line\n * @param {object} [segmentOptions]\n * @return {Segment[]}\n * @private\n */\nexport function _computeSegments(line, segmentOptions) {\n  const points = line.points;\n  const spanGaps = line.options.spanGaps;\n  const count = points.length;\n\n  if (!count) {\n    return [];\n  }\n\n  const loop = !!line._loop;\n  const {start, end} = findStartAndEnd(points, count, loop, spanGaps);\n\n  if (spanGaps === true) {\n    return splitByStyles(line, [{start, end, loop}], points, segmentOptions);\n  }\n\n  const max = end < start ? end + count : end;\n  const completeLoop = !!line._fullLoop && start === 0 && end === count - 1;\n  return splitByStyles(line, solidSegments(points, start, max, completeLoop), points, segmentOptions);\n}\n\n/**\n * @param {Segment[]} segments\n * @param {PointElement[]} points\n * @param {object} [segmentOptions]\n * @return {Segment[]}\n */\nfunction splitByStyles(line, segments, points, segmentOptions) {\n  if (!segmentOptions || !segmentOptions.setContext || !points) {\n    return segments;\n  }\n  return doSplitByStyles(line, segments, points, segmentOptions);\n}\n\n/**\n * @param {LineElement} line\n * @param {Segment[]} segments\n * @param {PointElement[]} points\n * @param {object} [segmentOptions]\n * @return {Segment[]}\n */\nfunction doSplitByStyles(line, segments, points, segmentOptions) {\n  const chartContext = line._chart.getContext();\n  const baseStyle = readStyle(line.options);\n  const {_datasetIndex: datasetIndex, options: {spanGaps}} = line;\n  const count = points.length;\n  const result = [];\n  let prevStyle = baseStyle;\n  let start = segments[0].start;\n  let i = start;\n\n  function addStyle(s, e, l, st) {\n    const dir = spanGaps ? -1 : 1;\n    if (s === e) {\n      return;\n    }\n    // Style can not start/end on a skipped point, adjust indices accordingly\n    s += count;\n    while (points[s % count].skip) {\n      s -= dir;\n    }\n    while (points[e % count].skip) {\n      e += dir;\n    }\n    if (s % count !== e % count) {\n      result.push({start: s % count, end: e % count, loop: l, style: st});\n      prevStyle = st;\n      start = e % count;\n    }\n  }\n\n  for (const segment of segments) {\n    start = spanGaps ? start : segment.start;\n    let prev = points[start % count];\n    let style;\n    for (i = start + 1; i <= segment.end; i++) {\n      const pt = points[i % count];\n      style = readStyle(segmentOptions.setContext(createContext(chartContext, {\n        type: 'segment',\n        p0: prev,\n        p1: pt,\n        p0DataIndex: (i - 1) % count,\n        p1DataIndex: i % count,\n        datasetIndex\n      })));\n      if (styleChanged(style, prevStyle)) {\n        addStyle(start, i - 1, segment.loop, prevStyle);\n      }\n      prev = pt;\n      prevStyle = style;\n    }\n    if (start < i - 1) {\n      addStyle(start, i - 1, segment.loop, prevStyle);\n    }\n  }\n\n  return result;\n}\n\nfunction readStyle(options) {\n  return {\n    backgroundColor: options.backgroundColor,\n    borderCapStyle: options.borderCapStyle,\n    borderDash: options.borderDash,\n    borderDashOffset: options.borderDashOffset,\n    borderJoinStyle: options.borderJoinStyle,\n    borderWidth: options.borderWidth,\n    borderColor: options.borderColor\n  };\n}\n\nfunction styleChanged(style, prevStyle) {\n  if (!prevStyle) {\n    return false;\n  }\n  const cache = [];\n  const replacer = function(key, value) {\n    if (!isPatternOrGradient(value)) {\n      return value;\n    }\n    if (!cache.includes(value)) {\n      cache.push(value);\n    }\n    return cache.indexOf(value);\n  };\n  return JSON.stringify(style, replacer) !== JSON.stringify(prevStyle, replacer);\n}\n","import {requestAnimFrame} from '../helpers/helpers.extras.js';\n\n/**\n * @typedef { import('./core.animation.js').default } Animation\n * @typedef { import('./core.controller.js').default } Chart\n */\n\n/**\n * Please use the module's default export which provides a singleton instance\n * Note: class is export for typedoc\n */\nexport class Animator {\n  constructor() {\n    this._request = null;\n    this._charts = new Map();\n    this._running = false;\n    this._lastDate = undefined;\n  }\n\n  /**\n\t * @private\n\t */\n  _notify(chart, anims, date, type) {\n    const callbacks = anims.listeners[type];\n    const numSteps = anims.duration;\n\n    callbacks.forEach(fn => fn({\n      chart,\n      initial: anims.initial,\n      numSteps,\n      currentStep: Math.min(date - anims.start, numSteps)\n    }));\n  }\n\n  /**\n\t * @private\n\t */\n  _refresh() {\n    if (this._request) {\n      return;\n    }\n    this._running = true;\n\n    this._request = requestAnimFrame.call(window, () => {\n      this._update();\n      this._request = null;\n\n      if (this._running) {\n        this._refresh();\n      }\n    });\n  }\n\n  /**\n\t * @private\n\t */\n  _update(date = Date.now()) {\n    let remaining = 0;\n\n    this._charts.forEach((anims, chart) => {\n      if (!anims.running || !anims.items.length) {\n        return;\n      }\n      const items = anims.items;\n      let i = items.length - 1;\n      let draw = false;\n      let item;\n\n      for (; i >= 0; --i) {\n        item = items[i];\n\n        if (item._active) {\n          if (item._total > anims.duration) {\n            // if the animation has been updated and its duration prolonged,\n            // update to total duration of current animations run (for progress event)\n            anims.duration = item._total;\n          }\n          item.tick(date);\n          draw = true;\n        } else {\n          // Remove the item by replacing it with last item and removing the last\n          // A lot faster than splice.\n          items[i] = items[items.length - 1];\n          items.pop();\n        }\n      }\n\n      if (draw) {\n        chart.draw();\n        this._notify(chart, anims, date, 'progress');\n      }\n\n      if (!items.length) {\n        anims.running = false;\n        this._notify(chart, anims, date, 'complete');\n        anims.initial = false;\n      }\n\n      remaining += items.length;\n    });\n\n    this._lastDate = date;\n\n    if (remaining === 0) {\n      this._running = false;\n    }\n  }\n\n  /**\n\t * @private\n\t */\n  _getAnims(chart) {\n    const charts = this._charts;\n    let anims = charts.get(chart);\n    if (!anims) {\n      anims = {\n        running: false,\n        initial: true,\n        items: [],\n        listeners: {\n          complete: [],\n          progress: []\n        }\n      };\n      charts.set(chart, anims);\n    }\n    return anims;\n  }\n\n  /**\n\t * @param {Chart} chart\n\t * @param {string} event - event name\n\t * @param {Function} cb - callback\n\t */\n  listen(chart, event, cb) {\n    this._getAnims(chart).listeners[event].push(cb);\n  }\n\n  /**\n\t * Add animations\n\t * @param {Chart} chart\n\t * @param {Animation[]} items - animations\n\t */\n  add(chart, items) {\n    if (!items || !items.length) {\n      return;\n    }\n    this._getAnims(chart).items.push(...items);\n  }\n\n  /**\n\t * Counts number of active animations for the chart\n\t * @param {Chart} chart\n\t */\n  has(chart) {\n    return this._getAnims(chart).items.length > 0;\n  }\n\n  /**\n\t * Start animating (all charts)\n\t * @param {Chart} chart\n\t */\n  start(chart) {\n    const anims = this._charts.get(chart);\n    if (!anims) {\n      return;\n    }\n    anims.running = true;\n    anims.start = Date.now();\n    anims.duration = anims.items.reduce((acc, cur) => Math.max(acc, cur._duration), 0);\n    this._refresh();\n  }\n\n  running(chart) {\n    if (!this._running) {\n      return false;\n    }\n    const anims = this._charts.get(chart);\n    if (!anims || !anims.running || !anims.items.length) {\n      return false;\n    }\n    return true;\n  }\n\n  /**\n\t * Stop all animations for the chart\n\t * @param {Chart} chart\n\t */\n  stop(chart) {\n    const anims = this._charts.get(chart);\n    if (!anims || !anims.items.length) {\n      return;\n    }\n    const items = anims.items;\n    let i = items.length - 1;\n\n    for (; i >= 0; --i) {\n      items[i].cancel();\n    }\n    anims.items = [];\n    this._notify(chart, anims, Date.now(), 'complete');\n  }\n\n  /**\n\t * Remove chart from Animator\n\t * @param {Chart} chart\n\t */\n  remove(chart) {\n    return this._charts.delete(chart);\n  }\n}\n\n// singleton instance\nexport default /* #__PURE__ */ new Animator();\n","import effects from '../helpers/helpers.easing.js';\nimport {resolve} from '../helpers/helpers.options.js';\nimport {color as helpersColor} from '../helpers/helpers.color.js';\n\nconst transparent = 'transparent';\nconst interpolators = {\n  boolean(from, to, factor) {\n    return factor > 0.5 ? to : from;\n  },\n  /**\n   * @param {string} from\n   * @param {string} to\n   * @param {number} factor\n   */\n  color(from, to, factor) {\n    const c0 = helpersColor(from || transparent);\n    const c1 = c0.valid && helpersColor(to || transparent);\n    return c1 && c1.valid\n      ? c1.mix(c0, factor).hexString()\n      : to;\n  },\n  number(from, to, factor) {\n    return from + (to - from) * factor;\n  }\n};\n\nexport default class Animation {\n  constructor(cfg, target, prop, to) {\n    const currentValue = target[prop];\n\n    to = resolve([cfg.to, to, currentValue, cfg.from]);\n    const from = resolve([cfg.from, currentValue, to]);\n\n    this._active = true;\n    this._fn = cfg.fn || interpolators[cfg.type || typeof from];\n    this._easing = effects[cfg.easing] || effects.linear;\n    this._start = Math.floor(Date.now() + (cfg.delay || 0));\n    this._duration = this._total = Math.floor(cfg.duration);\n    this._loop = !!cfg.loop;\n    this._target = target;\n    this._prop = prop;\n    this._from = from;\n    this._to = to;\n    this._promises = undefined;\n  }\n\n  active() {\n    return this._active;\n  }\n\n  update(cfg, to, date) {\n    if (this._active) {\n      this._notify(false);\n\n      const currentValue = this._target[this._prop];\n      const elapsed = date - this._start;\n      const remain = this._duration - elapsed;\n      this._start = date;\n      this._duration = Math.floor(Math.max(remain, cfg.duration));\n      this._total += elapsed;\n      this._loop = !!cfg.loop;\n      this._to = resolve([cfg.to, to, currentValue, cfg.from]);\n      this._from = resolve([cfg.from, currentValue, to]);\n    }\n  }\n\n  cancel() {\n    if (this._active) {\n      // update current evaluated value, for smoother animations\n      this.tick(Date.now());\n      this._active = false;\n      this._notify(false);\n    }\n  }\n\n  tick(date) {\n    const elapsed = date - this._start;\n    const duration = this._duration;\n    const prop = this._prop;\n    const from = this._from;\n    const loop = this._loop;\n    const to = this._to;\n    let factor;\n\n    this._active = from !== to && (loop || (elapsed < duration));\n\n    if (!this._active) {\n      this._target[prop] = to;\n      this._notify(true);\n      return;\n    }\n\n    if (elapsed < 0) {\n      this._target[prop] = from;\n      return;\n    }\n\n    factor = (elapsed / duration) % 2;\n    factor = loop && factor > 1 ? 2 - factor : factor;\n    factor = this._easing(Math.min(1, Math.max(0, factor)));\n\n    this._target[prop] = this._fn(from, to, factor);\n  }\n\n  wait() {\n    const promises = this._promises || (this._promises = []);\n    return new Promise((res, rej) => {\n      promises.push({res, rej});\n    });\n  }\n\n  _notify(resolved) {\n    const method = resolved ? 'res' : 'rej';\n    const promises = this._promises || [];\n    for (let i = 0; i < promises.length; i++) {\n      promises[i][method]();\n    }\n  }\n}\n","import animator from './core.animator.js';\nimport Animation from './core.animation.js';\nimport defaults from './core.defaults.js';\nimport {isArray, isObject} from '../helpers/helpers.core.js';\n\nexport default class Animations {\n  constructor(chart, config) {\n    this._chart = chart;\n    this._properties = new Map();\n    this.configure(config);\n  }\n\n  configure(config) {\n    if (!isObject(config)) {\n      return;\n    }\n\n    const animationOptions = Object.keys(defaults.animation);\n    const animatedProps = this._properties;\n\n    Object.getOwnPropertyNames(config).forEach(key => {\n      const cfg = config[key];\n      if (!isObject(cfg)) {\n        return;\n      }\n      const resolved = {};\n      for (const option of animationOptions) {\n        resolved[option] = cfg[option];\n      }\n\n      (isArray(cfg.properties) && cfg.properties || [key]).forEach((prop) => {\n        if (prop === key || !animatedProps.has(prop)) {\n          animatedProps.set(prop, resolved);\n        }\n      });\n    });\n  }\n\n  /**\n\t * Utility to handle animation of `options`.\n\t * @private\n\t */\n  _animateOptions(target, values) {\n    const newOptions = values.options;\n    const options = resolveTargetOptions(target, newOptions);\n    if (!options) {\n      return [];\n    }\n\n    const animations = this._createAnimations(options, newOptions);\n    if (newOptions.$shared) {\n      // Going to shared options:\n      // After all animations are done, assign the shared options object to the element\n      // So any new updates to the shared options are observed\n      awaitAll(target.options.$animations, newOptions).then(() => {\n        target.options = newOptions;\n      }, () => {\n        // rejected, noop\n      });\n    }\n\n    return animations;\n  }\n\n  /**\n\t * @private\n\t */\n  _createAnimations(target, values) {\n    const animatedProps = this._properties;\n    const animations = [];\n    const running = target.$animations || (target.$animations = {});\n    const props = Object.keys(values);\n    const date = Date.now();\n    let i;\n\n    for (i = props.length - 1; i >= 0; --i) {\n      const prop = props[i];\n      if (prop.charAt(0) === '$') {\n        continue;\n      }\n\n      if (prop === 'options') {\n        animations.push(...this._animateOptions(target, values));\n        continue;\n      }\n      const value = values[prop];\n      let animation = running[prop];\n      const cfg = animatedProps.get(prop);\n\n      if (animation) {\n        if (cfg && animation.active()) {\n          // There is an existing active animation, let's update that\n          animation.update(cfg, value, date);\n          continue;\n        } else {\n          animation.cancel();\n        }\n      }\n      if (!cfg || !cfg.duration) {\n        // not animated, set directly to new value\n        target[prop] = value;\n        continue;\n      }\n\n      running[prop] = animation = new Animation(cfg, target, prop, value);\n      animations.push(animation);\n    }\n    return animations;\n  }\n\n\n  /**\n\t * Update `target` properties to new values, using configured animations\n\t * @param {object} target - object to update\n\t * @param {object} values - new target properties\n\t * @returns {boolean|undefined} - `true` if animations were started\n\t **/\n  update(target, values) {\n    if (this._properties.size === 0) {\n      // Nothing is animated, just apply the new values.\n      Object.assign(target, values);\n      return;\n    }\n\n    const animations = this._createAnimations(target, values);\n\n    if (animations.length) {\n      animator.add(this._chart, animations);\n      return true;\n    }\n  }\n}\n\nfunction awaitAll(animations, properties) {\n  const running = [];\n  const keys = Object.keys(properties);\n  for (let i = 0; i < keys.length; i++) {\n    const anim = animations[keys[i]];\n    if (anim && anim.active()) {\n      running.push(anim.wait());\n    }\n  }\n  // @ts-ignore\n  return Promise.all(running);\n}\n\nfunction resolveTargetOptions(target, newOptions) {\n  if (!newOptions) {\n    return;\n  }\n  let options = target.options;\n  if (!options) {\n    target.options = newOptions;\n    return;\n  }\n  if (options.$shared) {\n    // Going from shared options to distinct one:\n    // Create new options object containing the old shared values and start updating that.\n    target.options = options = Object.assign({}, options, {$shared: false, $animations: {}});\n  }\n  return options;\n}\n","import Animations from './core.animations.js';\nimport defaults from './core.defaults.js';\nimport {isArray, isFinite, isObject, valueOrDefault, resolveObjectKey, defined} from '../helpers/helpers.core.js';\nimport {listenArrayEvents, unlistenArrayEvents} from '../helpers/helpers.collection.js';\nimport {createContext, sign} from '../helpers/index.js';\n\n/**\n * @typedef { import('./core.controller.js').default } Chart\n * @typedef { import('./core.scale.js').default } Scale\n */\n\nfunction scaleClip(scale, allowedOverflow) {\n  const opts = scale && scale.options || {};\n  const reverse = opts.reverse;\n  const min = opts.min === undefined ? allowedOverflow : 0;\n  const max = opts.max === undefined ? allowedOverflow : 0;\n  return {\n    start: reverse ? max : min,\n    end: reverse ? min : max\n  };\n}\n\nfunction defaultClip(xScale, yScale, allowedOverflow) {\n  if (allowedOverflow === false) {\n    return false;\n  }\n  const x = scaleClip(xScale, allowedOverflow);\n  const y = scaleClip(yScale, allowedOverflow);\n\n  return {\n    top: y.end,\n    right: x.end,\n    bottom: y.start,\n    left: x.start\n  };\n}\n\nfunction toClip(value) {\n  let t, r, b, l;\n\n  if (isObject(value)) {\n    t = value.top;\n    r = value.right;\n    b = value.bottom;\n    l = value.left;\n  } else {\n    t = r = b = l = value;\n  }\n\n  return {\n    top: t,\n    right: r,\n    bottom: b,\n    left: l,\n    disabled: value === false\n  };\n}\n\nfunction getSortedDatasetIndices(chart, filterVisible) {\n  const keys = [];\n  const metasets = chart._getSortedDatasetMetas(filterVisible);\n  let i, ilen;\n\n  for (i = 0, ilen = metasets.length; i < ilen; ++i) {\n    keys.push(metasets[i].index);\n  }\n  return keys;\n}\n\nfunction applyStack(stack, value, dsIndex, options = {}) {\n  const keys = stack.keys;\n  const singleMode = options.mode === 'single';\n  let i, ilen, datasetIndex, otherValue;\n\n  if (value === null) {\n    return;\n  }\n\n  for (i = 0, ilen = keys.length; i < ilen; ++i) {\n    datasetIndex = +keys[i];\n    if (datasetIndex === dsIndex) {\n      if (options.all) {\n        continue;\n      }\n      break;\n    }\n    otherValue = stack.values[datasetIndex];\n    if (isFinite(otherValue) && (singleMode || (value === 0 || sign(value) === sign(otherValue)))) {\n      value += otherValue;\n    }\n  }\n  return value;\n}\n\nfunction convertObjectDataToArray(data) {\n  const keys = Object.keys(data);\n  const adata = new Array(keys.length);\n  let i, ilen, key;\n  for (i = 0, ilen = keys.length; i < ilen; ++i) {\n    key = keys[i];\n    adata[i] = {\n      x: key,\n      y: data[key]\n    };\n  }\n  return adata;\n}\n\nfunction isStacked(scale, meta) {\n  const stacked = scale && scale.options.stacked;\n  return stacked || (stacked === undefined && meta.stack !== undefined);\n}\n\nfunction getStackKey(indexScale, valueScale, meta) {\n  return `${indexScale.id}.${valueScale.id}.${meta.stack || meta.type}`;\n}\n\nfunction getUserBounds(scale) {\n  const {min, max, minDefined, maxDefined} = scale.getUserBounds();\n  return {\n    min: minDefined ? min : Number.NEGATIVE_INFINITY,\n    max: maxDefined ? max : Number.POSITIVE_INFINITY\n  };\n}\n\nfunction getOrCreateStack(stacks, stackKey, indexValue) {\n  const subStack = stacks[stackKey] || (stacks[stackKey] = {});\n  return subStack[indexValue] || (subStack[indexValue] = {});\n}\n\nfunction getLastIndexInStack(stack, vScale, positive, type) {\n  for (const meta of vScale.getMatchingVisibleMetas(type).reverse()) {\n    const value = stack[meta.index];\n    if ((positive && value > 0) || (!positive && value < 0)) {\n      return meta.index;\n    }\n  }\n\n  return null;\n}\n\nfunction updateStacks(controller, parsed) {\n  const {chart, _cachedMeta: meta} = controller;\n  const stacks = chart._stacks || (chart._stacks = {}); // map structure is {stackKey: {datasetIndex: value}}\n  const {iScale, vScale, index: datasetIndex} = meta;\n  const iAxis = iScale.axis;\n  const vAxis = vScale.axis;\n  const key = getStackKey(iScale, vScale, meta);\n  const ilen = parsed.length;\n  let stack;\n\n  for (let i = 0; i < ilen; ++i) {\n    const item = parsed[i];\n    const {[iAxis]: index, [vAxis]: value} = item;\n    const itemStacks = item._stacks || (item._stacks = {});\n    stack = itemStacks[vAxis] = getOrCreateStack(stacks, key, index);\n    stack[datasetIndex] = value;\n\n    stack._top = getLastIndexInStack(stack, vScale, true, meta.type);\n    stack._bottom = getLastIndexInStack(stack, vScale, false, meta.type);\n\n    const visualValues = stack._visualValues || (stack._visualValues = {});\n    visualValues[datasetIndex] = value;\n  }\n}\n\nfunction getFirstScaleId(chart, axis) {\n  const scales = chart.scales;\n  return Object.keys(scales).filter(key => scales[key].axis === axis).shift();\n}\n\nfunction createDatasetContext(parent, index) {\n  return createContext(parent,\n    {\n      active: false,\n      dataset: undefined,\n      datasetIndex: index,\n      index,\n      mode: 'default',\n      type: 'dataset'\n    }\n  );\n}\n\nfunction createDataContext(parent, index, element) {\n  return createContext(parent, {\n    active: false,\n    dataIndex: index,\n    parsed: undefined,\n    raw: undefined,\n    element,\n    index,\n    mode: 'default',\n    type: 'data'\n  });\n}\n\nfunction clearStacks(meta, items) {\n  // Not using meta.index here, because it might be already updated if the dataset changed location\n  const datasetIndex = meta.controller.index;\n  const axis = meta.vScale && meta.vScale.axis;\n  if (!axis) {\n    return;\n  }\n\n  items = items || meta._parsed;\n  for (const parsed of items) {\n    const stacks = parsed._stacks;\n    if (!stacks || stacks[axis] === undefined || stacks[axis][datasetIndex] === undefined) {\n      return;\n    }\n    delete stacks[axis][datasetIndex];\n    if (stacks[axis]._visualValues !== undefined && stacks[axis]._visualValues[datasetIndex] !== undefined) {\n      delete stacks[axis]._visualValues[datasetIndex];\n    }\n  }\n}\n\nconst isDirectUpdateMode = (mode) => mode === 'reset' || mode === 'none';\nconst cloneIfNotShared = (cached, shared) => shared ? cached : Object.assign({}, cached);\nconst createStack = (canStack, meta, chart) => canStack && !meta.hidden && meta._stacked\n  && {keys: getSortedDatasetIndices(chart, true), values: null};\n\nexport default class DatasetController {\n\n  /**\n   * @type {any}\n   */\n  static defaults = {};\n\n  /**\n   * Element type used to generate a meta dataset (e.g. Chart.element.LineElement).\n   */\n  static datasetElementType = null;\n\n  /**\n   * Element type used to generate a meta data (e.g. Chart.element.PointElement).\n   */\n  static dataElementType = null;\n\n  /**\n\t * @param {Chart} chart\n\t * @param {number} datasetIndex\n\t */\n  constructor(chart, datasetIndex) {\n    this.chart = chart;\n    this._ctx = chart.ctx;\n    this.index = datasetIndex;\n    this._cachedDataOpts = {};\n    this._cachedMeta = this.getMeta();\n    this._type = this._cachedMeta.type;\n    this.options = undefined;\n    /** @type {boolean | object} */\n    this._parsing = false;\n    this._data = undefined;\n    this._objectData = undefined;\n    this._sharedOptions = undefined;\n    this._drawStart = undefined;\n    this._drawCount = undefined;\n    this.enableOptionSharing = false;\n    this.supportsDecimation = false;\n    this.$context = undefined;\n    this._syncList = [];\n    this.datasetElementType = new.target.datasetElementType;\n    this.dataElementType = new.target.dataElementType;\n\n    this.initialize();\n  }\n\n  initialize() {\n    const meta = this._cachedMeta;\n    this.configure();\n    this.linkScales();\n    meta._stacked = isStacked(meta.vScale, meta);\n    this.addElements();\n\n    if (this.options.fill && !this.chart.isPluginEnabled('filler')) {\n      console.warn(\"Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options\");\n    }\n  }\n\n  updateIndex(datasetIndex) {\n    if (this.index !== datasetIndex) {\n      clearStacks(this._cachedMeta);\n    }\n    this.index = datasetIndex;\n  }\n\n  linkScales() {\n    const chart = this.chart;\n    const meta = this._cachedMeta;\n    const dataset = this.getDataset();\n\n    const chooseId = (axis, x, y, r) => axis === 'x' ? x : axis === 'r' ? r : y;\n\n    const xid = meta.xAxisID = valueOrDefault(dataset.xAxisID, getFirstScaleId(chart, 'x'));\n    const yid = meta.yAxisID = valueOrDefault(dataset.yAxisID, getFirstScaleId(chart, 'y'));\n    const rid = meta.rAxisID = valueOrDefault(dataset.rAxisID, getFirstScaleId(chart, 'r'));\n    const indexAxis = meta.indexAxis;\n    const iid = meta.iAxisID = chooseId(indexAxis, xid, yid, rid);\n    const vid = meta.vAxisID = chooseId(indexAxis, yid, xid, rid);\n    meta.xScale = this.getScaleForId(xid);\n    meta.yScale = this.getScaleForId(yid);\n    meta.rScale = this.getScaleForId(rid);\n    meta.iScale = this.getScaleForId(iid);\n    meta.vScale = this.getScaleForId(vid);\n  }\n\n  getDataset() {\n    return this.chart.data.datasets[this.index];\n  }\n\n  getMeta() {\n    return this.chart.getDatasetMeta(this.index);\n  }\n\n  /**\n\t * @param {string} scaleID\n\t * @return {Scale}\n\t */\n  getScaleForId(scaleID) {\n    return this.chart.scales[scaleID];\n  }\n\n  /**\n\t * @private\n\t */\n  _getOtherScale(scale) {\n    const meta = this._cachedMeta;\n    return scale === meta.iScale\n      ? meta.vScale\n      : meta.iScale;\n  }\n\n  reset() {\n    this._update('reset');\n  }\n\n  /**\n\t * @private\n\t */\n  _destroy() {\n    const meta = this._cachedMeta;\n    if (this._data) {\n      unlistenArrayEvents(this._data, this);\n    }\n    if (meta._stacked) {\n      clearStacks(meta);\n    }\n  }\n\n  /**\n\t * @private\n\t */\n  _dataCheck() {\n    const dataset = this.getDataset();\n    const data = dataset.data || (dataset.data = []);\n    const _data = this._data;\n\n    // In order to correctly handle data addition/deletion animation (and thus simulate\n    // real-time charts), we need to monitor these data modifications and synchronize\n    // the internal metadata accordingly.\n\n    if (isObject(data)) {\n      this._data = convertObjectDataToArray(data);\n    } else if (_data !== data) {\n      if (_data) {\n        // This case happens when the user replaced the data array instance.\n        unlistenArrayEvents(_data, this);\n        // Discard old parsed data and stacks\n        const meta = this._cachedMeta;\n        clearStacks(meta);\n        meta._parsed = [];\n      }\n      if (data && Object.isExtensible(data)) {\n        listenArrayEvents(data, this);\n      }\n      this._syncList = [];\n      this._data = data;\n    }\n  }\n\n  addElements() {\n    const meta = this._cachedMeta;\n\n    this._dataCheck();\n\n    if (this.datasetElementType) {\n      meta.dataset = new this.datasetElementType();\n    }\n  }\n\n  buildOrUpdateElements(resetNewElements) {\n    const meta = this._cachedMeta;\n    const dataset = this.getDataset();\n    let stackChanged = false;\n\n    this._dataCheck();\n\n    // make sure cached _stacked status is current\n    const oldStacked = meta._stacked;\n    meta._stacked = isStacked(meta.vScale, meta);\n\n    // detect change in stack option\n    if (meta.stack !== dataset.stack) {\n      stackChanged = true;\n      // remove values from old stack\n      clearStacks(meta);\n      meta.stack = dataset.stack;\n    }\n\n    // Re-sync meta data in case the user replaced the data array or if we missed\n    // any updates and so make sure that we handle number of datapoints changing.\n    this._resyncElements(resetNewElements);\n\n    // if stack changed, update stack values for the whole dataset\n    if (stackChanged || oldStacked !== meta._stacked) {\n      updateStacks(this, meta._parsed);\n    }\n  }\n\n  /**\n\t * Merges user-supplied and default dataset-level options\n\t * @private\n\t */\n  configure() {\n    const config = this.chart.config;\n    const scopeKeys = config.datasetScopeKeys(this._type);\n    const scopes = config.getOptionScopes(this.getDataset(), scopeKeys, true);\n    this.options = config.createResolver(scopes, this.getContext());\n    this._parsing = this.options.parsing;\n    this._cachedDataOpts = {};\n  }\n\n  /**\n\t * @param {number} start\n\t * @param {number} count\n\t */\n  parse(start, count) {\n    const {_cachedMeta: meta, _data: data} = this;\n    const {iScale, _stacked} = meta;\n    const iAxis = iScale.axis;\n\n    let sorted = start === 0 && count === data.length ? true : meta._sorted;\n    let prev = start > 0 && meta._parsed[start - 1];\n    let i, cur, parsed;\n\n    if (this._parsing === false) {\n      meta._parsed = data;\n      meta._sorted = true;\n      parsed = data;\n    } else {\n      if (isArray(data[start])) {\n        parsed = this.parseArrayData(meta, data, start, count);\n      } else if (isObject(data[start])) {\n        parsed = this.parseObjectData(meta, data, start, count);\n      } else {\n        parsed = this.parsePrimitiveData(meta, data, start, count);\n      }\n\n      const isNotInOrderComparedToPrev = () => cur[iAxis] === null || (prev && cur[iAxis] < prev[iAxis]);\n      for (i = 0; i < count; ++i) {\n        meta._parsed[i + start] = cur = parsed[i];\n        if (sorted) {\n          if (isNotInOrderComparedToPrev()) {\n            sorted = false;\n          }\n          prev = cur;\n        }\n      }\n      meta._sorted = sorted;\n    }\n\n    if (_stacked) {\n      updateStacks(this, parsed);\n    }\n  }\n\n  /**\n\t * Parse array of primitive values\n\t * @param {object} meta - dataset meta\n\t * @param {array} data - data array. Example [1,3,4]\n\t * @param {number} start - start index\n\t * @param {number} count - number of items to parse\n\t * @returns {object} parsed item - item containing index and a parsed value\n\t * for each scale id.\n\t * Example: {xScale0: 0, yScale0: 1}\n\t * @protected\n\t */\n  parsePrimitiveData(meta, data, start, count) {\n    const {iScale, vScale} = meta;\n    const iAxis = iScale.axis;\n    const vAxis = vScale.axis;\n    const labels = iScale.getLabels();\n    const singleScale = iScale === vScale;\n    const parsed = new Array(count);\n    let i, ilen, index;\n\n    for (i = 0, ilen = count; i < ilen; ++i) {\n      index = i + start;\n      parsed[i] = {\n        [iAxis]: singleScale || iScale.parse(labels[index], index),\n        [vAxis]: vScale.parse(data[index], index)\n      };\n    }\n    return parsed;\n  }\n\n  /**\n\t * Parse array of arrays\n\t * @param {object} meta - dataset meta\n\t * @param {array} data - data array. Example [[1,2],[3,4]]\n\t * @param {number} start - start index\n\t * @param {number} count - number of items to parse\n\t * @returns {object} parsed item - item containing index and a parsed value\n\t * for each scale id.\n\t * Example: {x: 0, y: 1}\n\t * @protected\n\t */\n  parseArrayData(meta, data, start, count) {\n    const {xScale, yScale} = meta;\n    const parsed = new Array(count);\n    let i, ilen, index, item;\n\n    for (i = 0, ilen = count; i < ilen; ++i) {\n      index = i + start;\n      item = data[index];\n      parsed[i] = {\n        x: xScale.parse(item[0], index),\n        y: yScale.parse(item[1], index)\n      };\n    }\n    return parsed;\n  }\n\n  /**\n\t * Parse array of objects\n\t * @param {object} meta - dataset meta\n\t * @param {array} data - data array. Example [{x:1, y:5}, {x:2, y:10}]\n\t * @param {number} start - start index\n\t * @param {number} count - number of items to parse\n\t * @returns {object} parsed item - item containing index and a parsed value\n\t * for each scale id. _custom is optional\n\t * Example: {xScale0: 0, yScale0: 1, _custom: {r: 10, foo: 'bar'}}\n\t * @protected\n\t */\n  parseObjectData(meta, data, start, count) {\n    const {xScale, yScale} = meta;\n    const {xAxisKey = 'x', yAxisKey = 'y'} = this._parsing;\n    const parsed = new Array(count);\n    let i, ilen, index, item;\n\n    for (i = 0, ilen = count; i < ilen; ++i) {\n      index = i + start;\n      item = data[index];\n      parsed[i] = {\n        x: xScale.parse(resolveObjectKey(item, xAxisKey), index),\n        y: yScale.parse(resolveObjectKey(item, yAxisKey), index)\n      };\n    }\n    return parsed;\n  }\n\n  /**\n\t * @protected\n\t */\n  getParsed(index) {\n    return this._cachedMeta._parsed[index];\n  }\n\n  /**\n\t * @protected\n\t */\n  getDataElement(index) {\n    return this._cachedMeta.data[index];\n  }\n\n  /**\n\t * @protected\n\t */\n  applyStack(scale, parsed, mode) {\n    const chart = this.chart;\n    const meta = this._cachedMeta;\n    const value = parsed[scale.axis];\n    const stack = {\n      keys: getSortedDatasetIndices(chart, true),\n      values: parsed._stacks[scale.axis]._visualValues\n    };\n    return applyStack(stack, value, meta.index, {mode});\n  }\n\n  /**\n\t * @protected\n\t */\n  updateRangeFromParsed(range, scale, parsed, stack) {\n    const parsedValue = parsed[scale.axis];\n    let value = parsedValue === null ? NaN : parsedValue;\n    const values = stack && parsed._stacks[scale.axis];\n    if (stack && values) {\n      stack.values = values;\n      value = applyStack(stack, parsedValue, this._cachedMeta.index);\n    }\n    range.min = Math.min(range.min, value);\n    range.max = Math.max(range.max, value);\n  }\n\n  /**\n\t * @protected\n\t */\n  getMinMax(scale, canStack) {\n    const meta = this._cachedMeta;\n    const _parsed = meta._parsed;\n    const sorted = meta._sorted && scale === meta.iScale;\n    const ilen = _parsed.length;\n    const otherScale = this._getOtherScale(scale);\n    const stack = createStack(canStack, meta, this.chart);\n    const range = {min: Number.POSITIVE_INFINITY, max: Number.NEGATIVE_INFINITY};\n    const {min: otherMin, max: otherMax} = getUserBounds(otherScale);\n    let i, parsed;\n\n    function _skip() {\n      parsed = _parsed[i];\n      const otherValue = parsed[otherScale.axis];\n      return !isFinite(parsed[scale.axis]) || otherMin > otherValue || otherMax < otherValue;\n    }\n\n    for (i = 0; i < ilen; ++i) {\n      if (_skip()) {\n        continue;\n      }\n      this.updateRangeFromParsed(range, scale, parsed, stack);\n      if (sorted) {\n        // if the data is sorted, we don't need to check further from this end of array\n        break;\n      }\n    }\n    if (sorted) {\n      // in the sorted case, find first non-skipped value from other end of array\n      for (i = ilen - 1; i >= 0; --i) {\n        if (_skip()) {\n          continue;\n        }\n        this.updateRangeFromParsed(range, scale, parsed, stack);\n        break;\n      }\n    }\n    return range;\n  }\n\n  getAllParsedValues(scale) {\n    const parsed = this._cachedMeta._parsed;\n    const values = [];\n    let i, ilen, value;\n\n    for (i = 0, ilen = parsed.length; i < ilen; ++i) {\n      value = parsed[i][scale.axis];\n      if (isFinite(value)) {\n        values.push(value);\n      }\n    }\n    return values;\n  }\n\n  /**\n\t * @return {number|boolean}\n\t * @protected\n\t */\n  getMaxOverflow() {\n    return false;\n  }\n\n  /**\n\t * @protected\n\t */\n  getLabelAndValue(index) {\n    const meta = this._cachedMeta;\n    const iScale = meta.iScale;\n    const vScale = meta.vScale;\n    const parsed = this.getParsed(index);\n    return {\n      label: iScale ? '' + iScale.getLabelForValue(parsed[iScale.axis]) : '',\n      value: vScale ? '' + vScale.getLabelForValue(parsed[vScale.axis]) : ''\n    };\n  }\n\n  /**\n\t * @private\n\t */\n  _update(mode) {\n    const meta = this._cachedMeta;\n    this.update(mode || 'default');\n    meta._clip = toClip(valueOrDefault(this.options.clip, defaultClip(meta.xScale, meta.yScale, this.getMaxOverflow())));\n  }\n\n  /**\n\t * @param {string} mode\n\t */\n  update(mode) {} // eslint-disable-line no-unused-vars\n\n  draw() {\n    const ctx = this._ctx;\n    const chart = this.chart;\n    const meta = this._cachedMeta;\n    const elements = meta.data || [];\n    const area = chart.chartArea;\n    const active = [];\n    const start = this._drawStart || 0;\n    const count = this._drawCount || (elements.length - start);\n    const drawActiveElementsOnTop = this.options.drawActiveElementsOnTop;\n    let i;\n\n    if (meta.dataset) {\n      meta.dataset.draw(ctx, area, start, count);\n    }\n\n    for (i = start; i < start + count; ++i) {\n      const element = elements[i];\n      if (element.hidden) {\n        continue;\n      }\n      if (element.active && drawActiveElementsOnTop) {\n        active.push(element);\n      } else {\n        element.draw(ctx, area);\n      }\n    }\n\n    for (i = 0; i < active.length; ++i) {\n      active[i].draw(ctx, area);\n    }\n  }\n\n  /**\n\t * Returns a set of predefined style properties that should be used to represent the dataset\n\t * or the data if the index is specified\n\t * @param {number} index - data index\n\t * @param {boolean} [active] - true if hover\n\t * @return {object} style object\n\t */\n  getStyle(index, active) {\n    const mode = active ? 'active' : 'default';\n    return index === undefined && this._cachedMeta.dataset\n      ? this.resolveDatasetElementOptions(mode)\n      : this.resolveDataElementOptions(index || 0, mode);\n  }\n\n  /**\n\t * @protected\n\t */\n  getContext(index, active, mode) {\n    const dataset = this.getDataset();\n    let context;\n    if (index >= 0 && index < this._cachedMeta.data.length) {\n      const element = this._cachedMeta.data[index];\n      context = element.$context ||\n        (element.$context = createDataContext(this.getContext(), index, element));\n      context.parsed = this.getParsed(index);\n      context.raw = dataset.data[index];\n      context.index = context.dataIndex = index;\n    } else {\n      context = this.$context ||\n        (this.$context = createDatasetContext(this.chart.getContext(), this.index));\n      context.dataset = dataset;\n      context.index = context.datasetIndex = this.index;\n    }\n\n    context.active = !!active;\n    context.mode = mode;\n    return context;\n  }\n\n  /**\n\t * @param {string} [mode]\n\t * @protected\n\t */\n  resolveDatasetElementOptions(mode) {\n    return this._resolveElementOptions(this.datasetElementType.id, mode);\n  }\n\n  /**\n\t * @param {number} index\n\t * @param {string} [mode]\n\t * @protected\n\t */\n  resolveDataElementOptions(index, mode) {\n    return this._resolveElementOptions(this.dataElementType.id, mode, index);\n  }\n\n  /**\n\t * @private\n\t */\n  _resolveElementOptions(elementType, mode = 'default', index) {\n    const active = mode === 'active';\n    const cache = this._cachedDataOpts;\n    const cacheKey = elementType + '-' + mode;\n    const cached = cache[cacheKey];\n    const sharing = this.enableOptionSharing && defined(index);\n    if (cached) {\n      return cloneIfNotShared(cached, sharing);\n    }\n    const config = this.chart.config;\n    const scopeKeys = config.datasetElementScopeKeys(this._type, elementType);\n    const prefixes = active ? [`${elementType}Hover`, 'hover', elementType, ''] : [elementType, ''];\n    const scopes = config.getOptionScopes(this.getDataset(), scopeKeys);\n    const names = Object.keys(defaults.elements[elementType]);\n    // context is provided as a function, and is called only if needed,\n    // so we don't create a context for each element if not needed.\n    const context = () => this.getContext(index, active, mode);\n    const values = config.resolveNamedOptions(scopes, names, context, prefixes);\n\n    if (values.$shared) {\n      // `$shared` indicates this set of options can be shared between multiple elements.\n      // Sharing is used to reduce number of properties to change during animation.\n      values.$shared = sharing;\n\n      // We cache options by `mode`, which can be 'active' for example. This enables us\n      // to have the 'active' element options and 'default' options to switch between\n      // when interacting.\n      cache[cacheKey] = Object.freeze(cloneIfNotShared(values, sharing));\n    }\n\n    return values;\n  }\n\n\n  /**\n\t * @private\n\t */\n  _resolveAnimations(index, transition, active) {\n    const chart = this.chart;\n    const cache = this._cachedDataOpts;\n    const cacheKey = `animation-${transition}`;\n    const cached = cache[cacheKey];\n    if (cached) {\n      return cached;\n    }\n    let options;\n    if (chart.options.animation !== false) {\n      const config = this.chart.config;\n      const scopeKeys = config.datasetAnimationScopeKeys(this._type, transition);\n      const scopes = config.getOptionScopes(this.getDataset(), scopeKeys);\n      options = config.createResolver(scopes, this.getContext(index, active, transition));\n    }\n    const animations = new Animations(chart, options && options.animations);\n    if (options && options._cacheable) {\n      cache[cacheKey] = Object.freeze(animations);\n    }\n    return animations;\n  }\n\n  /**\n\t * Utility for getting the options object shared between elements\n\t * @protected\n\t */\n  getSharedOptions(options) {\n    if (!options.$shared) {\n      return;\n    }\n    return this._sharedOptions || (this._sharedOptions = Object.assign({}, options));\n  }\n\n  /**\n\t * Utility for determining if `options` should be included in the updated properties\n\t * @protected\n\t */\n  includeOptions(mode, sharedOptions) {\n    return !sharedOptions || isDirectUpdateMode(mode) || this.chart._animationsDisabled;\n  }\n\n  /**\n   * @todo v4, rename to getSharedOptions and remove excess functions\n   */\n  _getSharedOptions(start, mode) {\n    const firstOpts = this.resolveDataElementOptions(start, mode);\n    const previouslySharedOptions = this._sharedOptions;\n    const sharedOptions = this.getSharedOptions(firstOpts);\n    const includeOptions = this.includeOptions(mode, sharedOptions) || (sharedOptions !== previouslySharedOptions);\n    this.updateSharedOptions(sharedOptions, mode, firstOpts);\n    return {sharedOptions, includeOptions};\n  }\n\n  /**\n\t * Utility for updating an element with new properties, using animations when appropriate.\n\t * @protected\n\t */\n  updateElement(element, index, properties, mode) {\n    if (isDirectUpdateMode(mode)) {\n      Object.assign(element, properties);\n    } else {\n      this._resolveAnimations(index, mode).update(element, properties);\n    }\n  }\n\n  /**\n\t * Utility to animate the shared options, that are potentially affecting multiple elements.\n\t * @protected\n\t */\n  updateSharedOptions(sharedOptions, mode, newOptions) {\n    if (sharedOptions && !isDirectUpdateMode(mode)) {\n      this._resolveAnimations(undefined, mode).update(sharedOptions, newOptions);\n    }\n  }\n\n  /**\n\t * @private\n\t */\n  _setStyle(element, index, mode, active) {\n    element.active = active;\n    const options = this.getStyle(index, active);\n    this._resolveAnimations(index, mode, active).update(element, {\n      // When going from active to inactive, we need to update to the shared options.\n      // This way the once hovered element will end up with the same original shared options instance, after animation.\n      options: (!active && this.getSharedOptions(options)) || options\n    });\n  }\n\n  removeHoverStyle(element, datasetIndex, index) {\n    this._setStyle(element, index, 'active', false);\n  }\n\n  setHoverStyle(element, datasetIndex, index) {\n    this._setStyle(element, index, 'active', true);\n  }\n\n  /**\n\t * @private\n\t */\n  _removeDatasetHoverStyle() {\n    const element = this._cachedMeta.dataset;\n\n    if (element) {\n      this._setStyle(element, undefined, 'active', false);\n    }\n  }\n\n  /**\n\t * @private\n\t */\n  _setDatasetHoverStyle() {\n    const element = this._cachedMeta.dataset;\n\n    if (element) {\n      this._setStyle(element, undefined, 'active', true);\n    }\n  }\n\n  /**\n\t * @private\n\t */\n  _resyncElements(resetNewElements) {\n    const data = this._data;\n    const elements = this._cachedMeta.data;\n\n    // Apply changes detected through array listeners\n    for (const [method, arg1, arg2] of this._syncList) {\n      this[method](arg1, arg2);\n    }\n    this._syncList = [];\n\n    const numMeta = elements.length;\n    const numData = data.length;\n    const count = Math.min(numData, numMeta);\n\n    if (count) {\n      // TODO: It is not optimal to always parse the old data\n      // This is done because we are not detecting direct assignments:\n      // chart.data.datasets[0].data[5] = 10;\n      // chart.data.datasets[0].data[5].y = 10;\n      this.parse(0, count);\n    }\n\n    if (numData > numMeta) {\n      this._insertElements(numMeta, numData - numMeta, resetNewElements);\n    } else if (numData < numMeta) {\n      this._removeElements(numData, numMeta - numData);\n    }\n  }\n\n  /**\n\t * @private\n\t */\n  _insertElements(start, count, resetNewElements = true) {\n    const meta = this._cachedMeta;\n    const data = meta.data;\n    const end = start + count;\n    let i;\n\n    const move = (arr) => {\n      arr.length += count;\n      for (i = arr.length - 1; i >= end; i--) {\n        arr[i] = arr[i - count];\n      }\n    };\n    move(data);\n\n    for (i = start; i < end; ++i) {\n      data[i] = new this.dataElementType();\n    }\n\n    if (this._parsing) {\n      move(meta._parsed);\n    }\n    this.parse(start, count);\n\n    if (resetNewElements) {\n      this.updateElements(data, start, count, 'reset');\n    }\n  }\n\n  updateElements(element, start, count, mode) {} // eslint-disable-line no-unused-vars\n\n  /**\n\t * @private\n\t */\n  _removeElements(start, count) {\n    const meta = this._cachedMeta;\n    if (this._parsing) {\n      const removed = meta._parsed.splice(start, count);\n      if (meta._stacked) {\n        clearStacks(meta, removed);\n      }\n    }\n    meta.data.splice(start, count);\n  }\n\n  /**\n\t * @private\n   */\n  _sync(args) {\n    if (this._parsing) {\n      this._syncList.push(args);\n    } else {\n      const [method, arg1, arg2] = args;\n      this[method](arg1, arg2);\n    }\n    this.chart._dataChanges.push([this.index, ...args]);\n  }\n\n  _onDataPush() {\n    const count = arguments.length;\n    this._sync(['_insertElements', this.getDataset().data.length - count, count]);\n  }\n\n  _onDataPop() {\n    this._sync(['_removeElements', this._cachedMeta.data.length - 1, 1]);\n  }\n\n  _onDataShift() {\n    this._sync(['_removeElements', 0, 1]);\n  }\n\n  _onDataSplice(start, count) {\n    if (count) {\n      this._sync(['_removeElements', start, count]);\n    }\n    const newCount = arguments.length - 2;\n    if (newCount) {\n      this._sync(['_insertElements', start, newCount]);\n    }\n  }\n\n  _onDataUnshift() {\n    this._sync(['_insertElements', 0, arguments.length]);\n  }\n}\n","import DatasetController from '../core/core.datasetController.js';\nimport {\n  _arrayUnique, isArray, isNullOrUndef,\n  valueOrDefault, resolveObjectKey, sign, defined\n} from '../helpers/index.js';\n\nfunction getAllScaleValues(scale, type) {\n  if (!scale._cache.$bar) {\n    const visibleMetas = scale.getMatchingVisibleMetas(type);\n    let values = [];\n\n    for (let i = 0, ilen = visibleMetas.length; i < ilen; i++) {\n      values = values.concat(visibleMetas[i].controller.getAllParsedValues(scale));\n    }\n    scale._cache.$bar = _arrayUnique(values.sort((a, b) => a - b));\n  }\n  return scale._cache.$bar;\n}\n\n/**\n * Computes the \"optimal\" sample size to maintain bars equally sized while preventing overlap.\n * @private\n */\nfunction computeMinSampleSize(meta) {\n  const scale = meta.iScale;\n  const values = getAllScaleValues(scale, meta.type);\n  let min = scale._length;\n  let i, ilen, curr, prev;\n  const updateMinAndPrev = () => {\n    if (curr === 32767 || curr === -32768) {\n      // Ignore truncated pixels\n      return;\n    }\n    if (defined(prev)) {\n      // curr - prev === 0 is ignored\n      min = Math.min(min, Math.abs(curr - prev) || min);\n    }\n    prev = curr;\n  };\n\n  for (i = 0, ilen = values.length; i < ilen; ++i) {\n    curr = scale.getPixelForValue(values[i]);\n    updateMinAndPrev();\n  }\n\n  prev = undefined;\n  for (i = 0, ilen = scale.ticks.length; i < ilen; ++i) {\n    curr = scale.getPixelForTick(i);\n    updateMinAndPrev();\n  }\n\n  return min;\n}\n\n/**\n * Computes an \"ideal\" category based on the absolute bar thickness or, if undefined or null,\n * uses the smallest interval (see computeMinSampleSize) that prevents bar overlapping. This\n * mode currently always generates bars equally sized (until we introduce scriptable options?).\n * @private\n */\nfunction computeFitCategoryTraits(index, ruler, options, stackCount) {\n  const thickness = options.barThickness;\n  let size, ratio;\n\n  if (isNullOrUndef(thickness)) {\n    size = ruler.min * options.categoryPercentage;\n    ratio = options.barPercentage;\n  } else {\n    // When bar thickness is enforced, category and bar percentages are ignored.\n    // Note(SB): we could add support for relative bar thickness (e.g. barThickness: '50%')\n    // and deprecate barPercentage since this value is ignored when thickness is absolute.\n    size = thickness * stackCount;\n    ratio = 1;\n  }\n\n  return {\n    chunk: size / stackCount,\n    ratio,\n    start: ruler.pixels[index] - (size / 2)\n  };\n}\n\n/**\n * Computes an \"optimal\" category that globally arranges bars side by side (no gap when\n * percentage options are 1), based on the previous and following categories. This mode\n * generates bars with different widths when data are not evenly spaced.\n * @private\n */\nfunction computeFlexCategoryTraits(index, ruler, options, stackCount) {\n  const pixels = ruler.pixels;\n  const curr = pixels[index];\n  let prev = index > 0 ? pixels[index - 1] : null;\n  let next = index < pixels.length - 1 ? pixels[index + 1] : null;\n  const percent = options.categoryPercentage;\n\n  if (prev === null) {\n    // first data: its size is double based on the next point or,\n    // if it's also the last data, we use the scale size.\n    prev = curr - (next === null ? ruler.end - ruler.start : next - curr);\n  }\n\n  if (next === null) {\n    // last data: its size is also double based on the previous point.\n    next = curr + curr - prev;\n  }\n\n  const start = curr - (curr - Math.min(prev, next)) / 2 * percent;\n  const size = Math.abs(next - prev) / 2 * percent;\n\n  return {\n    chunk: size / stackCount,\n    ratio: options.barPercentage,\n    start\n  };\n}\n\nfunction parseFloatBar(entry, item, vScale, i) {\n  const startValue = vScale.parse(entry[0], i);\n  const endValue = vScale.parse(entry[1], i);\n  const min = Math.min(startValue, endValue);\n  const max = Math.max(startValue, endValue);\n  let barStart = min;\n  let barEnd = max;\n\n  if (Math.abs(min) > Math.abs(max)) {\n    barStart = max;\n    barEnd = min;\n  }\n\n  // Store `barEnd` (furthest away from origin) as parsed value,\n  // to make stacking straight forward\n  item[vScale.axis] = barEnd;\n\n  item._custom = {\n    barStart,\n    barEnd,\n    start: startValue,\n    end: endValue,\n    min,\n    max\n  };\n}\n\nfunction parseValue(entry, item, vScale, i) {\n  if (isArray(entry)) {\n    parseFloatBar(entry, item, vScale, i);\n  } else {\n    item[vScale.axis] = vScale.parse(entry, i);\n  }\n  return item;\n}\n\nfunction parseArrayOrPrimitive(meta, data, start, count) {\n  const iScale = meta.iScale;\n  const vScale = meta.vScale;\n  const labels = iScale.getLabels();\n  const singleScale = iScale === vScale;\n  const parsed = [];\n  let i, ilen, item, entry;\n\n  for (i = start, ilen = start + count; i < ilen; ++i) {\n    entry = data[i];\n    item = {};\n    item[iScale.axis] = singleScale || iScale.parse(labels[i], i);\n    parsed.push(parseValue(entry, item, vScale, i));\n  }\n  return parsed;\n}\n\nfunction isFloatBar(custom) {\n  return custom && custom.barStart !== undefined && custom.barEnd !== undefined;\n}\n\nfunction barSign(size, vScale, actualBase) {\n  if (size !== 0) {\n    return sign(size);\n  }\n  return (vScale.isHorizontal() ? 1 : -1) * (vScale.min >= actualBase ? 1 : -1);\n}\n\nfunction borderProps(properties) {\n  let reverse, start, end, top, bottom;\n  if (properties.horizontal) {\n    reverse = properties.base > properties.x;\n    start = 'left';\n    end = 'right';\n  } else {\n    reverse = properties.base < properties.y;\n    start = 'bottom';\n    end = 'top';\n  }\n  if (reverse) {\n    top = 'end';\n    bottom = 'start';\n  } else {\n    top = 'start';\n    bottom = 'end';\n  }\n  return {start, end, reverse, top, bottom};\n}\n\nfunction setBorderSkipped(properties, options, stack, index) {\n  let edge = options.borderSkipped;\n  const res = {};\n\n  if (!edge) {\n    properties.borderSkipped = res;\n    return;\n  }\n\n  if (edge === true) {\n    properties.borderSkipped = {top: true, right: true, bottom: true, left: true};\n    return;\n  }\n\n  const {start, end, reverse, top, bottom} = borderProps(properties);\n\n  if (edge === 'middle' && stack) {\n    properties.enableBorderRadius = true;\n    if ((stack._top || 0) === index) {\n      edge = top;\n    } else if ((stack._bottom || 0) === index) {\n      edge = bottom;\n    } else {\n      res[parseEdge(bottom, start, end, reverse)] = true;\n      edge = top;\n    }\n  }\n\n  res[parseEdge(edge, start, end, reverse)] = true;\n  properties.borderSkipped = res;\n}\n\nfunction parseEdge(edge, a, b, reverse) {\n  if (reverse) {\n    edge = swap(edge, a, b);\n    edge = startEnd(edge, b, a);\n  } else {\n    edge = startEnd(edge, a, b);\n  }\n  return edge;\n}\n\nfunction swap(orig, v1, v2) {\n  return orig === v1 ? v2 : orig === v2 ? v1 : orig;\n}\n\nfunction startEnd(v, start, end) {\n  return v === 'start' ? start : v === 'end' ? end : v;\n}\n\nfunction setInflateAmount(properties, {inflateAmount}, ratio) {\n  properties.inflateAmount = inflateAmount === 'auto'\n    ? ratio === 1 ? 0.33 : 0\n    : inflateAmount;\n}\n\nexport default class BarController extends DatasetController {\n\n  static id = 'bar';\n\n  /**\n   * @type {any}\n   */\n  static defaults = {\n    datasetElementType: false,\n    dataElementType: 'bar',\n\n    categoryPercentage: 0.8,\n    barPercentage: 0.9,\n    grouped: true,\n\n    animations: {\n      numbers: {\n        type: 'number',\n        properties: ['x', 'y', 'base', 'width', 'height']\n      }\n    }\n  };\n\n  /**\n   * @type {any}\n   */\n  static overrides = {\n    scales: {\n      _index_: {\n        type: 'category',\n        offset: true,\n        grid: {\n          offset: true\n        }\n      },\n      _value_: {\n        type: 'linear',\n        beginAtZero: true,\n      }\n    }\n  };\n\n\n  /**\n\t * Overriding primitive data parsing since we support mixed primitive/array\n\t * data for float bars\n\t * @protected\n\t */\n  parsePrimitiveData(meta, data, start, count) {\n    return parseArrayOrPrimitive(meta, data, start, count);\n  }\n\n  /**\n\t * Overriding array data parsing since we support mixed primitive/array\n\t * data for float bars\n\t * @protected\n\t */\n  parseArrayData(meta, data, start, count) {\n    return parseArrayOrPrimitive(meta, data, start, count);\n  }\n\n  /**\n\t * Overriding object data parsing since we support mixed primitive/array\n\t * value-scale data for float bars\n\t * @protected\n\t */\n  parseObjectData(meta, data, start, count) {\n    const {iScale, vScale} = meta;\n    const {xAxisKey = 'x', yAxisKey = 'y'} = this._parsing;\n    const iAxisKey = iScale.axis === 'x' ? xAxisKey : yAxisKey;\n    const vAxisKey = vScale.axis === 'x' ? xAxisKey : yAxisKey;\n    const parsed = [];\n    let i, ilen, item, obj;\n    for (i = start, ilen = start + count; i < ilen; ++i) {\n      obj = data[i];\n      item = {};\n      item[iScale.axis] = iScale.parse(resolveObjectKey(obj, iAxisKey), i);\n      parsed.push(parseValue(resolveObjectKey(obj, vAxisKey), item, vScale, i));\n    }\n    return parsed;\n  }\n\n  /**\n\t * @protected\n\t */\n  updateRangeFromParsed(range, scale, parsed, stack) {\n    super.updateRangeFromParsed(range, scale, parsed, stack);\n    const custom = parsed._custom;\n    if (custom && scale === this._cachedMeta.vScale) {\n      // float bar: only one end of the bar is considered by `super`\n      range.min = Math.min(range.min, custom.min);\n      range.max = Math.max(range.max, custom.max);\n    }\n  }\n\n  /**\n\t * @return {number|boolean}\n\t * @protected\n\t */\n  getMaxOverflow() {\n    return 0;\n  }\n\n  /**\n\t * @protected\n\t */\n  getLabelAndValue(index) {\n    const meta = this._cachedMeta;\n    const {iScale, vScale} = meta;\n    const parsed = this.getParsed(index);\n    const custom = parsed._custom;\n    const value = isFloatBar(custom)\n      ? '[' + custom.start + ', ' + custom.end + ']'\n      : '' + vScale.getLabelForValue(parsed[vScale.axis]);\n\n    return {\n      label: '' + iScale.getLabelForValue(parsed[iScale.axis]),\n      value\n    };\n  }\n\n  initialize() {\n    this.enableOptionSharing = true;\n\n    super.initialize();\n\n    const meta = this._cachedMeta;\n    meta.stack = this.getDataset().stack;\n  }\n\n  update(mode) {\n    const meta = this._cachedMeta;\n    this.updateElements(meta.data, 0, meta.data.length, mode);\n  }\n\n  updateElements(bars, start, count, mode) {\n    const reset = mode === 'reset';\n    const {index, _cachedMeta: {vScale}} = this;\n    const base = vScale.getBasePixel();\n    const horizontal = vScale.isHorizontal();\n    const ruler = this._getRuler();\n    const {sharedOptions, includeOptions} = this._getSharedOptions(start, mode);\n\n    for (let i = start; i < start + count; i++) {\n      const parsed = this.getParsed(i);\n      const vpixels = reset || isNullOrUndef(parsed[vScale.axis]) ? {base, head: base} : this._calculateBarValuePixels(i);\n      const ipixels = this._calculateBarIndexPixels(i, ruler);\n      const stack = (parsed._stacks || {})[vScale.axis];\n\n      const properties = {\n        horizontal,\n        base: vpixels.base,\n        enableBorderRadius: !stack || isFloatBar(parsed._custom) || (index === stack._top || index === stack._bottom),\n        x: horizontal ? vpixels.head : ipixels.center,\n        y: horizontal ? ipixels.center : vpixels.head,\n        height: horizontal ? ipixels.size : Math.abs(vpixels.size),\n        width: horizontal ? Math.abs(vpixels.size) : ipixels.size\n      };\n\n      if (includeOptions) {\n        properties.options = sharedOptions || this.resolveDataElementOptions(i, bars[i].active ? 'active' : mode);\n      }\n      const options = properties.options || bars[i].options;\n      setBorderSkipped(properties, options, stack, index);\n      setInflateAmount(properties, options, ruler.ratio);\n      this.updateElement(bars[i], i, properties, mode);\n    }\n  }\n\n  /**\n\t * Returns the stacks based on groups and bar visibility.\n\t * @param {number} [last] - The dataset index\n\t * @param {number} [dataIndex] - The data index of the ruler\n\t * @returns {string[]} The list of stack IDs\n\t * @private\n\t */\n  _getStacks(last, dataIndex) {\n    const {iScale} = this._cachedMeta;\n    const metasets = iScale.getMatchingVisibleMetas(this._type)\n      .filter(meta => meta.controller.options.grouped);\n    const stacked = iScale.options.stacked;\n    const stacks = [];\n\n    const skipNull = (meta) => {\n      const parsed = meta.controller.getParsed(dataIndex);\n      const val = parsed && parsed[meta.vScale.axis];\n\n      if (isNullOrUndef(val) || isNaN(val)) {\n        return true;\n      }\n    };\n\n    for (const meta of metasets) {\n      if (dataIndex !== undefined && skipNull(meta)) {\n        continue;\n      }\n\n      // stacked   | meta.stack\n      //           | found | not found | undefined\n      // false     |   x   |     x     |     x\n      // true      |       |     x     |\n      // undefined |       |     x     |     x\n      if (stacked === false || stacks.indexOf(meta.stack) === -1 ||\n\t\t\t\t(stacked === undefined && meta.stack === undefined)) {\n        stacks.push(meta.stack);\n      }\n      if (meta.index === last) {\n        break;\n      }\n    }\n\n    // No stacks? that means there is no visible data. Let's still initialize an `undefined`\n    // stack where possible invisible bars will be located.\n    // https://github.com/chartjs/Chart.js/issues/6368\n    if (!stacks.length) {\n      stacks.push(undefined);\n    }\n\n    return stacks;\n  }\n\n  /**\n\t * Returns the effective number of stacks based on groups and bar visibility.\n\t * @private\n\t */\n  _getStackCount(index) {\n    return this._getStacks(undefined, index).length;\n  }\n\n  /**\n\t * Returns the stack index for the given dataset based on groups and bar visibility.\n\t * @param {number} [datasetIndex] - The dataset index\n\t * @param {string} [name] - The stack name to find\n   * @param {number} [dataIndex]\n\t * @returns {number} The stack index\n\t * @private\n\t */\n  _getStackIndex(datasetIndex, name, dataIndex) {\n    const stacks = this._getStacks(datasetIndex, dataIndex);\n    const index = (name !== undefined)\n      ? stacks.indexOf(name)\n      : -1; // indexOf returns -1 if element is not present\n\n    return (index === -1)\n      ? stacks.length - 1\n      : index;\n  }\n\n  /**\n\t * @private\n\t */\n  _getRuler() {\n    const opts = this.options;\n    const meta = this._cachedMeta;\n    const iScale = meta.iScale;\n    const pixels = [];\n    let i, ilen;\n\n    for (i = 0, ilen = meta.data.length; i < ilen; ++i) {\n      pixels.push(iScale.getPixelForValue(this.getParsed(i)[iScale.axis], i));\n    }\n\n    const barThickness = opts.barThickness;\n    const min = barThickness || computeMinSampleSize(meta);\n\n    return {\n      min,\n      pixels,\n      start: iScale._startPixel,\n      end: iScale._endPixel,\n      stackCount: this._getStackCount(),\n      scale: iScale,\n      grouped: opts.grouped,\n      // bar thickness ratio used for non-grouped bars\n      ratio: barThickness ? 1 : opts.categoryPercentage * opts.barPercentage\n    };\n  }\n\n  /**\n\t * Note: pixel values are not clamped to the scale area.\n\t * @private\n\t */\n  _calculateBarValuePixels(index) {\n    const {_cachedMeta: {vScale, _stacked, index: datasetIndex}, options: {base: baseValue, minBarLength}} = this;\n    const actualBase = baseValue || 0;\n    const parsed = this.getParsed(index);\n    const custom = parsed._custom;\n    const floating = isFloatBar(custom);\n    let value = parsed[vScale.axis];\n    let start = 0;\n    let length = _stacked ? this.applyStack(vScale, parsed, _stacked) : value;\n    let head, size;\n\n    if (length !== value) {\n      start = length - value;\n      length = value;\n    }\n\n    if (floating) {\n      value = custom.barStart;\n      length = custom.barEnd - custom.barStart;\n      // bars crossing origin are not stacked\n      if (value !== 0 && sign(value) !== sign(custom.barEnd)) {\n        start = 0;\n      }\n      start += value;\n    }\n\n    const startValue = !isNullOrUndef(baseValue) && !floating ? baseValue : start;\n    let base = vScale.getPixelForValue(startValue);\n\n    if (this.chart.getDataVisibility(index)) {\n      head = vScale.getPixelForValue(start + length);\n    } else {\n      // When not visible, no height\n      head = base;\n    }\n\n    size = head - base;\n\n    if (Math.abs(size) < minBarLength) {\n      size = barSign(size, vScale, actualBase) * minBarLength;\n      if (value === actualBase) {\n        base -= size / 2;\n      }\n      const startPixel = vScale.getPixelForDecimal(0);\n      const endPixel = vScale.getPixelForDecimal(1);\n      const min = Math.min(startPixel, endPixel);\n      const max = Math.max(startPixel, endPixel);\n      base = Math.max(Math.min(base, max), min);\n      head = base + size;\n\n      if (_stacked && !floating) {\n        // visual data coordinates after applying minBarLength\n        parsed._stacks[vScale.axis]._visualValues[datasetIndex] = vScale.getValueForPixel(head) - vScale.getValueForPixel(base);\n      }\n    }\n\n    if (base === vScale.getPixelForValue(actualBase)) {\n      const halfGrid = sign(size) * vScale.getLineWidthForValue(actualBase) / 2;\n      base += halfGrid;\n      size -= halfGrid;\n    }\n\n    return {\n      size,\n      base,\n      head,\n      center: head + size / 2\n    };\n  }\n\n  /**\n\t * @private\n\t */\n  _calculateBarIndexPixels(index, ruler) {\n    const scale = ruler.scale;\n    const options = this.options;\n    const skipNull = options.skipNull;\n    const maxBarThickness = valueOrDefault(options.maxBarThickness, Infinity);\n    let center, size;\n    if (ruler.grouped) {\n      const stackCount = skipNull ? this._getStackCount(index) : ruler.stackCount;\n      const range = options.barThickness === 'flex'\n        ? computeFlexCategoryTraits(index, ruler, options, stackCount)\n        : computeFitCategoryTraits(index, ruler, options, stackCount);\n\n      const stackIndex = this._getStackIndex(this.index, this._cachedMeta.stack, skipNull ? index : undefined);\n      center = range.start + (range.chunk * stackIndex) + (range.chunk / 2);\n      size = Math.min(maxBarThickness, range.chunk * range.ratio);\n    } else {\n      // For non-grouped bar charts, exact pixel values are used\n      center = scale.getPixelForValue(this.getParsed(index)[scale.axis], index);\n      size = Math.min(maxBarThickness, ruler.min * ruler.ratio);\n    }\n\n    return {\n      base: center - size / 2,\n      head: center + size / 2,\n      center,\n      size\n    };\n  }\n\n  draw() {\n    const meta = this._cachedMeta;\n    const vScale = meta.vScale;\n    const rects = meta.data;\n    const ilen = rects.length;\n    let i = 0;\n\n    for (; i < ilen; ++i) {\n      if (this.getParsed(i)[vScale.axis] !== null) {\n        rects[i].draw(this._ctx);\n      }\n    }\n  }\n\n}\n","import DatasetController from '../core/core.datasetController.js';\nimport {valueOrDefault} from '../helpers/helpers.core.js';\n\nexport default class BubbleController extends DatasetController {\n\n  static id = 'bubble';\n\n  /**\n   * @type {any}\n   */\n  static defaults = {\n    datasetElementType: false,\n    dataElementType: 'point',\n\n    animations: {\n      numbers: {\n        type: 'number',\n        properties: ['x', 'y', 'borderWidth', 'radius']\n      }\n    }\n  };\n\n  /**\n   * @type {any}\n   */\n  static overrides = {\n    scales: {\n      x: {\n        type: 'linear'\n      },\n      y: {\n        type: 'linear'\n      }\n    }\n  };\n\n  initialize() {\n    this.enableOptionSharing = true;\n    super.initialize();\n  }\n\n  /**\n\t * Parse array of primitive values\n\t * @protected\n\t */\n  parsePrimitiveData(meta, data, start, count) {\n    const parsed = super.parsePrimitiveData(meta, data, start, count);\n    for (let i = 0; i < parsed.length; i++) {\n      parsed[i]._custom = this.resolveDataElementOptions(i + start).radius;\n    }\n    return parsed;\n  }\n\n  /**\n\t * Parse array of arrays\n\t * @protected\n\t */\n  parseArrayData(meta, data, start, count) {\n    const parsed = super.parseArrayData(meta, data, start, count);\n    for (let i = 0; i < parsed.length; i++) {\n      const item = data[start + i];\n      parsed[i]._custom = valueOrDefault(item[2], this.resolveDataElementOptions(i + start).radius);\n    }\n    return parsed;\n  }\n\n  /**\n\t * Parse array of objects\n\t * @protected\n\t */\n  parseObjectData(meta, data, start, count) {\n    const parsed = super.parseObjectData(meta, data, start, count);\n    for (let i = 0; i < parsed.length; i++) {\n      const item = data[start + i];\n      parsed[i]._custom = valueOrDefault(item && item.r && +item.r, this.resolveDataElementOptions(i + start).radius);\n    }\n    return parsed;\n  }\n\n  /**\n\t * @protected\n\t */\n  getMaxOverflow() {\n    const data = this._cachedMeta.data;\n\n    let max = 0;\n    for (let i = data.length - 1; i >= 0; --i) {\n      max = Math.max(max, data[i].size(this.resolveDataElementOptions(i)) / 2);\n    }\n    return max > 0 && max;\n  }\n\n  /**\n\t * @protected\n\t */\n  getLabelAndValue(index) {\n    const meta = this._cachedMeta;\n    const labels = this.chart.data.labels || [];\n    const {xScale, yScale} = meta;\n    const parsed = this.getParsed(index);\n    const x = xScale.getLabelForValue(parsed.x);\n    const y = yScale.getLabelForValue(parsed.y);\n    const r = parsed._custom;\n\n    return {\n      label: labels[index] || '',\n      value: '(' + x + ', ' + y + (r ? ', ' + r : '') + ')'\n    };\n  }\n\n  update(mode) {\n    const points = this._cachedMeta.data;\n\n    // Update Points\n    this.updateElements(points, 0, points.length, mode);\n  }\n\n  updateElements(points, start, count, mode) {\n    const reset = mode === 'reset';\n    const {iScale, vScale} = this._cachedMeta;\n    const {sharedOptions, includeOptions} = this._getSharedOptions(start, mode);\n    const iAxis = iScale.axis;\n    const vAxis = vScale.axis;\n\n    for (let i = start; i < start + count; i++) {\n      const point = points[i];\n      const parsed = !reset && this.getParsed(i);\n      const properties = {};\n      const iPixel = properties[iAxis] = reset ? iScale.getPixelForDecimal(0.5) : iScale.getPixelForValue(parsed[iAxis]);\n      const vPixel = properties[vAxis] = reset ? vScale.getBasePixel() : vScale.getPixelForValue(parsed[vAxis]);\n\n      properties.skip = isNaN(iPixel) || isNaN(vPixel);\n\n      if (includeOptions) {\n        properties.options = sharedOptions || this.resolveDataElementOptions(i, point.active ? 'active' : mode);\n\n        if (reset) {\n          properties.options.radius = 0;\n        }\n      }\n\n      this.updateElement(point, i, properties, mode);\n    }\n  }\n\n  /**\n\t * @param {number} index\n\t * @param {string} [mode]\n\t * @protected\n\t */\n  resolveDataElementOptions(index, mode) {\n    const parsed = this.getParsed(index);\n    let values = super.resolveDataElementOptions(index, mode);\n\n    // In case values were cached (and thus frozen), we need to clone the values\n    if (values.$shared) {\n      values = Object.assign({}, values, {$shared: false});\n    }\n\n    // Custom radius resolution\n    const radius = values.radius;\n    if (mode !== 'active') {\n      values.radius = 0;\n    }\n    values.radius += valueOrDefault(parsed && parsed._custom, radius);\n\n    return values;\n  }\n}\n","import DatasetController from '../core/core.datasetController.js';\nimport {isObject, resolveObjectKey, toPercentage, toDimension, valueOrDefault} from '../helpers/helpers.core.js';\nimport {formatNumber} from '../helpers/helpers.intl.js';\nimport {toRadians, PI, TAU, HALF_PI, _angleBetween} from '../helpers/helpers.math.js';\n\n/**\n * @typedef { import('../core/core.controller.js').default } Chart\n */\n\nfunction getRatioAndOffset(rotation, circumference, cutout) {\n  let ratioX = 1;\n  let ratioY = 1;\n  let offsetX = 0;\n  let offsetY = 0;\n  // If the chart's circumference isn't a full circle, calculate size as a ratio of the width/height of the arc\n  if (circumference < TAU) {\n    const startAngle = rotation;\n    const endAngle = startAngle + circumference;\n    const startX = Math.cos(startAngle);\n    const startY = Math.sin(startAngle);\n    const endX = Math.cos(endAngle);\n    const endY = Math.sin(endAngle);\n    const calcMax = (angle, a, b) => _angleBetween(angle, startAngle, endAngle, true) ? 1 : Math.max(a, a * cutout, b, b * cutout);\n    const calcMin = (angle, a, b) => _angleBetween(angle, startAngle, endAngle, true) ? -1 : Math.min(a, a * cutout, b, b * cutout);\n    const maxX = calcMax(0, startX, endX);\n    const maxY = calcMax(HALF_PI, startY, endY);\n    const minX = calcMin(PI, startX, endX);\n    const minY = calcMin(PI + HALF_PI, startY, endY);\n    ratioX = (maxX - minX) / 2;\n    ratioY = (maxY - minY) / 2;\n    offsetX = -(maxX + minX) / 2;\n    offsetY = -(maxY + minY) / 2;\n  }\n  return {ratioX, ratioY, offsetX, offsetY};\n}\n\nexport default class DoughnutController extends DatasetController {\n\n  static id = 'doughnut';\n\n  /**\n   * @type {any}\n   */\n  static defaults = {\n    datasetElementType: false,\n    dataElementType: 'arc',\n    animation: {\n      // Boolean - Whether we animate the rotation of the Doughnut\n      animateRotate: true,\n      // Boolean - Whether we animate scaling the Doughnut from the centre\n      animateScale: false\n    },\n    animations: {\n      numbers: {\n        type: 'number',\n        properties: ['circumference', 'endAngle', 'innerRadius', 'outerRadius', 'startAngle', 'x', 'y', 'offset', 'borderWidth', 'spacing']\n      },\n    },\n    // The percentage of the chart that we cut out of the middle.\n    cutout: '50%',\n\n    // The rotation of the chart, where the first data arc begins.\n    rotation: 0,\n\n    // The total circumference of the chart.\n    circumference: 360,\n\n    // The outer radius of the chart\n    radius: '100%',\n\n    // Spacing between arcs\n    spacing: 0,\n\n    indexAxis: 'r',\n  };\n\n  static descriptors = {\n    _scriptable: (name) => name !== 'spacing',\n    _indexable: (name) => name !== 'spacing' && !name.startsWith('borderDash') && !name.startsWith('hoverBorderDash'),\n  };\n\n  /**\n   * @type {any}\n   */\n  static overrides = {\n    aspectRatio: 1,\n\n    // Need to override these to give a nice default\n    plugins: {\n      legend: {\n        labels: {\n          generateLabels(chart) {\n            const data = chart.data;\n            if (data.labels.length && data.datasets.length) {\n              const {labels: {pointStyle, color}} = chart.legend.options;\n\n              return data.labels.map((label, i) => {\n                const meta = chart.getDatasetMeta(0);\n                const style = meta.controller.getStyle(i);\n\n                return {\n                  text: label,\n                  fillStyle: style.backgroundColor,\n                  strokeStyle: style.borderColor,\n                  fontColor: color,\n                  lineWidth: style.borderWidth,\n                  pointStyle: pointStyle,\n                  hidden: !chart.getDataVisibility(i),\n\n                  // Extra data used for toggling the correct item\n                  index: i\n                };\n              });\n            }\n            return [];\n          }\n        },\n\n        onClick(e, legendItem, legend) {\n          legend.chart.toggleDataVisibility(legendItem.index);\n          legend.chart.update();\n        }\n      }\n    }\n  };\n\n  constructor(chart, datasetIndex) {\n    super(chart, datasetIndex);\n\n    this.enableOptionSharing = true;\n    this.innerRadius = undefined;\n    this.outerRadius = undefined;\n    this.offsetX = undefined;\n    this.offsetY = undefined;\n  }\n\n  linkScales() {}\n\n  /**\n\t * Override data parsing, since we are not using scales\n\t */\n  parse(start, count) {\n    const data = this.getDataset().data;\n    const meta = this._cachedMeta;\n\n    if (this._parsing === false) {\n      meta._parsed = data;\n    } else {\n      let getter = (i) => +data[i];\n\n      if (isObject(data[start])) {\n        const {key = 'value'} = this._parsing;\n        getter = (i) => +resolveObjectKey(data[i], key);\n      }\n\n      let i, ilen;\n      for (i = start, ilen = start + count; i < ilen; ++i) {\n        meta._parsed[i] = getter(i);\n      }\n    }\n  }\n\n  /**\n\t * @private\n\t */\n  _getRotation() {\n    return toRadians(this.options.rotation - 90);\n  }\n\n  /**\n\t * @private\n\t */\n  _getCircumference() {\n    return toRadians(this.options.circumference);\n  }\n\n  /**\n\t * Get the maximal rotation & circumference extents\n\t * across all visible datasets.\n\t */\n  _getRotationExtents() {\n    let min = TAU;\n    let max = -TAU;\n\n    for (let i = 0; i < this.chart.data.datasets.length; ++i) {\n      if (this.chart.isDatasetVisible(i) && this.chart.getDatasetMeta(i).type === this._type) {\n        const controller = this.chart.getDatasetMeta(i).controller;\n        const rotation = controller._getRotation();\n        const circumference = controller._getCircumference();\n\n        min = Math.min(min, rotation);\n        max = Math.max(max, rotation + circumference);\n      }\n    }\n\n    return {\n      rotation: min,\n      circumference: max - min,\n    };\n  }\n\n  /**\n\t * @param {string} mode\n\t */\n  update(mode) {\n    const chart = this.chart;\n    const {chartArea} = chart;\n    const meta = this._cachedMeta;\n    const arcs = meta.data;\n    const spacing = this.getMaxBorderWidth() + this.getMaxOffset(arcs) + this.options.spacing;\n    const maxSize = Math.max((Math.min(chartArea.width, chartArea.height) - spacing) / 2, 0);\n    const cutout = Math.min(toPercentage(this.options.cutout, maxSize), 1);\n    const chartWeight = this._getRingWeight(this.index);\n\n    // Compute the maximal rotation & circumference limits.\n    // If we only consider our dataset, this can cause problems when two datasets\n    // are both less than a circle with different rotations (starting angles)\n    const {circumference, rotation} = this._getRotationExtents();\n    const {ratioX, ratioY, offsetX, offsetY} = getRatioAndOffset(rotation, circumference, cutout);\n    const maxWidth = (chartArea.width - spacing) / ratioX;\n    const maxHeight = (chartArea.height - spacing) / ratioY;\n    const maxRadius = Math.max(Math.min(maxWidth, maxHeight) / 2, 0);\n    const outerRadius = toDimension(this.options.radius, maxRadius);\n    const innerRadius = Math.max(outerRadius * cutout, 0);\n    const radiusLength = (outerRadius - innerRadius) / this._getVisibleDatasetWeightTotal();\n    this.offsetX = offsetX * outerRadius;\n    this.offsetY = offsetY * outerRadius;\n\n    meta.total = this.calculateTotal();\n\n    this.outerRadius = outerRadius - radiusLength * this._getRingWeightOffset(this.index);\n    this.innerRadius = Math.max(this.outerRadius - radiusLength * chartWeight, 0);\n\n    this.updateElements(arcs, 0, arcs.length, mode);\n  }\n\n  /**\n   * @private\n   */\n  _circumference(i, reset) {\n    const opts = this.options;\n    const meta = this._cachedMeta;\n    const circumference = this._getCircumference();\n    if ((reset && opts.animation.animateRotate) || !this.chart.getDataVisibility(i) || meta._parsed[i] === null || meta.data[i].hidden) {\n      return 0;\n    }\n    return this.calculateCircumference(meta._parsed[i] * circumference / TAU);\n  }\n\n  updateElements(arcs, start, count, mode) {\n    const reset = mode === 'reset';\n    const chart = this.chart;\n    const chartArea = chart.chartArea;\n    const opts = chart.options;\n    const animationOpts = opts.animation;\n    const centerX = (chartArea.left + chartArea.right) / 2;\n    const centerY = (chartArea.top + chartArea.bottom) / 2;\n    const animateScale = reset && animationOpts.animateScale;\n    const innerRadius = animateScale ? 0 : this.innerRadius;\n    const outerRadius = animateScale ? 0 : this.outerRadius;\n    const {sharedOptions, includeOptions} = this._getSharedOptions(start, mode);\n    let startAngle = this._getRotation();\n    let i;\n\n    for (i = 0; i < start; ++i) {\n      startAngle += this._circumference(i, reset);\n    }\n\n    for (i = start; i < start + count; ++i) {\n      const circumference = this._circumference(i, reset);\n      const arc = arcs[i];\n      const properties = {\n        x: centerX + this.offsetX,\n        y: centerY + this.offsetY,\n        startAngle,\n        endAngle: startAngle + circumference,\n        circumference,\n        outerRadius,\n        innerRadius\n      };\n      if (includeOptions) {\n        properties.options = sharedOptions || this.resolveDataElementOptions(i, arc.active ? 'active' : mode);\n      }\n      startAngle += circumference;\n\n      this.updateElement(arc, i, properties, mode);\n    }\n  }\n\n  calculateTotal() {\n    const meta = this._cachedMeta;\n    const metaData = meta.data;\n    let total = 0;\n    let i;\n\n    for (i = 0; i < metaData.length; i++) {\n      const value = meta._parsed[i];\n      if (value !== null && !isNaN(value) && this.chart.getDataVisibility(i) && !metaData[i].hidden) {\n        total += Math.abs(value);\n      }\n    }\n\n    return total;\n  }\n\n  calculateCircumference(value) {\n    const total = this._cachedMeta.total;\n    if (total > 0 && !isNaN(value)) {\n      return TAU * (Math.abs(value) / total);\n    }\n    return 0;\n  }\n\n  getLabelAndValue(index) {\n    const meta = this._cachedMeta;\n    const chart = this.chart;\n    const labels = chart.data.labels || [];\n    const value = formatNumber(meta._parsed[index], chart.options.locale);\n\n    return {\n      label: labels[index] || '',\n      value,\n    };\n  }\n\n  getMaxBorderWidth(arcs) {\n    let max = 0;\n    const chart = this.chart;\n    let i, ilen, meta, controller, options;\n\n    if (!arcs) {\n      // Find the outmost visible dataset\n      for (i = 0, ilen = chart.data.datasets.length; i < ilen; ++i) {\n        if (chart.isDatasetVisible(i)) {\n          meta = chart.getDatasetMeta(i);\n          arcs = meta.data;\n          controller = meta.controller;\n          break;\n        }\n      }\n    }\n\n    if (!arcs) {\n      return 0;\n    }\n\n    for (i = 0, ilen = arcs.length; i < ilen; ++i) {\n      options = controller.resolveDataElementOptions(i);\n      if (options.borderAlign !== 'inner') {\n        max = Math.max(max, options.borderWidth || 0, options.hoverBorderWidth || 0);\n      }\n    }\n    return max;\n  }\n\n  getMaxOffset(arcs) {\n    let max = 0;\n\n    for (let i = 0, ilen = arcs.length; i < ilen; ++i) {\n      const options = this.resolveDataElementOptions(i);\n      max = Math.max(max, options.offset || 0, options.hoverOffset || 0);\n    }\n    return max;\n  }\n\n  /**\n\t * Get radius length offset of the dataset in relation to the visible datasets weights. This allows determining the inner and outer radius correctly\n\t * @private\n\t */\n  _getRingWeightOffset(datasetIndex) {\n    let ringWeightOffset = 0;\n\n    for (let i = 0; i < datasetIndex; ++i) {\n      if (this.chart.isDatasetVisible(i)) {\n        ringWeightOffset += this._getRingWeight(i);\n      }\n    }\n\n    return ringWeightOffset;\n  }\n\n  /**\n\t * @private\n\t */\n  _getRingWeight(datasetIndex) {\n    return Math.max(valueOrDefault(this.chart.data.datasets[datasetIndex].weight, 1), 0);\n  }\n\n  /**\n\t * Returns the sum of all visible data set weights.\n\t * @private\n\t */\n  _getVisibleDatasetWeightTotal() {\n    return this._getRingWeightOffset(this.chart.data.datasets.length) || 1;\n  }\n}\n","import DatasetController from '../core/core.datasetController.js';\nimport {isNullOrUndef} from '../helpers/index.js';\nimport {isNumber} from '../helpers/helpers.math.js';\nimport {_getStartAndCountOfVisiblePoints, _scaleRangesChanged} from '../helpers/helpers.extras.js';\n\nexport default class LineController extends DatasetController {\n\n  static id = 'line';\n\n  /**\n   * @type {any}\n   */\n  static defaults = {\n    datasetElementType: 'line',\n    dataElementType: 'point',\n\n    showLine: true,\n    spanGaps: false,\n  };\n\n  /**\n   * @type {any}\n   */\n  static overrides = {\n    scales: {\n      _index_: {\n        type: 'category',\n      },\n      _value_: {\n        type: 'linear',\n      },\n    }\n  };\n\n  initialize() {\n    this.enableOptionSharing = true;\n    this.supportsDecimation = true;\n    super.initialize();\n  }\n\n  update(mode) {\n    const meta = this._cachedMeta;\n    const {dataset: line, data: points = [], _dataset} = meta;\n    // @ts-ignore\n    const animationsDisabled = this.chart._animationsDisabled;\n    let {start, count} = _getStartAndCountOfVisiblePoints(meta, points, animationsDisabled);\n\n    this._drawStart = start;\n    this._drawCount = count;\n\n    if (_scaleRangesChanged(meta)) {\n      start = 0;\n      count = points.length;\n    }\n\n    // Update Line\n    line._chart = this.chart;\n    line._datasetIndex = this.index;\n    line._decimated = !!_dataset._decimated;\n    line.points = points;\n\n    const options = this.resolveDatasetElementOptions(mode);\n    if (!this.options.showLine) {\n      options.borderWidth = 0;\n    }\n    options.segment = this.options.segment;\n    this.updateElement(line, undefined, {\n      animated: !animationsDisabled,\n      options\n    }, mode);\n\n    // Update Points\n    this.updateElements(points, start, count, mode);\n  }\n\n  updateElements(points, start, count, mode) {\n    const reset = mode === 'reset';\n    const {iScale, vScale, _stacked, _dataset} = this._cachedMeta;\n    const {sharedOptions, includeOptions} = this._getSharedOptions(start, mode);\n    const iAxis = iScale.axis;\n    const vAxis = vScale.axis;\n    const {spanGaps, segment} = this.options;\n    const maxGapLength = isNumber(spanGaps) ? spanGaps : Number.POSITIVE_INFINITY;\n    const directUpdate = this.chart._animationsDisabled || reset || mode === 'none';\n    const end = start + count;\n    const pointsCount = points.length;\n    let prevParsed = start > 0 && this.getParsed(start - 1);\n\n    for (let i = 0; i < pointsCount; ++i) {\n      const point = points[i];\n      const properties = directUpdate ? point : {};\n\n      if (i < start || i >= end) {\n        properties.skip = true;\n        continue;\n      }\n\n      const parsed = this.getParsed(i);\n      const nullData = isNullOrUndef(parsed[vAxis]);\n      const iPixel = properties[iAxis] = iScale.getPixelForValue(parsed[iAxis], i);\n      const vPixel = properties[vAxis] = reset || nullData ? vScale.getBasePixel() : vScale.getPixelForValue(_stacked ? this.applyStack(vScale, parsed, _stacked) : parsed[vAxis], i);\n\n      properties.skip = isNaN(iPixel) || isNaN(vPixel) || nullData;\n      properties.stop = i > 0 && (Math.abs(parsed[iAxis] - prevParsed[iAxis])) > maxGapLength;\n      if (segment) {\n        properties.parsed = parsed;\n        properties.raw = _dataset.data[i];\n      }\n\n      if (includeOptions) {\n        properties.options = sharedOptions || this.resolveDataElementOptions(i, point.active ? 'active' : mode);\n      }\n\n      if (!directUpdate) {\n        this.updateElement(point, i, properties, mode);\n      }\n\n      prevParsed = parsed;\n    }\n  }\n\n  /**\n\t * @protected\n\t */\n  getMaxOverflow() {\n    const meta = this._cachedMeta;\n    const dataset = meta.dataset;\n    const border = dataset.options && dataset.options.borderWidth || 0;\n    const data = meta.data || [];\n    if (!data.length) {\n      return border;\n    }\n    const firstPoint = data[0].size(this.resolveDataElementOptions(0));\n    const lastPoint = data[data.length - 1].size(this.resolveDataElementOptions(data.length - 1));\n    return Math.max(border, firstPoint, lastPoint) / 2;\n  }\n\n  draw() {\n    const meta = this._cachedMeta;\n    meta.dataset.updateControlPoints(this.chart.chartArea, meta.iScale.axis);\n    super.draw();\n  }\n}\n","import DatasetController from '../core/core.datasetController.js';\nimport {toRadians, PI, formatNumber, _parseObjectDataRadialScale} from '../helpers/index.js';\n\nexport default class PolarAreaController extends DatasetController {\n\n  static id = 'polarArea';\n\n  /**\n   * @type {any}\n   */\n  static defaults = {\n    dataElementType: 'arc',\n    animation: {\n      animateRotate: true,\n      animateScale: true\n    },\n    animations: {\n      numbers: {\n        type: 'number',\n        properties: ['x', 'y', 'startAngle', 'endAngle', 'innerRadius', 'outerRadius']\n      },\n    },\n    indexAxis: 'r',\n    startAngle: 0,\n  };\n\n  /**\n   * @type {any}\n   */\n  static overrides = {\n    aspectRatio: 1,\n\n    plugins: {\n      legend: {\n        labels: {\n          generateLabels(chart) {\n            const data = chart.data;\n            if (data.labels.length && data.datasets.length) {\n              const {labels: {pointStyle, color}} = chart.legend.options;\n\n              return data.labels.map((label, i) => {\n                const meta = chart.getDatasetMeta(0);\n                const style = meta.controller.getStyle(i);\n\n                return {\n                  text: label,\n                  fillStyle: style.backgroundColor,\n                  strokeStyle: style.borderColor,\n                  fontColor: color,\n                  lineWidth: style.borderWidth,\n                  pointStyle: pointStyle,\n                  hidden: !chart.getDataVisibility(i),\n\n                  // Extra data used for toggling the correct item\n                  index: i\n                };\n              });\n            }\n            return [];\n          }\n        },\n\n        onClick(e, legendItem, legend) {\n          legend.chart.toggleDataVisibility(legendItem.index);\n          legend.chart.update();\n        }\n      }\n    },\n\n    scales: {\n      r: {\n        type: 'radialLinear',\n        angleLines: {\n          display: false\n        },\n        beginAtZero: true,\n        grid: {\n          circular: true\n        },\n        pointLabels: {\n          display: false\n        },\n        startAngle: 0\n      }\n    }\n  };\n\n  constructor(chart, datasetIndex) {\n    super(chart, datasetIndex);\n\n    this.innerRadius = undefined;\n    this.outerRadius = undefined;\n  }\n\n  getLabelAndValue(index) {\n    const meta = this._cachedMeta;\n    const chart = this.chart;\n    const labels = chart.data.labels || [];\n    const value = formatNumber(meta._parsed[index].r, chart.options.locale);\n\n    return {\n      label: labels[index] || '',\n      value,\n    };\n  }\n\n  parseObjectData(meta, data, start, count) {\n    return _parseObjectDataRadialScale.bind(this)(meta, data, start, count);\n  }\n\n  update(mode) {\n    const arcs = this._cachedMeta.data;\n\n    this._updateRadius();\n    this.updateElements(arcs, 0, arcs.length, mode);\n  }\n\n  /**\n   * @protected\n   */\n  getMinMax() {\n    const meta = this._cachedMeta;\n    const range = {min: Number.POSITIVE_INFINITY, max: Number.NEGATIVE_INFINITY};\n\n    meta.data.forEach((element, index) => {\n      const parsed = this.getParsed(index).r;\n\n      if (!isNaN(parsed) && this.chart.getDataVisibility(index)) {\n        if (parsed < range.min) {\n          range.min = parsed;\n        }\n\n        if (parsed > range.max) {\n          range.max = parsed;\n        }\n      }\n    });\n\n    return range;\n  }\n\n  /**\n\t * @private\n\t */\n  _updateRadius() {\n    const chart = this.chart;\n    const chartArea = chart.chartArea;\n    const opts = chart.options;\n    const minSize = Math.min(chartArea.right - chartArea.left, chartArea.bottom - chartArea.top);\n\n    const outerRadius = Math.max(minSize / 2, 0);\n    const innerRadius = Math.max(opts.cutoutPercentage ? (outerRadius / 100) * (opts.cutoutPercentage) : 1, 0);\n    const radiusLength = (outerRadius - innerRadius) / chart.getVisibleDatasetCount();\n\n    this.outerRadius = outerRadius - (radiusLength * this.index);\n    this.innerRadius = this.outerRadius - radiusLength;\n  }\n\n  updateElements(arcs, start, count, mode) {\n    const reset = mode === 'reset';\n    const chart = this.chart;\n    const opts = chart.options;\n    const animationOpts = opts.animation;\n    const scale = this._cachedMeta.rScale;\n    const centerX = scale.xCenter;\n    const centerY = scale.yCenter;\n    const datasetStartAngle = scale.getIndexAngle(0) - 0.5 * PI;\n    let angle = datasetStartAngle;\n    let i;\n\n    const defaultAngle = 360 / this.countVisibleElements();\n\n    for (i = 0; i < start; ++i) {\n      angle += this._computeAngle(i, mode, defaultAngle);\n    }\n    for (i = start; i < start + count; i++) {\n      const arc = arcs[i];\n      let startAngle = angle;\n      let endAngle = angle + this._computeAngle(i, mode, defaultAngle);\n      let outerRadius = chart.getDataVisibility(i) ? scale.getDistanceFromCenterForValue(this.getParsed(i).r) : 0;\n      angle = endAngle;\n\n      if (reset) {\n        if (animationOpts.animateScale) {\n          outerRadius = 0;\n        }\n        if (animationOpts.animateRotate) {\n          startAngle = endAngle = datasetStartAngle;\n        }\n      }\n\n      const properties = {\n        x: centerX,\n        y: centerY,\n        innerRadius: 0,\n        outerRadius,\n        startAngle,\n        endAngle,\n        options: this.resolveDataElementOptions(i, arc.active ? 'active' : mode)\n      };\n\n      this.updateElement(arc, i, properties, mode);\n    }\n  }\n\n  countVisibleElements() {\n    const meta = this._cachedMeta;\n    let count = 0;\n\n    meta.data.forEach((element, index) => {\n      if (!isNaN(this.getParsed(index).r) && this.chart.getDataVisibility(index)) {\n        count++;\n      }\n    });\n\n    return count;\n  }\n\n  /**\n\t * @private\n\t */\n  _computeAngle(index, mode, defaultAngle) {\n    return this.chart.getDataVisibility(index)\n      ? toRadians(this.resolveDataElementOptions(index, mode).angle || defaultAngle)\n      : 0;\n  }\n}\n","import DoughnutController from './controller.doughnut.js';\n\n// Pie charts are Doughnut chart with different defaults\nexport default class PieController extends DoughnutController {\n\n  static id = 'pie';\n\n  /**\n   * @type {any}\n   */\n  static defaults = {\n    // The percentage of the chart that we cut out of the middle.\n    cutout: 0,\n\n    // The rotation of the chart, where the first data arc begins.\n    rotation: 0,\n\n    // The total circumference of the chart.\n    circumference: 360,\n\n    // The outer radius of the chart\n    radius: '100%'\n  };\n}\n","import DatasetController from '../core/core.datasetController.js';\nimport {_parseObjectDataRadialScale} from '../helpers/index.js';\n\nexport default class RadarController extends DatasetController {\n\n  static id = 'radar';\n\n  /**\n   * @type {any}\n   */\n  static defaults = {\n    datasetElementType: 'line',\n    dataElementType: 'point',\n    indexAxis: 'r',\n    showLine: true,\n    elements: {\n      line: {\n        fill: 'start'\n      }\n    },\n  };\n\n  /**\n   * @type {any}\n   */\n  static overrides = {\n    aspectRatio: 1,\n\n    scales: {\n      r: {\n        type: 'radialLinear',\n      }\n    }\n  };\n\n  /**\n\t * @protected\n\t */\n  getLabelAndValue(index) {\n    const vScale = this._cachedMeta.vScale;\n    const parsed = this.getParsed(index);\n\n    return {\n      label: vScale.getLabels()[index],\n      value: '' + vScale.getLabelForValue(parsed[vScale.axis])\n    };\n  }\n\n  parseObjectData(meta, data, start, count) {\n    return _parseObjectDataRadialScale.bind(this)(meta, data, start, count);\n  }\n\n  update(mode) {\n    const meta = this._cachedMeta;\n    const line = meta.dataset;\n    const points = meta.data || [];\n    const labels = meta.iScale.getLabels();\n\n    // Update Line\n    line.points = points;\n    // In resize mode only point locations change, so no need to set the points or options.\n    if (mode !== 'resize') {\n      const options = this.resolveDatasetElementOptions(mode);\n      if (!this.options.showLine) {\n        options.borderWidth = 0;\n      }\n\n      const properties = {\n        _loop: true,\n        _fullLoop: labels.length === points.length,\n        options\n      };\n\n      this.updateElement(line, undefined, properties, mode);\n    }\n\n    // Update Points\n    this.updateElements(points, 0, points.length, mode);\n  }\n\n  updateElements(points, start, count, mode) {\n    const scale = this._cachedMeta.rScale;\n    const reset = mode === 'reset';\n\n    for (let i = start; i < start + count; i++) {\n      const point = points[i];\n      const options = this.resolveDataElementOptions(i, point.active ? 'active' : mode);\n      const pointPosition = scale.getPointPositionForValue(i, this.getParsed(i).r);\n\n      const x = reset ? scale.xCenter : pointPosition.x;\n      const y = reset ? scale.yCenter : pointPosition.y;\n\n      const properties = {\n        x,\n        y,\n        angle: pointPosition.angle,\n        skip: isNaN(x) || isNaN(y),\n        options\n      };\n\n      this.updateElement(point, i, properties, mode);\n    }\n  }\n}\n","import DatasetController from '../core/core.datasetController.js';\nimport {isNullOrUndef} from '../helpers/index.js';\nimport {isNumber} from '../helpers/helpers.math.js';\nimport {_getStartAndCountOfVisiblePoints, _scaleRangesChanged} from '../helpers/helpers.extras.js';\n\nexport default class ScatterController extends DatasetController {\n\n  static id = 'scatter';\n\n  /**\n   * @type {any}\n   */\n  static defaults = {\n    datasetElementType: false,\n    dataElementType: 'point',\n    showLine: false,\n    fill: false\n  };\n\n  /**\n   * @type {any}\n   */\n  static overrides = {\n\n    interaction: {\n      mode: 'point'\n    },\n\n    scales: {\n      x: {\n        type: 'linear'\n      },\n      y: {\n        type: 'linear'\n      }\n    }\n  };\n\n  /**\n\t * @protected\n\t */\n  getLabelAndValue(index) {\n    const meta = this._cachedMeta;\n    const labels = this.chart.data.labels || [];\n    const {xScale, yScale} = meta;\n    const parsed = this.getParsed(index);\n    const x = xScale.getLabelForValue(parsed.x);\n    const y = yScale.getLabelForValue(parsed.y);\n\n    return {\n      label: labels[index] || '',\n      value: '(' + x + ', ' + y + ')'\n    };\n  }\n\n  update(mode) {\n    const meta = this._cachedMeta;\n    const {data: points = []} = meta;\n    // @ts-ignore\n    const animationsDisabled = this.chart._animationsDisabled;\n    let {start, count} = _getStartAndCountOfVisiblePoints(meta, points, animationsDisabled);\n\n    this._drawStart = start;\n    this._drawCount = count;\n\n    if (_scaleRangesChanged(meta)) {\n      start = 0;\n      count = points.length;\n    }\n\n    if (this.options.showLine) {\n\n      // https://github.com/chartjs/Chart.js/issues/11333\n      if (!this.datasetElementType) {\n        this.addElements();\n      }\n      const {dataset: line, _dataset} = meta;\n\n      // Update Line\n      line._chart = this.chart;\n      line._datasetIndex = this.index;\n      line._decimated = !!_dataset._decimated;\n      line.points = points;\n\n      const options = this.resolveDatasetElementOptions(mode);\n      options.segment = this.options.segment;\n      this.updateElement(line, undefined, {\n        animated: !animationsDisabled,\n        options\n      }, mode);\n    } else if (this.datasetElementType) {\n      // https://github.com/chartjs/Chart.js/issues/11333\n      delete meta.dataset;\n      this.datasetElementType = false;\n    }\n\n    // Update Points\n    this.updateElements(points, start, count, mode);\n  }\n\n  addElements() {\n    const {showLine} = this.options;\n\n    if (!this.datasetElementType && showLine) {\n      this.datasetElementType = this.chart.registry.getElement('line');\n    }\n\n    super.addElements();\n  }\n\n  updateElements(points, start, count, mode) {\n    const reset = mode === 'reset';\n    const {iScale, vScale, _stacked, _dataset} = this._cachedMeta;\n    const firstOpts = this.resolveDataElementOptions(start, mode);\n    const sharedOptions = this.getSharedOptions(firstOpts);\n    const includeOptions = this.includeOptions(mode, sharedOptions);\n    const iAxis = iScale.axis;\n    const vAxis = vScale.axis;\n    const {spanGaps, segment} = this.options;\n    const maxGapLength = isNumber(spanGaps) ? spanGaps : Number.POSITIVE_INFINITY;\n    const directUpdate = this.chart._animationsDisabled || reset || mode === 'none';\n    let prevParsed = start > 0 && this.getParsed(start - 1);\n\n    for (let i = start; i < start + count; ++i) {\n      const point = points[i];\n      const parsed = this.getParsed(i);\n      const properties = directUpdate ? point : {};\n      const nullData = isNullOrUndef(parsed[vAxis]);\n      const iPixel = properties[iAxis] = iScale.getPixelForValue(parsed[iAxis], i);\n      const vPixel = properties[vAxis] = reset || nullData ? vScale.getBasePixel() : vScale.getPixelForValue(_stacked ? this.applyStack(vScale, parsed, _stacked) : parsed[vAxis], i);\n\n      properties.skip = isNaN(iPixel) || isNaN(vPixel) || nullData;\n      properties.stop = i > 0 && (Math.abs(parsed[iAxis] - prevParsed[iAxis])) > maxGapLength;\n      if (segment) {\n        properties.parsed = parsed;\n        properties.raw = _dataset.data[i];\n      }\n\n      if (includeOptions) {\n        properties.options = sharedOptions || this.resolveDataElementOptions(i, point.active ? 'active' : mode);\n      }\n\n      if (!directUpdate) {\n        this.updateElement(point, i, properties, mode);\n      }\n\n      prevParsed = parsed;\n    }\n\n    this.updateSharedOptions(sharedOptions, mode, firstOpts);\n  }\n\n  /**\n\t * @protected\n\t */\n  getMaxOverflow() {\n    const meta = this._cachedMeta;\n    const data = meta.data || [];\n\n    if (!this.options.showLine) {\n      let max = 0;\n      for (let i = data.length - 1; i >= 0; --i) {\n        max = Math.max(max, data[i].size(this.resolveDataElementOptions(i)) / 2);\n      }\n      return max > 0 && max;\n    }\n\n    const dataset = meta.dataset;\n    const border = dataset.options && dataset.options.borderWidth || 0;\n\n    if (!data.length) {\n      return border;\n    }\n\n    const firstPoint = data[0].size(this.resolveDataElementOptions(0));\n    const lastPoint = data[data.length - 1].size(this.resolveDataElementOptions(data.length - 1));\n    return Math.max(border, firstPoint, lastPoint) / 2;\n  }\n}\n","/**\n * @namespace Chart._adapters\n * @since 2.8.0\n * @private\n */\n\nimport type {AnyObject} from '../types/basic.js';\nimport type {ChartOptions} from '../types/index.js';\n\nexport type TimeUnit = 'millisecond' | 'second' | 'minute' | 'hour' | 'day' | 'week' | 'month' | 'quarter' | 'year';\n\nexport interface DateAdapter<T extends AnyObject = AnyObject> {\n  readonly options: T;\n  /**\n   * Will called with chart options after adapter creation.\n   */\n  init(this: DateAdapter<T>, chartOptions: ChartOptions): void;\n  /**\n   * Returns a map of time formats for the supported formatting units defined\n   * in Unit as well as 'datetime' representing a detailed date/time string.\n   */\n  formats(this: DateAdapter<T>): Record<string, string>;\n  /**\n   * Parses the given `value` and return the associated timestamp.\n   * @param value - the value to parse (usually comes from the data)\n   * @param [format] - the expected data format\n   */\n  parse(this: DateAdapter<T>, value: unknown, format?: TimeUnit): number | null;\n  /**\n   * Returns the formatted date in the specified `format` for a given `timestamp`.\n   * @param timestamp - the timestamp to format\n   * @param format - the date/time token\n   */\n  format(this: DateAdapter<T>, timestamp: number, format: TimeUnit): string;\n  /**\n   * Adds the specified `amount` of `unit` to the given `timestamp`.\n   * @param timestamp - the input timestamp\n   * @param amount - the amount to add\n   * @param unit - the unit as string\n   */\n  add(this: DateAdapter<T>, timestamp: number, amount: number, unit: TimeUnit): number;\n  /**\n   * Returns the number of `unit` between the given timestamps.\n   * @param a - the input timestamp (reference)\n   * @param b - the timestamp to subtract\n   * @param unit - the unit as string\n   */\n  diff(this: DateAdapter<T>, a: number, b: number, unit: TimeUnit): number;\n  /**\n   * Returns start of `unit` for the given `timestamp`.\n   * @param timestamp - the input timestamp\n   * @param unit - the unit as string\n   * @param [weekday] - the ISO day of the week with 1 being Monday\n   * and 7 being Sunday (only needed if param *unit* is `isoWeek`).\n   */\n  startOf(this: DateAdapter<T>, timestamp: number, unit: TimeUnit | 'isoWeek', weekday?: number): number;\n  /**\n   * Returns end of `unit` for the given `timestamp`.\n   * @param timestamp - the input timestamp\n   * @param unit - the unit as string\n   */\n  endOf(this: DateAdapter<T>, timestamp: number, unit: TimeUnit | 'isoWeek'): number;\n}\n\nfunction abstract<T = void>(): T {\n  throw new Error('This method is not implemented: Check that a complete date adapter is provided.');\n}\n\n/**\n * Date adapter (current used by the time scale)\n * @namespace Chart._adapters._date\n * @memberof Chart._adapters\n * @private\n */\nclass DateAdapterBase implements DateAdapter {\n\n  /**\n   * Override default date adapter methods.\n   * Accepts type parameter to define options type.\n   * @example\n   * Chart._adapters._date.override<{myAdapterOption: string}>({\n   *   init() {\n   *     console.log(this.options.myAdapterOption);\n   *   }\n   * })\n   */\n  static override<T extends AnyObject = AnyObject>(\n    members: Partial<Omit<DateAdapter<T>, 'options'>>\n  ) {\n    Object.assign(DateAdapterBase.prototype, members);\n  }\n\n  readonly options: AnyObject;\n\n  constructor(options: AnyObject) {\n    this.options = options || {};\n  }\n\n  // eslint-disable-next-line @typescript-eslint/no-empty-function\n  init() {}\n\n  formats(): Record<string, string> {\n    return abstract();\n  }\n\n  parse(): number | null {\n    return abstract();\n  }\n\n  format(): string {\n    return abstract();\n  }\n\n  add(): number {\n    return abstract();\n  }\n\n  diff(): number {\n    return abstract();\n  }\n\n  startOf(): number {\n    return abstract();\n  }\n\n  endOf(): number {\n    return abstract();\n  }\n}\n\nexport default {\n  _date: DateAdapterBase\n};\n","import {_lookupByKey, _rlookupByKey} from '../helpers/helpers.collection.js';\nimport {getRelativePosition} from '../helpers/helpers.dom.js';\nimport {_angleBetween, getAngleFromPoint} from '../helpers/helpers.math.js';\nimport {_isPointInArea} from '../helpers/index.js';\n\n/**\n * @typedef { import('./core.controller.js').default } Chart\n * @typedef { import('../types/index.js').ChartEvent } ChartEvent\n * @typedef {{axis?: string, intersect?: boolean, includeInvisible?: boolean}} InteractionOptions\n * @typedef {{datasetIndex: number, index: number, element: import('./core.element.js').default}} InteractionItem\n * @typedef { import('../types/index.js').Point } Point\n */\n\n/**\n * Helper function to do binary search when possible\n * @param {object} metaset - the dataset meta\n * @param {string} axis - the axis mode. x|y|xy|r\n * @param {number} value - the value to find\n * @param {boolean} [intersect] - should the element intersect\n * @returns {{lo:number, hi:number}} indices to search data array between\n */\nfunction binarySearch(metaset, axis, value, intersect) {\n  const {controller, data, _sorted} = metaset;\n  const iScale = controller._cachedMeta.iScale;\n  if (iScale && axis === iScale.axis && axis !== 'r' && _sorted && data.length) {\n    const lookupMethod = iScale._reversePixels ? _rlookupByKey : _lookupByKey;\n    if (!intersect) {\n      return lookupMethod(data, axis, value);\n    } else if (controller._sharedOptions) {\n      // _sharedOptions indicates that each element has equal options -> equal proportions\n      // So we can do a ranged binary search based on the range of first element and\n      // be confident to get the full range of indices that can intersect with the value.\n      const el = data[0];\n      const range = typeof el.getRange === 'function' && el.getRange(axis);\n      if (range) {\n        const start = lookupMethod(data, axis, value - range);\n        const end = lookupMethod(data, axis, value + range);\n        return {lo: start.lo, hi: end.hi};\n      }\n    }\n  }\n  // Default to all elements, when binary search can not be used.\n  return {lo: 0, hi: data.length - 1};\n}\n\n/**\n * Helper function to select candidate elements for interaction\n * @param {Chart} chart - the chart\n * @param {string} axis - the axis mode. x|y|xy|r\n * @param {Point} position - the point to be nearest to, in relative coordinates\n * @param {function} handler - the callback to execute for each visible item\n * @param {boolean} [intersect] - consider intersecting items\n */\nfunction evaluateInteractionItems(chart, axis, position, handler, intersect) {\n  const metasets = chart.getSortedVisibleDatasetMetas();\n  const value = position[axis];\n  for (let i = 0, ilen = metasets.length; i < ilen; ++i) {\n    const {index, data} = metasets[i];\n    const {lo, hi} = binarySearch(metasets[i], axis, value, intersect);\n    for (let j = lo; j <= hi; ++j) {\n      const element = data[j];\n      if (!element.skip) {\n        handler(element, index, j);\n      }\n    }\n  }\n}\n\n/**\n * Get a distance metric function for two points based on the\n * axis mode setting\n * @param {string} axis - the axis mode. x|y|xy|r\n */\nfunction getDistanceMetricForAxis(axis) {\n  const useX = axis.indexOf('x') !== -1;\n  const useY = axis.indexOf('y') !== -1;\n\n  return function(pt1, pt2) {\n    const deltaX = useX ? Math.abs(pt1.x - pt2.x) : 0;\n    const deltaY = useY ? Math.abs(pt1.y - pt2.y) : 0;\n    return Math.sqrt(Math.pow(deltaX, 2) + Math.pow(deltaY, 2));\n  };\n}\n\n/**\n * Helper function to get the items that intersect the event position\n * @param {Chart} chart - the chart\n * @param {Point} position - the point to be nearest to, in relative coordinates\n * @param {string} axis - the axis mode. x|y|xy|r\n * @param {boolean} [useFinalPosition] - use the element's animation target instead of current position\n * @param {boolean} [includeInvisible] - include invisible points that are outside of the chart area\n * @return {InteractionItem[]} the nearest items\n */\nfunction getIntersectItems(chart, position, axis, useFinalPosition, includeInvisible) {\n  const items = [];\n\n  if (!includeInvisible && !chart.isPointInArea(position)) {\n    return items;\n  }\n\n  const evaluationFunc = function(element, datasetIndex, index) {\n    if (!includeInvisible && !_isPointInArea(element, chart.chartArea, 0)) {\n      return;\n    }\n    if (element.inRange(position.x, position.y, useFinalPosition)) {\n      items.push({element, datasetIndex, index});\n    }\n  };\n\n  evaluateInteractionItems(chart, axis, position, evaluationFunc, true);\n  return items;\n}\n\n/**\n * Helper function to get the items nearest to the event position for a radial chart\n * @param {Chart} chart - the chart to look at elements from\n * @param {Point} position - the point to be nearest to, in relative coordinates\n * @param {string} axis - the axes along which to measure distance\n * @param {boolean} [useFinalPosition] - use the element's animation target instead of current position\n * @return {InteractionItem[]} the nearest items\n */\nfunction getNearestRadialItems(chart, position, axis, useFinalPosition) {\n  let items = [];\n\n  function evaluationFunc(element, datasetIndex, index) {\n    const {startAngle, endAngle} = element.getProps(['startAngle', 'endAngle'], useFinalPosition);\n    const {angle} = getAngleFromPoint(element, {x: position.x, y: position.y});\n\n    if (_angleBetween(angle, startAngle, endAngle)) {\n      items.push({element, datasetIndex, index});\n    }\n  }\n\n  evaluateInteractionItems(chart, axis, position, evaluationFunc);\n  return items;\n}\n\n/**\n * Helper function to get the items nearest to the event position for a cartesian chart\n * @param {Chart} chart - the chart to look at elements from\n * @param {Point} position - the point to be nearest to, in relative coordinates\n * @param {string} axis - the axes along which to measure distance\n * @param {boolean} [intersect] - if true, only consider items that intersect the position\n * @param {boolean} [useFinalPosition] - use the element's animation target instead of current position\n * @param {boolean} [includeInvisible] - include invisible points that are outside of the chart area\n * @return {InteractionItem[]} the nearest items\n */\nfunction getNearestCartesianItems(chart, position, axis, intersect, useFinalPosition, includeInvisible) {\n  let items = [];\n  const distanceMetric = getDistanceMetricForAxis(axis);\n  let minDistance = Number.POSITIVE_INFINITY;\n\n  function evaluationFunc(element, datasetIndex, index) {\n    const inRange = element.inRange(position.x, position.y, useFinalPosition);\n    if (intersect && !inRange) {\n      return;\n    }\n\n    const center = element.getCenterPoint(useFinalPosition);\n    const pointInArea = !!includeInvisible || chart.isPointInArea(center);\n    if (!pointInArea && !inRange) {\n      return;\n    }\n\n    const distance = distanceMetric(position, center);\n    if (distance < minDistance) {\n      items = [{element, datasetIndex, index}];\n      minDistance = distance;\n    } else if (distance === minDistance) {\n      // Can have multiple items at the same distance in which case we sort by size\n      items.push({element, datasetIndex, index});\n    }\n  }\n\n  evaluateInteractionItems(chart, axis, position, evaluationFunc);\n  return items;\n}\n\n/**\n * Helper function to get the items nearest to the event position considering all visible items in the chart\n * @param {Chart} chart - the chart to look at elements from\n * @param {Point} position - the point to be nearest to, in relative coordinates\n * @param {string} axis - the axes along which to measure distance\n * @param {boolean} [intersect] - if true, only consider items that intersect the position\n * @param {boolean} [useFinalPosition] - use the element's animation target instead of current position\n * @param {boolean} [includeInvisible] - include invisible points that are outside of the chart area\n * @return {InteractionItem[]} the nearest items\n */\nfunction getNearestItems(chart, position, axis, intersect, useFinalPosition, includeInvisible) {\n  if (!includeInvisible && !chart.isPointInArea(position)) {\n    return [];\n  }\n\n  return axis === 'r' && !intersect\n    ? getNearestRadialItems(chart, position, axis, useFinalPosition)\n    : getNearestCartesianItems(chart, position, axis, intersect, useFinalPosition, includeInvisible);\n}\n\n/**\n * Helper function to get the items matching along the given X or Y axis\n * @param {Chart} chart - the chart to look at elements from\n * @param {Point} position - the point to be nearest to, in relative coordinates\n * @param {string} axis - the axis to match\n * @param {boolean} [intersect] - if true, only consider items that intersect the position\n * @param {boolean} [useFinalPosition] - use the element's animation target instead of current position\n * @return {InteractionItem[]} the nearest items\n */\nfunction getAxisItems(chart, position, axis, intersect, useFinalPosition) {\n  const items = [];\n  const rangeMethod = axis === 'x' ? 'inXRange' : 'inYRange';\n  let intersectsItem = false;\n\n  evaluateInteractionItems(chart, axis, position, (element, datasetIndex, index) => {\n    if (element[rangeMethod](position[axis], useFinalPosition)) {\n      items.push({element, datasetIndex, index});\n      intersectsItem = intersectsItem || element.inRange(position.x, position.y, useFinalPosition);\n    }\n  });\n\n  // If we want to trigger on an intersect and we don't have any items\n  // that intersect the position, return nothing\n  if (intersect && !intersectsItem) {\n    return [];\n  }\n  return items;\n}\n\n/**\n * Contains interaction related functions\n * @namespace Chart.Interaction\n */\nexport default {\n  // Part of the public API to facilitate developers creating their own modes\n  evaluateInteractionItems,\n\n  // Helper function for different modes\n  modes: {\n    /**\n\t\t * Returns items at the same index. If the options.intersect parameter is true, we only return items if we intersect something\n\t\t * If the options.intersect mode is false, we find the nearest item and return the items at the same index as that item\n\t\t * @function Chart.Interaction.modes.index\n\t\t * @since v2.4.0\n\t\t * @param {Chart} chart - the chart we are returning items from\n\t\t * @param {Event} e - the event we are find things at\n\t\t * @param {InteractionOptions} options - options to use\n\t\t * @param {boolean} [useFinalPosition] - use final element position (animation target)\n\t\t * @return {InteractionItem[]} - items that are found\n\t\t */\n    index(chart, e, options, useFinalPosition) {\n      const position = getRelativePosition(e, chart);\n      // Default axis for index mode is 'x' to match old behaviour\n      const axis = options.axis || 'x';\n      const includeInvisible = options.includeInvisible || false;\n      const items = options.intersect\n        ? getIntersectItems(chart, position, axis, useFinalPosition, includeInvisible)\n        : getNearestItems(chart, position, axis, false, useFinalPosition, includeInvisible);\n      const elements = [];\n\n      if (!items.length) {\n        return [];\n      }\n\n      chart.getSortedVisibleDatasetMetas().forEach((meta) => {\n        const index = items[0].index;\n        const element = meta.data[index];\n\n        // don't count items that are skipped (null data)\n        if (element && !element.skip) {\n          elements.push({element, datasetIndex: meta.index, index});\n        }\n      });\n\n      return elements;\n    },\n\n    /**\n\t\t * Returns items in the same dataset. If the options.intersect parameter is true, we only return items if we intersect something\n\t\t * If the options.intersect is false, we find the nearest item and return the items in that dataset\n\t\t * @function Chart.Interaction.modes.dataset\n\t\t * @param {Chart} chart - the chart we are returning items from\n\t\t * @param {Event} e - the event we are find things at\n\t\t * @param {InteractionOptions} options - options to use\n\t\t * @param {boolean} [useFinalPosition] - use final element position (animation target)\n\t\t * @return {InteractionItem[]} - items that are found\n\t\t */\n    dataset(chart, e, options, useFinalPosition) {\n      const position = getRelativePosition(e, chart);\n      const axis = options.axis || 'xy';\n      const includeInvisible = options.includeInvisible || false;\n      let items = options.intersect\n        ? getIntersectItems(chart, position, axis, useFinalPosition, includeInvisible) :\n        getNearestItems(chart, position, axis, false, useFinalPosition, includeInvisible);\n\n      if (items.length > 0) {\n        const datasetIndex = items[0].datasetIndex;\n        const data = chart.getDatasetMeta(datasetIndex).data;\n        items = [];\n        for (let i = 0; i < data.length; ++i) {\n          items.push({element: data[i], datasetIndex, index: i});\n        }\n      }\n\n      return items;\n    },\n\n    /**\n\t\t * Point mode returns all elements that hit test based on the event position\n\t\t * of the event\n\t\t * @function Chart.Interaction.modes.intersect\n\t\t * @param {Chart} chart - the chart we are returning items from\n\t\t * @param {Event} e - the event we are find things at\n\t\t * @param {InteractionOptions} options - options to use\n\t\t * @param {boolean} [useFinalPosition] - use final element position (animation target)\n\t\t * @return {InteractionItem[]} - items that are found\n\t\t */\n    point(chart, e, options, useFinalPosition) {\n      const position = getRelativePosition(e, chart);\n      const axis = options.axis || 'xy';\n      const includeInvisible = options.includeInvisible || false;\n      return getIntersectItems(chart, position, axis, useFinalPosition, includeInvisible);\n    },\n\n    /**\n\t\t * nearest mode returns the element closest to the point\n\t\t * @function Chart.Interaction.modes.intersect\n\t\t * @param {Chart} chart - the chart we are returning items from\n\t\t * @param {Event} e - the event we are find things at\n\t\t * @param {InteractionOptions} options - options to use\n\t\t * @param {boolean} [useFinalPosition] - use final element position (animation target)\n\t\t * @return {InteractionItem[]} - items that are found\n\t\t */\n    nearest(chart, e, options, useFinalPosition) {\n      const position = getRelativePosition(e, chart);\n      const axis = options.axis || 'xy';\n      const includeInvisible = options.includeInvisible || false;\n      return getNearestItems(chart, position, axis, options.intersect, useFinalPosition, includeInvisible);\n    },\n\n    /**\n\t\t * x mode returns the elements that hit-test at the current x coordinate\n\t\t * @function Chart.Interaction.modes.x\n\t\t * @param {Chart} chart - the chart we are returning items from\n\t\t * @param {Event} e - the event we are find things at\n\t\t * @param {InteractionOptions} options - options to use\n\t\t * @param {boolean} [useFinalPosition] - use final element position (animation target)\n\t\t * @return {InteractionItem[]} - items that are found\n\t\t */\n    x(chart, e, options, useFinalPosition) {\n      const position = getRelativePosition(e, chart);\n      return getAxisItems(chart, position, 'x', options.intersect, useFinalPosition);\n    },\n\n    /**\n\t\t * y mode returns the elements that hit-test at the current y coordinate\n\t\t * @function Chart.Interaction.modes.y\n\t\t * @param {Chart} chart - the chart we are returning items from\n\t\t * @param {Event} e - the event we are find things at\n\t\t * @param {InteractionOptions} options - options to use\n\t\t * @param {boolean} [useFinalPosition] - use final element position (animation target)\n\t\t * @return {InteractionItem[]} - items that are found\n\t\t */\n    y(chart, e, options, useFinalPosition) {\n      const position = getRelativePosition(e, chart);\n      return getAxisItems(chart, position, 'y', options.intersect, useFinalPosition);\n    }\n  }\n};\n","import {defined, each, isObject} from '../helpers/helpers.core.js';\nimport {toPadding} from '../helpers/helpers.options.js';\n\n/**\n * @typedef { import('./core.controller.js').default } Chart\n */\n\nconst STATIC_POSITIONS = ['left', 'top', 'right', 'bottom'];\n\nfunction filterByPosition(array, position) {\n  return array.filter(v => v.pos === position);\n}\n\nfunction filterDynamicPositionByAxis(array, axis) {\n  return array.filter(v => STATIC_POSITIONS.indexOf(v.pos) === -1 && v.box.axis === axis);\n}\n\nfunction sortByWeight(array, reverse) {\n  return array.sort((a, b) => {\n    const v0 = reverse ? b : a;\n    const v1 = reverse ? a : b;\n    return v0.weight === v1.weight ?\n      v0.index - v1.index :\n      v0.weight - v1.weight;\n  });\n}\n\nfunction wrapBoxes(boxes) {\n  const layoutBoxes = [];\n  let i, ilen, box, pos, stack, stackWeight;\n\n  for (i = 0, ilen = (boxes || []).length; i < ilen; ++i) {\n    box = boxes[i];\n    ({position: pos, options: {stack, stackWeight = 1}} = box);\n    layoutBoxes.push({\n      index: i,\n      box,\n      pos,\n      horizontal: box.isHorizontal(),\n      weight: box.weight,\n      stack: stack && (pos + stack),\n      stackWeight\n    });\n  }\n  return layoutBoxes;\n}\n\nfunction buildStacks(layouts) {\n  const stacks = {};\n  for (const wrap of layouts) {\n    const {stack, pos, stackWeight} = wrap;\n    if (!stack || !STATIC_POSITIONS.includes(pos)) {\n      continue;\n    }\n    const _stack = stacks[stack] || (stacks[stack] = {count: 0, placed: 0, weight: 0, size: 0});\n    _stack.count++;\n    _stack.weight += stackWeight;\n  }\n  return stacks;\n}\n\n/**\n * store dimensions used instead of available chartArea in fitBoxes\n **/\nfunction setLayoutDims(layouts, params) {\n  const stacks = buildStacks(layouts);\n  const {vBoxMaxWidth, hBoxMaxHeight} = params;\n  let i, ilen, layout;\n  for (i = 0, ilen = layouts.length; i < ilen; ++i) {\n    layout = layouts[i];\n    const {fullSize} = layout.box;\n    const stack = stacks[layout.stack];\n    const factor = stack && layout.stackWeight / stack.weight;\n    if (layout.horizontal) {\n      layout.width = factor ? factor * vBoxMaxWidth : fullSize && params.availableWidth;\n      layout.height = hBoxMaxHeight;\n    } else {\n      layout.width = vBoxMaxWidth;\n      layout.height = factor ? factor * hBoxMaxHeight : fullSize && params.availableHeight;\n    }\n  }\n  return stacks;\n}\n\nfunction buildLayoutBoxes(boxes) {\n  const layoutBoxes = wrapBoxes(boxes);\n  const fullSize = sortByWeight(layoutBoxes.filter(wrap => wrap.box.fullSize), true);\n  const left = sortByWeight(filterByPosition(layoutBoxes, 'left'), true);\n  const right = sortByWeight(filterByPosition(layoutBoxes, 'right'));\n  const top = sortByWeight(filterByPosition(layoutBoxes, 'top'), true);\n  const bottom = sortByWeight(filterByPosition(layoutBoxes, 'bottom'));\n  const centerHorizontal = filterDynamicPositionByAxis(layoutBoxes, 'x');\n  const centerVertical = filterDynamicPositionByAxis(layoutBoxes, 'y');\n\n  return {\n    fullSize,\n    leftAndTop: left.concat(top),\n    rightAndBottom: right.concat(centerVertical).concat(bottom).concat(centerHorizontal),\n    chartArea: filterByPosition(layoutBoxes, 'chartArea'),\n    vertical: left.concat(right).concat(centerVertical),\n    horizontal: top.concat(bottom).concat(centerHorizontal)\n  };\n}\n\nfunction getCombinedMax(maxPadding, chartArea, a, b) {\n  return Math.max(maxPadding[a], chartArea[a]) + Math.max(maxPadding[b], chartArea[b]);\n}\n\nfunction updateMaxPadding(maxPadding, boxPadding) {\n  maxPadding.top = Math.max(maxPadding.top, boxPadding.top);\n  maxPadding.left = Math.max(maxPadding.left, boxPadding.left);\n  maxPadding.bottom = Math.max(maxPadding.bottom, boxPadding.bottom);\n  maxPadding.right = Math.max(maxPadding.right, boxPadding.right);\n}\n\nfunction updateDims(chartArea, params, layout, stacks) {\n  const {pos, box} = layout;\n  const maxPadding = chartArea.maxPadding;\n\n  // dynamically placed boxes size is not considered\n  if (!isObject(pos)) {\n    if (layout.size) {\n      // this layout was already counted for, lets first reduce old size\n      chartArea[pos] -= layout.size;\n    }\n    const stack = stacks[layout.stack] || {size: 0, count: 1};\n    stack.size = Math.max(stack.size, layout.horizontal ? box.height : box.width);\n    layout.size = stack.size / stack.count;\n    chartArea[pos] += layout.size;\n  }\n\n  if (box.getPadding) {\n    updateMaxPadding(maxPadding, box.getPadding());\n  }\n\n  const newWidth = Math.max(0, params.outerWidth - getCombinedMax(maxPadding, chartArea, 'left', 'right'));\n  const newHeight = Math.max(0, params.outerHeight - getCombinedMax(maxPadding, chartArea, 'top', 'bottom'));\n  const widthChanged = newWidth !== chartArea.w;\n  const heightChanged = newHeight !== chartArea.h;\n  chartArea.w = newWidth;\n  chartArea.h = newHeight;\n\n  // return booleans on the changes per direction\n  return layout.horizontal\n    ? {same: widthChanged, other: heightChanged}\n    : {same: heightChanged, other: widthChanged};\n}\n\nfunction handleMaxPadding(chartArea) {\n  const maxPadding = chartArea.maxPadding;\n\n  function updatePos(pos) {\n    const change = Math.max(maxPadding[pos] - chartArea[pos], 0);\n    chartArea[pos] += change;\n    return change;\n  }\n  chartArea.y += updatePos('top');\n  chartArea.x += updatePos('left');\n  updatePos('right');\n  updatePos('bottom');\n}\n\nfunction getMargins(horizontal, chartArea) {\n  const maxPadding = chartArea.maxPadding;\n\n  function marginForPositions(positions) {\n    const margin = {left: 0, top: 0, right: 0, bottom: 0};\n    positions.forEach((pos) => {\n      margin[pos] = Math.max(chartArea[pos], maxPadding[pos]);\n    });\n    return margin;\n  }\n\n  return horizontal\n    ? marginForPositions(['left', 'right'])\n    : marginForPositions(['top', 'bottom']);\n}\n\nfunction fitBoxes(boxes, chartArea, params, stacks) {\n  const refitBoxes = [];\n  let i, ilen, layout, box, refit, changed;\n\n  for (i = 0, ilen = boxes.length, refit = 0; i < ilen; ++i) {\n    layout = boxes[i];\n    box = layout.box;\n\n    box.update(\n      layout.width || chartArea.w,\n      layout.height || chartArea.h,\n      getMargins(layout.horizontal, chartArea)\n    );\n    const {same, other} = updateDims(chartArea, params, layout, stacks);\n\n    // Dimensions changed and there were non full width boxes before this\n    // -> we have to refit those\n    refit |= same && refitBoxes.length;\n\n    // Chart area changed in the opposite direction\n    changed = changed || other;\n\n    if (!box.fullSize) { // fullSize boxes don't need to be re-fitted in any case\n      refitBoxes.push(layout);\n    }\n  }\n\n  return refit && fitBoxes(refitBoxes, chartArea, params, stacks) || changed;\n}\n\nfunction setBoxDims(box, left, top, width, height) {\n  box.top = top;\n  box.left = left;\n  box.right = left + width;\n  box.bottom = top + height;\n  box.width = width;\n  box.height = height;\n}\n\nfunction placeBoxes(boxes, chartArea, params, stacks) {\n  const userPadding = params.padding;\n  let {x, y} = chartArea;\n\n  for (const layout of boxes) {\n    const box = layout.box;\n    const stack = stacks[layout.stack] || {count: 1, placed: 0, weight: 1};\n    const weight = (layout.stackWeight / stack.weight) || 1;\n    if (layout.horizontal) {\n      const width = chartArea.w * weight;\n      const height = stack.size || box.height;\n      if (defined(stack.start)) {\n        y = stack.start;\n      }\n      if (box.fullSize) {\n        setBoxDims(box, userPadding.left, y, params.outerWidth - userPadding.right - userPadding.left, height);\n      } else {\n        setBoxDims(box, chartArea.left + stack.placed, y, width, height);\n      }\n      stack.start = y;\n      stack.placed += width;\n      y = box.bottom;\n    } else {\n      const height = chartArea.h * weight;\n      const width = stack.size || box.width;\n      if (defined(stack.start)) {\n        x = stack.start;\n      }\n      if (box.fullSize) {\n        setBoxDims(box, x, userPadding.top, width, params.outerHeight - userPadding.bottom - userPadding.top);\n      } else {\n        setBoxDims(box, x, chartArea.top + stack.placed, width, height);\n      }\n      stack.start = x;\n      stack.placed += height;\n      x = box.right;\n    }\n  }\n\n  chartArea.x = x;\n  chartArea.y = y;\n}\n\n/**\n * @interface LayoutItem\n * @typedef {object} LayoutItem\n * @prop {string} position - The position of the item in the chart layout. Possible values are\n * 'left', 'top', 'right', 'bottom', and 'chartArea'\n * @prop {number} weight - The weight used to sort the item. Higher weights are further away from the chart area\n * @prop {boolean} fullSize - if true, and the item is horizontal, then push vertical boxes down\n * @prop {function} isHorizontal - returns true if the layout item is horizontal (ie. top or bottom)\n * @prop {function} update - Takes two parameters: width and height. Returns size of item\n * @prop {function} draw - Draws the element\n * @prop {function} [getPadding] -  Returns an object with padding on the edges\n * @prop {number} width - Width of item. Must be valid after update()\n * @prop {number} height - Height of item. Must be valid after update()\n * @prop {number} left - Left edge of the item. Set by layout system and cannot be used in update\n * @prop {number} top - Top edge of the item. Set by layout system and cannot be used in update\n * @prop {number} right - Right edge of the item. Set by layout system and cannot be used in update\n * @prop {number} bottom - Bottom edge of the item. Set by layout system and cannot be used in update\n */\n\n// The layout service is very self explanatory.  It's responsible for the layout within a chart.\n// Scales, Legends and Plugins all rely on the layout service and can easily register to be placed anywhere they need\n// It is this service's responsibility of carrying out that layout.\nexport default {\n\n  /**\n\t * Register a box to a chart.\n\t * A box is simply a reference to an object that requires layout. eg. Scales, Legend, Title.\n\t * @param {Chart} chart - the chart to use\n\t * @param {LayoutItem} item - the item to add to be laid out\n\t */\n  addBox(chart, item) {\n    if (!chart.boxes) {\n      chart.boxes = [];\n    }\n\n    // initialize item with default values\n    item.fullSize = item.fullSize || false;\n    item.position = item.position || 'top';\n    item.weight = item.weight || 0;\n    // @ts-ignore\n    item._layers = item._layers || function() {\n      return [{\n        z: 0,\n        draw(chartArea) {\n          item.draw(chartArea);\n        }\n      }];\n    };\n\n    chart.boxes.push(item);\n  },\n\n  /**\n\t * Remove a layoutItem from a chart\n\t * @param {Chart} chart - the chart to remove the box from\n\t * @param {LayoutItem} layoutItem - the item to remove from the layout\n\t */\n  removeBox(chart, layoutItem) {\n    const index = chart.boxes ? chart.boxes.indexOf(layoutItem) : -1;\n    if (index !== -1) {\n      chart.boxes.splice(index, 1);\n    }\n  },\n\n  /**\n\t * Sets (or updates) options on the given `item`.\n\t * @param {Chart} chart - the chart in which the item lives (or will be added to)\n\t * @param {LayoutItem} item - the item to configure with the given options\n\t * @param {object} options - the new item options.\n\t */\n  configure(chart, item, options) {\n    item.fullSize = options.fullSize;\n    item.position = options.position;\n    item.weight = options.weight;\n  },\n\n  /**\n\t * Fits boxes of the given chart into the given size by having each box measure itself\n\t * then running a fitting algorithm\n\t * @param {Chart} chart - the chart\n\t * @param {number} width - the width to fit into\n\t * @param {number} height - the height to fit into\n   * @param {number} minPadding - minimum padding required for each side of chart area\n\t */\n  update(chart, width, height, minPadding) {\n    if (!chart) {\n      return;\n    }\n\n    const padding = toPadding(chart.options.layout.padding);\n    const availableWidth = Math.max(width - padding.width, 0);\n    const availableHeight = Math.max(height - padding.height, 0);\n    const boxes = buildLayoutBoxes(chart.boxes);\n    const verticalBoxes = boxes.vertical;\n    const horizontalBoxes = boxes.horizontal;\n\n    // Before any changes are made, notify boxes that an update is about to being\n    // This is used to clear any cached data (e.g. scale limits)\n    each(chart.boxes, box => {\n      if (typeof box.beforeLayout === 'function') {\n        box.beforeLayout();\n      }\n    });\n\n    // Essentially we now have any number of boxes on each of the 4 sides.\n    // Our canvas looks like the following.\n    // The areas L1 and L2 are the left axes. R1 is the right axis, T1 is the top axis and\n    // B1 is the bottom axis\n    // There are also 4 quadrant-like locations (left to right instead of clockwise) reserved for chart overlays\n    // These locations are single-box locations only, when trying to register a chartArea location that is already taken,\n    // an error will be thrown.\n    //\n    // |----------------------------------------------------|\n    // |                  T1 (Full Width)                   |\n    // |----------------------------------------------------|\n    // |    |    |                 T2                  |    |\n    // |    |----|-------------------------------------|----|\n    // |    |    | C1 |                           | C2 |    |\n    // |    |    |----|                           |----|    |\n    // |    |    |                                     |    |\n    // | L1 | L2 |           ChartArea (C0)            | R1 |\n    // |    |    |                                     |    |\n    // |    |    |----|                           |----|    |\n    // |    |    | C3 |                           | C4 |    |\n    // |    |----|-------------------------------------|----|\n    // |    |    |                 B1                  |    |\n    // |----------------------------------------------------|\n    // |                  B2 (Full Width)                   |\n    // |----------------------------------------------------|\n    //\n\n    const visibleVerticalBoxCount = verticalBoxes.reduce((total, wrap) =>\n      wrap.box.options && wrap.box.options.display === false ? total : total + 1, 0) || 1;\n\n    const params = Object.freeze({\n      outerWidth: width,\n      outerHeight: height,\n      padding,\n      availableWidth,\n      availableHeight,\n      vBoxMaxWidth: availableWidth / 2 / visibleVerticalBoxCount,\n      hBoxMaxHeight: availableHeight / 2\n    });\n    const maxPadding = Object.assign({}, padding);\n    updateMaxPadding(maxPadding, toPadding(minPadding));\n    const chartArea = Object.assign({\n      maxPadding,\n      w: availableWidth,\n      h: availableHeight,\n      x: padding.left,\n      y: padding.top\n    }, padding);\n\n    const stacks = setLayoutDims(verticalBoxes.concat(horizontalBoxes), params);\n\n    // First fit the fullSize boxes, to reduce probability of re-fitting.\n    fitBoxes(boxes.fullSize, chartArea, params, stacks);\n\n    // Then fit vertical boxes\n    fitBoxes(verticalBoxes, chartArea, params, stacks);\n\n    // Then fit horizontal boxes\n    if (fitBoxes(horizontalBoxes, chartArea, params, stacks)) {\n      // if the area changed, re-fit vertical boxes\n      fitBoxes(verticalBoxes, chartArea, params, stacks);\n    }\n\n    handleMaxPadding(chartArea);\n\n    // Finally place the boxes to correct coordinates\n    placeBoxes(boxes.leftAndTop, chartArea, params, stacks);\n\n    // Move to opposite side of chart\n    chartArea.x += chartArea.w;\n    chartArea.y += chartArea.h;\n\n    placeBoxes(boxes.rightAndBottom, chartArea, params, stacks);\n\n    chart.chartArea = {\n      left: chartArea.left,\n      top: chartArea.top,\n      right: chartArea.left + chartArea.w,\n      bottom: chartArea.top + chartArea.h,\n      height: chartArea.h,\n      width: chartArea.w,\n    };\n\n    // Finally update boxes in chartArea (radial scale for example)\n    each(boxes.chartArea, (layout) => {\n      const box = layout.box;\n      Object.assign(box, chart.chartArea);\n      box.update(chartArea.w, chartArea.h, {left: 0, top: 0, right: 0, bottom: 0});\n    });\n  }\n};\n","\n/**\n * @typedef { import('../core/core.controller.js').default } Chart\n */\n\n/**\n * Abstract class that allows abstracting platform dependencies away from the chart.\n */\nexport default class BasePlatform {\n  /**\n\t * Called at chart construction time, returns a context2d instance implementing\n\t * the [W3C Canvas 2D Context API standard]{@link https://www.w3.org/TR/2dcontext/}.\n\t * @param {HTMLCanvasElement} canvas - The canvas from which to acquire context (platform specific)\n\t * @param {number} [aspectRatio] - The chart options\n\t */\n  acquireContext(canvas, aspectRatio) {} // eslint-disable-line no-unused-vars\n\n  /**\n\t * Called at chart destruction time, releases any resources associated to the context\n\t * previously returned by the acquireContext() method.\n\t * @param {CanvasRenderingContext2D} context - The context2d instance\n\t * @returns {boolean} true if the method succeeded, else false\n\t */\n  releaseContext(context) { // eslint-disable-line no-unused-vars\n    return false;\n  }\n\n  /**\n\t * Registers the specified listener on the given chart.\n\t * @param {Chart} chart - Chart from which to listen for event\n\t * @param {string} type - The ({@link ChartEvent}) type to listen for\n\t * @param {function} listener - Receives a notification (an object that implements\n\t * the {@link ChartEvent} interface) when an event of the specified type occurs.\n\t */\n  addEventListener(chart, type, listener) {} // eslint-disable-line no-unused-vars\n\n  /**\n\t * Removes the specified listener previously registered with addEventListener.\n\t * @param {Chart} chart - Chart from which to remove the listener\n\t * @param {string} type - The ({@link ChartEvent}) type to remove\n\t * @param {function} listener - The listener function to remove from the event target.\n\t */\n  removeEventListener(chart, type, listener) {} // eslint-disable-line no-unused-vars\n\n  /**\n\t * @returns {number} the current devicePixelRatio of the device this platform is connected to.\n\t */\n  getDevicePixelRatio() {\n    return 1;\n  }\n\n  /**\n\t * Returns the maximum size in pixels of given canvas element.\n\t * @param {HTMLCanvasElement} element\n\t * @param {number} [width] - content width of parent element\n\t * @param {number} [height] - content height of parent element\n\t * @param {number} [aspectRatio] - aspect ratio to maintain\n\t */\n  getMaximumSize(element, width, height, aspectRatio) {\n    width = Math.max(0, width || element.width);\n    height = height || element.height;\n    return {\n      width,\n      height: Math.max(0, aspectRatio ? Math.floor(width / aspectRatio) : height)\n    };\n  }\n\n  /**\n\t * @param {HTMLCanvasElement} canvas\n\t * @returns {boolean} true if the canvas is attached to the platform, false if not.\n\t */\n  isAttached(canvas) { // eslint-disable-line no-unused-vars\n    return true;\n  }\n\n  /**\n   * Updates config with platform specific requirements\n   * @param {import('../core/core.config.js').default} config\n   */\n  updateConfig(config) { // eslint-disable-line no-unused-vars\n    // no-op\n  }\n}\n","/**\n * Platform fallback implementation (minimal).\n * @see https://github.com/chartjs/Chart.js/pull/4591#issuecomment-319575939\n */\n\nimport BasePlatform from './platform.base.js';\n\n/**\n * Platform class for charts without access to the DOM or to many element properties\n * This platform is used by default for any chart passed an OffscreenCanvas.\n * @extends BasePlatform\n */\nexport default class BasicPlatform extends BasePlatform {\n  acquireContext(item) {\n    // To prevent canvas fingerprinting, some add-ons undefine the getContext\n    // method, for example: https://github.com/kkapsner/CanvasBlocker\n    // https://github.com/chartjs/Chart.js/issues/2807\n    return item && item.getContext && item.getContext('2d') || null;\n  }\n  updateConfig(config) {\n    config.options.animation = false;\n  }\n}\n","/**\n * Chart.Platform implementation for targeting a web browser\n */\n\nimport BasePlatform from './platform.base.js';\nimport {_getParentNode, getRelativePosition, supportsEventListenerOptions, readUsedSize, getMaximumSize} from '../helpers/helpers.dom.js';\nimport {throttled} from '../helpers/helpers.extras.js';\nimport {isNullOrUndef} from '../helpers/helpers.core.js';\n\n/**\n * @typedef { import('../core/core.controller.js').default } Chart\n */\n\nconst EXPANDO_KEY = '$chartjs';\n\n/**\n * DOM event types -> Chart.js event types.\n * Note: only events with different types are mapped.\n * @see https://developer.mozilla.org/en-US/docs/Web/Events\n */\nconst EVENT_TYPES = {\n  touchstart: 'mousedown',\n  touchmove: 'mousemove',\n  touchend: 'mouseup',\n  pointerenter: 'mouseenter',\n  pointerdown: 'mousedown',\n  pointermove: 'mousemove',\n  pointerup: 'mouseup',\n  pointerleave: 'mouseout',\n  pointerout: 'mouseout'\n};\n\nconst isNullOrEmpty = value => value === null || value === '';\n/**\n * Initializes the canvas style and render size without modifying the canvas display size,\n * since responsiveness is handled by the controller.resize() method. The config is used\n * to determine the aspect ratio to apply in case no explicit height has been specified.\n * @param {HTMLCanvasElement} canvas\n * @param {number} [aspectRatio]\n */\nfunction initCanvas(canvas, aspectRatio) {\n  const style = canvas.style;\n\n  // NOTE(SB) canvas.getAttribute('width') !== canvas.width: in the first case it\n  // returns null or '' if no explicit value has been set to the canvas attribute.\n  const renderHeight = canvas.getAttribute('height');\n  const renderWidth = canvas.getAttribute('width');\n\n  // Chart.js modifies some canvas values that we want to restore on destroy\n  canvas[EXPANDO_KEY] = {\n    initial: {\n      height: renderHeight,\n      width: renderWidth,\n      style: {\n        display: style.display,\n        height: style.height,\n        width: style.width\n      }\n    }\n  };\n\n  // Force canvas to display as block to avoid extra space caused by inline\n  // elements, which would interfere with the responsive resize process.\n  // https://github.com/chartjs/Chart.js/issues/2538\n  style.display = style.display || 'block';\n  // Include possible borders in the size\n  style.boxSizing = style.boxSizing || 'border-box';\n\n  if (isNullOrEmpty(renderWidth)) {\n    const displayWidth = readUsedSize(canvas, 'width');\n    if (displayWidth !== undefined) {\n      canvas.width = displayWidth;\n    }\n  }\n\n  if (isNullOrEmpty(renderHeight)) {\n    if (canvas.style.height === '') {\n      // If no explicit render height and style height, let's apply the aspect ratio,\n      // which one can be specified by the user but also by charts as default option\n      // (i.e. options.aspectRatio). If not specified, use canvas aspect ratio of 2.\n      canvas.height = canvas.width / (aspectRatio || 2);\n    } else {\n      const displayHeight = readUsedSize(canvas, 'height');\n      if (displayHeight !== undefined) {\n        canvas.height = displayHeight;\n      }\n    }\n  }\n\n  return canvas;\n}\n\n// Default passive to true as expected by Chrome for 'touchstart' and 'touchend' events.\n// https://github.com/chartjs/Chart.js/issues/4287\nconst eventListenerOptions = supportsEventListenerOptions ? {passive: true} : false;\n\nfunction addListener(node, type, listener) {\n  if (node) {\n    node.addEventListener(type, listener, eventListenerOptions);\n  }\n}\n\nfunction removeListener(chart, type, listener) {\n  if (chart && chart.canvas) {\n    chart.canvas.removeEventListener(type, listener, eventListenerOptions);\n  }\n}\n\nfunction fromNativeEvent(event, chart) {\n  const type = EVENT_TYPES[event.type] || event.type;\n  const {x, y} = getRelativePosition(event, chart);\n  return {\n    type,\n    chart,\n    native: event,\n    x: x !== undefined ? x : null,\n    y: y !== undefined ? y : null,\n  };\n}\n\nfunction nodeListContains(nodeList, canvas) {\n  for (const node of nodeList) {\n    if (node === canvas || node.contains(canvas)) {\n      return true;\n    }\n  }\n}\n\nfunction createAttachObserver(chart, type, listener) {\n  const canvas = chart.canvas;\n  const observer = new MutationObserver(entries => {\n    let trigger = false;\n    for (const entry of entries) {\n      trigger = trigger || nodeListContains(entry.addedNodes, canvas);\n      trigger = trigger && !nodeListContains(entry.removedNodes, canvas);\n    }\n    if (trigger) {\n      listener();\n    }\n  });\n  observer.observe(document, {childList: true, subtree: true});\n  return observer;\n}\n\nfunction createDetachObserver(chart, type, listener) {\n  const canvas = chart.canvas;\n  const observer = new MutationObserver(entries => {\n    let trigger = false;\n    for (const entry of entries) {\n      trigger = trigger || nodeListContains(entry.removedNodes, canvas);\n      trigger = trigger && !nodeListContains(entry.addedNodes, canvas);\n    }\n    if (trigger) {\n      listener();\n    }\n  });\n  observer.observe(document, {childList: true, subtree: true});\n  return observer;\n}\n\nconst drpListeningCharts = new Map();\nlet oldDevicePixelRatio = 0;\n\nfunction onWindowResize() {\n  const dpr = window.devicePixelRatio;\n  if (dpr === oldDevicePixelRatio) {\n    return;\n  }\n  oldDevicePixelRatio = dpr;\n  drpListeningCharts.forEach((resize, chart) => {\n    if (chart.currentDevicePixelRatio !== dpr) {\n      resize();\n    }\n  });\n}\n\nfunction listenDevicePixelRatioChanges(chart, resize) {\n  if (!drpListeningCharts.size) {\n    window.addEventListener('resize', onWindowResize);\n  }\n  drpListeningCharts.set(chart, resize);\n}\n\nfunction unlistenDevicePixelRatioChanges(chart) {\n  drpListeningCharts.delete(chart);\n  if (!drpListeningCharts.size) {\n    window.removeEventListener('resize', onWindowResize);\n  }\n}\n\nfunction createResizeObserver(chart, type, listener) {\n  const canvas = chart.canvas;\n  const container = canvas && _getParentNode(canvas);\n  if (!container) {\n    return;\n  }\n  const resize = throttled((width, height) => {\n    const w = container.clientWidth;\n    listener(width, height);\n    if (w < container.clientWidth) {\n      // If the container size shrank during chart resize, let's assume\n      // scrollbar appeared. So we resize again with the scrollbar visible -\n      // effectively making chart smaller and the scrollbar hidden again.\n      // Because we are inside `throttled`, and currently `ticking`, scroll\n      // events are ignored during this whole 2 resize process.\n      // If we assumed wrong and something else happened, we are resizing\n      // twice in a frame (potential performance issue)\n      listener();\n    }\n  }, window);\n\n  // @ts-ignore until https://github.com/microsoft/TypeScript/issues/37861 implemented\n  const observer = new ResizeObserver(entries => {\n    const entry = entries[0];\n    const width = entry.contentRect.width;\n    const height = entry.contentRect.height;\n    // When its container's display is set to 'none' the callback will be called with a\n    // size of (0, 0), which will cause the chart to lose its original height, so skip\n    // resizing in such case.\n    if (width === 0 && height === 0) {\n      return;\n    }\n    resize(width, height);\n  });\n  observer.observe(container);\n  listenDevicePixelRatioChanges(chart, resize);\n\n  return observer;\n}\n\nfunction releaseObserver(chart, type, observer) {\n  if (observer) {\n    observer.disconnect();\n  }\n  if (type === 'resize') {\n    unlistenDevicePixelRatioChanges(chart);\n  }\n}\n\nfunction createProxyAndListen(chart, type, listener) {\n  const canvas = chart.canvas;\n  const proxy = throttled((event) => {\n    // This case can occur if the chart is destroyed while waiting\n    // for the throttled function to occur. We prevent crashes by checking\n    // for a destroyed chart\n    if (chart.ctx !== null) {\n      listener(fromNativeEvent(event, chart));\n    }\n  }, chart);\n\n  addListener(canvas, type, proxy);\n\n  return proxy;\n}\n\n/**\n * Platform class for charts that can access the DOM and global window/document properties\n * @extends BasePlatform\n */\nexport default class DomPlatform extends BasePlatform {\n\n  /**\n\t * @param {HTMLCanvasElement} canvas\n\t * @param {number} [aspectRatio]\n\t * @return {CanvasRenderingContext2D|null}\n\t */\n  acquireContext(canvas, aspectRatio) {\n    // To prevent canvas fingerprinting, some add-ons undefine the getContext\n    // method, for example: https://github.com/kkapsner/CanvasBlocker\n    // https://github.com/chartjs/Chart.js/issues/2807\n    const context = canvas && canvas.getContext && canvas.getContext('2d');\n\n    // `instanceof HTMLCanvasElement/CanvasRenderingContext2D` fails when the canvas is\n    // inside an iframe or when running in a protected environment. We could guess the\n    // types from their toString() value but let's keep things flexible and assume it's\n    // a sufficient condition if the canvas has a context2D which has canvas as `canvas`.\n    // https://github.com/chartjs/Chart.js/issues/3887\n    // https://github.com/chartjs/Chart.js/issues/4102\n    // https://github.com/chartjs/Chart.js/issues/4152\n    if (context && context.canvas === canvas) {\n      // Load platform resources on first chart creation, to make it possible to\n      // import the library before setting platform options.\n      initCanvas(canvas, aspectRatio);\n      return context;\n    }\n\n    return null;\n  }\n\n  /**\n\t * @param {CanvasRenderingContext2D} context\n\t */\n  releaseContext(context) {\n    const canvas = context.canvas;\n    if (!canvas[EXPANDO_KEY]) {\n      return false;\n    }\n\n    const initial = canvas[EXPANDO_KEY].initial;\n    ['height', 'width'].forEach((prop) => {\n      const value = initial[prop];\n      if (isNullOrUndef(value)) {\n        canvas.removeAttribute(prop);\n      } else {\n        canvas.setAttribute(prop, value);\n      }\n    });\n\n    const style = initial.style || {};\n    Object.keys(style).forEach((key) => {\n      canvas.style[key] = style[key];\n    });\n\n    // The canvas render size might have been changed (and thus the state stack discarded),\n    // we can't use save() and restore() to restore the initial state. So make sure that at\n    // least the canvas context is reset to the default state by setting the canvas width.\n    // https://www.w3.org/TR/2011/WD-html5-20110525/the-canvas-element.html\n    // eslint-disable-next-line no-self-assign\n    canvas.width = canvas.width;\n\n    delete canvas[EXPANDO_KEY];\n    return true;\n  }\n\n  /**\n\t *\n\t * @param {Chart} chart\n\t * @param {string} type\n\t * @param {function} listener\n\t */\n  addEventListener(chart, type, listener) {\n    // Can have only one listener per type, so make sure previous is removed\n    this.removeEventListener(chart, type);\n\n    const proxies = chart.$proxies || (chart.$proxies = {});\n    const handlers = {\n      attach: createAttachObserver,\n      detach: createDetachObserver,\n      resize: createResizeObserver\n    };\n    const handler = handlers[type] || createProxyAndListen;\n    proxies[type] = handler(chart, type, listener);\n  }\n\n\n  /**\n\t * @param {Chart} chart\n\t * @param {string} type\n\t */\n  removeEventListener(chart, type) {\n    const proxies = chart.$proxies || (chart.$proxies = {});\n    const proxy = proxies[type];\n\n    if (!proxy) {\n      return;\n    }\n\n    const handlers = {\n      attach: releaseObserver,\n      detach: releaseObserver,\n      resize: releaseObserver\n    };\n    const handler = handlers[type] || removeListener;\n    handler(chart, type, proxy);\n    proxies[type] = undefined;\n  }\n\n  getDevicePixelRatio() {\n    return window.devicePixelRatio;\n  }\n\n  /**\n\t * @param {HTMLCanvasElement} canvas\n\t * @param {number} [width] - content width of parent element\n\t * @param {number} [height] - content height of parent element\n\t * @param {number} [aspectRatio] - aspect ratio to maintain\n\t */\n  getMaximumSize(canvas, width, height, aspectRatio) {\n    return getMaximumSize(canvas, width, height, aspectRatio);\n  }\n\n  /**\n\t * @param {HTMLCanvasElement} canvas\n\t */\n  isAttached(canvas) {\n    const container = _getParentNode(canvas);\n    return !!(container && container.isConnected);\n  }\n}\n","import type {AnyObject} from '../types/basic.js';\nimport type {Point} from '../types/geometric.js';\nimport type {Animation} from '../types/animation.js';\nimport {isNumber} from '../helpers/helpers.math.js';\n\nexport default class Element<T = AnyObject, O = AnyObject> {\n\n  static defaults = {};\n  static defaultRoutes = undefined;\n\n  x: number;\n  y: number;\n  active = false;\n  options: O;\n  $animations: Record<keyof T, Animation>;\n\n  tooltipPosition(useFinalPosition: boolean): Point {\n    const {x, y} = this.getProps(['x', 'y'], useFinalPosition);\n    return {x, y} as Point;\n  }\n\n  hasValue() {\n    return isNumber(this.x) && isNumber(this.y);\n  }\n\n  /**\n   * Gets the current or final value of each prop. Can return extra properties (whole object).\n   * @param props - properties to get\n   * @param [final] - get the final value (animation target)\n   */\n  getProps<P extends (keyof T)[]>(props: P, final?: boolean): Pick<T, P[number]>;\n  getProps<P extends string>(props: P[], final?: boolean): Partial<Record<P, unknown>>;\n  getProps(props: string[], final?: boolean): Partial<Record<string, unknown>> {\n    const anims = this.$animations;\n    if (!final || !anims) {\n      // let's not create an object, if not needed\n      return this as Record<string, unknown>;\n    }\n    const ret: Record<string, unknown> = {};\n    props.forEach((prop) => {\n      ret[prop] = anims[prop] && anims[prop].active() ? anims[prop]._to : this[prop as string];\n    });\n    return ret;\n  }\n}\n","import {isNullOrUndef, valueOrDefault} from '../helpers/helpers.core.js';\nimport {_factorize} from '../helpers/helpers.math.js';\n\n\n/**\n * @typedef { import('./core.controller.js').default } Chart\n * @typedef {{value:number | string, label?:string, major?:boolean, $context?:any}} Tick\n */\n\n/**\n * Returns a subset of ticks to be plotted to avoid overlapping labels.\n * @param {import('./core.scale.js').default} scale\n * @param {Tick[]} ticks\n * @return {Tick[]}\n * @private\n */\nexport function autoSkip(scale, ticks) {\n  const tickOpts = scale.options.ticks;\n  const determinedMaxTicks = determineMaxTicks(scale);\n  const ticksLimit = Math.min(tickOpts.maxTicksLimit || determinedMaxTicks, determinedMaxTicks);\n  const majorIndices = tickOpts.major.enabled ? getMajorIndices(ticks) : [];\n  const numMajorIndices = majorIndices.length;\n  const first = majorIndices[0];\n  const last = majorIndices[numMajorIndices - 1];\n  const newTicks = [];\n\n  // If there are too many major ticks to display them all\n  if (numMajorIndices > ticksLimit) {\n    skipMajors(ticks, newTicks, majorIndices, numMajorIndices / ticksLimit);\n    return newTicks;\n  }\n\n  const spacing = calculateSpacing(majorIndices, ticks, ticksLimit);\n\n  if (numMajorIndices > 0) {\n    let i, ilen;\n    const avgMajorSpacing = numMajorIndices > 1 ? Math.round((last - first) / (numMajorIndices - 1)) : null;\n    skip(ticks, newTicks, spacing, isNullOrUndef(avgMajorSpacing) ? 0 : first - avgMajorSpacing, first);\n    for (i = 0, ilen = numMajorIndices - 1; i < ilen; i++) {\n      skip(ticks, newTicks, spacing, majorIndices[i], majorIndices[i + 1]);\n    }\n    skip(ticks, newTicks, spacing, last, isNullOrUndef(avgMajorSpacing) ? ticks.length : last + avgMajorSpacing);\n    return newTicks;\n  }\n  skip(ticks, newTicks, spacing);\n  return newTicks;\n}\n\nfunction determineMaxTicks(scale) {\n  const offset = scale.options.offset;\n  const tickLength = scale._tickSize();\n  const maxScale = scale._length / tickLength + (offset ? 0 : 1);\n  const maxChart = scale._maxLength / tickLength;\n  return Math.floor(Math.min(maxScale, maxChart));\n}\n\n/**\n * @param {number[]} majorIndices\n * @param {Tick[]} ticks\n * @param {number} ticksLimit\n */\nfunction calculateSpacing(majorIndices, ticks, ticksLimit) {\n  const evenMajorSpacing = getEvenSpacing(majorIndices);\n  const spacing = ticks.length / ticksLimit;\n\n  // If the major ticks are evenly spaced apart, place the minor ticks\n  // so that they divide the major ticks into even chunks\n  if (!evenMajorSpacing) {\n    return Math.max(spacing, 1);\n  }\n\n  const factors = _factorize(evenMajorSpacing);\n  for (let i = 0, ilen = factors.length - 1; i < ilen; i++) {\n    const factor = factors[i];\n    if (factor > spacing) {\n      return factor;\n    }\n  }\n  return Math.max(spacing, 1);\n}\n\n/**\n * @param {Tick[]} ticks\n */\nfunction getMajorIndices(ticks) {\n  const result = [];\n  let i, ilen;\n  for (i = 0, ilen = ticks.length; i < ilen; i++) {\n    if (ticks[i].major) {\n      result.push(i);\n    }\n  }\n  return result;\n}\n\n/**\n * @param {Tick[]} ticks\n * @param {Tick[]} newTicks\n * @param {number[]} majorIndices\n * @param {number} spacing\n */\nfunction skipMajors(ticks, newTicks, majorIndices, spacing) {\n  let count = 0;\n  let next = majorIndices[0];\n  let i;\n\n  spacing = Math.ceil(spacing);\n  for (i = 0; i < ticks.length; i++) {\n    if (i === next) {\n      newTicks.push(ticks[i]);\n      count++;\n      next = majorIndices[count * spacing];\n    }\n  }\n}\n\n/**\n * @param {Tick[]} ticks\n * @param {Tick[]} newTicks\n * @param {number} spacing\n * @param {number} [majorStart]\n * @param {number} [majorEnd]\n */\nfunction skip(ticks, newTicks, spacing, majorStart, majorEnd) {\n  const start = valueOrDefault(majorStart, 0);\n  const end = Math.min(valueOrDefault(majorEnd, ticks.length), ticks.length);\n  let count = 0;\n  let length, i, next;\n\n  spacing = Math.ceil(spacing);\n  if (majorEnd) {\n    length = majorEnd - majorStart;\n    spacing = length / Math.floor(length / spacing);\n  }\n\n  next = start;\n\n  while (next < 0) {\n    count++;\n    next = Math.round(start + count * spacing);\n  }\n\n  for (i = Math.max(start, 0); i < end; i++) {\n    if (i === next) {\n      newTicks.push(ticks[i]);\n      count++;\n      next = Math.round(start + count * spacing);\n    }\n  }\n}\n\n\n/**\n * @param {number[]} arr\n */\nfunction getEvenSpacing(arr) {\n  const len = arr.length;\n  let i, diff;\n\n  if (len < 2) {\n    return false;\n  }\n\n  for (diff = arr[0], i = 1; i < len; ++i) {\n    if (arr[i] - arr[i - 1] !== diff) {\n      return false;\n    }\n  }\n  return diff;\n}\n","import Element from './core.element.js';\nimport {_alignPixel, _measureText, renderText, clipArea, unclipArea} from '../helpers/helpers.canvas.js';\nimport {callback as call, each, finiteOrDefault, isArray, isFinite, isNullOrUndef, isObject, valueOrDefault} from '../helpers/helpers.core.js';\nimport {toDegrees, toRadians, _int16Range, _limitValue, HALF_PI} from '../helpers/helpers.math.js';\nimport {_alignStartEnd, _toLeftRightCenter} from '../helpers/helpers.extras.js';\nimport {createContext, toFont, toPadding, _addGrace} from '../helpers/helpers.options.js';\nimport {autoSkip} from './core.scale.autoskip.js';\n\nconst reverseAlign = (align) => align === 'left' ? 'right' : align === 'right' ? 'left' : align;\nconst offsetFromEdge = (scale, edge, offset) => edge === 'top' || edge === 'left' ? scale[edge] + offset : scale[edge] - offset;\nconst getTicksLimit = (ticksLength, maxTicksLimit) => Math.min(maxTicksLimit || ticksLength, ticksLength);\n\n/**\n * @typedef { import('../types/index.js').Chart } Chart\n * @typedef {{value:number | string, label?:string, major?:boolean, $context?:any}} Tick\n */\n\n/**\n * Returns a new array containing numItems from arr\n * @param {any[]} arr\n * @param {number} numItems\n */\nfunction sample(arr, numItems) {\n  const result = [];\n  const increment = arr.length / numItems;\n  const len = arr.length;\n  let i = 0;\n\n  for (; i < len; i += increment) {\n    result.push(arr[Math.floor(i)]);\n  }\n  return result;\n}\n\n/**\n * @param {Scale} scale\n * @param {number} index\n * @param {boolean} offsetGridLines\n */\nfunction getPixelForGridLine(scale, index, offsetGridLines) {\n  const length = scale.ticks.length;\n  const validIndex = Math.min(index, length - 1);\n  const start = scale._startPixel;\n  const end = scale._endPixel;\n  const epsilon = 1e-6; // 1e-6 is margin in pixels for accumulated error.\n  let lineValue = scale.getPixelForTick(validIndex);\n  let offset;\n\n  if (offsetGridLines) {\n    if (length === 1) {\n      offset = Math.max(lineValue - start, end - lineValue);\n    } else if (index === 0) {\n      offset = (scale.getPixelForTick(1) - lineValue) / 2;\n    } else {\n      offset = (lineValue - scale.getPixelForTick(validIndex - 1)) / 2;\n    }\n    lineValue += validIndex < index ? offset : -offset;\n\n    // Return undefined if the pixel is out of the range\n    if (lineValue < start - epsilon || lineValue > end + epsilon) {\n      return;\n    }\n  }\n  return lineValue;\n}\n\n/**\n * @param {object} caches\n * @param {number} length\n */\nfunction garbageCollect(caches, length) {\n  each(caches, (cache) => {\n    const gc = cache.gc;\n    const gcLen = gc.length / 2;\n    let i;\n    if (gcLen > length) {\n      for (i = 0; i < gcLen; ++i) {\n        delete cache.data[gc[i]];\n      }\n      gc.splice(0, gcLen);\n    }\n  });\n}\n\n/**\n * @param {object} options\n */\nfunction getTickMarkLength(options) {\n  return options.drawTicks ? options.tickLength : 0;\n}\n\n/**\n * @param {object} options\n */\nfunction getTitleHeight(options, fallback) {\n  if (!options.display) {\n    return 0;\n  }\n\n  const font = toFont(options.font, fallback);\n  const padding = toPadding(options.padding);\n  const lines = isArray(options.text) ? options.text.length : 1;\n\n  return (lines * font.lineHeight) + padding.height;\n}\n\nfunction createScaleContext(parent, scale) {\n  return createContext(parent, {\n    scale,\n    type: 'scale'\n  });\n}\n\nfunction createTickContext(parent, index, tick) {\n  return createContext(parent, {\n    tick,\n    index,\n    type: 'tick'\n  });\n}\n\nfunction titleAlign(align, position, reverse) {\n  /** @type {CanvasTextAlign} */\n  let ret = _toLeftRightCenter(align);\n  if ((reverse && position !== 'right') || (!reverse && position === 'right')) {\n    ret = reverseAlign(ret);\n  }\n  return ret;\n}\n\nfunction titleArgs(scale, offset, position, align) {\n  const {top, left, bottom, right, chart} = scale;\n  const {chartArea, scales} = chart;\n  let rotation = 0;\n  let maxWidth, titleX, titleY;\n  const height = bottom - top;\n  const width = right - left;\n\n  if (scale.isHorizontal()) {\n    titleX = _alignStartEnd(align, left, right);\n\n    if (isObject(position)) {\n      const positionAxisID = Object.keys(position)[0];\n      const value = position[positionAxisID];\n      titleY = scales[positionAxisID].getPixelForValue(value) + height - offset;\n    } else if (position === 'center') {\n      titleY = (chartArea.bottom + chartArea.top) / 2 + height - offset;\n    } else {\n      titleY = offsetFromEdge(scale, position, offset);\n    }\n    maxWidth = right - left;\n  } else {\n    if (isObject(position)) {\n      const positionAxisID = Object.keys(position)[0];\n      const value = position[positionAxisID];\n      titleX = scales[positionAxisID].getPixelForValue(value) - width + offset;\n    } else if (position === 'center') {\n      titleX = (chartArea.left + chartArea.right) / 2 - width + offset;\n    } else {\n      titleX = offsetFromEdge(scale, position, offset);\n    }\n    titleY = _alignStartEnd(align, bottom, top);\n    rotation = position === 'left' ? -HALF_PI : HALF_PI;\n  }\n  return {titleX, titleY, maxWidth, rotation};\n}\n\nexport default class Scale extends Element {\n\n  // eslint-disable-next-line max-statements\n  constructor(cfg) {\n    super();\n\n    /** @type {string} */\n    this.id = cfg.id;\n    /** @type {string} */\n    this.type = cfg.type;\n    /** @type {any} */\n    this.options = undefined;\n    /** @type {CanvasRenderingContext2D} */\n    this.ctx = cfg.ctx;\n    /** @type {Chart} */\n    this.chart = cfg.chart;\n\n    // implements box\n    /** @type {number} */\n    this.top = undefined;\n    /** @type {number} */\n    this.bottom = undefined;\n    /** @type {number} */\n    this.left = undefined;\n    /** @type {number} */\n    this.right = undefined;\n    /** @type {number} */\n    this.width = undefined;\n    /** @type {number} */\n    this.height = undefined;\n    this._margins = {\n      left: 0,\n      right: 0,\n      top: 0,\n      bottom: 0\n    };\n    /** @type {number} */\n    this.maxWidth = undefined;\n    /** @type {number} */\n    this.maxHeight = undefined;\n    /** @type {number} */\n    this.paddingTop = undefined;\n    /** @type {number} */\n    this.paddingBottom = undefined;\n    /** @type {number} */\n    this.paddingLeft = undefined;\n    /** @type {number} */\n    this.paddingRight = undefined;\n\n    // scale-specific properties\n    /** @type {string=} */\n    this.axis = undefined;\n    /** @type {number=} */\n    this.labelRotation = undefined;\n    this.min = undefined;\n    this.max = undefined;\n    this._range = undefined;\n    /** @type {Tick[]} */\n    this.ticks = [];\n    /** @type {object[]|null} */\n    this._gridLineItems = null;\n    /** @type {object[]|null} */\n    this._labelItems = null;\n    /** @type {object|null} */\n    this._labelSizes = null;\n    this._length = 0;\n    this._maxLength = 0;\n    this._longestTextCache = {};\n    /** @type {number} */\n    this._startPixel = undefined;\n    /** @type {number} */\n    this._endPixel = undefined;\n    this._reversePixels = false;\n    this._userMax = undefined;\n    this._userMin = undefined;\n    this._suggestedMax = undefined;\n    this._suggestedMin = undefined;\n    this._ticksLength = 0;\n    this._borderValue = 0;\n    this._cache = {};\n    this._dataLimitsCached = false;\n    this.$context = undefined;\n  }\n\n  /**\n\t * @param {any} options\n\t * @since 3.0\n\t */\n  init(options) {\n    this.options = options.setContext(this.getContext());\n\n    this.axis = options.axis;\n\n    // parse min/max value, so we can properly determine min/max for other scales\n    this._userMin = this.parse(options.min);\n    this._userMax = this.parse(options.max);\n    this._suggestedMin = this.parse(options.suggestedMin);\n    this._suggestedMax = this.parse(options.suggestedMax);\n  }\n\n  /**\n\t * Parse a supported input value to internal representation.\n\t * @param {*} raw\n\t * @param {number} [index]\n\t * @since 3.0\n\t */\n  parse(raw, index) { // eslint-disable-line no-unused-vars\n    return raw;\n  }\n\n  /**\n\t * @return {{min: number, max: number, minDefined: boolean, maxDefined: boolean}}\n\t * @protected\n\t * @since 3.0\n\t */\n  getUserBounds() {\n    let {_userMin, _userMax, _suggestedMin, _suggestedMax} = this;\n    _userMin = finiteOrDefault(_userMin, Number.POSITIVE_INFINITY);\n    _userMax = finiteOrDefault(_userMax, Number.NEGATIVE_INFINITY);\n    _suggestedMin = finiteOrDefault(_suggestedMin, Number.POSITIVE_INFINITY);\n    _suggestedMax = finiteOrDefault(_suggestedMax, Number.NEGATIVE_INFINITY);\n    return {\n      min: finiteOrDefault(_userMin, _suggestedMin),\n      max: finiteOrDefault(_userMax, _suggestedMax),\n      minDefined: isFinite(_userMin),\n      maxDefined: isFinite(_userMax)\n    };\n  }\n\n  /**\n\t * @param {boolean} canStack\n\t * @return {{min: number, max: number}}\n\t * @protected\n\t * @since 3.0\n\t */\n  getMinMax(canStack) {\n    // eslint-disable-next-line prefer-const\n    let {min, max, minDefined, maxDefined} = this.getUserBounds();\n    let range;\n\n    if (minDefined && maxDefined) {\n      return {min, max};\n    }\n\n    const metas = this.getMatchingVisibleMetas();\n    for (let i = 0, ilen = metas.length; i < ilen; ++i) {\n      range = metas[i].controller.getMinMax(this, canStack);\n      if (!minDefined) {\n        min = Math.min(min, range.min);\n      }\n      if (!maxDefined) {\n        max = Math.max(max, range.max);\n      }\n    }\n\n    // Make sure min <= max when only min or max is defined by user and the data is outside that range\n    min = maxDefined && min > max ? max : min;\n    max = minDefined && min > max ? min : max;\n\n    return {\n      min: finiteOrDefault(min, finiteOrDefault(max, min)),\n      max: finiteOrDefault(max, finiteOrDefault(min, max))\n    };\n  }\n\n  /**\n\t * Get the padding needed for the scale\n\t * @return {{top: number, left: number, bottom: number, right: number}} the necessary padding\n\t * @private\n\t */\n  getPadding() {\n    return {\n      left: this.paddingLeft || 0,\n      top: this.paddingTop || 0,\n      right: this.paddingRight || 0,\n      bottom: this.paddingBottom || 0\n    };\n  }\n\n  /**\n\t * Returns the scale tick objects\n\t * @return {Tick[]}\n\t * @since 2.7\n\t */\n  getTicks() {\n    return this.ticks;\n  }\n\n  /**\n\t * @return {string[]}\n\t */\n  getLabels() {\n    const data = this.chart.data;\n    return this.options.labels || (this.isHorizontal() ? data.xLabels : data.yLabels) || data.labels || [];\n  }\n\n  /**\n   * @return {import('../types.js').LabelItem[]}\n   */\n  getLabelItems(chartArea = this.chart.chartArea) {\n    const items = this._labelItems || (this._labelItems = this._computeLabelItems(chartArea));\n    return items;\n  }\n\n  // When a new layout is created, reset the data limits cache\n  beforeLayout() {\n    this._cache = {};\n    this._dataLimitsCached = false;\n  }\n\n  // These methods are ordered by lifecycle. Utilities then follow.\n  // Any function defined here is inherited by all scale types.\n  // Any function can be extended by the scale type\n\n  beforeUpdate() {\n    call(this.options.beforeUpdate, [this]);\n  }\n\n  /**\n\t * @param {number} maxWidth - the max width in pixels\n\t * @param {number} maxHeight - the max height in pixels\n\t * @param {{top: number, left: number, bottom: number, right: number}} margins - the space between the edge of the other scales and edge of the chart\n\t *   This space comes from two sources:\n\t *     - padding - space that's required to show the labels at the edges of the scale\n\t *     - thickness of scales or legends in another orientation\n\t */\n  update(maxWidth, maxHeight, margins) {\n    const {beginAtZero, grace, ticks: tickOpts} = this.options;\n    const sampleSize = tickOpts.sampleSize;\n\n    // Update Lifecycle - Probably don't want to ever extend or overwrite this function ;)\n    this.beforeUpdate();\n\n    // Absorb the master measurements\n    this.maxWidth = maxWidth;\n    this.maxHeight = maxHeight;\n    this._margins = margins = Object.assign({\n      left: 0,\n      right: 0,\n      top: 0,\n      bottom: 0\n    }, margins);\n\n    this.ticks = null;\n    this._labelSizes = null;\n    this._gridLineItems = null;\n    this._labelItems = null;\n\n    // Dimensions\n    this.beforeSetDimensions();\n    this.setDimensions();\n    this.afterSetDimensions();\n\n    this._maxLength = this.isHorizontal()\n      ? this.width + margins.left + margins.right\n      : this.height + margins.top + margins.bottom;\n\n    // Data min/max\n    if (!this._dataLimitsCached) {\n      this.beforeDataLimits();\n      this.determineDataLimits();\n      this.afterDataLimits();\n      this._range = _addGrace(this, grace, beginAtZero);\n      this._dataLimitsCached = true;\n    }\n\n    this.beforeBuildTicks();\n\n    this.ticks = this.buildTicks() || [];\n\n    // Allow modification of ticks in callback.\n    this.afterBuildTicks();\n\n    // Compute tick rotation and fit using a sampled subset of labels\n    // We generally don't need to compute the size of every single label for determining scale size\n    const samplingEnabled = sampleSize < this.ticks.length;\n    this._convertTicksToLabels(samplingEnabled ? sample(this.ticks, sampleSize) : this.ticks);\n\n    // configure is called twice, once here, once from core.controller.updateLayout.\n    // Here we haven't been positioned yet, but dimensions are correct.\n    // Variables set in configure are needed for calculateLabelRotation, and\n    // it's ok that coordinates are not correct there, only dimensions matter.\n    this.configure();\n\n    // Tick Rotation\n    this.beforeCalculateLabelRotation();\n    this.calculateLabelRotation(); // Preconditions: number of ticks and sizes of largest labels must be calculated beforehand\n    this.afterCalculateLabelRotation();\n\n    // Auto-skip\n    if (tickOpts.display && (tickOpts.autoSkip || tickOpts.source === 'auto')) {\n      this.ticks = autoSkip(this, this.ticks);\n      this._labelSizes = null;\n      this.afterAutoSkip();\n    }\n\n    if (samplingEnabled) {\n      // Generate labels using all non-skipped ticks\n      this._convertTicksToLabels(this.ticks);\n    }\n\n    this.beforeFit();\n    this.fit(); // Preconditions: label rotation and label sizes must be calculated beforehand\n    this.afterFit();\n\n    // IMPORTANT: after this point, we consider that `this.ticks` will NEVER change!\n\n    this.afterUpdate();\n  }\n\n  /**\n\t * @protected\n\t */\n  configure() {\n    let reversePixels = this.options.reverse;\n    let startPixel, endPixel;\n\n    if (this.isHorizontal()) {\n      startPixel = this.left;\n      endPixel = this.right;\n    } else {\n      startPixel = this.top;\n      endPixel = this.bottom;\n      // by default vertical scales are from bottom to top, so pixels are reversed\n      reversePixels = !reversePixels;\n    }\n    this._startPixel = startPixel;\n    this._endPixel = endPixel;\n    this._reversePixels = reversePixels;\n    this._length = endPixel - startPixel;\n    this._alignToPixels = this.options.alignToPixels;\n  }\n\n  afterUpdate() {\n    call(this.options.afterUpdate, [this]);\n  }\n\n  //\n\n  beforeSetDimensions() {\n    call(this.options.beforeSetDimensions, [this]);\n  }\n  setDimensions() {\n    // Set the unconstrained dimension before label rotation\n    if (this.isHorizontal()) {\n      // Reset position before calculating rotation\n      this.width = this.maxWidth;\n      this.left = 0;\n      this.right = this.width;\n    } else {\n      this.height = this.maxHeight;\n\n      // Reset position before calculating rotation\n      this.top = 0;\n      this.bottom = this.height;\n    }\n\n    // Reset padding\n    this.paddingLeft = 0;\n    this.paddingTop = 0;\n    this.paddingRight = 0;\n    this.paddingBottom = 0;\n  }\n  afterSetDimensions() {\n    call(this.options.afterSetDimensions, [this]);\n  }\n\n  _callHooks(name) {\n    this.chart.notifyPlugins(name, this.getContext());\n    call(this.options[name], [this]);\n  }\n\n  // Data limits\n  beforeDataLimits() {\n    this._callHooks('beforeDataLimits');\n  }\n  determineDataLimits() {}\n  afterDataLimits() {\n    this._callHooks('afterDataLimits');\n  }\n\n  //\n  beforeBuildTicks() {\n    this._callHooks('beforeBuildTicks');\n  }\n  /**\n\t * @return {object[]} the ticks\n\t */\n  buildTicks() {\n    return [];\n  }\n  afterBuildTicks() {\n    this._callHooks('afterBuildTicks');\n  }\n\n  beforeTickToLabelConversion() {\n    call(this.options.beforeTickToLabelConversion, [this]);\n  }\n  /**\n\t * Convert ticks to label strings\n\t * @param {Tick[]} ticks\n\t */\n  generateTickLabels(ticks) {\n    const tickOpts = this.options.ticks;\n    let i, ilen, tick;\n    for (i = 0, ilen = ticks.length; i < ilen; i++) {\n      tick = ticks[i];\n      tick.label = call(tickOpts.callback, [tick.value, i, ticks], this);\n    }\n  }\n  afterTickToLabelConversion() {\n    call(this.options.afterTickToLabelConversion, [this]);\n  }\n\n  //\n\n  beforeCalculateLabelRotation() {\n    call(this.options.beforeCalculateLabelRotation, [this]);\n  }\n  calculateLabelRotation() {\n    const options = this.options;\n    const tickOpts = options.ticks;\n    const numTicks = getTicksLimit(this.ticks.length, options.ticks.maxTicksLimit);\n    const minRotation = tickOpts.minRotation || 0;\n    const maxRotation = tickOpts.maxRotation;\n    let labelRotation = minRotation;\n    let tickWidth, maxHeight, maxLabelDiagonal;\n\n    if (!this._isVisible() || !tickOpts.display || minRotation >= maxRotation || numTicks <= 1 || !this.isHorizontal()) {\n      this.labelRotation = minRotation;\n      return;\n    }\n\n    const labelSizes = this._getLabelSizes();\n    const maxLabelWidth = labelSizes.widest.width;\n    const maxLabelHeight = labelSizes.highest.height;\n\n    // Estimate the width of each grid based on the canvas width, the maximum\n    // label width and the number of tick intervals\n    const maxWidth = _limitValue(this.chart.width - maxLabelWidth, 0, this.maxWidth);\n    tickWidth = options.offset ? this.maxWidth / numTicks : maxWidth / (numTicks - 1);\n\n    // Allow 3 pixels x2 padding either side for label readability\n    if (maxLabelWidth + 6 > tickWidth) {\n      tickWidth = maxWidth / (numTicks - (options.offset ? 0.5 : 1));\n      maxHeight = this.maxHeight - getTickMarkLength(options.grid)\n\t\t\t\t- tickOpts.padding - getTitleHeight(options.title, this.chart.options.font);\n      maxLabelDiagonal = Math.sqrt(maxLabelWidth * maxLabelWidth + maxLabelHeight * maxLabelHeight);\n      labelRotation = toDegrees(Math.min(\n        Math.asin(_limitValue((labelSizes.highest.height + 6) / tickWidth, -1, 1)),\n        Math.asin(_limitValue(maxHeight / maxLabelDiagonal, -1, 1)) - Math.asin(_limitValue(maxLabelHeight / maxLabelDiagonal, -1, 1))\n      ));\n      labelRotation = Math.max(minRotation, Math.min(maxRotation, labelRotation));\n    }\n\n    this.labelRotation = labelRotation;\n  }\n  afterCalculateLabelRotation() {\n    call(this.options.afterCalculateLabelRotation, [this]);\n  }\n  afterAutoSkip() {}\n\n  //\n\n  beforeFit() {\n    call(this.options.beforeFit, [this]);\n  }\n  fit() {\n    // Reset\n    const minSize = {\n      width: 0,\n      height: 0\n    };\n\n    const {chart, options: {ticks: tickOpts, title: titleOpts, grid: gridOpts}} = this;\n    const display = this._isVisible();\n    const isHorizontal = this.isHorizontal();\n\n    if (display) {\n      const titleHeight = getTitleHeight(titleOpts, chart.options.font);\n      if (isHorizontal) {\n        minSize.width = this.maxWidth;\n        minSize.height = getTickMarkLength(gridOpts) + titleHeight;\n      } else {\n        minSize.height = this.maxHeight; // fill all the height\n        minSize.width = getTickMarkLength(gridOpts) + titleHeight;\n      }\n\n      // Don't bother fitting the ticks if we are not showing the labels\n      if (tickOpts.display && this.ticks.length) {\n        const {first, last, widest, highest} = this._getLabelSizes();\n        const tickPadding = tickOpts.padding * 2;\n        const angleRadians = toRadians(this.labelRotation);\n        const cos = Math.cos(angleRadians);\n        const sin = Math.sin(angleRadians);\n\n        if (isHorizontal) {\n        // A horizontal axis is more constrained by the height.\n          const labelHeight = tickOpts.mirror ? 0 : sin * widest.width + cos * highest.height;\n          minSize.height = Math.min(this.maxHeight, minSize.height + labelHeight + tickPadding);\n        } else {\n        // A vertical axis is more constrained by the width. Labels are the\n        // dominant factor here, so get that length first and account for padding\n          const labelWidth = tickOpts.mirror ? 0 : cos * widest.width + sin * highest.height;\n\n          minSize.width = Math.min(this.maxWidth, minSize.width + labelWidth + tickPadding);\n        }\n        this._calculatePadding(first, last, sin, cos);\n      }\n    }\n\n    this._handleMargins();\n\n    if (isHorizontal) {\n      this.width = this._length = chart.width - this._margins.left - this._margins.right;\n      this.height = minSize.height;\n    } else {\n      this.width = minSize.width;\n      this.height = this._length = chart.height - this._margins.top - this._margins.bottom;\n    }\n  }\n\n  _calculatePadding(first, last, sin, cos) {\n    const {ticks: {align, padding}, position} = this.options;\n    const isRotated = this.labelRotation !== 0;\n    const labelsBelowTicks = position !== 'top' && this.axis === 'x';\n\n    if (this.isHorizontal()) {\n      const offsetLeft = this.getPixelForTick(0) - this.left;\n      const offsetRight = this.right - this.getPixelForTick(this.ticks.length - 1);\n      let paddingLeft = 0;\n      let paddingRight = 0;\n\n      // Ensure that our ticks are always inside the canvas. When rotated, ticks are right aligned\n      // which means that the right padding is dominated by the font height\n      if (isRotated) {\n        if (labelsBelowTicks) {\n          paddingLeft = cos * first.width;\n          paddingRight = sin * last.height;\n        } else {\n          paddingLeft = sin * first.height;\n          paddingRight = cos * last.width;\n        }\n      } else if (align === 'start') {\n        paddingRight = last.width;\n      } else if (align === 'end') {\n        paddingLeft = first.width;\n      } else if (align !== 'inner') {\n        paddingLeft = first.width / 2;\n        paddingRight = last.width / 2;\n      }\n\n      // Adjust padding taking into account changes in offsets\n      this.paddingLeft = Math.max((paddingLeft - offsetLeft + padding) * this.width / (this.width - offsetLeft), 0);\n      this.paddingRight = Math.max((paddingRight - offsetRight + padding) * this.width / (this.width - offsetRight), 0);\n    } else {\n      let paddingTop = last.height / 2;\n      let paddingBottom = first.height / 2;\n\n      if (align === 'start') {\n        paddingTop = 0;\n        paddingBottom = first.height;\n      } else if (align === 'end') {\n        paddingTop = last.height;\n        paddingBottom = 0;\n      }\n\n      this.paddingTop = paddingTop + padding;\n      this.paddingBottom = paddingBottom + padding;\n    }\n  }\n\n  /**\n\t * Handle margins and padding interactions\n\t * @private\n\t */\n  _handleMargins() {\n    if (this._margins) {\n      this._margins.left = Math.max(this.paddingLeft, this._margins.left);\n      this._margins.top = Math.max(this.paddingTop, this._margins.top);\n      this._margins.right = Math.max(this.paddingRight, this._margins.right);\n      this._margins.bottom = Math.max(this.paddingBottom, this._margins.bottom);\n    }\n  }\n\n  afterFit() {\n    call(this.options.afterFit, [this]);\n  }\n\n  // Shared Methods\n  /**\n\t * @return {boolean}\n\t */\n  isHorizontal() {\n    const {axis, position} = this.options;\n    return position === 'top' || position === 'bottom' || axis === 'x';\n  }\n  /**\n\t * @return {boolean}\n\t */\n  isFullSize() {\n    return this.options.fullSize;\n  }\n\n  /**\n\t * @param {Tick[]} ticks\n\t * @private\n\t */\n  _convertTicksToLabels(ticks) {\n    this.beforeTickToLabelConversion();\n\n    this.generateTickLabels(ticks);\n\n    // Ticks should be skipped when callback returns null or undef, so lets remove those.\n    let i, ilen;\n    for (i = 0, ilen = ticks.length; i < ilen; i++) {\n      if (isNullOrUndef(ticks[i].label)) {\n        ticks.splice(i, 1);\n        ilen--;\n        i--;\n      }\n    }\n\n    this.afterTickToLabelConversion();\n  }\n\n  /**\n\t * @return {{ first: object, last: object, widest: object, highest: object, widths: Array, heights: array }}\n\t * @private\n\t */\n  _getLabelSizes() {\n    let labelSizes = this._labelSizes;\n\n    if (!labelSizes) {\n      const sampleSize = this.options.ticks.sampleSize;\n      let ticks = this.ticks;\n      if (sampleSize < ticks.length) {\n        ticks = sample(ticks, sampleSize);\n      }\n\n      this._labelSizes = labelSizes = this._computeLabelSizes(ticks, ticks.length, this.options.ticks.maxTicksLimit);\n    }\n\n    return labelSizes;\n  }\n\n  /**\n\t * Returns {width, height, offset} objects for the first, last, widest, highest tick\n\t * labels where offset indicates the anchor point offset from the top in pixels.\n\t * @return {{ first: object, last: object, widest: object, highest: object, widths: Array, heights: array }}\n\t * @private\n\t */\n  _computeLabelSizes(ticks, length, maxTicksLimit) {\n    const {ctx, _longestTextCache: caches} = this;\n    const widths = [];\n    const heights = [];\n    const increment = Math.floor(length / getTicksLimit(length, maxTicksLimit));\n    let widestLabelSize = 0;\n    let highestLabelSize = 0;\n    let i, j, jlen, label, tickFont, fontString, cache, lineHeight, width, height, nestedLabel;\n\n    for (i = 0; i < length; i += increment) {\n      label = ticks[i].label;\n      tickFont = this._resolveTickFontOptions(i);\n      ctx.font = fontString = tickFont.string;\n      cache = caches[fontString] = caches[fontString] || {data: {}, gc: []};\n      lineHeight = tickFont.lineHeight;\n      width = height = 0;\n      // Undefined labels and arrays should not be measured\n      if (!isNullOrUndef(label) && !isArray(label)) {\n        width = _measureText(ctx, cache.data, cache.gc, width, label);\n        height = lineHeight;\n      } else if (isArray(label)) {\n        // if it is an array let's measure each element\n        for (j = 0, jlen = label.length; j < jlen; ++j) {\n          nestedLabel = /** @type {string} */ (label[j]);\n          // Undefined labels and arrays should not be measured\n          if (!isNullOrUndef(nestedLabel) && !isArray(nestedLabel)) {\n            width = _measureText(ctx, cache.data, cache.gc, width, nestedLabel);\n            height += lineHeight;\n          }\n        }\n      }\n      widths.push(width);\n      heights.push(height);\n      widestLabelSize = Math.max(width, widestLabelSize);\n      highestLabelSize = Math.max(height, highestLabelSize);\n    }\n    garbageCollect(caches, length);\n\n    const widest = widths.indexOf(widestLabelSize);\n    const highest = heights.indexOf(highestLabelSize);\n\n    const valueAt = (idx) => ({width: widths[idx] || 0, height: heights[idx] || 0});\n\n    return {\n      first: valueAt(0),\n      last: valueAt(length - 1),\n      widest: valueAt(widest),\n      highest: valueAt(highest),\n      widths,\n      heights,\n    };\n  }\n\n  /**\n\t * Used to get the label to display in the tooltip for the given value\n\t * @param {*} value\n\t * @return {string}\n\t */\n  getLabelForValue(value) {\n    return value;\n  }\n\n  /**\n\t * Returns the location of the given data point. Value can either be an index or a numerical value\n\t * The coordinate (0, 0) is at the upper-left corner of the canvas\n\t * @param {*} value\n\t * @param {number} [index]\n\t * @return {number}\n\t */\n  getPixelForValue(value, index) { // eslint-disable-line no-unused-vars\n    return NaN;\n  }\n\n  /**\n\t * Used to get the data value from a given pixel. This is the inverse of getPixelForValue\n\t * The coordinate (0, 0) is at the upper-left corner of the canvas\n\t * @param {number} pixel\n\t * @return {*}\n\t */\n  getValueForPixel(pixel) {} // eslint-disable-line no-unused-vars\n\n  /**\n\t * Returns the location of the tick at the given index\n\t * The coordinate (0, 0) is at the upper-left corner of the canvas\n\t * @param {number} index\n\t * @return {number}\n\t */\n  getPixelForTick(index) {\n    const ticks = this.ticks;\n    if (index < 0 || index > ticks.length - 1) {\n      return null;\n    }\n    return this.getPixelForValue(ticks[index].value);\n  }\n\n  /**\n\t * Utility for getting the pixel location of a percentage of scale\n\t * The coordinate (0, 0) is at the upper-left corner of the canvas\n\t * @param {number} decimal\n\t * @return {number}\n\t */\n  getPixelForDecimal(decimal) {\n    if (this._reversePixels) {\n      decimal = 1 - decimal;\n    }\n\n    const pixel = this._startPixel + decimal * this._length;\n    return _int16Range(this._alignToPixels ? _alignPixel(this.chart, pixel, 0) : pixel);\n  }\n\n  /**\n\t * @param {number} pixel\n\t * @return {number}\n\t */\n  getDecimalForPixel(pixel) {\n    const decimal = (pixel - this._startPixel) / this._length;\n    return this._reversePixels ? 1 - decimal : decimal;\n  }\n\n  /**\n\t * Returns the pixel for the minimum chart value\n\t * The coordinate (0, 0) is at the upper-left corner of the canvas\n\t * @return {number}\n\t */\n  getBasePixel() {\n    return this.getPixelForValue(this.getBaseValue());\n  }\n\n  /**\n\t * @return {number}\n\t */\n  getBaseValue() {\n    const {min, max} = this;\n\n    return min < 0 && max < 0 ? max :\n      min > 0 && max > 0 ? min :\n      0;\n  }\n\n  /**\n\t * @protected\n\t */\n  getContext(index) {\n    const ticks = this.ticks || [];\n\n    if (index >= 0 && index < ticks.length) {\n      const tick = ticks[index];\n      return tick.$context ||\n\t\t\t\t(tick.$context = createTickContext(this.getContext(), index, tick));\n    }\n    return this.$context ||\n\t\t\t(this.$context = createScaleContext(this.chart.getContext(), this));\n  }\n\n  /**\n\t * @return {number}\n\t * @private\n\t */\n  _tickSize() {\n    const optionTicks = this.options.ticks;\n\n    // Calculate space needed by label in axis direction.\n    const rot = toRadians(this.labelRotation);\n    const cos = Math.abs(Math.cos(rot));\n    const sin = Math.abs(Math.sin(rot));\n\n    const labelSizes = this._getLabelSizes();\n    const padding = optionTicks.autoSkipPadding || 0;\n    const w = labelSizes ? labelSizes.widest.width + padding : 0;\n    const h = labelSizes ? labelSizes.highest.height + padding : 0;\n\n    // Calculate space needed for 1 tick in axis direction.\n    return this.isHorizontal()\n      ? h * cos > w * sin ? w / cos : h / sin\n      : h * sin < w * cos ? h / cos : w / sin;\n  }\n\n  /**\n\t * @return {boolean}\n\t * @private\n\t */\n  _isVisible() {\n    const display = this.options.display;\n\n    if (display !== 'auto') {\n      return !!display;\n    }\n\n    return this.getMatchingVisibleMetas().length > 0;\n  }\n\n  /**\n\t * @private\n\t */\n  _computeGridLineItems(chartArea) {\n    const axis = this.axis;\n    const chart = this.chart;\n    const options = this.options;\n    const {grid, position, border} = options;\n    const offset = grid.offset;\n    const isHorizontal = this.isHorizontal();\n    const ticks = this.ticks;\n    const ticksLength = ticks.length + (offset ? 1 : 0);\n    const tl = getTickMarkLength(grid);\n    const items = [];\n\n    const borderOpts = border.setContext(this.getContext());\n    const axisWidth = borderOpts.display ? borderOpts.width : 0;\n    const axisHalfWidth = axisWidth / 2;\n    const alignBorderValue = function(pixel) {\n      return _alignPixel(chart, pixel, axisWidth);\n    };\n    let borderValue, i, lineValue, alignedLineValue;\n    let tx1, ty1, tx2, ty2, x1, y1, x2, y2;\n\n    if (position === 'top') {\n      borderValue = alignBorderValue(this.bottom);\n      ty1 = this.bottom - tl;\n      ty2 = borderValue - axisHalfWidth;\n      y1 = alignBorderValue(chartArea.top) + axisHalfWidth;\n      y2 = chartArea.bottom;\n    } else if (position === 'bottom') {\n      borderValue = alignBorderValue(this.top);\n      y1 = chartArea.top;\n      y2 = alignBorderValue(chartArea.bottom) - axisHalfWidth;\n      ty1 = borderValue + axisHalfWidth;\n      ty2 = this.top + tl;\n    } else if (position === 'left') {\n      borderValue = alignBorderValue(this.right);\n      tx1 = this.right - tl;\n      tx2 = borderValue - axisHalfWidth;\n      x1 = alignBorderValue(chartArea.left) + axisHalfWidth;\n      x2 = chartArea.right;\n    } else if (position === 'right') {\n      borderValue = alignBorderValue(this.left);\n      x1 = chartArea.left;\n      x2 = alignBorderValue(chartArea.right) - axisHalfWidth;\n      tx1 = borderValue + axisHalfWidth;\n      tx2 = this.left + tl;\n    } else if (axis === 'x') {\n      if (position === 'center') {\n        borderValue = alignBorderValue((chartArea.top + chartArea.bottom) / 2 + 0.5);\n      } else if (isObject(position)) {\n        const positionAxisID = Object.keys(position)[0];\n        const value = position[positionAxisID];\n        borderValue = alignBorderValue(this.chart.scales[positionAxisID].getPixelForValue(value));\n      }\n\n      y1 = chartArea.top;\n      y2 = chartArea.bottom;\n      ty1 = borderValue + axisHalfWidth;\n      ty2 = ty1 + tl;\n    } else if (axis === 'y') {\n      if (position === 'center') {\n        borderValue = alignBorderValue((chartArea.left + chartArea.right) / 2);\n      } else if (isObject(position)) {\n        const positionAxisID = Object.keys(position)[0];\n        const value = position[positionAxisID];\n        borderValue = alignBorderValue(this.chart.scales[positionAxisID].getPixelForValue(value));\n      }\n\n      tx1 = borderValue - axisHalfWidth;\n      tx2 = tx1 - tl;\n      x1 = chartArea.left;\n      x2 = chartArea.right;\n    }\n\n    const limit = valueOrDefault(options.ticks.maxTicksLimit, ticksLength);\n    const step = Math.max(1, Math.ceil(ticksLength / limit));\n    for (i = 0; i < ticksLength; i += step) {\n      const context = this.getContext(i);\n      const optsAtIndex = grid.setContext(context);\n      const optsAtIndexBorder = border.setContext(context);\n\n      const lineWidth = optsAtIndex.lineWidth;\n      const lineColor = optsAtIndex.color;\n      const borderDash = optsAtIndexBorder.dash || [];\n      const borderDashOffset = optsAtIndexBorder.dashOffset;\n\n      const tickWidth = optsAtIndex.tickWidth;\n      const tickColor = optsAtIndex.tickColor;\n      const tickBorderDash = optsAtIndex.tickBorderDash || [];\n      const tickBorderDashOffset = optsAtIndex.tickBorderDashOffset;\n\n      lineValue = getPixelForGridLine(this, i, offset);\n\n      // Skip if the pixel is out of the range\n      if (lineValue === undefined) {\n        continue;\n      }\n\n      alignedLineValue = _alignPixel(chart, lineValue, lineWidth);\n\n      if (isHorizontal) {\n        tx1 = tx2 = x1 = x2 = alignedLineValue;\n      } else {\n        ty1 = ty2 = y1 = y2 = alignedLineValue;\n      }\n\n      items.push({\n        tx1,\n        ty1,\n        tx2,\n        ty2,\n        x1,\n        y1,\n        x2,\n        y2,\n        width: lineWidth,\n        color: lineColor,\n        borderDash,\n        borderDashOffset,\n        tickWidth,\n        tickColor,\n        tickBorderDash,\n        tickBorderDashOffset,\n      });\n    }\n\n    this._ticksLength = ticksLength;\n    this._borderValue = borderValue;\n\n    return items;\n  }\n\n  /**\n\t * @private\n\t */\n  _computeLabelItems(chartArea) {\n    const axis = this.axis;\n    const options = this.options;\n    const {position, ticks: optionTicks} = options;\n    const isHorizontal = this.isHorizontal();\n    const ticks = this.ticks;\n    const {align, crossAlign, padding, mirror} = optionTicks;\n    const tl = getTickMarkLength(options.grid);\n    const tickAndPadding = tl + padding;\n    const hTickAndPadding = mirror ? -padding : tickAndPadding;\n    const rotation = -toRadians(this.labelRotation);\n    const items = [];\n    let i, ilen, tick, label, x, y, textAlign, pixel, font, lineHeight, lineCount, textOffset;\n    let textBaseline = 'middle';\n\n    if (position === 'top') {\n      y = this.bottom - hTickAndPadding;\n      textAlign = this._getXAxisLabelAlignment();\n    } else if (position === 'bottom') {\n      y = this.top + hTickAndPadding;\n      textAlign = this._getXAxisLabelAlignment();\n    } else if (position === 'left') {\n      const ret = this._getYAxisLabelAlignment(tl);\n      textAlign = ret.textAlign;\n      x = ret.x;\n    } else if (position === 'right') {\n      const ret = this._getYAxisLabelAlignment(tl);\n      textAlign = ret.textAlign;\n      x = ret.x;\n    } else if (axis === 'x') {\n      if (position === 'center') {\n        y = ((chartArea.top + chartArea.bottom) / 2) + tickAndPadding;\n      } else if (isObject(position)) {\n        const positionAxisID = Object.keys(position)[0];\n        const value = position[positionAxisID];\n        y = this.chart.scales[positionAxisID].getPixelForValue(value) + tickAndPadding;\n      }\n      textAlign = this._getXAxisLabelAlignment();\n    } else if (axis === 'y') {\n      if (position === 'center') {\n        x = ((chartArea.left + chartArea.right) / 2) - tickAndPadding;\n      } else if (isObject(position)) {\n        const positionAxisID = Object.keys(position)[0];\n        const value = position[positionAxisID];\n        x = this.chart.scales[positionAxisID].getPixelForValue(value);\n      }\n      textAlign = this._getYAxisLabelAlignment(tl).textAlign;\n    }\n\n    if (axis === 'y') {\n      if (align === 'start') {\n        textBaseline = 'top';\n      } else if (align === 'end') {\n        textBaseline = 'bottom';\n      }\n    }\n\n    const labelSizes = this._getLabelSizes();\n    for (i = 0, ilen = ticks.length; i < ilen; ++i) {\n      tick = ticks[i];\n      label = tick.label;\n\n      const optsAtIndex = optionTicks.setContext(this.getContext(i));\n      pixel = this.getPixelForTick(i) + optionTicks.labelOffset;\n      font = this._resolveTickFontOptions(i);\n      lineHeight = font.lineHeight;\n      lineCount = isArray(label) ? label.length : 1;\n      const halfCount = lineCount / 2;\n      const color = optsAtIndex.color;\n      const strokeColor = optsAtIndex.textStrokeColor;\n      const strokeWidth = optsAtIndex.textStrokeWidth;\n      let tickTextAlign = textAlign;\n\n      if (isHorizontal) {\n        x = pixel;\n\n        if (textAlign === 'inner') {\n          if (i === ilen - 1) {\n            tickTextAlign = !this.options.reverse ? 'right' : 'left';\n          } else if (i === 0) {\n            tickTextAlign = !this.options.reverse ? 'left' : 'right';\n          } else {\n            tickTextAlign = 'center';\n          }\n        }\n\n        if (position === 'top') {\n          if (crossAlign === 'near' || rotation !== 0) {\n            textOffset = -lineCount * lineHeight + lineHeight / 2;\n          } else if (crossAlign === 'center') {\n            textOffset = -labelSizes.highest.height / 2 - halfCount * lineHeight + lineHeight;\n          } else {\n            textOffset = -labelSizes.highest.height + lineHeight / 2;\n          }\n        } else {\n          // eslint-disable-next-line no-lonely-if\n          if (crossAlign === 'near' || rotation !== 0) {\n            textOffset = lineHeight / 2;\n          } else if (crossAlign === 'center') {\n            textOffset = labelSizes.highest.height / 2 - halfCount * lineHeight;\n          } else {\n            textOffset = labelSizes.highest.height - lineCount * lineHeight;\n          }\n        }\n        if (mirror) {\n          textOffset *= -1;\n        }\n        if (rotation !== 0 && !optsAtIndex.showLabelBackdrop) {\n          x += (lineHeight / 2) * Math.sin(rotation);\n        }\n      } else {\n        y = pixel;\n        textOffset = (1 - lineCount) * lineHeight / 2;\n      }\n\n      let backdrop;\n\n      if (optsAtIndex.showLabelBackdrop) {\n        const labelPadding = toPadding(optsAtIndex.backdropPadding);\n        const height = labelSizes.heights[i];\n        const width = labelSizes.widths[i];\n\n        let top = textOffset - labelPadding.top;\n        let left = 0 - labelPadding.left;\n\n        switch (textBaseline) {\n        case 'middle':\n          top -= height / 2;\n          break;\n        case 'bottom':\n          top -= height;\n          break;\n        default:\n          break;\n        }\n\n        switch (textAlign) {\n        case 'center':\n          left -= width / 2;\n          break;\n        case 'right':\n          left -= width;\n          break;\n        case 'inner':\n          if (i === ilen - 1) {\n            left -= width;\n          } else if (i > 0) {\n            left -= width / 2;\n          }\n          break;\n        default:\n          break;\n        }\n\n        backdrop = {\n          left,\n          top,\n          width: width + labelPadding.width,\n          height: height + labelPadding.height,\n\n          color: optsAtIndex.backdropColor,\n        };\n      }\n\n      items.push({\n        label,\n        font,\n        textOffset,\n        options: {\n          rotation,\n          color,\n          strokeColor,\n          strokeWidth,\n          textAlign: tickTextAlign,\n          textBaseline,\n          translation: [x, y],\n          backdrop,\n        }\n      });\n    }\n\n    return items;\n  }\n\n  _getXAxisLabelAlignment() {\n    const {position, ticks} = this.options;\n    const rotation = -toRadians(this.labelRotation);\n\n    if (rotation) {\n      return position === 'top' ? 'left' : 'right';\n    }\n\n    let align = 'center';\n\n    if (ticks.align === 'start') {\n      align = 'left';\n    } else if (ticks.align === 'end') {\n      align = 'right';\n    } else if (ticks.align === 'inner') {\n      align = 'inner';\n    }\n\n    return align;\n  }\n\n  _getYAxisLabelAlignment(tl) {\n    const {position, ticks: {crossAlign, mirror, padding}} = this.options;\n    const labelSizes = this._getLabelSizes();\n    const tickAndPadding = tl + padding;\n    const widest = labelSizes.widest.width;\n\n    let textAlign;\n    let x;\n\n    if (position === 'left') {\n      if (mirror) {\n        x = this.right + padding;\n\n        if (crossAlign === 'near') {\n          textAlign = 'left';\n        } else if (crossAlign === 'center') {\n          textAlign = 'center';\n          x += (widest / 2);\n        } else {\n          textAlign = 'right';\n          x += widest;\n        }\n      } else {\n        x = this.right - tickAndPadding;\n\n        if (crossAlign === 'near') {\n          textAlign = 'right';\n        } else if (crossAlign === 'center') {\n          textAlign = 'center';\n          x -= (widest / 2);\n        } else {\n          textAlign = 'left';\n          x = this.left;\n        }\n      }\n    } else if (position === 'right') {\n      if (mirror) {\n        x = this.left + padding;\n\n        if (crossAlign === 'near') {\n          textAlign = 'right';\n        } else if (crossAlign === 'center') {\n          textAlign = 'center';\n          x -= (widest / 2);\n        } else {\n          textAlign = 'left';\n          x -= widest;\n        }\n      } else {\n        x = this.left + tickAndPadding;\n\n        if (crossAlign === 'near') {\n          textAlign = 'left';\n        } else if (crossAlign === 'center') {\n          textAlign = 'center';\n          x += widest / 2;\n        } else {\n          textAlign = 'right';\n          x = this.right;\n        }\n      }\n    } else {\n      textAlign = 'right';\n    }\n\n    return {textAlign, x};\n  }\n\n  /**\n\t * @private\n\t */\n  _computeLabelArea() {\n    if (this.options.ticks.mirror) {\n      return;\n    }\n\n    const chart = this.chart;\n    const position = this.options.position;\n\n    if (position === 'left' || position === 'right') {\n      return {top: 0, left: this.left, bottom: chart.height, right: this.right};\n    } if (position === 'top' || position === 'bottom') {\n      return {top: this.top, left: 0, bottom: this.bottom, right: chart.width};\n    }\n  }\n\n  /**\n   * @protected\n   */\n  drawBackground() {\n    const {ctx, options: {backgroundColor}, left, top, width, height} = this;\n    if (backgroundColor) {\n      ctx.save();\n      ctx.fillStyle = backgroundColor;\n      ctx.fillRect(left, top, width, height);\n      ctx.restore();\n    }\n  }\n\n  getLineWidthForValue(value) {\n    const grid = this.options.grid;\n    if (!this._isVisible() || !grid.display) {\n      return 0;\n    }\n    const ticks = this.ticks;\n    const index = ticks.findIndex(t => t.value === value);\n    if (index >= 0) {\n      const opts = grid.setContext(this.getContext(index));\n      return opts.lineWidth;\n    }\n    return 0;\n  }\n\n  /**\n\t * @protected\n\t */\n  drawGrid(chartArea) {\n    const grid = this.options.grid;\n    const ctx = this.ctx;\n    const items = this._gridLineItems || (this._gridLineItems = this._computeGridLineItems(chartArea));\n    let i, ilen;\n\n    const drawLine = (p1, p2, style) => {\n      if (!style.width || !style.color) {\n        return;\n      }\n      ctx.save();\n      ctx.lineWidth = style.width;\n      ctx.strokeStyle = style.color;\n      ctx.setLineDash(style.borderDash || []);\n      ctx.lineDashOffset = style.borderDashOffset;\n\n      ctx.beginPath();\n      ctx.moveTo(p1.x, p1.y);\n      ctx.lineTo(p2.x, p2.y);\n      ctx.stroke();\n      ctx.restore();\n    };\n\n    if (grid.display) {\n      for (i = 0, ilen = items.length; i < ilen; ++i) {\n        const item = items[i];\n\n        if (grid.drawOnChartArea) {\n          drawLine(\n            {x: item.x1, y: item.y1},\n            {x: item.x2, y: item.y2},\n            item\n          );\n        }\n\n        if (grid.drawTicks) {\n          drawLine(\n            {x: item.tx1, y: item.ty1},\n            {x: item.tx2, y: item.ty2},\n            {\n              color: item.tickColor,\n              width: item.tickWidth,\n              borderDash: item.tickBorderDash,\n              borderDashOffset: item.tickBorderDashOffset\n            }\n          );\n        }\n      }\n    }\n  }\n\n  /**\n\t * @protected\n\t */\n  drawBorder() {\n    const {chart, ctx, options: {border, grid}} = this;\n    const borderOpts = border.setContext(this.getContext());\n    const axisWidth = border.display ? borderOpts.width : 0;\n    if (!axisWidth) {\n      return;\n    }\n    const lastLineWidth = grid.setContext(this.getContext(0)).lineWidth;\n    const borderValue = this._borderValue;\n    let x1, x2, y1, y2;\n\n    if (this.isHorizontal()) {\n      x1 = _alignPixel(chart, this.left, axisWidth) - axisWidth / 2;\n      x2 = _alignPixel(chart, this.right, lastLineWidth) + lastLineWidth / 2;\n      y1 = y2 = borderValue;\n    } else {\n      y1 = _alignPixel(chart, this.top, axisWidth) - axisWidth / 2;\n      y2 = _alignPixel(chart, this.bottom, lastLineWidth) + lastLineWidth / 2;\n      x1 = x2 = borderValue;\n    }\n    ctx.save();\n    ctx.lineWidth = borderOpts.width;\n    ctx.strokeStyle = borderOpts.color;\n\n    ctx.beginPath();\n    ctx.moveTo(x1, y1);\n    ctx.lineTo(x2, y2);\n    ctx.stroke();\n\n    ctx.restore();\n  }\n\n  /**\n\t * @protected\n\t */\n  drawLabels(chartArea) {\n    const optionTicks = this.options.ticks;\n\n    if (!optionTicks.display) {\n      return;\n    }\n\n    const ctx = this.ctx;\n\n    const area = this._computeLabelArea();\n    if (area) {\n      clipArea(ctx, area);\n    }\n\n    const items = this.getLabelItems(chartArea);\n    for (const item of items) {\n      const renderTextOptions = item.options;\n      const tickFont = item.font;\n      const label = item.label;\n      const y = item.textOffset;\n      renderText(ctx, label, 0, y, tickFont, renderTextOptions);\n    }\n\n    if (area) {\n      unclipArea(ctx);\n    }\n  }\n\n  /**\n\t * @protected\n\t */\n  drawTitle() {\n    const {ctx, options: {position, title, reverse}} = this;\n\n    if (!title.display) {\n      return;\n    }\n\n    const font = toFont(title.font);\n    const padding = toPadding(title.padding);\n    const align = title.align;\n    let offset = font.lineHeight / 2;\n\n    if (position === 'bottom' || position === 'center' || isObject(position)) {\n      offset += padding.bottom;\n      if (isArray(title.text)) {\n        offset += font.lineHeight * (title.text.length - 1);\n      }\n    } else {\n      offset += padding.top;\n    }\n\n    const {titleX, titleY, maxWidth, rotation} = titleArgs(this, offset, position, align);\n\n    renderText(ctx, title.text, 0, 0, font, {\n      color: title.color,\n      maxWidth,\n      rotation,\n      textAlign: titleAlign(align, position, reverse),\n      textBaseline: 'middle',\n      translation: [titleX, titleY],\n    });\n  }\n\n  draw(chartArea) {\n    if (!this._isVisible()) {\n      return;\n    }\n\n    this.drawBackground();\n    this.drawGrid(chartArea);\n    this.drawBorder();\n    this.drawTitle();\n    this.drawLabels(chartArea);\n  }\n\n  /**\n\t * @return {object[]}\n\t * @private\n\t */\n  _layers() {\n    const opts = this.options;\n    const tz = opts.ticks && opts.ticks.z || 0;\n    const gz = valueOrDefault(opts.grid && opts.grid.z, -1);\n    const bz = valueOrDefault(opts.border && opts.border.z, 0);\n\n    if (!this._isVisible() || this.draw !== Scale.prototype.draw) {\n      // backward compatibility: draw has been overridden by custom scale\n      return [{\n        z: tz,\n        draw: (chartArea) => {\n          this.draw(chartArea);\n        }\n      }];\n    }\n\n    return [{\n      z: gz,\n      draw: (chartArea) => {\n        this.drawBackground();\n        this.drawGrid(chartArea);\n        this.drawTitle();\n      }\n    }, {\n      z: bz,\n      draw: () => {\n        this.drawBorder();\n      }\n    }, {\n      z: tz,\n      draw: (chartArea) => {\n        this.drawLabels(chartArea);\n      }\n    }];\n  }\n\n  /**\n\t * Returns visible dataset metas that are attached to this scale\n\t * @param {string} [type] - if specified, also filter by dataset type\n\t * @return {object[]}\n\t */\n  getMatchingVisibleMetas(type) {\n    const metas = this.chart.getSortedVisibleDatasetMetas();\n    const axisID = this.axis + 'AxisID';\n    const result = [];\n    let i, ilen;\n\n    for (i = 0, ilen = metas.length; i < ilen; ++i) {\n      const meta = metas[i];\n      if (meta[axisID] === this.id && (!type || meta.type === type)) {\n        result.push(meta);\n      }\n    }\n    return result;\n  }\n\n  /**\n\t * @param {number} index\n\t * @return {object}\n\t * @protected\n \t */\n  _resolveTickFontOptions(index) {\n    const opts = this.options.ticks.setContext(this.getContext(index));\n    return toFont(opts.font);\n  }\n\n  /**\n   * @protected\n   */\n  _maxDigits() {\n    const fontSize = this._resolveTickFontOptions(0).lineHeight;\n    return (this.isHorizontal() ? this.width : this.height) / fontSize;\n  }\n}\n","import {merge} from '../helpers/index.js';\nimport defaults, {overrides} from './core.defaults.js';\n\n/**\n * @typedef {{id: string, defaults: any, overrides?: any, defaultRoutes: any}} IChartComponent\n */\n\nexport default class TypedRegistry {\n  constructor(type, scope, override) {\n    this.type = type;\n    this.scope = scope;\n    this.override = override;\n    this.items = Object.create(null);\n  }\n\n  isForType(type) {\n    return Object.prototype.isPrototypeOf.call(this.type.prototype, type.prototype);\n  }\n\n  /**\n\t * @param {IChartComponent} item\n\t * @returns {string} The scope where items defaults were registered to.\n\t */\n  register(item) {\n    const proto = Object.getPrototypeOf(item);\n    let parentScope;\n\n    if (isIChartComponent(proto)) {\n      // Make sure the parent is registered and note the scope where its defaults are.\n      parentScope = this.register(proto);\n    }\n\n    const items = this.items;\n    const id = item.id;\n    const scope = this.scope + '.' + id;\n\n    if (!id) {\n      throw new Error('class does not have id: ' + item);\n    }\n\n    if (id in items) {\n      // already registered\n      return scope;\n    }\n\n    items[id] = item;\n    registerDefaults(item, scope, parentScope);\n    if (this.override) {\n      defaults.override(item.id, item.overrides);\n    }\n\n    return scope;\n  }\n\n  /**\n\t * @param {string} id\n\t * @returns {object?}\n\t */\n  get(id) {\n    return this.items[id];\n  }\n\n  /**\n\t * @param {IChartComponent} item\n\t */\n  unregister(item) {\n    const items = this.items;\n    const id = item.id;\n    const scope = this.scope;\n\n    if (id in items) {\n      delete items[id];\n    }\n\n    if (scope && id in defaults[scope]) {\n      delete defaults[scope][id];\n      if (this.override) {\n        delete overrides[id];\n      }\n    }\n  }\n}\n\nfunction registerDefaults(item, scope, parentScope) {\n  // Inherit the parent's defaults and keep existing defaults\n  const itemDefaults = merge(Object.create(null), [\n    parentScope ? defaults.get(parentScope) : {},\n    defaults.get(scope),\n    item.defaults\n  ]);\n\n  defaults.set(scope, itemDefaults);\n\n  if (item.defaultRoutes) {\n    routeDefaults(scope, item.defaultRoutes);\n  }\n\n  if (item.descriptors) {\n    defaults.describe(scope, item.descriptors);\n  }\n}\n\nfunction routeDefaults(scope, routes) {\n  Object.keys(routes).forEach(property => {\n    const propertyParts = property.split('.');\n    const sourceName = propertyParts.pop();\n    const sourceScope = [scope].concat(propertyParts).join('.');\n    const parts = routes[property].split('.');\n    const targetName = parts.pop();\n    const targetScope = parts.join('.');\n    defaults.route(sourceScope, sourceName, targetScope, targetName);\n  });\n}\n\nfunction isIChartComponent(proto) {\n  return 'id' in proto && 'defaults' in proto;\n}\n","import DatasetController from './core.datasetController.js';\nimport Element from './core.element.js';\nimport Scale from './core.scale.js';\nimport TypedRegistry from './core.typedRegistry.js';\nimport {each, callback as call, _capitalize} from '../helpers/helpers.core.js';\n\n/**\n * Please use the module's default export which provides a singleton instance\n * Note: class is exported for typedoc\n */\nexport class Registry {\n  constructor() {\n    this.controllers = new TypedRegistry(DatasetController, 'datasets', true);\n    this.elements = new TypedRegistry(Element, 'elements');\n    this.plugins = new TypedRegistry(Object, 'plugins');\n    this.scales = new TypedRegistry(Scale, 'scales');\n    // Order is important, Scale has Element in prototype chain,\n    // so Scales must be before Elements. Plugins are a fallback, so not listed here.\n    this._typedRegistries = [this.controllers, this.scales, this.elements];\n  }\n\n  /**\n\t * @param  {...any} args\n\t */\n  add(...args) {\n    this._each('register', args);\n  }\n\n  remove(...args) {\n    this._each('unregister', args);\n  }\n\n  /**\n\t * @param  {...typeof DatasetController} args\n\t */\n  addControllers(...args) {\n    this._each('register', args, this.controllers);\n  }\n\n  /**\n\t * @param  {...typeof Element} args\n\t */\n  addElements(...args) {\n    this._each('register', args, this.elements);\n  }\n\n  /**\n\t * @param  {...any} args\n\t */\n  addPlugins(...args) {\n    this._each('register', args, this.plugins);\n  }\n\n  /**\n\t * @param  {...typeof Scale} args\n\t */\n  addScales(...args) {\n    this._each('register', args, this.scales);\n  }\n\n  /**\n\t * @param {string} id\n\t * @returns {typeof DatasetController}\n\t */\n  getController(id) {\n    return this._get(id, this.controllers, 'controller');\n  }\n\n  /**\n\t * @param {string} id\n\t * @returns {typeof Element}\n\t */\n  getElement(id) {\n    return this._get(id, this.elements, 'element');\n  }\n\n  /**\n\t * @param {string} id\n\t * @returns {object}\n\t */\n  getPlugin(id) {\n    return this._get(id, this.plugins, 'plugin');\n  }\n\n  /**\n\t * @param {string} id\n\t * @returns {typeof Scale}\n\t */\n  getScale(id) {\n    return this._get(id, this.scales, 'scale');\n  }\n\n  /**\n\t * @param  {...typeof DatasetController} args\n\t */\n  removeControllers(...args) {\n    this._each('unregister', args, this.controllers);\n  }\n\n  /**\n\t * @param  {...typeof Element} args\n\t */\n  removeElements(...args) {\n    this._each('unregister', args, this.elements);\n  }\n\n  /**\n\t * @param  {...any} args\n\t */\n  removePlugins(...args) {\n    this._each('unregister', args, this.plugins);\n  }\n\n  /**\n\t * @param  {...typeof Scale} args\n\t */\n  removeScales(...args) {\n    this._each('unregister', args, this.scales);\n  }\n\n  /**\n\t * @private\n\t */\n  _each(method, args, typedRegistry) {\n    [...args].forEach(arg => {\n      const reg = typedRegistry || this._getRegistryForType(arg);\n      if (typedRegistry || reg.isForType(arg) || (reg === this.plugins && arg.id)) {\n        this._exec(method, reg, arg);\n      } else {\n        // Handle loopable args\n        // Use case:\n        //  import * as plugins from './plugins.js';\n        //  Chart.register(plugins);\n        each(arg, item => {\n          // If there are mixed types in the loopable, make sure those are\n          // registered in correct registry\n          // Use case: (treemap exporting controller, elements etc)\n          //  import * as treemap from 'chartjs-chart-treemap.js';\n          //  Chart.register(treemap);\n\n          const itemReg = typedRegistry || this._getRegistryForType(item);\n          this._exec(method, itemReg, item);\n        });\n      }\n    });\n  }\n\n  /**\n\t * @private\n\t */\n  _exec(method, registry, component) {\n    const camelMethod = _capitalize(method);\n    call(component['before' + camelMethod], [], component); // beforeRegister / beforeUnregister\n    registry[method](component);\n    call(component['after' + camelMethod], [], component); // afterRegister / afterUnregister\n  }\n\n  /**\n\t * @private\n\t */\n  _getRegistryForType(type) {\n    for (let i = 0; i < this._typedRegistries.length; i++) {\n      const reg = this._typedRegistries[i];\n      if (reg.isForType(type)) {\n        return reg;\n      }\n    }\n    // plugins is the fallback registry\n    return this.plugins;\n  }\n\n  /**\n\t * @private\n\t */\n  _get(id, typedRegistry, type) {\n    const item = typedRegistry.get(id);\n    if (item === undefined) {\n      throw new Error('\"' + id + '\" is not a registered ' + type + '.');\n    }\n    return item;\n  }\n\n}\n\n// singleton instance\nexport default /* #__PURE__ */ new Registry();\n","import registry from './core.registry.js';\nimport {callback as callCallback, isNullOrUndef, valueOrDefault} from '../helpers/helpers.core.js';\n\n/**\n * @typedef { import('./core.controller.js').default } Chart\n * @typedef { import('../types/index.js').ChartEvent } ChartEvent\n * @typedef { import('../plugins/plugin.tooltip.js').default } Tooltip\n */\n\n/**\n * @callback filterCallback\n * @param {{plugin: object, options: object}} value\n * @param {number} [index]\n * @param {array} [array]\n * @param {object} [thisArg]\n * @return {boolean}\n */\n\n\nexport default class PluginService {\n  constructor() {\n    this._init = [];\n  }\n\n  /**\n\t * Calls enabled plugins for `chart` on the specified hook and with the given args.\n\t * This method immediately returns as soon as a plugin explicitly returns false. The\n\t * returned value can be used, for instance, to interrupt the current action.\n\t * @param {Chart} chart - The chart instance for which plugins should be called.\n\t * @param {string} hook - The name of the plugin method to call (e.g. 'beforeUpdate').\n\t * @param {object} [args] - Extra arguments to apply to the hook call.\n   * @param {filterCallback} [filter] - Filtering function for limiting which plugins are notified\n\t * @returns {boolean} false if any of the plugins return false, else returns true.\n\t */\n  notify(chart, hook, args, filter) {\n    if (hook === 'beforeInit') {\n      this._init = this._createDescriptors(chart, true);\n      this._notify(this._init, chart, 'install');\n    }\n\n    const descriptors = filter ? this._descriptors(chart).filter(filter) : this._descriptors(chart);\n    const result = this._notify(descriptors, chart, hook, args);\n\n    if (hook === 'afterDestroy') {\n      this._notify(descriptors, chart, 'stop');\n      this._notify(this._init, chart, 'uninstall');\n    }\n    return result;\n  }\n\n  /**\n\t * @private\n\t */\n  _notify(descriptors, chart, hook, args) {\n    args = args || {};\n    for (const descriptor of descriptors) {\n      const plugin = descriptor.plugin;\n      const method = plugin[hook];\n      const params = [chart, args, descriptor.options];\n      if (callCallback(method, params, plugin) === false && args.cancelable) {\n        return false;\n      }\n    }\n\n    return true;\n  }\n\n  invalidate() {\n    // When plugins are registered, there is the possibility of a double\n    // invalidate situation. In this case, we only want to invalidate once.\n    // If we invalidate multiple times, the `_oldCache` is lost and all of the\n    // plugins are restarted without being correctly stopped.\n    // See https://github.com/chartjs/Chart.js/issues/8147\n    if (!isNullOrUndef(this._cache)) {\n      this._oldCache = this._cache;\n      this._cache = undefined;\n    }\n  }\n\n  /**\n\t * @param {Chart} chart\n\t * @private\n\t */\n  _descriptors(chart) {\n    if (this._cache) {\n      return this._cache;\n    }\n\n    const descriptors = this._cache = this._createDescriptors(chart);\n\n    this._notifyStateChanges(chart);\n\n    return descriptors;\n  }\n\n  _createDescriptors(chart, all) {\n    const config = chart && chart.config;\n    const options = valueOrDefault(config.options && config.options.plugins, {});\n    const plugins = allPlugins(config);\n    // options === false => all plugins are disabled\n    return options === false && !all ? [] : createDescriptors(chart, plugins, options, all);\n  }\n\n  /**\n\t * @param {Chart} chart\n\t * @private\n\t */\n  _notifyStateChanges(chart) {\n    const previousDescriptors = this._oldCache || [];\n    const descriptors = this._cache;\n    const diff = (a, b) => a.filter(x => !b.some(y => x.plugin.id === y.plugin.id));\n    this._notify(diff(previousDescriptors, descriptors), chart, 'stop');\n    this._notify(diff(descriptors, previousDescriptors), chart, 'start');\n  }\n}\n\n/**\n * @param {import('./core.config.js').default} config\n */\nfunction allPlugins(config) {\n  const localIds = {};\n  const plugins = [];\n  const keys = Object.keys(registry.plugins.items);\n  for (let i = 0; i < keys.length; i++) {\n    plugins.push(registry.getPlugin(keys[i]));\n  }\n\n  const local = config.plugins || [];\n  for (let i = 0; i < local.length; i++) {\n    const plugin = local[i];\n\n    if (plugins.indexOf(plugin) === -1) {\n      plugins.push(plugin);\n      localIds[plugin.id] = true;\n    }\n  }\n\n  return {plugins, localIds};\n}\n\nfunction getOpts(options, all) {\n  if (!all && options === false) {\n    return null;\n  }\n  if (options === true) {\n    return {};\n  }\n  return options;\n}\n\nfunction createDescriptors(chart, {plugins, localIds}, options, all) {\n  const result = [];\n  const context = chart.getContext();\n\n  for (const plugin of plugins) {\n    const id = plugin.id;\n    const opts = getOpts(options[id], all);\n    if (opts === null) {\n      continue;\n    }\n    result.push({\n      plugin,\n      options: pluginOpts(chart.config, {plugin, local: localIds[id]}, opts, context)\n    });\n  }\n\n  return result;\n}\n\nfunction pluginOpts(config, {plugin, local}, opts, context) {\n  const keys = config.pluginScopeKeys(plugin);\n  const scopes = config.getOptionScopes(opts, keys);\n  if (local && plugin.defaults) {\n    // make sure plugin defaults are in scopes for local (not registered) plugins\n    scopes.push(plugin.defaults);\n  }\n  return config.createResolver(scopes, context, [''], {\n    // These are just defaults that plugins can override\n    scriptable: false,\n    indexable: false,\n    allKeys: true\n  });\n}\n","import defaults, {overrides, descriptors} from './core.defaults.js';\nimport {mergeIf, resolveObjectKey, isArray, isFunction, valueOrDefault, isObject} from '../helpers/helpers.core.js';\nimport {_attachContext, _createResolver, _descriptors} from '../helpers/helpers.config.js';\n\nexport function getIndexAxis(type, options) {\n  const datasetDefaults = defaults.datasets[type] || {};\n  const datasetOptions = (options.datasets || {})[type] || {};\n  return datasetOptions.indexAxis || options.indexAxis || datasetDefaults.indexAxis || 'x';\n}\n\nfunction getAxisFromDefaultScaleID(id, indexAxis) {\n  let axis = id;\n  if (id === '_index_') {\n    axis = indexAxis;\n  } else if (id === '_value_') {\n    axis = indexAxis === 'x' ? 'y' : 'x';\n  }\n  return axis;\n}\n\nfunction getDefaultScaleIDFromAxis(axis, indexAxis) {\n  return axis === indexAxis ? '_index_' : '_value_';\n}\n\nfunction idMatchesAxis(id) {\n  if (id === 'x' || id === 'y' || id === 'r') {\n    return id;\n  }\n}\n\nfunction axisFromPosition(position) {\n  if (position === 'top' || position === 'bottom') {\n    return 'x';\n  }\n  if (position === 'left' || position === 'right') {\n    return 'y';\n  }\n}\n\nexport function determineAxis(id, ...scaleOptions) {\n  if (idMatchesAxis(id)) {\n    return id;\n  }\n  for (const opts of scaleOptions) {\n    const axis = opts.axis\n      || axisFromPosition(opts.position)\n      || id.length > 1 && idMatchesAxis(id[0].toLowerCase());\n    if (axis) {\n      return axis;\n    }\n  }\n  throw new Error(`Cannot determine type of '${id}' axis. Please provide 'axis' or 'position' option.`);\n}\n\nfunction getAxisFromDataset(id, axis, dataset) {\n  if (dataset[axis + 'AxisID'] === id) {\n    return {axis};\n  }\n}\n\nfunction retrieveAxisFromDatasets(id, config) {\n  if (config.data && config.data.datasets) {\n    const boundDs = config.data.datasets.filter((d) => d.xAxisID === id || d.yAxisID === id);\n    if (boundDs.length) {\n      return getAxisFromDataset(id, 'x', boundDs[0]) || getAxisFromDataset(id, 'y', boundDs[0]);\n    }\n  }\n  return {};\n}\n\nfunction mergeScaleConfig(config, options) {\n  const chartDefaults = overrides[config.type] || {scales: {}};\n  const configScales = options.scales || {};\n  const chartIndexAxis = getIndexAxis(config.type, options);\n  const scales = Object.create(null);\n\n  // First figure out first scale id's per axis.\n  Object.keys(configScales).forEach(id => {\n    const scaleConf = configScales[id];\n    if (!isObject(scaleConf)) {\n      return console.error(`Invalid scale configuration for scale: ${id}`);\n    }\n    if (scaleConf._proxy) {\n      return console.warn(`Ignoring resolver passed as options for scale: ${id}`);\n    }\n    const axis = determineAxis(id, scaleConf, retrieveAxisFromDatasets(id, config), defaults.scales[scaleConf.type]);\n    const defaultId = getDefaultScaleIDFromAxis(axis, chartIndexAxis);\n    const defaultScaleOptions = chartDefaults.scales || {};\n    scales[id] = mergeIf(Object.create(null), [{axis}, scaleConf, defaultScaleOptions[axis], defaultScaleOptions[defaultId]]);\n  });\n\n  // Then merge dataset defaults to scale configs\n  config.data.datasets.forEach(dataset => {\n    const type = dataset.type || config.type;\n    const indexAxis = dataset.indexAxis || getIndexAxis(type, options);\n    const datasetDefaults = overrides[type] || {};\n    const defaultScaleOptions = datasetDefaults.scales || {};\n    Object.keys(defaultScaleOptions).forEach(defaultID => {\n      const axis = getAxisFromDefaultScaleID(defaultID, indexAxis);\n      const id = dataset[axis + 'AxisID'] || axis;\n      scales[id] = scales[id] || Object.create(null);\n      mergeIf(scales[id], [{axis}, configScales[id], defaultScaleOptions[defaultID]]);\n    });\n  });\n\n  // apply scale defaults, if not overridden by dataset defaults\n  Object.keys(scales).forEach(key => {\n    const scale = scales[key];\n    mergeIf(scale, [defaults.scales[scale.type], defaults.scale]);\n  });\n\n  return scales;\n}\n\nfunction initOptions(config) {\n  const options = config.options || (config.options = {});\n\n  options.plugins = valueOrDefault(options.plugins, {});\n  options.scales = mergeScaleConfig(config, options);\n}\n\nfunction initData(data) {\n  data = data || {};\n  data.datasets = data.datasets || [];\n  data.labels = data.labels || [];\n  return data;\n}\n\nfunction initConfig(config) {\n  config = config || {};\n  config.data = initData(config.data);\n\n  initOptions(config);\n\n  return config;\n}\n\nconst keyCache = new Map();\nconst keysCached = new Set();\n\nfunction cachedKeys(cacheKey, generate) {\n  let keys = keyCache.get(cacheKey);\n  if (!keys) {\n    keys = generate();\n    keyCache.set(cacheKey, keys);\n    keysCached.add(keys);\n  }\n  return keys;\n}\n\nconst addIfFound = (set, obj, key) => {\n  const opts = resolveObjectKey(obj, key);\n  if (opts !== undefined) {\n    set.add(opts);\n  }\n};\n\nexport default class Config {\n  constructor(config) {\n    this._config = initConfig(config);\n    this._scopeCache = new Map();\n    this._resolverCache = new Map();\n  }\n\n  get platform() {\n    return this._config.platform;\n  }\n\n  get type() {\n    return this._config.type;\n  }\n\n  set type(type) {\n    this._config.type = type;\n  }\n\n  get data() {\n    return this._config.data;\n  }\n\n  set data(data) {\n    this._config.data = initData(data);\n  }\n\n  get options() {\n    return this._config.options;\n  }\n\n  set options(options) {\n    this._config.options = options;\n  }\n\n  get plugins() {\n    return this._config.plugins;\n  }\n\n  update() {\n    const config = this._config;\n    this.clearCache();\n    initOptions(config);\n  }\n\n  clearCache() {\n    this._scopeCache.clear();\n    this._resolverCache.clear();\n  }\n\n  /**\n   * Returns the option scope keys for resolving dataset options.\n   * These keys do not include the dataset itself, because it is not under options.\n   * @param {string} datasetType\n   * @return {string[][]}\n   */\n  datasetScopeKeys(datasetType) {\n    return cachedKeys(datasetType,\n      () => [[\n        `datasets.${datasetType}`,\n        ''\n      ]]);\n  }\n\n  /**\n   * Returns the option scope keys for resolving dataset animation options.\n   * These keys do not include the dataset itself, because it is not under options.\n   * @param {string} datasetType\n   * @param {string} transition\n   * @return {string[][]}\n   */\n  datasetAnimationScopeKeys(datasetType, transition) {\n    return cachedKeys(`${datasetType}.transition.${transition}`,\n      () => [\n        [\n          `datasets.${datasetType}.transitions.${transition}`,\n          `transitions.${transition}`,\n        ],\n        // The following are used for looking up the `animations` and `animation` keys\n        [\n          `datasets.${datasetType}`,\n          ''\n        ]\n      ]);\n  }\n\n  /**\n   * Returns the options scope keys for resolving element options that belong\n   * to an dataset. These keys do not include the dataset itself, because it\n   * is not under options.\n   * @param {string} datasetType\n   * @param {string} elementType\n   * @return {string[][]}\n   */\n  datasetElementScopeKeys(datasetType, elementType) {\n    return cachedKeys(`${datasetType}-${elementType}`,\n      () => [[\n        `datasets.${datasetType}.elements.${elementType}`,\n        `datasets.${datasetType}`,\n        `elements.${elementType}`,\n        ''\n      ]]);\n  }\n\n  /**\n   * Returns the options scope keys for resolving plugin options.\n   * @param {{id: string, additionalOptionScopes?: string[]}} plugin\n   * @return {string[][]}\n   */\n  pluginScopeKeys(plugin) {\n    const id = plugin.id;\n    const type = this.type;\n    return cachedKeys(`${type}-plugin-${id}`,\n      () => [[\n        `plugins.${id}`,\n        ...plugin.additionalOptionScopes || [],\n      ]]);\n  }\n\n  /**\n   * @private\n   */\n  _cachedScopes(mainScope, resetCache) {\n    const _scopeCache = this._scopeCache;\n    let cache = _scopeCache.get(mainScope);\n    if (!cache || resetCache) {\n      cache = new Map();\n      _scopeCache.set(mainScope, cache);\n    }\n    return cache;\n  }\n\n  /**\n   * Resolves the objects from options and defaults for option value resolution.\n   * @param {object} mainScope - The main scope object for options\n   * @param {string[][]} keyLists - The arrays of keys in resolution order\n   * @param {boolean} [resetCache] - reset the cache for this mainScope\n   */\n  getOptionScopes(mainScope, keyLists, resetCache) {\n    const {options, type} = this;\n    const cache = this._cachedScopes(mainScope, resetCache);\n    const cached = cache.get(keyLists);\n    if (cached) {\n      return cached;\n    }\n\n    const scopes = new Set();\n\n    keyLists.forEach(keys => {\n      if (mainScope) {\n        scopes.add(mainScope);\n        keys.forEach(key => addIfFound(scopes, mainScope, key));\n      }\n      keys.forEach(key => addIfFound(scopes, options, key));\n      keys.forEach(key => addIfFound(scopes, overrides[type] || {}, key));\n      keys.forEach(key => addIfFound(scopes, defaults, key));\n      keys.forEach(key => addIfFound(scopes, descriptors, key));\n    });\n\n    const array = Array.from(scopes);\n    if (array.length === 0) {\n      array.push(Object.create(null));\n    }\n    if (keysCached.has(keyLists)) {\n      cache.set(keyLists, array);\n    }\n    return array;\n  }\n\n  /**\n   * Returns the option scopes for resolving chart options\n   * @return {object[]}\n   */\n  chartOptionScopes() {\n    const {options, type} = this;\n\n    return [\n      options,\n      overrides[type] || {},\n      defaults.datasets[type] || {}, // https://github.com/chartjs/Chart.js/issues/8531\n      {type},\n      defaults,\n      descriptors\n    ];\n  }\n\n  /**\n   * @param {object[]} scopes\n   * @param {string[]} names\n   * @param {function|object} context\n   * @param {string[]} [prefixes]\n   * @return {object}\n   */\n  resolveNamedOptions(scopes, names, context, prefixes = ['']) {\n    const result = {$shared: true};\n    const {resolver, subPrefixes} = getResolver(this._resolverCache, scopes, prefixes);\n    let options = resolver;\n    if (needContext(resolver, names)) {\n      result.$shared = false;\n      context = isFunction(context) ? context() : context;\n      // subResolver is passed to scriptable options. It should not resolve to hover options.\n      const subResolver = this.createResolver(scopes, context, subPrefixes);\n      options = _attachContext(resolver, context, subResolver);\n    }\n\n    for (const prop of names) {\n      result[prop] = options[prop];\n    }\n    return result;\n  }\n\n  /**\n   * @param {object[]} scopes\n   * @param {object} [context]\n   * @param {string[]} [prefixes]\n   * @param {{scriptable: boolean, indexable: boolean, allKeys?: boolean}} [descriptorDefaults]\n   */\n  createResolver(scopes, context, prefixes = [''], descriptorDefaults) {\n    const {resolver} = getResolver(this._resolverCache, scopes, prefixes);\n    return isObject(context)\n      ? _attachContext(resolver, context, undefined, descriptorDefaults)\n      : resolver;\n  }\n}\n\nfunction getResolver(resolverCache, scopes, prefixes) {\n  let cache = resolverCache.get(scopes);\n  if (!cache) {\n    cache = new Map();\n    resolverCache.set(scopes, cache);\n  }\n  const cacheKey = prefixes.join();\n  let cached = cache.get(cacheKey);\n  if (!cached) {\n    const resolver = _createResolver(scopes, prefixes);\n    cached = {\n      resolver,\n      subPrefixes: prefixes.filter(p => !p.toLowerCase().includes('hover'))\n    };\n    cache.set(cacheKey, cached);\n  }\n  return cached;\n}\n\nconst hasFunction = value => isObject(value)\n  && Object.getOwnPropertyNames(value).some((key) => isFunction(value[key]));\n\nfunction needContext(proxy, names) {\n  const {isScriptable, isIndexable} = _descriptors(proxy);\n\n  for (const prop of names) {\n    const scriptable = isScriptable(prop);\n    const indexable = isIndexable(prop);\n    const value = (indexable || scriptable) && proxy[prop];\n    if ((scriptable && (isFunction(value) || hasFunction(value)))\n      || (indexable && isArray(value))) {\n      return true;\n    }\n  }\n  return false;\n}\n","import animator from './core.animator.js';\nimport defaults, {overrides} from './core.defaults.js';\nimport Interaction from './core.interaction.js';\nimport layouts from './core.layouts.js';\nimport {_detectPlatform} from '../platform/index.js';\nimport PluginService from './core.plugins.js';\nimport registry from './core.registry.js';\nimport Config, {determineAxis, getIndexAxis} from './core.config.js';\nimport {retinaScale, _isDomSupported} from '../helpers/helpers.dom.js';\nimport {each, callback as callCallback, uid, valueOrDefault, _elementsEqual, isNullOrUndef, setsEqual, defined, isFunction, _isClickEvent} from '../helpers/helpers.core.js';\nimport {clearCanvas, clipArea, createContext, unclipArea, _isPointInArea} from '../helpers/index.js';\n// @ts-ignore\nimport {version} from '../../package.json';\nimport {debounce} from '../helpers/helpers.extras.js';\n\n/**\n * @typedef { import('../types/index.js').ChartEvent } ChartEvent\n * @typedef { import('../types/index.js').Point } Point\n */\n\nconst KNOWN_POSITIONS = ['top', 'bottom', 'left', 'right', 'chartArea'];\nfunction positionIsHorizontal(position, axis) {\n  return position === 'top' || position === 'bottom' || (KNOWN_POSITIONS.indexOf(position) === -1 && axis === 'x');\n}\n\nfunction compare2Level(l1, l2) {\n  return function(a, b) {\n    return a[l1] === b[l1]\n      ? a[l2] - b[l2]\n      : a[l1] - b[l1];\n  };\n}\n\nfunction onAnimationsComplete(context) {\n  const chart = context.chart;\n  const animationOptions = chart.options.animation;\n\n  chart.notifyPlugins('afterRender');\n  callCallback(animationOptions && animationOptions.onComplete, [context], chart);\n}\n\nfunction onAnimationProgress(context) {\n  const chart = context.chart;\n  const animationOptions = chart.options.animation;\n  callCallback(animationOptions && animationOptions.onProgress, [context], chart);\n}\n\n/**\n * Chart.js can take a string id of a canvas element, a 2d context, or a canvas element itself.\n * Attempt to unwrap the item passed into the chart constructor so that it is a canvas element (if possible).\n */\nfunction getCanvas(item) {\n  if (_isDomSupported() && typeof item === 'string') {\n    item = document.getElementById(item);\n  } else if (item && item.length) {\n    // Support for array based queries (such as jQuery)\n    item = item[0];\n  }\n\n  if (item && item.canvas) {\n    // Support for any object associated to a canvas (including a context2d)\n    item = item.canvas;\n  }\n  return item;\n}\n\nconst instances = {};\nconst getChart = (key) => {\n  const canvas = getCanvas(key);\n  return Object.values(instances).filter((c) => c.canvas === canvas).pop();\n};\n\nfunction moveNumericKeys(obj, start, move) {\n  const keys = Object.keys(obj);\n  for (const key of keys) {\n    const intKey = +key;\n    if (intKey >= start) {\n      const value = obj[key];\n      delete obj[key];\n      if (move > 0 || intKey > start) {\n        obj[intKey + move] = value;\n      }\n    }\n  }\n}\n\n/**\n * @param {ChartEvent} e\n * @param {ChartEvent|null} lastEvent\n * @param {boolean} inChartArea\n * @param {boolean} isClick\n * @returns {ChartEvent|null}\n */\nfunction determineLastEvent(e, lastEvent, inChartArea, isClick) {\n  if (!inChartArea || e.type === 'mouseout') {\n    return null;\n  }\n  if (isClick) {\n    return lastEvent;\n  }\n  return e;\n}\n\nfunction getSizeForArea(scale, chartArea, field) {\n  return scale.options.clip ? scale[field] : chartArea[field];\n}\n\nfunction getDatasetArea(meta, chartArea) {\n  const {xScale, yScale} = meta;\n  if (xScale && yScale) {\n    return {\n      left: getSizeForArea(xScale, chartArea, 'left'),\n      right: getSizeForArea(xScale, chartArea, 'right'),\n      top: getSizeForArea(yScale, chartArea, 'top'),\n      bottom: getSizeForArea(yScale, chartArea, 'bottom')\n    };\n  }\n  return chartArea;\n}\n\nclass Chart {\n\n  static defaults = defaults;\n  static instances = instances;\n  static overrides = overrides;\n  static registry = registry;\n  static version = version;\n  static getChart = getChart;\n\n  static register(...items) {\n    registry.add(...items);\n    invalidatePlugins();\n  }\n\n  static unregister(...items) {\n    registry.remove(...items);\n    invalidatePlugins();\n  }\n\n  // eslint-disable-next-line max-statements\n  constructor(item, userConfig) {\n    const config = this.config = new Config(userConfig);\n    const initialCanvas = getCanvas(item);\n    const existingChart = getChart(initialCanvas);\n    if (existingChart) {\n      throw new Error(\n        'Canvas is already in use. Chart with ID \\'' + existingChart.id + '\\'' +\n\t\t\t\t' must be destroyed before the canvas with ID \\'' + existingChart.canvas.id + '\\' can be reused.'\n      );\n    }\n\n    const options = config.createResolver(config.chartOptionScopes(), this.getContext());\n\n    this.platform = new (config.platform || _detectPlatform(initialCanvas))();\n    this.platform.updateConfig(config);\n\n    const context = this.platform.acquireContext(initialCanvas, options.aspectRatio);\n    const canvas = context && context.canvas;\n    const height = canvas && canvas.height;\n    const width = canvas && canvas.width;\n\n    this.id = uid();\n    this.ctx = context;\n    this.canvas = canvas;\n    this.width = width;\n    this.height = height;\n    this._options = options;\n    // Store the previously used aspect ratio to determine if a resize\n    // is needed during updates. Do this after _options is set since\n    // aspectRatio uses a getter\n    this._aspectRatio = this.aspectRatio;\n    this._layers = [];\n    this._metasets = [];\n    this._stacks = undefined;\n    this.boxes = [];\n    this.currentDevicePixelRatio = undefined;\n    this.chartArea = undefined;\n    this._active = [];\n    this._lastEvent = undefined;\n    this._listeners = {};\n    /** @type {?{attach?: function, detach?: function, resize?: function}} */\n    this._responsiveListeners = undefined;\n    this._sortedMetasets = [];\n    this.scales = {};\n    this._plugins = new PluginService();\n    this.$proxies = {};\n    this._hiddenIndices = {};\n    this.attached = false;\n    this._animationsDisabled = undefined;\n    this.$context = undefined;\n    this._doResize = debounce(mode => this.update(mode), options.resizeDelay || 0);\n    this._dataChanges = [];\n\n    // Add the chart instance to the global namespace\n    instances[this.id] = this;\n\n    if (!context || !canvas) {\n      // The given item is not a compatible context2d element, let's return before finalizing\n      // the chart initialization but after setting basic chart / controller properties that\n      // can help to figure out that the chart is not valid (e.g chart.canvas !== null);\n      // https://github.com/chartjs/Chart.js/issues/2807\n      console.error(\"Failed to create chart: can't acquire context from the given item\");\n      return;\n    }\n\n    animator.listen(this, 'complete', onAnimationsComplete);\n    animator.listen(this, 'progress', onAnimationProgress);\n\n    this._initialize();\n    if (this.attached) {\n      this.update();\n    }\n  }\n\n  get aspectRatio() {\n    const {options: {aspectRatio, maintainAspectRatio}, width, height, _aspectRatio} = this;\n    if (!isNullOrUndef(aspectRatio)) {\n      // If aspectRatio is defined in options, use that.\n      return aspectRatio;\n    }\n\n    if (maintainAspectRatio && _aspectRatio) {\n      // If maintainAspectRatio is truthly and we had previously determined _aspectRatio, use that\n      return _aspectRatio;\n    }\n\n    // Calculate\n    return height ? width / height : null;\n  }\n\n  get data() {\n    return this.config.data;\n  }\n\n  set data(data) {\n    this.config.data = data;\n  }\n\n  get options() {\n    return this._options;\n  }\n\n  set options(options) {\n    this.config.options = options;\n  }\n\n  get registry() {\n    return registry;\n  }\n\n  /**\n\t * @private\n\t */\n  _initialize() {\n    // Before init plugin notification\n    this.notifyPlugins('beforeInit');\n\n    if (this.options.responsive) {\n      this.resize();\n    } else {\n      retinaScale(this, this.options.devicePixelRatio);\n    }\n\n    this.bindEvents();\n\n    // After init plugin notification\n    this.notifyPlugins('afterInit');\n\n    return this;\n  }\n\n  clear() {\n    clearCanvas(this.canvas, this.ctx);\n    return this;\n  }\n\n  stop() {\n    animator.stop(this);\n    return this;\n  }\n\n  /**\n\t * Resize the chart to its container or to explicit dimensions.\n\t * @param {number} [width]\n\t * @param {number} [height]\n\t */\n  resize(width, height) {\n    if (!animator.running(this)) {\n      this._resize(width, height);\n    } else {\n      this._resizeBeforeDraw = {width, height};\n    }\n  }\n\n  _resize(width, height) {\n    const options = this.options;\n    const canvas = this.canvas;\n    const aspectRatio = options.maintainAspectRatio && this.aspectRatio;\n    const newSize = this.platform.getMaximumSize(canvas, width, height, aspectRatio);\n    const newRatio = options.devicePixelRatio || this.platform.getDevicePixelRatio();\n    const mode = this.width ? 'resize' : 'attach';\n\n    this.width = newSize.width;\n    this.height = newSize.height;\n    this._aspectRatio = this.aspectRatio;\n    if (!retinaScale(this, newRatio, true)) {\n      return;\n    }\n\n    this.notifyPlugins('resize', {size: newSize});\n\n    callCallback(options.onResize, [this, newSize], this);\n\n    if (this.attached) {\n      if (this._doResize(mode)) {\n        // The resize update is delayed, only draw without updating.\n        this.render();\n      }\n    }\n  }\n\n  ensureScalesHaveIDs() {\n    const options = this.options;\n    const scalesOptions = options.scales || {};\n\n    each(scalesOptions, (axisOptions, axisID) => {\n      axisOptions.id = axisID;\n    });\n  }\n\n  /**\n\t * Builds a map of scale ID to scale object for future lookup.\n\t */\n  buildOrUpdateScales() {\n    const options = this.options;\n    const scaleOpts = options.scales;\n    const scales = this.scales;\n    const updated = Object.keys(scales).reduce((obj, id) => {\n      obj[id] = false;\n      return obj;\n    }, {});\n    let items = [];\n\n    if (scaleOpts) {\n      items = items.concat(\n        Object.keys(scaleOpts).map((id) => {\n          const scaleOptions = scaleOpts[id];\n          const axis = determineAxis(id, scaleOptions);\n          const isRadial = axis === 'r';\n          const isHorizontal = axis === 'x';\n          return {\n            options: scaleOptions,\n            dposition: isRadial ? 'chartArea' : isHorizontal ? 'bottom' : 'left',\n            dtype: isRadial ? 'radialLinear' : isHorizontal ? 'category' : 'linear'\n          };\n        })\n      );\n    }\n\n    each(items, (item) => {\n      const scaleOptions = item.options;\n      const id = scaleOptions.id;\n      const axis = determineAxis(id, scaleOptions);\n      const scaleType = valueOrDefault(scaleOptions.type, item.dtype);\n\n      if (scaleOptions.position === undefined || positionIsHorizontal(scaleOptions.position, axis) !== positionIsHorizontal(item.dposition)) {\n        scaleOptions.position = item.dposition;\n      }\n\n      updated[id] = true;\n      let scale = null;\n      if (id in scales && scales[id].type === scaleType) {\n        scale = scales[id];\n      } else {\n        const scaleClass = registry.getScale(scaleType);\n        scale = new scaleClass({\n          id,\n          type: scaleType,\n          ctx: this.ctx,\n          chart: this\n        });\n        scales[scale.id] = scale;\n      }\n\n      scale.init(scaleOptions, options);\n    });\n    // clear up discarded scales\n    each(updated, (hasUpdated, id) => {\n      if (!hasUpdated) {\n        delete scales[id];\n      }\n    });\n\n    each(scales, (scale) => {\n      layouts.configure(this, scale, scale.options);\n      layouts.addBox(this, scale);\n    });\n  }\n\n  /**\n\t * @private\n\t */\n  _updateMetasets() {\n    const metasets = this._metasets;\n    const numData = this.data.datasets.length;\n    const numMeta = metasets.length;\n\n    metasets.sort((a, b) => a.index - b.index);\n    if (numMeta > numData) {\n      for (let i = numData; i < numMeta; ++i) {\n        this._destroyDatasetMeta(i);\n      }\n      metasets.splice(numData, numMeta - numData);\n    }\n    this._sortedMetasets = metasets.slice(0).sort(compare2Level('order', 'index'));\n  }\n\n  /**\n\t * @private\n\t */\n  _removeUnreferencedMetasets() {\n    const {_metasets: metasets, data: {datasets}} = this;\n    if (metasets.length > datasets.length) {\n      delete this._stacks;\n    }\n    metasets.forEach((meta, index) => {\n      if (datasets.filter(x => x === meta._dataset).length === 0) {\n        this._destroyDatasetMeta(index);\n      }\n    });\n  }\n\n  buildOrUpdateControllers() {\n    const newControllers = [];\n    const datasets = this.data.datasets;\n    let i, ilen;\n\n    this._removeUnreferencedMetasets();\n\n    for (i = 0, ilen = datasets.length; i < ilen; i++) {\n      const dataset = datasets[i];\n      let meta = this.getDatasetMeta(i);\n      const type = dataset.type || this.config.type;\n\n      if (meta.type && meta.type !== type) {\n        this._destroyDatasetMeta(i);\n        meta = this.getDatasetMeta(i);\n      }\n      meta.type = type;\n      meta.indexAxis = dataset.indexAxis || getIndexAxis(type, this.options);\n      meta.order = dataset.order || 0;\n      meta.index = i;\n      meta.label = '' + dataset.label;\n      meta.visible = this.isDatasetVisible(i);\n\n      if (meta.controller) {\n        meta.controller.updateIndex(i);\n        meta.controller.linkScales();\n      } else {\n        const ControllerClass = registry.getController(type);\n        const {datasetElementType, dataElementType} = defaults.datasets[type];\n        Object.assign(ControllerClass, {\n          dataElementType: registry.getElement(dataElementType),\n          datasetElementType: datasetElementType && registry.getElement(datasetElementType)\n        });\n        meta.controller = new ControllerClass(this, i);\n        newControllers.push(meta.controller);\n      }\n    }\n\n    this._updateMetasets();\n    return newControllers;\n  }\n\n  /**\n\t * Reset the elements of all datasets\n\t * @private\n\t */\n  _resetElements() {\n    each(this.data.datasets, (dataset, datasetIndex) => {\n      this.getDatasetMeta(datasetIndex).controller.reset();\n    }, this);\n  }\n\n  /**\n\t* Resets the chart back to its state before the initial animation\n\t*/\n  reset() {\n    this._resetElements();\n    this.notifyPlugins('reset');\n  }\n\n  update(mode) {\n    const config = this.config;\n\n    config.update();\n    const options = this._options = config.createResolver(config.chartOptionScopes(), this.getContext());\n    const animsDisabled = this._animationsDisabled = !options.animation;\n\n    this._updateScales();\n    this._checkEventBindings();\n    this._updateHiddenIndices();\n\n    // plugins options references might have change, let's invalidate the cache\n    // https://github.com/chartjs/Chart.js/issues/5111#issuecomment-355934167\n    this._plugins.invalidate();\n\n    if (this.notifyPlugins('beforeUpdate', {mode, cancelable: true}) === false) {\n      return;\n    }\n\n    // Make sure dataset controllers are updated and new controllers are reset\n    const newControllers = this.buildOrUpdateControllers();\n\n    this.notifyPlugins('beforeElementsUpdate');\n\n    // Make sure all dataset controllers have correct meta data counts\n    let minPadding = 0;\n    for (let i = 0, ilen = this.data.datasets.length; i < ilen; i++) {\n      const {controller} = this.getDatasetMeta(i);\n      const reset = !animsDisabled && newControllers.indexOf(controller) === -1;\n      // New controllers will be reset after the layout pass, so we only want to modify\n      // elements added to new datasets\n      controller.buildOrUpdateElements(reset);\n      minPadding = Math.max(+controller.getMaxOverflow(), minPadding);\n    }\n    minPadding = this._minPadding = options.layout.autoPadding ? minPadding : 0;\n    this._updateLayout(minPadding);\n\n    // Only reset the controllers if we have animations\n    if (!animsDisabled) {\n      // Can only reset the new controllers after the scales have been updated\n      // Reset is done to get the starting point for the initial animation\n      each(newControllers, (controller) => {\n        controller.reset();\n      });\n    }\n\n    this._updateDatasets(mode);\n\n    // Do this before render so that any plugins that need final scale updates can use it\n    this.notifyPlugins('afterUpdate', {mode});\n\n    this._layers.sort(compare2Level('z', '_idx'));\n\n    // Replay last event from before update, or set hover styles on active elements\n    const {_active, _lastEvent} = this;\n    if (_lastEvent) {\n      this._eventHandler(_lastEvent, true);\n    } else if (_active.length) {\n      this._updateHoverStyles(_active, _active, true);\n    }\n\n    this.render();\n  }\n\n  /**\n   * @private\n   */\n  _updateScales() {\n    each(this.scales, (scale) => {\n      layouts.removeBox(this, scale);\n    });\n\n    this.ensureScalesHaveIDs();\n    this.buildOrUpdateScales();\n  }\n\n  /**\n   * @private\n   */\n  _checkEventBindings() {\n    const options = this.options;\n    const existingEvents = new Set(Object.keys(this._listeners));\n    const newEvents = new Set(options.events);\n\n    if (!setsEqual(existingEvents, newEvents) || !!this._responsiveListeners !== options.responsive) {\n      // The configured events have changed. Rebind.\n      this.unbindEvents();\n      this.bindEvents();\n    }\n  }\n\n  /**\n   * @private\n   */\n  _updateHiddenIndices() {\n    const {_hiddenIndices} = this;\n    const changes = this._getUniformDataChanges() || [];\n    for (const {method, start, count} of changes) {\n      const move = method === '_removeElements' ? -count : count;\n      moveNumericKeys(_hiddenIndices, start, move);\n    }\n  }\n\n  /**\n   * @private\n   */\n  _getUniformDataChanges() {\n    const _dataChanges = this._dataChanges;\n    if (!_dataChanges || !_dataChanges.length) {\n      return;\n    }\n\n    this._dataChanges = [];\n    const datasetCount = this.data.datasets.length;\n    const makeSet = (idx) => new Set(\n      _dataChanges\n        .filter(c => c[0] === idx)\n        .map((c, i) => i + ',' + c.splice(1).join(','))\n    );\n\n    const changeSet = makeSet(0);\n    for (let i = 1; i < datasetCount; i++) {\n      if (!setsEqual(changeSet, makeSet(i))) {\n        return;\n      }\n    }\n    return Array.from(changeSet)\n      .map(c => c.split(','))\n      .map(a => ({method: a[1], start: +a[2], count: +a[3]}));\n  }\n\n  /**\n\t * Updates the chart layout unless a plugin returns `false` to the `beforeLayout`\n\t * hook, in which case, plugins will not be called on `afterLayout`.\n\t * @private\n\t */\n  _updateLayout(minPadding) {\n    if (this.notifyPlugins('beforeLayout', {cancelable: true}) === false) {\n      return;\n    }\n\n    layouts.update(this, this.width, this.height, minPadding);\n\n    const area = this.chartArea;\n    const noArea = area.width <= 0 || area.height <= 0;\n\n    this._layers = [];\n    each(this.boxes, (box) => {\n      if (noArea && box.position === 'chartArea') {\n        // Skip drawing and configuring chartArea boxes when chartArea is zero or negative\n        return;\n      }\n\n      // configure is called twice, once in core.scale.update and once here.\n      // Here the boxes are fully updated and at their final positions.\n      if (box.configure) {\n        box.configure();\n      }\n      this._layers.push(...box._layers());\n    }, this);\n\n    this._layers.forEach((item, index) => {\n      item._idx = index;\n    });\n\n    this.notifyPlugins('afterLayout');\n  }\n\n  /**\n\t * Updates all datasets unless a plugin returns `false` to the `beforeDatasetsUpdate`\n\t * hook, in which case, plugins will not be called on `afterDatasetsUpdate`.\n\t * @private\n\t */\n  _updateDatasets(mode) {\n    if (this.notifyPlugins('beforeDatasetsUpdate', {mode, cancelable: true}) === false) {\n      return;\n    }\n\n    for (let i = 0, ilen = this.data.datasets.length; i < ilen; ++i) {\n      this.getDatasetMeta(i).controller.configure();\n    }\n\n    for (let i = 0, ilen = this.data.datasets.length; i < ilen; ++i) {\n      this._updateDataset(i, isFunction(mode) ? mode({datasetIndex: i}) : mode);\n    }\n\n    this.notifyPlugins('afterDatasetsUpdate', {mode});\n  }\n\n  /**\n\t * Updates dataset at index unless a plugin returns `false` to the `beforeDatasetUpdate`\n\t * hook, in which case, plugins will not be called on `afterDatasetUpdate`.\n\t * @private\n\t */\n  _updateDataset(index, mode) {\n    const meta = this.getDatasetMeta(index);\n    const args = {meta, index, mode, cancelable: true};\n\n    if (this.notifyPlugins('beforeDatasetUpdate', args) === false) {\n      return;\n    }\n\n    meta.controller._update(mode);\n\n    args.cancelable = false;\n    this.notifyPlugins('afterDatasetUpdate', args);\n  }\n\n  render() {\n    if (this.notifyPlugins('beforeRender', {cancelable: true}) === false) {\n      return;\n    }\n\n    if (animator.has(this)) {\n      if (this.attached && !animator.running(this)) {\n        animator.start(this);\n      }\n    } else {\n      this.draw();\n      onAnimationsComplete({chart: this});\n    }\n  }\n\n  draw() {\n    let i;\n    if (this._resizeBeforeDraw) {\n      const {width, height} = this._resizeBeforeDraw;\n      this._resize(width, height);\n      this._resizeBeforeDraw = null;\n    }\n    this.clear();\n\n    if (this.width <= 0 || this.height <= 0) {\n      return;\n    }\n\n    if (this.notifyPlugins('beforeDraw', {cancelable: true}) === false) {\n      return;\n    }\n\n    // Because of plugin hooks (before/afterDatasetsDraw), datasets can't\n    // currently be part of layers. Instead, we draw\n    // layers <= 0 before(default, backward compat), and the rest after\n    const layers = this._layers;\n    for (i = 0; i < layers.length && layers[i].z <= 0; ++i) {\n      layers[i].draw(this.chartArea);\n    }\n\n    this._drawDatasets();\n\n    // Rest of layers\n    for (; i < layers.length; ++i) {\n      layers[i].draw(this.chartArea);\n    }\n\n    this.notifyPlugins('afterDraw');\n  }\n\n  /**\n\t * @private\n\t */\n  _getSortedDatasetMetas(filterVisible) {\n    const metasets = this._sortedMetasets;\n    const result = [];\n    let i, ilen;\n\n    for (i = 0, ilen = metasets.length; i < ilen; ++i) {\n      const meta = metasets[i];\n      if (!filterVisible || meta.visible) {\n        result.push(meta);\n      }\n    }\n\n    return result;\n  }\n\n  /**\n\t * Gets the visible dataset metas in drawing order\n\t * @return {object[]}\n\t */\n  getSortedVisibleDatasetMetas() {\n    return this._getSortedDatasetMetas(true);\n  }\n\n  /**\n\t * Draws all datasets unless a plugin returns `false` to the `beforeDatasetsDraw`\n\t * hook, in which case, plugins will not be called on `afterDatasetsDraw`.\n\t * @private\n\t */\n  _drawDatasets() {\n    if (this.notifyPlugins('beforeDatasetsDraw', {cancelable: true}) === false) {\n      return;\n    }\n\n    const metasets = this.getSortedVisibleDatasetMetas();\n    for (let i = metasets.length - 1; i >= 0; --i) {\n      this._drawDataset(metasets[i]);\n    }\n\n    this.notifyPlugins('afterDatasetsDraw');\n  }\n\n  /**\n\t * Draws dataset at index unless a plugin returns `false` to the `beforeDatasetDraw`\n\t * hook, in which case, plugins will not be called on `afterDatasetDraw`.\n\t * @private\n\t */\n  _drawDataset(meta) {\n    const ctx = this.ctx;\n    const clip = meta._clip;\n    const useClip = !clip.disabled;\n    const area = getDatasetArea(meta, this.chartArea);\n    const args = {\n      meta,\n      index: meta.index,\n      cancelable: true\n    };\n\n    if (this.notifyPlugins('beforeDatasetDraw', args) === false) {\n      return;\n    }\n\n    if (useClip) {\n      clipArea(ctx, {\n        left: clip.left === false ? 0 : area.left - clip.left,\n        right: clip.right === false ? this.width : area.right + clip.right,\n        top: clip.top === false ? 0 : area.top - clip.top,\n        bottom: clip.bottom === false ? this.height : area.bottom + clip.bottom\n      });\n    }\n\n    meta.controller.draw();\n\n    if (useClip) {\n      unclipArea(ctx);\n    }\n\n    args.cancelable = false;\n    this.notifyPlugins('afterDatasetDraw', args);\n  }\n\n  /**\n   * Checks whether the given point is in the chart area.\n   * @param {Point} point - in relative coordinates (see, e.g., getRelativePosition)\n   * @returns {boolean}\n   */\n  isPointInArea(point) {\n    return _isPointInArea(point, this.chartArea, this._minPadding);\n  }\n\n  getElementsAtEventForMode(e, mode, options, useFinalPosition) {\n    const method = Interaction.modes[mode];\n    if (typeof method === 'function') {\n      return method(this, e, options, useFinalPosition);\n    }\n\n    return [];\n  }\n\n  getDatasetMeta(datasetIndex) {\n    const dataset = this.data.datasets[datasetIndex];\n    const metasets = this._metasets;\n    let meta = metasets.filter(x => x && x._dataset === dataset).pop();\n\n    if (!meta) {\n      meta = {\n        type: null,\n        data: [],\n        dataset: null,\n        controller: null,\n        hidden: null,\t\t\t// See isDatasetVisible() comment\n        xAxisID: null,\n        yAxisID: null,\n        order: dataset && dataset.order || 0,\n        index: datasetIndex,\n        _dataset: dataset,\n        _parsed: [],\n        _sorted: false\n      };\n      metasets.push(meta);\n    }\n\n    return meta;\n  }\n\n  getContext() {\n    return this.$context || (this.$context = createContext(null, {chart: this, type: 'chart'}));\n  }\n\n  getVisibleDatasetCount() {\n    return this.getSortedVisibleDatasetMetas().length;\n  }\n\n  isDatasetVisible(datasetIndex) {\n    const dataset = this.data.datasets[datasetIndex];\n    if (!dataset) {\n      return false;\n    }\n\n    const meta = this.getDatasetMeta(datasetIndex);\n\n    // meta.hidden is a per chart dataset hidden flag override with 3 states: if true or false,\n    // the dataset.hidden value is ignored, else if null, the dataset hidden state is returned.\n    return typeof meta.hidden === 'boolean' ? !meta.hidden : !dataset.hidden;\n  }\n\n  setDatasetVisibility(datasetIndex, visible) {\n    const meta = this.getDatasetMeta(datasetIndex);\n    meta.hidden = !visible;\n  }\n\n  toggleDataVisibility(index) {\n    this._hiddenIndices[index] = !this._hiddenIndices[index];\n  }\n\n  getDataVisibility(index) {\n    return !this._hiddenIndices[index];\n  }\n\n  /**\n\t * @private\n\t */\n  _updateVisibility(datasetIndex, dataIndex, visible) {\n    const mode = visible ? 'show' : 'hide';\n    const meta = this.getDatasetMeta(datasetIndex);\n    const anims = meta.controller._resolveAnimations(undefined, mode);\n\n    if (defined(dataIndex)) {\n      meta.data[dataIndex].hidden = !visible;\n      this.update();\n    } else {\n      this.setDatasetVisibility(datasetIndex, visible);\n      // Animate visible state, so hide animation can be seen. This could be handled better if update / updateDataset returned a Promise.\n      anims.update(meta, {visible});\n      this.update((ctx) => ctx.datasetIndex === datasetIndex ? mode : undefined);\n    }\n  }\n\n  hide(datasetIndex, dataIndex) {\n    this._updateVisibility(datasetIndex, dataIndex, false);\n  }\n\n  show(datasetIndex, dataIndex) {\n    this._updateVisibility(datasetIndex, dataIndex, true);\n  }\n\n  /**\n\t * @private\n\t */\n  _destroyDatasetMeta(datasetIndex) {\n    const meta = this._metasets[datasetIndex];\n    if (meta && meta.controller) {\n      meta.controller._destroy();\n    }\n    delete this._metasets[datasetIndex];\n  }\n\n  _stop() {\n    let i, ilen;\n    this.stop();\n    animator.remove(this);\n\n    for (i = 0, ilen = this.data.datasets.length; i < ilen; ++i) {\n      this._destroyDatasetMeta(i);\n    }\n  }\n\n  destroy() {\n    this.notifyPlugins('beforeDestroy');\n    const {canvas, ctx} = this;\n\n    this._stop();\n    this.config.clearCache();\n\n    if (canvas) {\n      this.unbindEvents();\n      clearCanvas(canvas, ctx);\n      this.platform.releaseContext(ctx);\n      this.canvas = null;\n      this.ctx = null;\n    }\n\n    delete instances[this.id];\n\n    this.notifyPlugins('afterDestroy');\n  }\n\n  toBase64Image(...args) {\n    return this.canvas.toDataURL(...args);\n  }\n\n  /**\n\t * @private\n\t */\n  bindEvents() {\n    this.bindUserEvents();\n    if (this.options.responsive) {\n      this.bindResponsiveEvents();\n    } else {\n      this.attached = true;\n    }\n  }\n\n  /**\n   * @private\n   */\n  bindUserEvents() {\n    const listeners = this._listeners;\n    const platform = this.platform;\n\n    const _add = (type, listener) => {\n      platform.addEventListener(this, type, listener);\n      listeners[type] = listener;\n    };\n\n    const listener = (e, x, y) => {\n      e.offsetX = x;\n      e.offsetY = y;\n      this._eventHandler(e);\n    };\n\n    each(this.options.events, (type) => _add(type, listener));\n  }\n\n  /**\n   * @private\n   */\n  bindResponsiveEvents() {\n    if (!this._responsiveListeners) {\n      this._responsiveListeners = {};\n    }\n    const listeners = this._responsiveListeners;\n    const platform = this.platform;\n\n    const _add = (type, listener) => {\n      platform.addEventListener(this, type, listener);\n      listeners[type] = listener;\n    };\n    const _remove = (type, listener) => {\n      if (listeners[type]) {\n        platform.removeEventListener(this, type, listener);\n        delete listeners[type];\n      }\n    };\n\n    const listener = (width, height) => {\n      if (this.canvas) {\n        this.resize(width, height);\n      }\n    };\n\n    let detached; // eslint-disable-line prefer-const\n    const attached = () => {\n      _remove('attach', attached);\n\n      this.attached = true;\n      this.resize();\n\n      _add('resize', listener);\n      _add('detach', detached);\n    };\n\n    detached = () => {\n      this.attached = false;\n\n      _remove('resize', listener);\n\n      // Stop animating and remove metasets, so when re-attached, the animations start from beginning.\n      this._stop();\n      this._resize(0, 0);\n\n      _add('attach', attached);\n    };\n\n    if (platform.isAttached(this.canvas)) {\n      attached();\n    } else {\n      detached();\n    }\n  }\n\n  /**\n\t * @private\n\t */\n  unbindEvents() {\n    each(this._listeners, (listener, type) => {\n      this.platform.removeEventListener(this, type, listener);\n    });\n    this._listeners = {};\n\n    each(this._responsiveListeners, (listener, type) => {\n      this.platform.removeEventListener(this, type, listener);\n    });\n    this._responsiveListeners = undefined;\n  }\n\n  updateHoverStyle(items, mode, enabled) {\n    const prefix = enabled ? 'set' : 'remove';\n    let meta, item, i, ilen;\n\n    if (mode === 'dataset') {\n      meta = this.getDatasetMeta(items[0].datasetIndex);\n      meta.controller['_' + prefix + 'DatasetHoverStyle']();\n    }\n\n    for (i = 0, ilen = items.length; i < ilen; ++i) {\n      item = items[i];\n      const controller = item && this.getDatasetMeta(item.datasetIndex).controller;\n      if (controller) {\n        controller[prefix + 'HoverStyle'](item.element, item.datasetIndex, item.index);\n      }\n    }\n  }\n\n  /**\n\t * Get active (hovered) elements\n\t * @returns array\n\t */\n  getActiveElements() {\n    return this._active || [];\n  }\n\n  /**\n\t * Set active (hovered) elements\n\t * @param {array} activeElements New active data points\n\t */\n  setActiveElements(activeElements) {\n    const lastActive = this._active || [];\n    const active = activeElements.map(({datasetIndex, index}) => {\n      const meta = this.getDatasetMeta(datasetIndex);\n      if (!meta) {\n        throw new Error('No dataset found at index ' + datasetIndex);\n      }\n\n      return {\n        datasetIndex,\n        element: meta.data[index],\n        index,\n      };\n    });\n    const changed = !_elementsEqual(active, lastActive);\n\n    if (changed) {\n      this._active = active;\n      // Make sure we don't use the previous mouse event to override the active elements in update.\n      this._lastEvent = null;\n      this._updateHoverStyles(active, lastActive);\n    }\n  }\n\n  /**\n\t * Calls enabled plugins on the specified hook and with the given args.\n\t * This method immediately returns as soon as a plugin explicitly returns false. The\n\t * returned value can be used, for instance, to interrupt the current action.\n\t * @param {string} hook - The name of the plugin method to call (e.g. 'beforeUpdate').\n\t * @param {Object} [args] - Extra arguments to apply to the hook call.\n   * @param {import('./core.plugins.js').filterCallback} [filter] - Filtering function for limiting which plugins are notified\n\t * @returns {boolean} false if any of the plugins return false, else returns true.\n\t */\n  notifyPlugins(hook, args, filter) {\n    return this._plugins.notify(this, hook, args, filter);\n  }\n\n  /**\n   * Check if a plugin with the specific ID is registered and enabled\n   * @param {string} pluginId - The ID of the plugin of which to check if it is enabled\n   * @returns {boolean}\n   */\n  isPluginEnabled(pluginId) {\n    return this._plugins._cache.filter(p => p.plugin.id === pluginId).length === 1;\n  }\n\n  /**\n\t * @private\n\t */\n  _updateHoverStyles(active, lastActive, replay) {\n    const hoverOptions = this.options.hover;\n    const diff = (a, b) => a.filter(x => !b.some(y => x.datasetIndex === y.datasetIndex && x.index === y.index));\n    const deactivated = diff(lastActive, active);\n    const activated = replay ? active : diff(active, lastActive);\n\n    if (deactivated.length) {\n      this.updateHoverStyle(deactivated, hoverOptions.mode, false);\n    }\n\n    if (activated.length && hoverOptions.mode) {\n      this.updateHoverStyle(activated, hoverOptions.mode, true);\n    }\n  }\n\n  /**\n\t * @private\n\t */\n  _eventHandler(e, replay) {\n    const args = {\n      event: e,\n      replay,\n      cancelable: true,\n      inChartArea: this.isPointInArea(e)\n    };\n    const eventFilter = (plugin) => (plugin.options.events || this.options.events).includes(e.native.type);\n\n    if (this.notifyPlugins('beforeEvent', args, eventFilter) === false) {\n      return;\n    }\n\n    const changed = this._handleEvent(e, replay, args.inChartArea);\n\n    args.cancelable = false;\n    this.notifyPlugins('afterEvent', args, eventFilter);\n\n    if (changed || args.changed) {\n      this.render();\n    }\n\n    return this;\n  }\n\n  /**\n\t * Handle an event\n\t * @param {ChartEvent} e the event to handle\n\t * @param {boolean} [replay] - true if the event was replayed by `update`\n   * @param {boolean} [inChartArea] - true if the event is inside chartArea\n\t * @return {boolean} true if the chart needs to re-render\n\t * @private\n\t */\n  _handleEvent(e, replay, inChartArea) {\n    const {_active: lastActive = [], options} = this;\n\n    // If the event is replayed from `update`, we should evaluate with the final positions.\n    //\n    // The `replay`:\n    // It's the last event (excluding click) that has occurred before `update`.\n    // So mouse has not moved. It's also over the chart, because there is a `replay`.\n    //\n    // The why:\n    // If animations are active, the elements haven't moved yet compared to state before update.\n    // But if they will, we are activating the elements that would be active, if this check\n    // was done after the animations have completed. => \"final positions\".\n    // If there is no animations, the \"final\" and \"current\" positions are equal.\n    // This is done so we do not have to evaluate the active elements each animation frame\n    // - it would be expensive.\n    const useFinalPosition = replay;\n    const active = this._getActiveElements(e, lastActive, inChartArea, useFinalPosition);\n    const isClick = _isClickEvent(e);\n    const lastEvent = determineLastEvent(e, this._lastEvent, inChartArea, isClick);\n\n    if (inChartArea) {\n      // Set _lastEvent to null while we are processing the event handlers.\n      // This prevents recursion if the handler calls chart.update()\n      this._lastEvent = null;\n\n      // Invoke onHover hook\n      callCallback(options.onHover, [e, active, this], this);\n\n      if (isClick) {\n        callCallback(options.onClick, [e, active, this], this);\n      }\n    }\n\n    const changed = !_elementsEqual(active, lastActive);\n    if (changed || replay) {\n      this._active = active;\n      this._updateHoverStyles(active, lastActive, replay);\n    }\n\n    this._lastEvent = lastEvent;\n\n    return changed;\n  }\n\n  /**\n   * @param {ChartEvent} e - The event\n   * @param {import('../types/index.js').ActiveElement[]} lastActive - Previously active elements\n   * @param {boolean} inChartArea - Is the envent inside chartArea\n   * @param {boolean} useFinalPosition - Should the evaluation be done with current or final (after animation) element positions\n   * @returns {import('../types/index.js').ActiveElement[]} - The active elements\n   * @pravate\n   */\n  _getActiveElements(e, lastActive, inChartArea, useFinalPosition) {\n    if (e.type === 'mouseout') {\n      return [];\n    }\n\n    if (!inChartArea) {\n      // Let user control the active elements outside chartArea. Eg. using Legend.\n      return lastActive;\n    }\n\n    const hoverOptions = this.options.hover;\n    return this.getElementsAtEventForMode(e, hoverOptions.mode, hoverOptions, useFinalPosition);\n  }\n}\n\n// @ts-ignore\nfunction invalidatePlugins() {\n  return each(Chart.instances, (chart) => chart._plugins.invalidate());\n}\n\nexport default Chart;\n","import {_isDomSupported} from '../helpers/index.js';\nimport BasePlatform from './platform.base.js';\nimport BasicPlatform from './platform.basic.js';\nimport DomPlatform from './platform.dom.js';\n\nexport function _detectPlatform(canvas) {\n  if (!_isDomSupported() || (typeof OffscreenCanvas !== 'undefined' && canvas instanceof OffscreenCanvas)) {\n    return BasicPlatform;\n  }\n  return DomPlatform;\n}\n\nexport {BasePlatform, BasicPlatform, DomPlatform};\n","import Element from '../core/core.element.js';\nimport {_angleBetween, getAngleFromPoint, TAU, HALF_PI, valueOrDefault} from '../helpers/index.js';\nimport {PI, _isBetween, _limitValue} from '../helpers/helpers.math.js';\nimport {_readValueToProps} from '../helpers/helpers.options.js';\nimport type {ArcOptions, Point} from '../types/index.js';\n\n\nfunction clipArc(ctx: CanvasRenderingContext2D, element: ArcElement, endAngle: number) {\n  const {startAngle, pixelMargin, x, y, outerRadius, innerRadius} = element;\n  let angleMargin = pixelMargin / outerRadius;\n\n  // Draw an inner border by clipping the arc and drawing a double-width border\n  // Enlarge the clipping arc by 0.33 pixels to eliminate glitches between borders\n  ctx.beginPath();\n  ctx.arc(x, y, outerRadius, startAngle - angleMargin, endAngle + angleMargin);\n  if (innerRadius > pixelMargin) {\n    angleMargin = pixelMargin / innerRadius;\n    ctx.arc(x, y, innerRadius, endAngle + angleMargin, startAngle - angleMargin, true);\n  } else {\n    ctx.arc(x, y, pixelMargin, endAngle + HALF_PI, startAngle - HALF_PI);\n  }\n  ctx.closePath();\n  ctx.clip();\n}\n\nfunction toRadiusCorners(value) {\n  return _readValueToProps(value, ['outerStart', 'outerEnd', 'innerStart', 'innerEnd']);\n}\n\n/**\n * Parse border radius from the provided options\n */\nfunction parseBorderRadius(arc: ArcElement, innerRadius: number, outerRadius: number, angleDelta: number) {\n  const o = toRadiusCorners(arc.options.borderRadius);\n  const halfThickness = (outerRadius - innerRadius) / 2;\n  const innerLimit = Math.min(halfThickness, angleDelta * innerRadius / 2);\n\n  // Outer limits are complicated. We want to compute the available angular distance at\n  // a radius of outerRadius - borderRadius because for small angular distances, this term limits.\n  // We compute at r = outerRadius - borderRadius because this circle defines the center of the border corners.\n  //\n  // If the borderRadius is large, that value can become negative.\n  // This causes the outer borders to lose their radius entirely, which is rather unexpected. To solve that, if borderRadius > outerRadius\n  // we know that the thickness term will dominate and compute the limits at that point\n  const computeOuterLimit = (val) => {\n    const outerArcLimit = (outerRadius - Math.min(halfThickness, val)) * angleDelta / 2;\n    return _limitValue(val, 0, Math.min(halfThickness, outerArcLimit));\n  };\n\n  return {\n    outerStart: computeOuterLimit(o.outerStart),\n    outerEnd: computeOuterLimit(o.outerEnd),\n    innerStart: _limitValue(o.innerStart, 0, innerLimit),\n    innerEnd: _limitValue(o.innerEnd, 0, innerLimit),\n  };\n}\n\n/**\n * Convert (r, 𝜃) to (x, y)\n */\nfunction rThetaToXY(r: number, theta: number, x: number, y: number) {\n  return {\n    x: x + r * Math.cos(theta),\n    y: y + r * Math.sin(theta),\n  };\n}\n\n\n/**\n * Path the arc, respecting border radius by separating into left and right halves.\n *\n *   Start      End\n *\n *    1--->a--->2    Outer\n *   /           \\\n *   8           3\n *   |           |\n *   |           |\n *   7           4\n *   \\           /\n *    6<---b<---5    Inner\n */\nfunction pathArc(\n  ctx: CanvasRenderingContext2D,\n  element: ArcElement,\n  offset: number,\n  spacing: number,\n  end: number,\n  circular: boolean,\n) {\n  const {x, y, startAngle: start, pixelMargin, innerRadius: innerR} = element;\n\n  const outerRadius = Math.max(element.outerRadius + spacing + offset - pixelMargin, 0);\n  const innerRadius = innerR > 0 ? innerR + spacing + offset + pixelMargin : 0;\n\n  let spacingOffset = 0;\n  const alpha = end - start;\n\n  if (spacing) {\n    // When spacing is present, it is the same for all items\n    // So we adjust the start and end angle of the arc such that\n    // the distance is the same as it would be without the spacing\n    const noSpacingInnerRadius = innerR > 0 ? innerR - spacing : 0;\n    const noSpacingOuterRadius = outerRadius > 0 ? outerRadius - spacing : 0;\n    const avNogSpacingRadius = (noSpacingInnerRadius + noSpacingOuterRadius) / 2;\n    const adjustedAngle = avNogSpacingRadius !== 0 ? (alpha * avNogSpacingRadius) / (avNogSpacingRadius + spacing) : alpha;\n    spacingOffset = (alpha - adjustedAngle) / 2;\n  }\n\n  const beta = Math.max(0.001, alpha * outerRadius - offset / PI) / outerRadius;\n  const angleOffset = (alpha - beta) / 2;\n  const startAngle = start + angleOffset + spacingOffset;\n  const endAngle = end - angleOffset - spacingOffset;\n  const {outerStart, outerEnd, innerStart, innerEnd} = parseBorderRadius(element, innerRadius, outerRadius, endAngle - startAngle);\n\n  const outerStartAdjustedRadius = outerRadius - outerStart;\n  const outerEndAdjustedRadius = outerRadius - outerEnd;\n  const outerStartAdjustedAngle = startAngle + outerStart / outerStartAdjustedRadius;\n  const outerEndAdjustedAngle = endAngle - outerEnd / outerEndAdjustedRadius;\n\n  const innerStartAdjustedRadius = innerRadius + innerStart;\n  const innerEndAdjustedRadius = innerRadius + innerEnd;\n  const innerStartAdjustedAngle = startAngle + innerStart / innerStartAdjustedRadius;\n  const innerEndAdjustedAngle = endAngle - innerEnd / innerEndAdjustedRadius;\n\n  ctx.beginPath();\n\n  if (circular) {\n    // The first arc segments from point 1 to point a to point 2\n    const outerMidAdjustedAngle = (outerStartAdjustedAngle + outerEndAdjustedAngle) / 2;\n    ctx.arc(x, y, outerRadius, outerStartAdjustedAngle, outerMidAdjustedAngle);\n    ctx.arc(x, y, outerRadius, outerMidAdjustedAngle, outerEndAdjustedAngle);\n\n    // The corner segment from point 2 to point 3\n    if (outerEnd > 0) {\n      const pCenter = rThetaToXY(outerEndAdjustedRadius, outerEndAdjustedAngle, x, y);\n      ctx.arc(pCenter.x, pCenter.y, outerEnd, outerEndAdjustedAngle, endAngle + HALF_PI);\n    }\n\n    // The line from point 3 to point 4\n    const p4 = rThetaToXY(innerEndAdjustedRadius, endAngle, x, y);\n    ctx.lineTo(p4.x, p4.y);\n\n    // The corner segment from point 4 to point 5\n    if (innerEnd > 0) {\n      const pCenter = rThetaToXY(innerEndAdjustedRadius, innerEndAdjustedAngle, x, y);\n      ctx.arc(pCenter.x, pCenter.y, innerEnd, endAngle + HALF_PI, innerEndAdjustedAngle + Math.PI);\n    }\n\n    // The inner arc from point 5 to point b to point 6\n    const innerMidAdjustedAngle = ((endAngle - (innerEnd / innerRadius)) + (startAngle + (innerStart / innerRadius))) / 2;\n    ctx.arc(x, y, innerRadius, endAngle - (innerEnd / innerRadius), innerMidAdjustedAngle, true);\n    ctx.arc(x, y, innerRadius, innerMidAdjustedAngle, startAngle + (innerStart / innerRadius), true);\n\n    // The corner segment from point 6 to point 7\n    if (innerStart > 0) {\n      const pCenter = rThetaToXY(innerStartAdjustedRadius, innerStartAdjustedAngle, x, y);\n      ctx.arc(pCenter.x, pCenter.y, innerStart, innerStartAdjustedAngle + Math.PI, startAngle - HALF_PI);\n    }\n\n    // The line from point 7 to point 8\n    const p8 = rThetaToXY(outerStartAdjustedRadius, startAngle, x, y);\n    ctx.lineTo(p8.x, p8.y);\n\n    // The corner segment from point 8 to point 1\n    if (outerStart > 0) {\n      const pCenter = rThetaToXY(outerStartAdjustedRadius, outerStartAdjustedAngle, x, y);\n      ctx.arc(pCenter.x, pCenter.y, outerStart, startAngle - HALF_PI, outerStartAdjustedAngle);\n    }\n  } else {\n    ctx.moveTo(x, y);\n\n    const outerStartX = Math.cos(outerStartAdjustedAngle) * outerRadius + x;\n    const outerStartY = Math.sin(outerStartAdjustedAngle) * outerRadius + y;\n    ctx.lineTo(outerStartX, outerStartY);\n\n    const outerEndX = Math.cos(outerEndAdjustedAngle) * outerRadius + x;\n    const outerEndY = Math.sin(outerEndAdjustedAngle) * outerRadius + y;\n    ctx.lineTo(outerEndX, outerEndY);\n  }\n\n  ctx.closePath();\n}\n\nfunction drawArc(\n  ctx: CanvasRenderingContext2D,\n  element: ArcElement,\n  offset: number,\n  spacing: number,\n  circular: boolean,\n) {\n  const {fullCircles, startAngle, circumference} = element;\n  let endAngle = element.endAngle;\n  if (fullCircles) {\n    pathArc(ctx, element, offset, spacing, endAngle, circular);\n    for (let i = 0; i < fullCircles; ++i) {\n      ctx.fill();\n    }\n    if (!isNaN(circumference)) {\n      endAngle = startAngle + (circumference % TAU || TAU);\n    }\n  }\n  pathArc(ctx, element, offset, spacing, endAngle, circular);\n  ctx.fill();\n  return endAngle;\n}\n\nfunction drawBorder(\n  ctx: CanvasRenderingContext2D,\n  element: ArcElement,\n  offset: number,\n  spacing: number,\n  circular: boolean,\n) {\n  const {fullCircles, startAngle, circumference, options} = element;\n  const {borderWidth, borderJoinStyle, borderDash, borderDashOffset} = options;\n  const inner = options.borderAlign === 'inner';\n\n  if (!borderWidth) {\n    return;\n  }\n\n  ctx.setLineDash(borderDash || []);\n  ctx.lineDashOffset = borderDashOffset;\n\n  if (inner) {\n    ctx.lineWidth = borderWidth * 2;\n    ctx.lineJoin = borderJoinStyle || 'round';\n  } else {\n    ctx.lineWidth = borderWidth;\n    ctx.lineJoin = borderJoinStyle || 'bevel';\n  }\n\n  let endAngle = element.endAngle;\n  if (fullCircles) {\n    pathArc(ctx, element, offset, spacing, endAngle, circular);\n    for (let i = 0; i < fullCircles; ++i) {\n      ctx.stroke();\n    }\n    if (!isNaN(circumference)) {\n      endAngle = startAngle + (circumference % TAU || TAU);\n    }\n  }\n\n  if (inner) {\n    clipArc(ctx, element, endAngle);\n  }\n\n  if (!fullCircles) {\n    pathArc(ctx, element, offset, spacing, endAngle, circular);\n    ctx.stroke();\n  }\n}\n\nexport interface ArcProps extends Point {\n  startAngle: number;\n  endAngle: number;\n  innerRadius: number;\n  outerRadius: number;\n  circumference: number;\n}\n\nexport default class ArcElement extends Element<ArcProps, ArcOptions> {\n\n  static id = 'arc';\n\n  static defaults = {\n    borderAlign: 'center',\n    borderColor: '#fff',\n    borderDash: [],\n    borderDashOffset: 0,\n    borderJoinStyle: undefined,\n    borderRadius: 0,\n    borderWidth: 2,\n    offset: 0,\n    spacing: 0,\n    angle: undefined,\n    circular: true,\n  };\n\n  static defaultRoutes = {\n    backgroundColor: 'backgroundColor'\n  };\n\n  static descriptors = {\n    _scriptable: true,\n    _indexable: (name) => name !== 'borderDash'\n  };\n\n  circumference: number;\n  endAngle: number;\n  fullCircles: number;\n  innerRadius: number;\n  outerRadius: number;\n  pixelMargin: number;\n  startAngle: number;\n\n  constructor(cfg) {\n    super();\n\n    this.options = undefined;\n    this.circumference = undefined;\n    this.startAngle = undefined;\n    this.endAngle = undefined;\n    this.innerRadius = undefined;\n    this.outerRadius = undefined;\n    this.pixelMargin = 0;\n    this.fullCircles = 0;\n\n    if (cfg) {\n      Object.assign(this, cfg);\n    }\n  }\n\n  inRange(chartX: number, chartY: number, useFinalPosition: boolean) {\n    const point = this.getProps(['x', 'y'], useFinalPosition);\n    const {angle, distance} = getAngleFromPoint(point, {x: chartX, y: chartY});\n    const {startAngle, endAngle, innerRadius, outerRadius, circumference} = this.getProps([\n      'startAngle',\n      'endAngle',\n      'innerRadius',\n      'outerRadius',\n      'circumference'\n    ], useFinalPosition);\n    const rAdjust = (this.options.spacing + this.options.borderWidth) / 2;\n    const _circumference = valueOrDefault(circumference, endAngle - startAngle);\n    const betweenAngles = _circumference >= TAU || _angleBetween(angle, startAngle, endAngle);\n    const withinRadius = _isBetween(distance, innerRadius + rAdjust, outerRadius + rAdjust);\n\n    return (betweenAngles && withinRadius);\n  }\n\n  getCenterPoint(useFinalPosition: boolean) {\n    const {x, y, startAngle, endAngle, innerRadius, outerRadius} = this.getProps([\n      'x',\n      'y',\n      'startAngle',\n      'endAngle',\n      'innerRadius',\n      'outerRadius'\n    ], useFinalPosition);\n    const {offset, spacing} = this.options;\n    const halfAngle = (startAngle + endAngle) / 2;\n    const halfRadius = (innerRadius + outerRadius + spacing + offset) / 2;\n    return {\n      x: x + Math.cos(halfAngle) * halfRadius,\n      y: y + Math.sin(halfAngle) * halfRadius\n    };\n  }\n\n  tooltipPosition(useFinalPosition: boolean) {\n    return this.getCenterPoint(useFinalPosition);\n  }\n\n  draw(ctx: CanvasRenderingContext2D) {\n    const {options, circumference} = this;\n    const offset = (options.offset || 0) / 4;\n    const spacing = (options.spacing || 0) / 2;\n    const circular = options.circular;\n    this.pixelMargin = (options.borderAlign === 'inner') ? 0.33 : 0;\n    this.fullCircles = circumference > TAU ? Math.floor(circumference / TAU) : 0;\n\n    if (circumference === 0 || this.innerRadius < 0 || this.outerRadius < 0) {\n      return;\n    }\n\n    ctx.save();\n\n    const halfAngle = (this.startAngle + this.endAngle) / 2;\n    ctx.translate(Math.cos(halfAngle) * offset, Math.sin(halfAngle) * offset);\n    const fix = 1 - Math.sin(Math.min(PI, circumference || 0));\n    const radiusOffset = offset * fix;\n\n    ctx.fillStyle = options.backgroundColor;\n    ctx.strokeStyle = options.borderColor;\n\n    drawArc(ctx, this, radiusOffset, spacing, circular);\n    drawBorder(ctx, this, radiusOffset, spacing, circular);\n\n    ctx.restore();\n  }\n}\n","import Element from '../core/core.element.js';\nimport {_bezierInterpolation, _pointInLine, _steppedInterpolation} from '../helpers/helpers.interpolation.js';\nimport {_computeSegments, _boundSegments} from '../helpers/helpers.segment.js';\nimport {_steppedLineTo, _bezierCurveTo} from '../helpers/helpers.canvas.js';\nimport {_updateBezierControlPoints} from '../helpers/helpers.curve.js';\nimport {valueOrDefault} from '../helpers/index.js';\n\n/**\n * @typedef { import('./element.point.js').default } PointElement\n */\n\nfunction setStyle(ctx, options, style = options) {\n  ctx.lineCap = valueOrDefault(style.borderCapStyle, options.borderCapStyle);\n  ctx.setLineDash(valueOrDefault(style.borderDash, options.borderDash));\n  ctx.lineDashOffset = valueOrDefault(style.borderDashOffset, options.borderDashOffset);\n  ctx.lineJoin = valueOrDefault(style.borderJoinStyle, options.borderJoinStyle);\n  ctx.lineWidth = valueOrDefault(style.borderWidth, options.borderWidth);\n  ctx.strokeStyle = valueOrDefault(style.borderColor, options.borderColor);\n}\n\nfunction lineTo(ctx, previous, target) {\n  ctx.lineTo(target.x, target.y);\n}\n\n/**\n * @returns {any}\n */\nfunction getLineMethod(options) {\n  if (options.stepped) {\n    return _steppedLineTo;\n  }\n\n  if (options.tension || options.cubicInterpolationMode === 'monotone') {\n    return _bezierCurveTo;\n  }\n\n  return lineTo;\n}\n\nfunction pathVars(points, segment, params = {}) {\n  const count = points.length;\n  const {start: paramsStart = 0, end: paramsEnd = count - 1} = params;\n  const {start: segmentStart, end: segmentEnd} = segment;\n  const start = Math.max(paramsStart, segmentStart);\n  const end = Math.min(paramsEnd, segmentEnd);\n  const outside = paramsStart < segmentStart && paramsEnd < segmentStart || paramsStart > segmentEnd && paramsEnd > segmentEnd;\n\n  return {\n    count,\n    start,\n    loop: segment.loop,\n    ilen: end < start && !outside ? count + end - start : end - start\n  };\n}\n\n/**\n * Create path from points, grouping by truncated x-coordinate\n * Points need to be in order by x-coordinate for this to work efficiently\n * @param {CanvasRenderingContext2D|Path2D} ctx - Context\n * @param {LineElement} line\n * @param {object} segment\n * @param {number} segment.start - start index of the segment, referring the points array\n * @param {number} segment.end - end index of the segment, referring the points array\n * @param {boolean} segment.loop - indicates that the segment is a loop\n * @param {object} params\n * @param {boolean} params.move - move to starting point (vs line to it)\n * @param {boolean} params.reverse - path the segment from end to start\n * @param {number} params.start - limit segment to points starting from `start` index\n * @param {number} params.end - limit segment to points ending at `start` + `count` index\n */\nfunction pathSegment(ctx, line, segment, params) {\n  const {points, options} = line;\n  const {count, start, loop, ilen} = pathVars(points, segment, params);\n  const lineMethod = getLineMethod(options);\n  // eslint-disable-next-line prefer-const\n  let {move = true, reverse} = params || {};\n  let i, point, prev;\n\n  for (i = 0; i <= ilen; ++i) {\n    point = points[(start + (reverse ? ilen - i : i)) % count];\n\n    if (point.skip) {\n      // If there is a skipped point inside a segment, spanGaps must be true\n      continue;\n    } else if (move) {\n      ctx.moveTo(point.x, point.y);\n      move = false;\n    } else {\n      lineMethod(ctx, prev, point, reverse, options.stepped);\n    }\n\n    prev = point;\n  }\n\n  if (loop) {\n    point = points[(start + (reverse ? ilen : 0)) % count];\n    lineMethod(ctx, prev, point, reverse, options.stepped);\n  }\n\n  return !!loop;\n}\n\n/**\n * Create path from points, grouping by truncated x-coordinate\n * Points need to be in order by x-coordinate for this to work efficiently\n * @param {CanvasRenderingContext2D|Path2D} ctx - Context\n * @param {LineElement} line\n * @param {object} segment\n * @param {number} segment.start - start index of the segment, referring the points array\n * @param {number} segment.end - end index of the segment, referring the points array\n * @param {boolean} segment.loop - indicates that the segment is a loop\n * @param {object} params\n * @param {boolean} params.move - move to starting point (vs line to it)\n * @param {boolean} params.reverse - path the segment from end to start\n * @param {number} params.start - limit segment to points starting from `start` index\n * @param {number} params.end - limit segment to points ending at `start` + `count` index\n */\nfunction fastPathSegment(ctx, line, segment, params) {\n  const points = line.points;\n  const {count, start, ilen} = pathVars(points, segment, params);\n  const {move = true, reverse} = params || {};\n  let avgX = 0;\n  let countX = 0;\n  let i, point, prevX, minY, maxY, lastY;\n\n  const pointIndex = (index) => (start + (reverse ? ilen - index : index)) % count;\n  const drawX = () => {\n    if (minY !== maxY) {\n      // Draw line to maxY and minY, using the average x-coordinate\n      ctx.lineTo(avgX, maxY);\n      ctx.lineTo(avgX, minY);\n      // Line to y-value of last point in group. So the line continues\n      // from correct position. Not using move, to have solid path.\n      ctx.lineTo(avgX, lastY);\n    }\n  };\n\n  if (move) {\n    point = points[pointIndex(0)];\n    ctx.moveTo(point.x, point.y);\n  }\n\n  for (i = 0; i <= ilen; ++i) {\n    point = points[pointIndex(i)];\n\n    if (point.skip) {\n      // If there is a skipped point inside a segment, spanGaps must be true\n      continue;\n    }\n\n    const x = point.x;\n    const y = point.y;\n    const truncX = x | 0; // truncated x-coordinate\n\n    if (truncX === prevX) {\n      // Determine `minY` / `maxY` and `avgX` while we stay within same x-position\n      if (y < minY) {\n        minY = y;\n      } else if (y > maxY) {\n        maxY = y;\n      }\n      // For first point in group, countX is `0`, so average will be `x` / 1.\n      avgX = (countX * avgX + x) / ++countX;\n    } else {\n      drawX();\n      // Draw line to next x-position, using the first (or only)\n      // y-value in that group\n      ctx.lineTo(x, y);\n\n      prevX = truncX;\n      countX = 0;\n      minY = maxY = y;\n    }\n    // Keep track of the last y-value in group\n    lastY = y;\n  }\n  drawX();\n}\n\n/**\n * @param {LineElement} line - the line\n * @returns {function}\n * @private\n */\nfunction _getSegmentMethod(line) {\n  const opts = line.options;\n  const borderDash = opts.borderDash && opts.borderDash.length;\n  const useFastPath = !line._decimated && !line._loop && !opts.tension && opts.cubicInterpolationMode !== 'monotone' && !opts.stepped && !borderDash;\n  return useFastPath ? fastPathSegment : pathSegment;\n}\n\n/**\n * @private\n */\nfunction _getInterpolationMethod(options) {\n  if (options.stepped) {\n    return _steppedInterpolation;\n  }\n\n  if (options.tension || options.cubicInterpolationMode === 'monotone') {\n    return _bezierInterpolation;\n  }\n\n  return _pointInLine;\n}\n\nfunction strokePathWithCache(ctx, line, start, count) {\n  let path = line._path;\n  if (!path) {\n    path = line._path = new Path2D();\n    if (line.path(path, start, count)) {\n      path.closePath();\n    }\n  }\n  setStyle(ctx, line.options);\n  ctx.stroke(path);\n}\n\nfunction strokePathDirect(ctx, line, start, count) {\n  const {segments, options} = line;\n  const segmentMethod = _getSegmentMethod(line);\n\n  for (const segment of segments) {\n    setStyle(ctx, options, segment.style);\n    ctx.beginPath();\n    if (segmentMethod(ctx, line, segment, {start, end: start + count - 1})) {\n      ctx.closePath();\n    }\n    ctx.stroke();\n  }\n}\n\nconst usePath2D = typeof Path2D === 'function';\n\nfunction draw(ctx, line, start, count) {\n  if (usePath2D && !line.options.segment) {\n    strokePathWithCache(ctx, line, start, count);\n  } else {\n    strokePathDirect(ctx, line, start, count);\n  }\n}\n\nexport default class LineElement extends Element {\n\n  static id = 'line';\n\n  /**\n   * @type {any}\n   */\n  static defaults = {\n    borderCapStyle: 'butt',\n    borderDash: [],\n    borderDashOffset: 0,\n    borderJoinStyle: 'miter',\n    borderWidth: 3,\n    capBezierPoints: true,\n    cubicInterpolationMode: 'default',\n    fill: false,\n    spanGaps: false,\n    stepped: false,\n    tension: 0,\n  };\n\n  /**\n   * @type {any}\n   */\n  static defaultRoutes = {\n    backgroundColor: 'backgroundColor',\n    borderColor: 'borderColor'\n  };\n\n\n  static descriptors = {\n    _scriptable: true,\n    _indexable: (name) => name !== 'borderDash' && name !== 'fill',\n  };\n\n\n  constructor(cfg) {\n    super();\n\n    this.animated = true;\n    this.options = undefined;\n    this._chart = undefined;\n    this._loop = undefined;\n    this._fullLoop = undefined;\n    this._path = undefined;\n    this._points = undefined;\n    this._segments = undefined;\n    this._decimated = false;\n    this._pointsUpdated = false;\n    this._datasetIndex = undefined;\n\n    if (cfg) {\n      Object.assign(this, cfg);\n    }\n  }\n\n  updateControlPoints(chartArea, indexAxis) {\n    const options = this.options;\n    if ((options.tension || options.cubicInterpolationMode === 'monotone') && !options.stepped && !this._pointsUpdated) {\n      const loop = options.spanGaps ? this._loop : this._fullLoop;\n      _updateBezierControlPoints(this._points, options, chartArea, loop, indexAxis);\n      this._pointsUpdated = true;\n    }\n  }\n\n  set points(points) {\n    this._points = points;\n    delete this._segments;\n    delete this._path;\n    this._pointsUpdated = false;\n  }\n\n  get points() {\n    return this._points;\n  }\n\n  get segments() {\n    return this._segments || (this._segments = _computeSegments(this, this.options.segment));\n  }\n\n  /**\n\t * First non-skipped point on this line\n\t * @returns {PointElement|undefined}\n\t */\n  first() {\n    const segments = this.segments;\n    const points = this.points;\n    return segments.length && points[segments[0].start];\n  }\n\n  /**\n\t * Last non-skipped point on this line\n\t * @returns {PointElement|undefined}\n\t */\n  last() {\n    const segments = this.segments;\n    const points = this.points;\n    const count = segments.length;\n    return count && points[segments[count - 1].end];\n  }\n\n  /**\n\t * Interpolate a point in this line at the same value on `property` as\n\t * the reference `point` provided\n\t * @param {PointElement} point - the reference point\n\t * @param {string} property - the property to match on\n\t * @returns {PointElement|undefined}\n\t */\n  interpolate(point, property) {\n    const options = this.options;\n    const value = point[property];\n    const points = this.points;\n    const segments = _boundSegments(this, {property, start: value, end: value});\n\n    if (!segments.length) {\n      return;\n    }\n\n    const result = [];\n    const _interpolate = _getInterpolationMethod(options);\n    let i, ilen;\n    for (i = 0, ilen = segments.length; i < ilen; ++i) {\n      const {start, end} = segments[i];\n      const p1 = points[start];\n      const p2 = points[end];\n      if (p1 === p2) {\n        result.push(p1);\n        continue;\n      }\n      const t = Math.abs((value - p1[property]) / (p2[property] - p1[property]));\n      const interpolated = _interpolate(p1, p2, t, options.stepped);\n      interpolated[property] = point[property];\n      result.push(interpolated);\n    }\n    return result.length === 1 ? result[0] : result;\n  }\n\n  /**\n\t * Append a segment of this line to current path.\n\t * @param {CanvasRenderingContext2D} ctx\n\t * @param {object} segment\n\t * @param {number} segment.start - start index of the segment, referring the points array\n \t * @param {number} segment.end - end index of the segment, referring the points array\n \t * @param {boolean} segment.loop - indicates that the segment is a loop\n\t * @param {object} params\n\t * @param {boolean} params.move - move to starting point (vs line to it)\n\t * @param {boolean} params.reverse - path the segment from end to start\n\t * @param {number} params.start - limit segment to points starting from `start` index\n\t * @param {number} params.end - limit segment to points ending at `start` + `count` index\n\t * @returns {undefined|boolean} - true if the segment is a full loop (path should be closed)\n\t */\n  pathSegment(ctx, segment, params) {\n    const segmentMethod = _getSegmentMethod(this);\n    return segmentMethod(ctx, this, segment, params);\n  }\n\n  /**\n\t * Append all segments of this line to current path.\n\t * @param {CanvasRenderingContext2D|Path2D} ctx\n\t * @param {number} [start]\n\t * @param {number} [count]\n\t * @returns {undefined|boolean} - true if line is a full loop (path should be closed)\n\t */\n  path(ctx, start, count) {\n    const segments = this.segments;\n    const segmentMethod = _getSegmentMethod(this);\n    let loop = this._loop;\n\n    start = start || 0;\n    count = count || (this.points.length - start);\n\n    for (const segment of segments) {\n      loop &= segmentMethod(ctx, this, segment, {start, end: start + count - 1});\n    }\n    return !!loop;\n  }\n\n  /**\n\t * Draw\n\t * @param {CanvasRenderingContext2D} ctx\n\t * @param {object} chartArea\n\t * @param {number} [start]\n\t * @param {number} [count]\n\t */\n  draw(ctx, chartArea, start, count) {\n    const options = this.options || {};\n    const points = this.points || [];\n\n    if (points.length && options.borderWidth) {\n      ctx.save();\n\n      draw(ctx, this, start, count);\n\n      ctx.restore();\n    }\n\n    if (this.animated) {\n      // When line is animated, the control points and path are not cached.\n      this._pointsUpdated = false;\n      this._path = undefined;\n    }\n  }\n}\n","import Element from '../core/core.element.js';\nimport {drawPoint, _isPointInArea} from '../helpers/helpers.canvas.js';\nimport type {\n  CartesianParsedData,\n  ChartArea,\n  Point,\n  PointHoverOptions,\n  PointOptions,\n} from '../types/index.js';\n\nfunction inRange(el: PointElement, pos: number, axis: 'x' | 'y', useFinalPosition?: boolean) {\n  const options = el.options;\n  const {[axis]: value} = el.getProps([axis], useFinalPosition);\n\n  return (Math.abs(pos - value) < options.radius + options.hitRadius);\n}\n\nexport type PointProps = Point\n\nexport default class PointElement extends Element<PointProps, PointOptions & PointHoverOptions> {\n\n  static id = 'point';\n\n  parsed: CartesianParsedData;\n  skip?: boolean;\n  stop?: boolean;\n\n  /**\n   * @type {any}\n   */\n  static defaults = {\n    borderWidth: 1,\n    hitRadius: 1,\n    hoverBorderWidth: 1,\n    hoverRadius: 4,\n    pointStyle: 'circle',\n    radius: 3,\n    rotation: 0\n  };\n\n  /**\n   * @type {any}\n   */\n  static defaultRoutes = {\n    backgroundColor: 'backgroundColor',\n    borderColor: 'borderColor'\n  };\n\n  constructor(cfg) {\n    super();\n\n    this.options = undefined;\n    this.parsed = undefined;\n    this.skip = undefined;\n    this.stop = undefined;\n\n    if (cfg) {\n      Object.assign(this, cfg);\n    }\n  }\n\n  inRange(mouseX: number, mouseY: number, useFinalPosition?: boolean) {\n    const options = this.options;\n    const {x, y} = this.getProps(['x', 'y'], useFinalPosition);\n    return ((Math.pow(mouseX - x, 2) + Math.pow(mouseY - y, 2)) < Math.pow(options.hitRadius + options.radius, 2));\n  }\n\n  inXRange(mouseX: number, useFinalPosition?: boolean) {\n    return inRange(this, mouseX, 'x', useFinalPosition);\n  }\n\n  inYRange(mouseY: number, useFinalPosition?: boolean) {\n    return inRange(this, mouseY, 'y', useFinalPosition);\n  }\n\n  getCenterPoint(useFinalPosition?: boolean) {\n    const {x, y} = this.getProps(['x', 'y'], useFinalPosition);\n    return {x, y};\n  }\n\n  size(options?: Partial<PointOptions & PointHoverOptions>) {\n    options = options || this.options || {};\n    let radius = options.radius || 0;\n    radius = Math.max(radius, radius && options.hoverRadius || 0);\n    const borderWidth = radius && options.borderWidth || 0;\n    return (radius + borderWidth) * 2;\n  }\n\n  draw(ctx: CanvasRenderingContext2D, area: ChartArea) {\n    const options = this.options;\n\n    if (this.skip || options.radius < 0.1 || !_isPointInArea(this, area, this.size(options) / 2)) {\n      return;\n    }\n\n    ctx.strokeStyle = options.borderColor;\n    ctx.lineWidth = options.borderWidth;\n    ctx.fillStyle = options.backgroundColor;\n    drawPoint(ctx, options, this.x, this.y);\n  }\n\n  getRange() {\n    const options = this.options || {};\n    // @ts-expect-error Fallbacks should never be hit in practice\n    return options.radius + options.hitRadius;\n  }\n}\n","import Element from '../core/core.element.js';\nimport {isObject, _isBetween, _limitValue} from '../helpers/index.js';\nimport {addRoundedRectPath} from '../helpers/helpers.canvas.js';\nimport {toTRBL, toTRBLCorners} from '../helpers/helpers.options.js';\n\n/** @typedef {{ x: number, y: number, base: number, horizontal: boolean, width: number, height: number }} BarProps */\n\n/**\n * Helper function to get the bounds of the bar regardless of the orientation\n * @param {BarElement} bar the bar\n * @param {boolean} [useFinalPosition]\n * @return {object} bounds of the bar\n * @private\n */\nfunction getBarBounds(bar, useFinalPosition) {\n  const {x, y, base, width, height} = /** @type {BarProps} */ (bar.getProps(['x', 'y', 'base', 'width', 'height'], useFinalPosition));\n\n  let left, right, top, bottom, half;\n\n  if (bar.horizontal) {\n    half = height / 2;\n    left = Math.min(x, base);\n    right = Math.max(x, base);\n    top = y - half;\n    bottom = y + half;\n  } else {\n    half = width / 2;\n    left = x - half;\n    right = x + half;\n    top = Math.min(y, base);\n    bottom = Math.max(y, base);\n  }\n\n  return {left, top, right, bottom};\n}\n\nfunction skipOrLimit(skip, value, min, max) {\n  return skip ? 0 : _limitValue(value, min, max);\n}\n\nfunction parseBorderWidth(bar, maxW, maxH) {\n  const value = bar.options.borderWidth;\n  const skip = bar.borderSkipped;\n  const o = toTRBL(value);\n\n  return {\n    t: skipOrLimit(skip.top, o.top, 0, maxH),\n    r: skipOrLimit(skip.right, o.right, 0, maxW),\n    b: skipOrLimit(skip.bottom, o.bottom, 0, maxH),\n    l: skipOrLimit(skip.left, o.left, 0, maxW)\n  };\n}\n\nfunction parseBorderRadius(bar, maxW, maxH) {\n  const {enableBorderRadius} = bar.getProps(['enableBorderRadius']);\n  const value = bar.options.borderRadius;\n  const o = toTRBLCorners(value);\n  const maxR = Math.min(maxW, maxH);\n  const skip = bar.borderSkipped;\n\n  // If the value is an object, assume the user knows what they are doing\n  // and apply as directed.\n  const enableBorder = enableBorderRadius || isObject(value);\n\n  return {\n    topLeft: skipOrLimit(!enableBorder || skip.top || skip.left, o.topLeft, 0, maxR),\n    topRight: skipOrLimit(!enableBorder || skip.top || skip.right, o.topRight, 0, maxR),\n    bottomLeft: skipOrLimit(!enableBorder || skip.bottom || skip.left, o.bottomLeft, 0, maxR),\n    bottomRight: skipOrLimit(!enableBorder || skip.bottom || skip.right, o.bottomRight, 0, maxR)\n  };\n}\n\nfunction boundingRects(bar) {\n  const bounds = getBarBounds(bar);\n  const width = bounds.right - bounds.left;\n  const height = bounds.bottom - bounds.top;\n  const border = parseBorderWidth(bar, width / 2, height / 2);\n  const radius = parseBorderRadius(bar, width / 2, height / 2);\n\n  return {\n    outer: {\n      x: bounds.left,\n      y: bounds.top,\n      w: width,\n      h: height,\n      radius\n    },\n    inner: {\n      x: bounds.left + border.l,\n      y: bounds.top + border.t,\n      w: width - border.l - border.r,\n      h: height - border.t - border.b,\n      radius: {\n        topLeft: Math.max(0, radius.topLeft - Math.max(border.t, border.l)),\n        topRight: Math.max(0, radius.topRight - Math.max(border.t, border.r)),\n        bottomLeft: Math.max(0, radius.bottomLeft - Math.max(border.b, border.l)),\n        bottomRight: Math.max(0, radius.bottomRight - Math.max(border.b, border.r)),\n      }\n    }\n  };\n}\n\nfunction inRange(bar, x, y, useFinalPosition) {\n  const skipX = x === null;\n  const skipY = y === null;\n  const skipBoth = skipX && skipY;\n  const bounds = bar && !skipBoth && getBarBounds(bar, useFinalPosition);\n\n  return bounds\n\t\t&& (skipX || _isBetween(x, bounds.left, bounds.right))\n\t\t&& (skipY || _isBetween(y, bounds.top, bounds.bottom));\n}\n\nfunction hasRadius(radius) {\n  return radius.topLeft || radius.topRight || radius.bottomLeft || radius.bottomRight;\n}\n\n/**\n * Add a path of a rectangle to the current sub-path\n * @param {CanvasRenderingContext2D} ctx Context\n * @param {*} rect Bounding rect\n */\nfunction addNormalRectPath(ctx, rect) {\n  ctx.rect(rect.x, rect.y, rect.w, rect.h);\n}\n\nfunction inflateRect(rect, amount, refRect = {}) {\n  const x = rect.x !== refRect.x ? -amount : 0;\n  const y = rect.y !== refRect.y ? -amount : 0;\n  const w = (rect.x + rect.w !== refRect.x + refRect.w ? amount : 0) - x;\n  const h = (rect.y + rect.h !== refRect.y + refRect.h ? amount : 0) - y;\n  return {\n    x: rect.x + x,\n    y: rect.y + y,\n    w: rect.w + w,\n    h: rect.h + h,\n    radius: rect.radius\n  };\n}\n\nexport default class BarElement extends Element {\n\n  static id = 'bar';\n\n  /**\n   * @type {any}\n   */\n  static defaults = {\n    borderSkipped: 'start',\n    borderWidth: 0,\n    borderRadius: 0,\n    inflateAmount: 'auto',\n    pointStyle: undefined\n  };\n\n  /**\n   * @type {any}\n   */\n  static defaultRoutes = {\n    backgroundColor: 'backgroundColor',\n    borderColor: 'borderColor'\n  };\n\n  constructor(cfg) {\n    super();\n\n    this.options = undefined;\n    this.horizontal = undefined;\n    this.base = undefined;\n    this.width = undefined;\n    this.height = undefined;\n    this.inflateAmount = undefined;\n\n    if (cfg) {\n      Object.assign(this, cfg);\n    }\n  }\n\n  draw(ctx) {\n    const {inflateAmount, options: {borderColor, backgroundColor}} = this;\n    const {inner, outer} = boundingRects(this);\n    const addRectPath = hasRadius(outer.radius) ? addRoundedRectPath : addNormalRectPath;\n\n    ctx.save();\n\n    if (outer.w !== inner.w || outer.h !== inner.h) {\n      ctx.beginPath();\n      addRectPath(ctx, inflateRect(outer, inflateAmount, inner));\n      ctx.clip();\n      addRectPath(ctx, inflateRect(inner, -inflateAmount, outer));\n      ctx.fillStyle = borderColor;\n      ctx.fill('evenodd');\n    }\n\n    ctx.beginPath();\n    addRectPath(ctx, inflateRect(inner, inflateAmount));\n    ctx.fillStyle = backgroundColor;\n    ctx.fill();\n\n    ctx.restore();\n  }\n\n  inRange(mouseX, mouseY, useFinalPosition) {\n    return inRange(this, mouseX, mouseY, useFinalPosition);\n  }\n\n  inXRange(mouseX, useFinalPosition) {\n    return inRange(this, mouseX, null, useFinalPosition);\n  }\n\n  inYRange(mouseY, useFinalPosition) {\n    return inRange(this, null, mouseY, useFinalPosition);\n  }\n\n  getCenterPoint(useFinalPosition) {\n    const {x, y, base, horizontal} = /** @type {BarProps} */ (this.getProps(['x', 'y', 'base', 'horizontal'], useFinalPosition));\n    return {\n      x: horizontal ? (x + base) / 2 : x,\n      y: horizontal ? y : (y + base) / 2\n    };\n  }\n\n  getRange(axis) {\n    return axis === 'x' ? this.width / 2 : this.height / 2;\n  }\n}\n","import {Title} from './plugin.title.js';\nimport layouts from '../core/core.layouts.js';\n\nconst map = new WeakMap();\n\nexport default {\n  id: 'subtitle',\n\n  start(chart, _args, options) {\n    const title = new Title({\n      ctx: chart.ctx,\n      options,\n      chart\n    });\n\n    layouts.configure(chart, title, options);\n    layouts.addBox(chart, title);\n    map.set(chart, title);\n  },\n\n  stop(chart) {\n    layouts.removeBox(chart, map.get(chart));\n    map.delete(chart);\n  },\n\n  beforeUpdate(chart, _args, options) {\n    const title = map.get(chart);\n    layouts.configure(chart, title, options);\n    title.options = options;\n  },\n\n  defaults: {\n    align: 'center',\n    display: false,\n    font: {\n      weight: 'normal',\n    },\n    fullSize: true,\n    padding: 0,\n    position: 'top',\n    text: '',\n    weight: 1500         // by default greater than legend (1000) and smaller than title (2000)\n  },\n\n  defaultRoutes: {\n    color: 'color'\n  },\n\n  descriptors: {\n    _scriptable: true,\n    _indexable: false,\n  },\n};\n","import Animations from '../core/core.animations.js';\nimport Element from '../core/core.element.js';\nimport {addRoundedRectPath} from '../helpers/helpers.canvas.js';\nimport {each, noop, isNullOrUndef, isArray, _elementsEqual, isObject} from '../helpers/helpers.core.js';\nimport {toFont, toPadding, toTRBLCorners} from '../helpers/helpers.options.js';\nimport {getRtlAdapter, overrideTextDirection, restoreTextDirection} from '../helpers/helpers.rtl.js';\nimport {distanceBetweenPoints, _limitValue} from '../helpers/helpers.math.js';\nimport {createContext, drawPoint} from '../helpers/index.js';\n\n/**\n * @typedef { import('../platform/platform.base.js').Chart } Chart\n * @typedef { import('../types/index.js').ChartEvent } ChartEvent\n * @typedef { import('../types/index.js').ActiveElement } ActiveElement\n * @typedef { import('../core/core.interaction.js').InteractionItem } InteractionItem\n */\n\nconst positioners = {\n  /**\n\t * Average mode places the tooltip at the average position of the elements shown\n\t */\n  average(items) {\n    if (!items.length) {\n      return false;\n    }\n\n    let i, len;\n    let xSet = new Set();\n    let y = 0;\n    let count = 0;\n\n    for (i = 0, len = items.length; i < len; ++i) {\n      const el = items[i].element;\n      if (el && el.hasValue()) {\n        const pos = el.tooltipPosition();\n        xSet.add(pos.x);\n        y += pos.y;\n        ++count;\n      }\n    }\n\n    const xAverage = [...xSet].reduce((a, b) => a + b) / xSet.size;\n\n    return {\n      x: xAverage,\n      y: y / count\n    };\n  },\n\n  /**\n\t * Gets the tooltip position nearest of the item nearest to the event position\n\t */\n  nearest(items, eventPosition) {\n    if (!items.length) {\n      return false;\n    }\n\n    let x = eventPosition.x;\n    let y = eventPosition.y;\n    let minDistance = Number.POSITIVE_INFINITY;\n    let i, len, nearestElement;\n\n    for (i = 0, len = items.length; i < len; ++i) {\n      const el = items[i].element;\n      if (el && el.hasValue()) {\n        const center = el.getCenterPoint();\n        const d = distanceBetweenPoints(eventPosition, center);\n\n        if (d < minDistance) {\n          minDistance = d;\n          nearestElement = el;\n        }\n      }\n    }\n\n    if (nearestElement) {\n      const tp = nearestElement.tooltipPosition();\n      x = tp.x;\n      y = tp.y;\n    }\n\n    return {\n      x,\n      y\n    };\n  }\n};\n\n// Helper to push or concat based on if the 2nd parameter is an array or not\nfunction pushOrConcat(base, toPush) {\n  if (toPush) {\n    if (isArray(toPush)) {\n      // base = base.concat(toPush);\n      Array.prototype.push.apply(base, toPush);\n    } else {\n      base.push(toPush);\n    }\n  }\n\n  return base;\n}\n\n/**\n * Returns array of strings split by newline\n * @param {*} str - The value to split by newline.\n * @returns {string|string[]} value if newline present - Returned from String split() method\n * @function\n */\nfunction splitNewlines(str) {\n  if ((typeof str === 'string' || str instanceof String) && str.indexOf('\\n') > -1) {\n    return str.split('\\n');\n  }\n  return str;\n}\n\n\n/**\n * Private helper to create a tooltip item model\n * @param {Chart} chart\n * @param {ActiveElement} item - {element, index, datasetIndex} to create the tooltip item for\n * @return new tooltip item\n */\nfunction createTooltipItem(chart, item) {\n  const {element, datasetIndex, index} = item;\n  const controller = chart.getDatasetMeta(datasetIndex).controller;\n  const {label, value} = controller.getLabelAndValue(index);\n\n  return {\n    chart,\n    label,\n    parsed: controller.getParsed(index),\n    raw: chart.data.datasets[datasetIndex].data[index],\n    formattedValue: value,\n    dataset: controller.getDataset(),\n    dataIndex: index,\n    datasetIndex,\n    element\n  };\n}\n\n/**\n * Get the size of the tooltip\n */\nfunction getTooltipSize(tooltip, options) {\n  const ctx = tooltip.chart.ctx;\n  const {body, footer, title} = tooltip;\n  const {boxWidth, boxHeight} = options;\n  const bodyFont = toFont(options.bodyFont);\n  const titleFont = toFont(options.titleFont);\n  const footerFont = toFont(options.footerFont);\n  const titleLineCount = title.length;\n  const footerLineCount = footer.length;\n  const bodyLineItemCount = body.length;\n\n  const padding = toPadding(options.padding);\n  let height = padding.height;\n  let width = 0;\n\n  // Count of all lines in the body\n  let combinedBodyLength = body.reduce((count, bodyItem) => count + bodyItem.before.length + bodyItem.lines.length + bodyItem.after.length, 0);\n  combinedBodyLength += tooltip.beforeBody.length + tooltip.afterBody.length;\n\n  if (titleLineCount) {\n    height += titleLineCount * titleFont.lineHeight\n\t\t\t+ (titleLineCount - 1) * options.titleSpacing\n\t\t\t+ options.titleMarginBottom;\n  }\n  if (combinedBodyLength) {\n    // Body lines may include some extra height depending on boxHeight\n    const bodyLineHeight = options.displayColors ? Math.max(boxHeight, bodyFont.lineHeight) : bodyFont.lineHeight;\n    height += bodyLineItemCount * bodyLineHeight\n\t\t\t+ (combinedBodyLength - bodyLineItemCount) * bodyFont.lineHeight\n\t\t\t+ (combinedBodyLength - 1) * options.bodySpacing;\n  }\n  if (footerLineCount) {\n    height += options.footerMarginTop\n\t\t\t+ footerLineCount * footerFont.lineHeight\n\t\t\t+ (footerLineCount - 1) * options.footerSpacing;\n  }\n\n  // Title width\n  let widthPadding = 0;\n  const maxLineWidth = function(line) {\n    width = Math.max(width, ctx.measureText(line).width + widthPadding);\n  };\n\n  ctx.save();\n\n  ctx.font = titleFont.string;\n  each(tooltip.title, maxLineWidth);\n\n  // Body width\n  ctx.font = bodyFont.string;\n  each(tooltip.beforeBody.concat(tooltip.afterBody), maxLineWidth);\n\n  // Body lines may include some extra width due to the color box\n  widthPadding = options.displayColors ? (boxWidth + 2 + options.boxPadding) : 0;\n  each(body, (bodyItem) => {\n    each(bodyItem.before, maxLineWidth);\n    each(bodyItem.lines, maxLineWidth);\n    each(bodyItem.after, maxLineWidth);\n  });\n\n  // Reset back to 0\n  widthPadding = 0;\n\n  // Footer width\n  ctx.font = footerFont.string;\n  each(tooltip.footer, maxLineWidth);\n\n  ctx.restore();\n\n  // Add padding\n  width += padding.width;\n\n  return {width, height};\n}\n\nfunction determineYAlign(chart, size) {\n  const {y, height} = size;\n\n  if (y < height / 2) {\n    return 'top';\n  } else if (y > (chart.height - height / 2)) {\n    return 'bottom';\n  }\n  return 'center';\n}\n\nfunction doesNotFitWithAlign(xAlign, chart, options, size) {\n  const {x, width} = size;\n  const caret = options.caretSize + options.caretPadding;\n  if (xAlign === 'left' && x + width + caret > chart.width) {\n    return true;\n  }\n\n  if (xAlign === 'right' && x - width - caret < 0) {\n    return true;\n  }\n}\n\nfunction determineXAlign(chart, options, size, yAlign) {\n  const {x, width} = size;\n  const {width: chartWidth, chartArea: {left, right}} = chart;\n  let xAlign = 'center';\n\n  if (yAlign === 'center') {\n    xAlign = x <= (left + right) / 2 ? 'left' : 'right';\n  } else if (x <= width / 2) {\n    xAlign = 'left';\n  } else if (x >= chartWidth - width / 2) {\n    xAlign = 'right';\n  }\n\n  if (doesNotFitWithAlign(xAlign, chart, options, size)) {\n    xAlign = 'center';\n  }\n\n  return xAlign;\n}\n\n/**\n * Helper to get the alignment of a tooltip given the size\n */\nfunction determineAlignment(chart, options, size) {\n  const yAlign = size.yAlign || options.yAlign || determineYAlign(chart, size);\n\n  return {\n    xAlign: size.xAlign || options.xAlign || determineXAlign(chart, options, size, yAlign),\n    yAlign\n  };\n}\n\nfunction alignX(size, xAlign) {\n  let {x, width} = size;\n  if (xAlign === 'right') {\n    x -= width;\n  } else if (xAlign === 'center') {\n    x -= (width / 2);\n  }\n  return x;\n}\n\nfunction alignY(size, yAlign, paddingAndSize) {\n  // eslint-disable-next-line prefer-const\n  let {y, height} = size;\n  if (yAlign === 'top') {\n    y += paddingAndSize;\n  } else if (yAlign === 'bottom') {\n    y -= height + paddingAndSize;\n  } else {\n    y -= (height / 2);\n  }\n  return y;\n}\n\n/**\n * Helper to get the location a tooltip needs to be placed at given the initial position (via the vm) and the size and alignment\n */\nfunction getBackgroundPoint(options, size, alignment, chart) {\n  const {caretSize, caretPadding, cornerRadius} = options;\n  const {xAlign, yAlign} = alignment;\n  const paddingAndSize = caretSize + caretPadding;\n  const {topLeft, topRight, bottomLeft, bottomRight} = toTRBLCorners(cornerRadius);\n\n  let x = alignX(size, xAlign);\n  const y = alignY(size, yAlign, paddingAndSize);\n\n  if (yAlign === 'center') {\n    if (xAlign === 'left') {\n      x += paddingAndSize;\n    } else if (xAlign === 'right') {\n      x -= paddingAndSize;\n    }\n  } else if (xAlign === 'left') {\n    x -= Math.max(topLeft, bottomLeft) + caretSize;\n  } else if (xAlign === 'right') {\n    x += Math.max(topRight, bottomRight) + caretSize;\n  }\n\n  return {\n    x: _limitValue(x, 0, chart.width - size.width),\n    y: _limitValue(y, 0, chart.height - size.height)\n  };\n}\n\nfunction getAlignedX(tooltip, align, options) {\n  const padding = toPadding(options.padding);\n\n  return align === 'center'\n    ? tooltip.x + tooltip.width / 2\n    : align === 'right'\n      ? tooltip.x + tooltip.width - padding.right\n      : tooltip.x + padding.left;\n}\n\n/**\n * Helper to build before and after body lines\n */\nfunction getBeforeAfterBodyLines(callback) {\n  return pushOrConcat([], splitNewlines(callback));\n}\n\nfunction createTooltipContext(parent, tooltip, tooltipItems) {\n  return createContext(parent, {\n    tooltip,\n    tooltipItems,\n    type: 'tooltip'\n  });\n}\n\nfunction overrideCallbacks(callbacks, context) {\n  const override = context && context.dataset && context.dataset.tooltip && context.dataset.tooltip.callbacks;\n  return override ? callbacks.override(override) : callbacks;\n}\n\nconst defaultCallbacks = {\n  // Args are: (tooltipItems, data)\n  beforeTitle: noop,\n  title(tooltipItems) {\n    if (tooltipItems.length > 0) {\n      const item = tooltipItems[0];\n      const labels = item.chart.data.labels;\n      const labelCount = labels ? labels.length : 0;\n\n      if (this && this.options && this.options.mode === 'dataset') {\n        return item.dataset.label || '';\n      } else if (item.label) {\n        return item.label;\n      } else if (labelCount > 0 && item.dataIndex < labelCount) {\n        return labels[item.dataIndex];\n      }\n    }\n\n    return '';\n  },\n  afterTitle: noop,\n\n  // Args are: (tooltipItems, data)\n  beforeBody: noop,\n\n  // Args are: (tooltipItem, data)\n  beforeLabel: noop,\n  label(tooltipItem) {\n    if (this && this.options && this.options.mode === 'dataset') {\n      return tooltipItem.label + ': ' + tooltipItem.formattedValue || tooltipItem.formattedValue;\n    }\n\n    let label = tooltipItem.dataset.label || '';\n\n    if (label) {\n      label += ': ';\n    }\n    const value = tooltipItem.formattedValue;\n    if (!isNullOrUndef(value)) {\n      label += value;\n    }\n    return label;\n  },\n  labelColor(tooltipItem) {\n    const meta = tooltipItem.chart.getDatasetMeta(tooltipItem.datasetIndex);\n    const options = meta.controller.getStyle(tooltipItem.dataIndex);\n    return {\n      borderColor: options.borderColor,\n      backgroundColor: options.backgroundColor,\n      borderWidth: options.borderWidth,\n      borderDash: options.borderDash,\n      borderDashOffset: options.borderDashOffset,\n      borderRadius: 0,\n    };\n  },\n  labelTextColor() {\n    return this.options.bodyColor;\n  },\n  labelPointStyle(tooltipItem) {\n    const meta = tooltipItem.chart.getDatasetMeta(tooltipItem.datasetIndex);\n    const options = meta.controller.getStyle(tooltipItem.dataIndex);\n    return {\n      pointStyle: options.pointStyle,\n      rotation: options.rotation,\n    };\n  },\n  afterLabel: noop,\n\n  // Args are: (tooltipItems, data)\n  afterBody: noop,\n\n  // Args are: (tooltipItems, data)\n  beforeFooter: noop,\n  footer: noop,\n  afterFooter: noop\n};\n\n/**\n * Invoke callback from object with context and arguments.\n * If callback returns `undefined`, then will be invoked default callback.\n * @param {Record<keyof typeof defaultCallbacks, Function>} callbacks\n * @param {keyof typeof defaultCallbacks} name\n * @param {*} ctx\n * @param {*} arg\n * @returns {any}\n */\nfunction invokeCallbackWithFallback(callbacks, name, ctx, arg) {\n  const result = callbacks[name].call(ctx, arg);\n\n  if (typeof result === 'undefined') {\n    return defaultCallbacks[name].call(ctx, arg);\n  }\n\n  return result;\n}\n\nexport class Tooltip extends Element {\n\n  /**\n   * @namespace Chart.Tooltip.positioners\n   */\n  static positioners = positioners;\n\n  constructor(config) {\n    super();\n\n    this.opacity = 0;\n    this._active = [];\n    this._eventPosition = undefined;\n    this._size = undefined;\n    this._cachedAnimations = undefined;\n    this._tooltipItems = [];\n    this.$animations = undefined;\n    this.$context = undefined;\n    this.chart = config.chart;\n    this.options = config.options;\n    this.dataPoints = undefined;\n    this.title = undefined;\n    this.beforeBody = undefined;\n    this.body = undefined;\n    this.afterBody = undefined;\n    this.footer = undefined;\n    this.xAlign = undefined;\n    this.yAlign = undefined;\n    this.x = undefined;\n    this.y = undefined;\n    this.height = undefined;\n    this.width = undefined;\n    this.caretX = undefined;\n    this.caretY = undefined;\n    // TODO: V4, make this private, rename to `_labelStyles`, and combine with `labelPointStyles`\n    // and `labelTextColors` to create a single variable\n    this.labelColors = undefined;\n    this.labelPointStyles = undefined;\n    this.labelTextColors = undefined;\n  }\n\n  initialize(options) {\n    this.options = options;\n    this._cachedAnimations = undefined;\n    this.$context = undefined;\n  }\n\n  /**\n\t * @private\n\t */\n  _resolveAnimations() {\n    const cached = this._cachedAnimations;\n\n    if (cached) {\n      return cached;\n    }\n\n    const chart = this.chart;\n    const options = this.options.setContext(this.getContext());\n    const opts = options.enabled && chart.options.animation && options.animations;\n    const animations = new Animations(this.chart, opts);\n    if (opts._cacheable) {\n      this._cachedAnimations = Object.freeze(animations);\n    }\n\n    return animations;\n  }\n\n  /**\n\t * @protected\n\t */\n  getContext() {\n    return this.$context ||\n\t\t\t(this.$context = createTooltipContext(this.chart.getContext(), this, this._tooltipItems));\n  }\n\n  getTitle(context, options) {\n    const {callbacks} = options;\n\n    const beforeTitle = invokeCallbackWithFallback(callbacks, 'beforeTitle', this, context);\n    const title = invokeCallbackWithFallback(callbacks, 'title', this, context);\n    const afterTitle = invokeCallbackWithFallback(callbacks, 'afterTitle', this, context);\n\n    let lines = [];\n    lines = pushOrConcat(lines, splitNewlines(beforeTitle));\n    lines = pushOrConcat(lines, splitNewlines(title));\n    lines = pushOrConcat(lines, splitNewlines(afterTitle));\n\n    return lines;\n  }\n\n  getBeforeBody(tooltipItems, options) {\n    return getBeforeAfterBodyLines(\n      invokeCallbackWithFallback(options.callbacks, 'beforeBody', this, tooltipItems)\n    );\n  }\n\n  getBody(tooltipItems, options) {\n    const {callbacks} = options;\n    const bodyItems = [];\n\n    each(tooltipItems, (context) => {\n      const bodyItem = {\n        before: [],\n        lines: [],\n        after: []\n      };\n      const scoped = overrideCallbacks(callbacks, context);\n      pushOrConcat(bodyItem.before, splitNewlines(invokeCallbackWithFallback(scoped, 'beforeLabel', this, context)));\n      pushOrConcat(bodyItem.lines, invokeCallbackWithFallback(scoped, 'label', this, context));\n      pushOrConcat(bodyItem.after, splitNewlines(invokeCallbackWithFallback(scoped, 'afterLabel', this, context)));\n\n      bodyItems.push(bodyItem);\n    });\n\n    return bodyItems;\n  }\n\n  getAfterBody(tooltipItems, options) {\n    return getBeforeAfterBodyLines(\n      invokeCallbackWithFallback(options.callbacks, 'afterBody', this, tooltipItems)\n    );\n  }\n\n  // Get the footer and beforeFooter and afterFooter lines\n  getFooter(tooltipItems, options) {\n    const {callbacks} = options;\n\n    const beforeFooter = invokeCallbackWithFallback(callbacks, 'beforeFooter', this, tooltipItems);\n    const footer = invokeCallbackWithFallback(callbacks, 'footer', this, tooltipItems);\n    const afterFooter = invokeCallbackWithFallback(callbacks, 'afterFooter', this, tooltipItems);\n\n    let lines = [];\n    lines = pushOrConcat(lines, splitNewlines(beforeFooter));\n    lines = pushOrConcat(lines, splitNewlines(footer));\n    lines = pushOrConcat(lines, splitNewlines(afterFooter));\n\n    return lines;\n  }\n\n  /**\n\t * @private\n\t */\n  _createItems(options) {\n    const active = this._active;\n    const data = this.chart.data;\n    const labelColors = [];\n    const labelPointStyles = [];\n    const labelTextColors = [];\n    let tooltipItems = [];\n    let i, len;\n\n    for (i = 0, len = active.length; i < len; ++i) {\n      tooltipItems.push(createTooltipItem(this.chart, active[i]));\n    }\n\n    // If the user provided a filter function, use it to modify the tooltip items\n    if (options.filter) {\n      tooltipItems = tooltipItems.filter((element, index, array) => options.filter(element, index, array, data));\n    }\n\n    // If the user provided a sorting function, use it to modify the tooltip items\n    if (options.itemSort) {\n      tooltipItems = tooltipItems.sort((a, b) => options.itemSort(a, b, data));\n    }\n\n    // Determine colors for boxes\n    each(tooltipItems, (context) => {\n      const scoped = overrideCallbacks(options.callbacks, context);\n      labelColors.push(invokeCallbackWithFallback(scoped, 'labelColor', this, context));\n      labelPointStyles.push(invokeCallbackWithFallback(scoped, 'labelPointStyle', this, context));\n      labelTextColors.push(invokeCallbackWithFallback(scoped, 'labelTextColor', this, context));\n    });\n\n    this.labelColors = labelColors;\n    this.labelPointStyles = labelPointStyles;\n    this.labelTextColors = labelTextColors;\n    this.dataPoints = tooltipItems;\n    return tooltipItems;\n  }\n\n  update(changed, replay) {\n    const options = this.options.setContext(this.getContext());\n    const active = this._active;\n    let properties;\n    let tooltipItems = [];\n\n    if (!active.length) {\n      if (this.opacity !== 0) {\n        properties = {\n          opacity: 0\n        };\n      }\n    } else {\n      const position = positioners[options.position].call(this, active, this._eventPosition);\n      tooltipItems = this._createItems(options);\n\n      this.title = this.getTitle(tooltipItems, options);\n      this.beforeBody = this.getBeforeBody(tooltipItems, options);\n      this.body = this.getBody(tooltipItems, options);\n      this.afterBody = this.getAfterBody(tooltipItems, options);\n      this.footer = this.getFooter(tooltipItems, options);\n\n      const size = this._size = getTooltipSize(this, options);\n      const positionAndSize = Object.assign({}, position, size);\n      const alignment = determineAlignment(this.chart, options, positionAndSize);\n      const backgroundPoint = getBackgroundPoint(options, positionAndSize, alignment, this.chart);\n\n      this.xAlign = alignment.xAlign;\n      this.yAlign = alignment.yAlign;\n\n      properties = {\n        opacity: 1,\n        x: backgroundPoint.x,\n        y: backgroundPoint.y,\n        width: size.width,\n        height: size.height,\n        caretX: position.x,\n        caretY: position.y\n      };\n    }\n\n    this._tooltipItems = tooltipItems;\n    this.$context = undefined;\n\n    if (properties) {\n      this._resolveAnimations().update(this, properties);\n    }\n\n    if (changed && options.external) {\n      options.external.call(this, {chart: this.chart, tooltip: this, replay});\n    }\n  }\n\n  drawCaret(tooltipPoint, ctx, size, options) {\n    const caretPosition = this.getCaretPosition(tooltipPoint, size, options);\n\n    ctx.lineTo(caretPosition.x1, caretPosition.y1);\n    ctx.lineTo(caretPosition.x2, caretPosition.y2);\n    ctx.lineTo(caretPosition.x3, caretPosition.y3);\n  }\n\n  getCaretPosition(tooltipPoint, size, options) {\n    const {xAlign, yAlign} = this;\n    const {caretSize, cornerRadius} = options;\n    const {topLeft, topRight, bottomLeft, bottomRight} = toTRBLCorners(cornerRadius);\n    const {x: ptX, y: ptY} = tooltipPoint;\n    const {width, height} = size;\n    let x1, x2, x3, y1, y2, y3;\n\n    if (yAlign === 'center') {\n      y2 = ptY + (height / 2);\n\n      if (xAlign === 'left') {\n        x1 = ptX;\n        x2 = x1 - caretSize;\n\n        // Left draws bottom -> top, this y1 is on the bottom\n        y1 = y2 + caretSize;\n        y3 = y2 - caretSize;\n      } else {\n        x1 = ptX + width;\n        x2 = x1 + caretSize;\n\n        // Right draws top -> bottom, thus y1 is on the top\n        y1 = y2 - caretSize;\n        y3 = y2 + caretSize;\n      }\n\n      x3 = x1;\n    } else {\n      if (xAlign === 'left') {\n        x2 = ptX + Math.max(topLeft, bottomLeft) + (caretSize);\n      } else if (xAlign === 'right') {\n        x2 = ptX + width - Math.max(topRight, bottomRight) - caretSize;\n      } else {\n        x2 = this.caretX;\n      }\n\n      if (yAlign === 'top') {\n        y1 = ptY;\n        y2 = y1 - caretSize;\n\n        // Top draws left -> right, thus x1 is on the left\n        x1 = x2 - caretSize;\n        x3 = x2 + caretSize;\n      } else {\n        y1 = ptY + height;\n        y2 = y1 + caretSize;\n\n        // Bottom draws right -> left, thus x1 is on the right\n        x1 = x2 + caretSize;\n        x3 = x2 - caretSize;\n      }\n      y3 = y1;\n    }\n    return {x1, x2, x3, y1, y2, y3};\n  }\n\n  drawTitle(pt, ctx, options) {\n    const title = this.title;\n    const length = title.length;\n    let titleFont, titleSpacing, i;\n\n    if (length) {\n      const rtlHelper = getRtlAdapter(options.rtl, this.x, this.width);\n\n      pt.x = getAlignedX(this, options.titleAlign, options);\n\n      ctx.textAlign = rtlHelper.textAlign(options.titleAlign);\n      ctx.textBaseline = 'middle';\n\n      titleFont = toFont(options.titleFont);\n      titleSpacing = options.titleSpacing;\n\n      ctx.fillStyle = options.titleColor;\n      ctx.font = titleFont.string;\n\n      for (i = 0; i < length; ++i) {\n        ctx.fillText(title[i], rtlHelper.x(pt.x), pt.y + titleFont.lineHeight / 2);\n        pt.y += titleFont.lineHeight + titleSpacing; // Line Height and spacing\n\n        if (i + 1 === length) {\n          pt.y += options.titleMarginBottom - titleSpacing; // If Last, add margin, remove spacing\n        }\n      }\n    }\n  }\n\n  /**\n\t * @private\n\t */\n  _drawColorBox(ctx, pt, i, rtlHelper, options) {\n    const labelColor = this.labelColors[i];\n    const labelPointStyle = this.labelPointStyles[i];\n    const {boxHeight, boxWidth} = options;\n    const bodyFont = toFont(options.bodyFont);\n    const colorX = getAlignedX(this, 'left', options);\n    const rtlColorX = rtlHelper.x(colorX);\n    const yOffSet = boxHeight < bodyFont.lineHeight ? (bodyFont.lineHeight - boxHeight) / 2 : 0;\n    const colorY = pt.y + yOffSet;\n\n    if (options.usePointStyle) {\n      const drawOptions = {\n        radius: Math.min(boxWidth, boxHeight) / 2, // fit the circle in the box\n        pointStyle: labelPointStyle.pointStyle,\n        rotation: labelPointStyle.rotation,\n        borderWidth: 1\n      };\n      // Recalculate x and y for drawPoint() because its expecting\n      // x and y to be center of figure (instead of top left)\n      const centerX = rtlHelper.leftForLtr(rtlColorX, boxWidth) + boxWidth / 2;\n      const centerY = colorY + boxHeight / 2;\n\n      // Fill the point with white so that colours merge nicely if the opacity is < 1\n      ctx.strokeStyle = options.multiKeyBackground;\n      ctx.fillStyle = options.multiKeyBackground;\n      drawPoint(ctx, drawOptions, centerX, centerY);\n\n      // Draw the point\n      ctx.strokeStyle = labelColor.borderColor;\n      ctx.fillStyle = labelColor.backgroundColor;\n      drawPoint(ctx, drawOptions, centerX, centerY);\n    } else {\n      // Border\n      ctx.lineWidth = isObject(labelColor.borderWidth) ? Math.max(...Object.values(labelColor.borderWidth)) : (labelColor.borderWidth || 1); // TODO, v4 remove fallback\n      ctx.strokeStyle = labelColor.borderColor;\n      ctx.setLineDash(labelColor.borderDash || []);\n      ctx.lineDashOffset = labelColor.borderDashOffset || 0;\n\n      // Fill a white rect so that colours merge nicely if the opacity is < 1\n      const outerX = rtlHelper.leftForLtr(rtlColorX, boxWidth);\n      const innerX = rtlHelper.leftForLtr(rtlHelper.xPlus(rtlColorX, 1), boxWidth - 2);\n      const borderRadius = toTRBLCorners(labelColor.borderRadius);\n\n      if (Object.values(borderRadius).some(v => v !== 0)) {\n        ctx.beginPath();\n        ctx.fillStyle = options.multiKeyBackground;\n        addRoundedRectPath(ctx, {\n          x: outerX,\n          y: colorY,\n          w: boxWidth,\n          h: boxHeight,\n          radius: borderRadius,\n        });\n        ctx.fill();\n        ctx.stroke();\n\n        // Inner square\n        ctx.fillStyle = labelColor.backgroundColor;\n        ctx.beginPath();\n        addRoundedRectPath(ctx, {\n          x: innerX,\n          y: colorY + 1,\n          w: boxWidth - 2,\n          h: boxHeight - 2,\n          radius: borderRadius,\n        });\n        ctx.fill();\n      } else {\n        // Normal rect\n        ctx.fillStyle = options.multiKeyBackground;\n        ctx.fillRect(outerX, colorY, boxWidth, boxHeight);\n        ctx.strokeRect(outerX, colorY, boxWidth, boxHeight);\n        // Inner square\n        ctx.fillStyle = labelColor.backgroundColor;\n        ctx.fillRect(innerX, colorY + 1, boxWidth - 2, boxHeight - 2);\n      }\n    }\n\n    // restore fillStyle\n    ctx.fillStyle = this.labelTextColors[i];\n  }\n\n  drawBody(pt, ctx, options) {\n    const {body} = this;\n    const {bodySpacing, bodyAlign, displayColors, boxHeight, boxWidth, boxPadding} = options;\n    const bodyFont = toFont(options.bodyFont);\n    let bodyLineHeight = bodyFont.lineHeight;\n    let xLinePadding = 0;\n\n    const rtlHelper = getRtlAdapter(options.rtl, this.x, this.width);\n\n    const fillLineOfText = function(line) {\n      ctx.fillText(line, rtlHelper.x(pt.x + xLinePadding), pt.y + bodyLineHeight / 2);\n      pt.y += bodyLineHeight + bodySpacing;\n    };\n\n    const bodyAlignForCalculation = rtlHelper.textAlign(bodyAlign);\n    let bodyItem, textColor, lines, i, j, ilen, jlen;\n\n    ctx.textAlign = bodyAlign;\n    ctx.textBaseline = 'middle';\n    ctx.font = bodyFont.string;\n\n    pt.x = getAlignedX(this, bodyAlignForCalculation, options);\n\n    // Before body lines\n    ctx.fillStyle = options.bodyColor;\n    each(this.beforeBody, fillLineOfText);\n\n    xLinePadding = displayColors && bodyAlignForCalculation !== 'right'\n      ? bodyAlign === 'center' ? (boxWidth / 2 + boxPadding) : (boxWidth + 2 + boxPadding)\n      : 0;\n\n    // Draw body lines now\n    for (i = 0, ilen = body.length; i < ilen; ++i) {\n      bodyItem = body[i];\n      textColor = this.labelTextColors[i];\n\n      ctx.fillStyle = textColor;\n      each(bodyItem.before, fillLineOfText);\n\n      lines = bodyItem.lines;\n      // Draw Legend-like boxes if needed\n      if (displayColors && lines.length) {\n        this._drawColorBox(ctx, pt, i, rtlHelper, options);\n        bodyLineHeight = Math.max(bodyFont.lineHeight, boxHeight);\n      }\n\n      for (j = 0, jlen = lines.length; j < jlen; ++j) {\n        fillLineOfText(lines[j]);\n        // Reset for any lines that don't include colorbox\n        bodyLineHeight = bodyFont.lineHeight;\n      }\n\n      each(bodyItem.after, fillLineOfText);\n    }\n\n    // Reset back to 0 for after body\n    xLinePadding = 0;\n    bodyLineHeight = bodyFont.lineHeight;\n\n    // After body lines\n    each(this.afterBody, fillLineOfText);\n    pt.y -= bodySpacing; // Remove last body spacing\n  }\n\n  drawFooter(pt, ctx, options) {\n    const footer = this.footer;\n    const length = footer.length;\n    let footerFont, i;\n\n    if (length) {\n      const rtlHelper = getRtlAdapter(options.rtl, this.x, this.width);\n\n      pt.x = getAlignedX(this, options.footerAlign, options);\n      pt.y += options.footerMarginTop;\n\n      ctx.textAlign = rtlHelper.textAlign(options.footerAlign);\n      ctx.textBaseline = 'middle';\n\n      footerFont = toFont(options.footerFont);\n\n      ctx.fillStyle = options.footerColor;\n      ctx.font = footerFont.string;\n\n      for (i = 0; i < length; ++i) {\n        ctx.fillText(footer[i], rtlHelper.x(pt.x), pt.y + footerFont.lineHeight / 2);\n        pt.y += footerFont.lineHeight + options.footerSpacing;\n      }\n    }\n  }\n\n  drawBackground(pt, ctx, tooltipSize, options) {\n    const {xAlign, yAlign} = this;\n    const {x, y} = pt;\n    const {width, height} = tooltipSize;\n    const {topLeft, topRight, bottomLeft, bottomRight} = toTRBLCorners(options.cornerRadius);\n\n    ctx.fillStyle = options.backgroundColor;\n    ctx.strokeStyle = options.borderColor;\n    ctx.lineWidth = options.borderWidth;\n\n    ctx.beginPath();\n    ctx.moveTo(x + topLeft, y);\n    if (yAlign === 'top') {\n      this.drawCaret(pt, ctx, tooltipSize, options);\n    }\n    ctx.lineTo(x + width - topRight, y);\n    ctx.quadraticCurveTo(x + width, y, x + width, y + topRight);\n    if (yAlign === 'center' && xAlign === 'right') {\n      this.drawCaret(pt, ctx, tooltipSize, options);\n    }\n    ctx.lineTo(x + width, y + height - bottomRight);\n    ctx.quadraticCurveTo(x + width, y + height, x + width - bottomRight, y + height);\n    if (yAlign === 'bottom') {\n      this.drawCaret(pt, ctx, tooltipSize, options);\n    }\n    ctx.lineTo(x + bottomLeft, y + height);\n    ctx.quadraticCurveTo(x, y + height, x, y + height - bottomLeft);\n    if (yAlign === 'center' && xAlign === 'left') {\n      this.drawCaret(pt, ctx, tooltipSize, options);\n    }\n    ctx.lineTo(x, y + topLeft);\n    ctx.quadraticCurveTo(x, y, x + topLeft, y);\n    ctx.closePath();\n\n    ctx.fill();\n\n    if (options.borderWidth > 0) {\n      ctx.stroke();\n    }\n  }\n\n  /**\n\t * Update x/y animation targets when _active elements are animating too\n\t * @private\n\t */\n  _updateAnimationTarget(options) {\n    const chart = this.chart;\n    const anims = this.$animations;\n    const animX = anims && anims.x;\n    const animY = anims && anims.y;\n    if (animX || animY) {\n      const position = positioners[options.position].call(this, this._active, this._eventPosition);\n      if (!position) {\n        return;\n      }\n      const size = this._size = getTooltipSize(this, options);\n      const positionAndSize = Object.assign({}, position, this._size);\n      const alignment = determineAlignment(chart, options, positionAndSize);\n      const point = getBackgroundPoint(options, positionAndSize, alignment, chart);\n      if (animX._to !== point.x || animY._to !== point.y) {\n        this.xAlign = alignment.xAlign;\n        this.yAlign = alignment.yAlign;\n        this.width = size.width;\n        this.height = size.height;\n        this.caretX = position.x;\n        this.caretY = position.y;\n        this._resolveAnimations().update(this, point);\n      }\n    }\n  }\n\n  /**\n   * Determine if the tooltip will draw anything\n   * @returns {boolean} True if the tooltip will render\n   */\n  _willRender() {\n    return !!this.opacity;\n  }\n\n  draw(ctx) {\n    const options = this.options.setContext(this.getContext());\n    let opacity = this.opacity;\n\n    if (!opacity) {\n      return;\n    }\n\n    this._updateAnimationTarget(options);\n\n    const tooltipSize = {\n      width: this.width,\n      height: this.height\n    };\n    const pt = {\n      x: this.x,\n      y: this.y\n    };\n\n    // IE11/Edge does not like very small opacities, so snap to 0\n    opacity = Math.abs(opacity) < 1e-3 ? 0 : opacity;\n\n    const padding = toPadding(options.padding);\n\n    // Truthy/falsey value for empty tooltip\n    const hasTooltipContent = this.title.length || this.beforeBody.length || this.body.length || this.afterBody.length || this.footer.length;\n\n    if (options.enabled && hasTooltipContent) {\n      ctx.save();\n      ctx.globalAlpha = opacity;\n\n      // Draw Background\n      this.drawBackground(pt, ctx, tooltipSize, options);\n\n      overrideTextDirection(ctx, options.textDirection);\n\n      pt.y += padding.top;\n\n      // Titles\n      this.drawTitle(pt, ctx, options);\n\n      // Body\n      this.drawBody(pt, ctx, options);\n\n      // Footer\n      this.drawFooter(pt, ctx, options);\n\n      restoreTextDirection(ctx, options.textDirection);\n\n      ctx.restore();\n    }\n  }\n\n  /**\n\t * Get active elements in the tooltip\n\t * @returns {Array} Array of elements that are active in the tooltip\n\t */\n  getActiveElements() {\n    return this._active || [];\n  }\n\n  /**\n\t * Set active elements in the tooltip\n\t * @param {array} activeElements Array of active datasetIndex/index pairs.\n\t * @param {object} eventPosition Synthetic event position used in positioning\n\t */\n  setActiveElements(activeElements, eventPosition) {\n    const lastActive = this._active;\n    const active = activeElements.map(({datasetIndex, index}) => {\n      const meta = this.chart.getDatasetMeta(datasetIndex);\n\n      if (!meta) {\n        throw new Error('Cannot find a dataset at index ' + datasetIndex);\n      }\n\n      return {\n        datasetIndex,\n        element: meta.data[index],\n        index,\n      };\n    });\n    const changed = !_elementsEqual(lastActive, active);\n    const positionChanged = this._positionChanged(active, eventPosition);\n\n    if (changed || positionChanged) {\n      this._active = active;\n      this._eventPosition = eventPosition;\n      this._ignoreReplayEvents = true;\n      this.update(true);\n    }\n  }\n\n  /**\n\t * Handle an event\n\t * @param {ChartEvent} e - The event to handle\n\t * @param {boolean} [replay] - This is a replayed event (from update)\n\t * @param {boolean} [inChartArea] - The event is inside chartArea\n\t * @returns {boolean} true if the tooltip changed\n\t */\n  handleEvent(e, replay, inChartArea = true) {\n    if (replay && this._ignoreReplayEvents) {\n      return false;\n    }\n    this._ignoreReplayEvents = false;\n\n    const options = this.options;\n    const lastActive = this._active || [];\n    const active = this._getActiveElements(e, lastActive, replay, inChartArea);\n\n    // When there are multiple items shown, but the tooltip position is nearest mode\n    // an update may need to be made because our position may have changed even though\n    // the items are the same as before.\n    const positionChanged = this._positionChanged(active, e);\n\n    // Remember Last Actives\n    const changed = replay || !_elementsEqual(active, lastActive) || positionChanged;\n\n    // Only handle target event on tooltip change\n    if (changed) {\n      this._active = active;\n\n      if (options.enabled || options.external) {\n        this._eventPosition = {\n          x: e.x,\n          y: e.y\n        };\n\n        this.update(true, replay);\n      }\n    }\n\n    return changed;\n  }\n\n  /**\n\t * Helper for determining the active elements for event\n\t * @param {ChartEvent} e - The event to handle\n\t * @param {InteractionItem[]} lastActive - Previously active elements\n\t * @param {boolean} [replay] - This is a replayed event (from update)\n\t * @param {boolean} [inChartArea] - The event is inside chartArea\n\t * @returns {InteractionItem[]} - Active elements\n\t * @private\n\t */\n  _getActiveElements(e, lastActive, replay, inChartArea) {\n    const options = this.options;\n\n    if (e.type === 'mouseout') {\n      return [];\n    }\n\n    if (!inChartArea) {\n      // Let user control the active elements outside chartArea. Eg. using Legend.\n      // But make sure that active elements are still valid.\n      return lastActive.filter(i =>\n        this.chart.data.datasets[i.datasetIndex] &&\n        this.chart.getDatasetMeta(i.datasetIndex).controller.getParsed(i.index) !== undefined\n      );\n    }\n\n    // Find Active Elements for tooltips\n    const active = this.chart.getElementsAtEventForMode(e, options.mode, options, replay);\n\n    if (options.reverse) {\n      active.reverse();\n    }\n\n    return active;\n  }\n\n  /**\n\t * Determine if the active elements + event combination changes the\n\t * tooltip position\n\t * @param {array} active - Active elements\n\t * @param {ChartEvent} e - Event that triggered the position change\n\t * @returns {boolean} True if the position has changed\n\t */\n  _positionChanged(active, e) {\n    const {caretX, caretY, options} = this;\n    const position = positioners[options.position].call(this, active, e);\n    return position !== false && (caretX !== position.x || caretY !== position.y);\n  }\n}\n\nexport default {\n  id: 'tooltip',\n  _element: Tooltip,\n  positioners,\n\n  afterInit(chart, _args, options) {\n    if (options) {\n      chart.tooltip = new Tooltip({chart, options});\n    }\n  },\n\n  beforeUpdate(chart, _args, options) {\n    if (chart.tooltip) {\n      chart.tooltip.initialize(options);\n    }\n  },\n\n  reset(chart, _args, options) {\n    if (chart.tooltip) {\n      chart.tooltip.initialize(options);\n    }\n  },\n\n  afterDraw(chart) {\n    const tooltip = chart.tooltip;\n\n    if (tooltip && tooltip._willRender()) {\n      const args = {\n        tooltip\n      };\n\n      if (chart.notifyPlugins('beforeTooltipDraw', {...args, cancelable: true}) === false) {\n        return;\n      }\n\n      tooltip.draw(chart.ctx);\n\n      chart.notifyPlugins('afterTooltipDraw', args);\n    }\n  },\n\n  afterEvent(chart, args) {\n    if (chart.tooltip) {\n      // If the event is replayed from `update`, we should evaluate with the final positions.\n      const useFinalPosition = args.replay;\n      if (chart.tooltip.handleEvent(args.event, useFinalPosition, args.inChartArea)) {\n        // notify chart about the change, so it will render\n        args.changed = true;\n      }\n    }\n  },\n\n  defaults: {\n    enabled: true,\n    external: null,\n    position: 'average',\n    backgroundColor: 'rgba(0,0,0,0.8)',\n    titleColor: '#fff',\n    titleFont: {\n      weight: 'bold',\n    },\n    titleSpacing: 2,\n    titleMarginBottom: 6,\n    titleAlign: 'left',\n    bodyColor: '#fff',\n    bodySpacing: 2,\n    bodyFont: {\n    },\n    bodyAlign: 'left',\n    footerColor: '#fff',\n    footerSpacing: 2,\n    footerMarginTop: 6,\n    footerFont: {\n      weight: 'bold',\n    },\n    footerAlign: 'left',\n    padding: 6,\n    caretPadding: 2,\n    caretSize: 5,\n    cornerRadius: 6,\n    boxHeight: (ctx, opts) => opts.bodyFont.size,\n    boxWidth: (ctx, opts) => opts.bodyFont.size,\n    multiKeyBackground: '#fff',\n    displayColors: true,\n    boxPadding: 0,\n    borderColor: 'rgba(0,0,0,0)',\n    borderWidth: 0,\n    animation: {\n      duration: 400,\n      easing: 'easeOutQuart',\n    },\n    animations: {\n      numbers: {\n        type: 'number',\n        properties: ['x', 'y', 'width', 'height', 'caretX', 'caretY'],\n      },\n      opacity: {\n        easing: 'linear',\n        duration: 200\n      }\n    },\n    callbacks: defaultCallbacks\n  },\n\n  defaultRoutes: {\n    bodyFont: 'font',\n    footerFont: 'font',\n    titleFont: 'font'\n  },\n\n  descriptors: {\n    _scriptable: (name) => name !== 'filter' && name !== 'itemSort' && name !== 'external',\n    _indexable: false,\n    callbacks: {\n      _scriptable: false,\n      _indexable: false,\n    },\n    animation: {\n      _fallback: false\n    },\n    animations: {\n      _fallback: 'animation'\n    }\n  },\n\n  // Resolve additionally from `interaction` options and defaults.\n  additionalOptionScopes: ['interaction']\n};\n","import Scale from '../core/core.scale.js';\nimport {isNullOrUndef, valueOrDefault, _limitValue} from '../helpers/index.js';\n\nconst addIfString = (labels, raw, index, addedLabels) => {\n  if (typeof raw === 'string') {\n    index = labels.push(raw) - 1;\n    addedLabels.unshift({index, label: raw});\n  } else if (isNaN(raw)) {\n    index = null;\n  }\n  return index;\n};\n\nfunction findOrAddLabel(labels, raw, index, addedLabels) {\n  const first = labels.indexOf(raw);\n  if (first === -1) {\n    return addIfString(labels, raw, index, addedLabels);\n  }\n  const last = labels.lastIndexOf(raw);\n  return first !== last ? index : first;\n}\n\nconst validIndex = (index, max) => index === null ? null : _limitValue(Math.round(index), 0, max);\n\nfunction _getLabelForValue(value) {\n  const labels = this.getLabels();\n\n  if (value >= 0 && value < labels.length) {\n    return labels[value];\n  }\n  return value;\n}\n\nexport default class CategoryScale extends Scale {\n\n  static id = 'category';\n\n  /**\n   * @type {any}\n   */\n  static defaults = {\n    ticks: {\n      callback: _getLabelForValue\n    }\n  };\n\n  constructor(cfg) {\n    super(cfg);\n\n    /** @type {number} */\n    this._startValue = undefined;\n    this._valueRange = 0;\n    this._addedLabels = [];\n  }\n\n  init(scaleOptions) {\n    const added = this._addedLabels;\n    if (added.length) {\n      const labels = this.getLabels();\n      for (const {index, label} of added) {\n        if (labels[index] === label) {\n          labels.splice(index, 1);\n        }\n      }\n      this._addedLabels = [];\n    }\n    super.init(scaleOptions);\n  }\n\n  parse(raw, index) {\n    if (isNullOrUndef(raw)) {\n      return null;\n    }\n    const labels = this.getLabels();\n    index = isFinite(index) && labels[index] === raw ? index\n      : findOrAddLabel(labels, raw, valueOrDefault(index, raw), this._addedLabels);\n    return validIndex(index, labels.length - 1);\n  }\n\n  determineDataLimits() {\n    const {minDefined, maxDefined} = this.getUserBounds();\n    let {min, max} = this.getMinMax(true);\n\n    if (this.options.bounds === 'ticks') {\n      if (!minDefined) {\n        min = 0;\n      }\n      if (!maxDefined) {\n        max = this.getLabels().length - 1;\n      }\n    }\n\n    this.min = min;\n    this.max = max;\n  }\n\n  buildTicks() {\n    const min = this.min;\n    const max = this.max;\n    const offset = this.options.offset;\n    const ticks = [];\n    let labels = this.getLabels();\n\n    // If we are viewing some subset of labels, slice the original array\n    labels = (min === 0 && max === labels.length - 1) ? labels : labels.slice(min, max + 1);\n\n    this._valueRange = Math.max(labels.length - (offset ? 0 : 1), 1);\n    this._startValue = this.min - (offset ? 0.5 : 0);\n\n    for (let value = min; value <= max; value++) {\n      ticks.push({value});\n    }\n    return ticks;\n  }\n\n  getLabelForValue(value) {\n    return _getLabelForValue.call(this, value);\n  }\n\n  /**\n\t * @protected\n\t */\n  configure() {\n    super.configure();\n\n    if (!this.isHorizontal()) {\n      // For backward compatibility, vertical category scale reverse is inverted.\n      this._reversePixels = !this._reversePixels;\n    }\n  }\n\n  // Used to get data value locations. Value can either be an index or a numerical value\n  getPixelForValue(value) {\n    if (typeof value !== 'number') {\n      value = this.parse(value);\n    }\n\n    return value === null ? NaN : this.getPixelForDecimal((value - this._startValue) / this._valueRange);\n  }\n\n  // Must override base implementation because it calls getPixelForValue\n  // and category scale can have duplicate values\n  getPixelForTick(index) {\n    const ticks = this.ticks;\n    if (index < 0 || index > ticks.length - 1) {\n      return null;\n    }\n    return this.getPixelForValue(ticks[index].value);\n  }\n\n  getValueForPixel(pixel) {\n    return Math.round(this._startValue + this.getDecimalForPixel(pixel) * this._valueRange);\n  }\n\n  getBasePixel() {\n    return this.bottom;\n  }\n}\n","import {isNullOrUndef} from '../helpers/helpers.core.js';\nimport {almostEquals, almostWhole, niceNum, _decimalPlaces, _setMinAndMaxByKey, sign, toRadians} from '../helpers/helpers.math.js';\nimport Scale from '../core/core.scale.js';\nimport {formatNumber} from '../helpers/helpers.intl.js';\n\n/**\n * Generate a set of linear ticks for an axis\n * 1. If generationOptions.min, generationOptions.max, and generationOptions.step are defined:\n *    if (max - min) / step is an integer, ticks are generated as [min, min + step, ..., max]\n *    Note that the generationOptions.maxCount setting is respected in this scenario\n *\n * 2. If generationOptions.min, generationOptions.max, and generationOptions.count is defined\n *    spacing = (max - min) / count\n *    Ticks are generated as [min, min + spacing, ..., max]\n *\n * 3. If generationOptions.count is defined\n *    spacing = (niceMax - niceMin) / count\n *\n * 4. Compute optimal spacing of ticks using niceNum algorithm\n *\n * @param generationOptions the options used to generate the ticks\n * @param dataRange the range of the data\n * @returns {object[]} array of tick objects\n */\nfunction generateTicks(generationOptions, dataRange) {\n  const ticks = [];\n  // To get a \"nice\" value for the tick spacing, we will use the appropriately named\n  // \"nice number\" algorithm. See https://stackoverflow.com/questions/8506881/nice-label-algorithm-for-charts-with-minimum-ticks\n  // for details.\n\n  const MIN_SPACING = 1e-14;\n  const {bounds, step, min, max, precision, count, maxTicks, maxDigits, includeBounds} = generationOptions;\n  const unit = step || 1;\n  const maxSpaces = maxTicks - 1;\n  const {min: rmin, max: rmax} = dataRange;\n  const minDefined = !isNullOrUndef(min);\n  const maxDefined = !isNullOrUndef(max);\n  const countDefined = !isNullOrUndef(count);\n  const minSpacing = (rmax - rmin) / (maxDigits + 1);\n  let spacing = niceNum((rmax - rmin) / maxSpaces / unit) * unit;\n  let factor, niceMin, niceMax, numSpaces;\n\n  // Beyond MIN_SPACING floating point numbers being to lose precision\n  // such that we can't do the math necessary to generate ticks\n  if (spacing < MIN_SPACING && !minDefined && !maxDefined) {\n    return [{value: rmin}, {value: rmax}];\n  }\n\n  numSpaces = Math.ceil(rmax / spacing) - Math.floor(rmin / spacing);\n  if (numSpaces > maxSpaces) {\n    // If the calculated num of spaces exceeds maxNumSpaces, recalculate it\n    spacing = niceNum(numSpaces * spacing / maxSpaces / unit) * unit;\n  }\n\n  if (!isNullOrUndef(precision)) {\n    // If the user specified a precision, round to that number of decimal places\n    factor = Math.pow(10, precision);\n    spacing = Math.ceil(spacing * factor) / factor;\n  }\n\n  if (bounds === 'ticks') {\n    niceMin = Math.floor(rmin / spacing) * spacing;\n    niceMax = Math.ceil(rmax / spacing) * spacing;\n  } else {\n    niceMin = rmin;\n    niceMax = rmax;\n  }\n\n  if (minDefined && maxDefined && step && almostWhole((max - min) / step, spacing / 1000)) {\n    // Case 1: If min, max and stepSize are set and they make an evenly spaced scale use it.\n    // spacing = step;\n    // numSpaces = (max - min) / spacing;\n    // Note that we round here to handle the case where almostWhole translated an FP error\n    numSpaces = Math.round(Math.min((max - min) / spacing, maxTicks));\n    spacing = (max - min) / numSpaces;\n    niceMin = min;\n    niceMax = max;\n  } else if (countDefined) {\n    // Cases 2 & 3, we have a count specified. Handle optional user defined edges to the range.\n    // Sometimes these are no-ops, but it makes the code a lot clearer\n    // and when a user defined range is specified, we want the correct ticks\n    niceMin = minDefined ? min : niceMin;\n    niceMax = maxDefined ? max : niceMax;\n    numSpaces = count - 1;\n    spacing = (niceMax - niceMin) / numSpaces;\n  } else {\n    // Case 4\n    numSpaces = (niceMax - niceMin) / spacing;\n\n    // If very close to our rounded value, use it.\n    if (almostEquals(numSpaces, Math.round(numSpaces), spacing / 1000)) {\n      numSpaces = Math.round(numSpaces);\n    } else {\n      numSpaces = Math.ceil(numSpaces);\n    }\n  }\n\n  // The spacing will have changed in cases 1, 2, and 3 so the factor cannot be computed\n  // until this point\n  const decimalPlaces = Math.max(\n    _decimalPlaces(spacing),\n    _decimalPlaces(niceMin)\n  );\n  factor = Math.pow(10, isNullOrUndef(precision) ? decimalPlaces : precision);\n  niceMin = Math.round(niceMin * factor) / factor;\n  niceMax = Math.round(niceMax * factor) / factor;\n\n  let j = 0;\n  if (minDefined) {\n    if (includeBounds && niceMin !== min) {\n      ticks.push({value: min});\n\n      if (niceMin < min) {\n        j++; // Skip niceMin\n      }\n      // If the next nice tick is close to min, skip it\n      if (almostEquals(Math.round((niceMin + j * spacing) * factor) / factor, min, relativeLabelSize(min, minSpacing, generationOptions))) {\n        j++;\n      }\n    } else if (niceMin < min) {\n      j++;\n    }\n  }\n\n  for (; j < numSpaces; ++j) {\n    const tickValue = Math.round((niceMin + j * spacing) * factor) / factor;\n    if (maxDefined && tickValue > max) {\n      break;\n    }\n    ticks.push({value: tickValue});\n  }\n\n  if (maxDefined && includeBounds && niceMax !== max) {\n    // If the previous tick is too close to max, replace it with max, else add max\n    if (ticks.length && almostEquals(ticks[ticks.length - 1].value, max, relativeLabelSize(max, minSpacing, generationOptions))) {\n      ticks[ticks.length - 1].value = max;\n    } else {\n      ticks.push({value: max});\n    }\n  } else if (!maxDefined || niceMax === max) {\n    ticks.push({value: niceMax});\n  }\n\n  return ticks;\n}\n\nfunction relativeLabelSize(value, minSpacing, {horizontal, minRotation}) {\n  const rad = toRadians(minRotation);\n  const ratio = (horizontal ? Math.sin(rad) : Math.cos(rad)) || 0.001;\n  const length = 0.75 * minSpacing * ('' + value).length;\n  return Math.min(minSpacing / ratio, length);\n}\n\nexport default class LinearScaleBase extends Scale {\n\n  constructor(cfg) {\n    super(cfg);\n\n    /** @type {number} */\n    this.start = undefined;\n    /** @type {number} */\n    this.end = undefined;\n    /** @type {number} */\n    this._startValue = undefined;\n    /** @type {number} */\n    this._endValue = undefined;\n    this._valueRange = 0;\n  }\n\n  parse(raw, index) { // eslint-disable-line no-unused-vars\n    if (isNullOrUndef(raw)) {\n      return null;\n    }\n    if ((typeof raw === 'number' || raw instanceof Number) && !isFinite(+raw)) {\n      return null;\n    }\n\n    return +raw;\n  }\n\n  handleTickRangeOptions() {\n    const {beginAtZero} = this.options;\n    const {minDefined, maxDefined} = this.getUserBounds();\n    let {min, max} = this;\n\n    const setMin = v => (min = minDefined ? min : v);\n    const setMax = v => (max = maxDefined ? max : v);\n\n    if (beginAtZero) {\n      const minSign = sign(min);\n      const maxSign = sign(max);\n\n      if (minSign < 0 && maxSign < 0) {\n        setMax(0);\n      } else if (minSign > 0 && maxSign > 0) {\n        setMin(0);\n      }\n    }\n\n    if (min === max) {\n      let offset = max === 0 ? 1 : Math.abs(max * 0.05);\n\n      setMax(max + offset);\n\n      if (!beginAtZero) {\n        setMin(min - offset);\n      }\n    }\n    this.min = min;\n    this.max = max;\n  }\n\n  getTickLimit() {\n    const tickOpts = this.options.ticks;\n    // eslint-disable-next-line prefer-const\n    let {maxTicksLimit, stepSize} = tickOpts;\n    let maxTicks;\n\n    if (stepSize) {\n      maxTicks = Math.ceil(this.max / stepSize) - Math.floor(this.min / stepSize) + 1;\n      if (maxTicks > 1000) {\n        console.warn(`scales.${this.id}.ticks.stepSize: ${stepSize} would result generating up to ${maxTicks} ticks. Limiting to 1000.`);\n        maxTicks = 1000;\n      }\n    } else {\n      maxTicks = this.computeTickLimit();\n      maxTicksLimit = maxTicksLimit || 11;\n    }\n\n    if (maxTicksLimit) {\n      maxTicks = Math.min(maxTicksLimit, maxTicks);\n    }\n\n    return maxTicks;\n  }\n\n  /**\n\t * @protected\n\t */\n  computeTickLimit() {\n    return Number.POSITIVE_INFINITY;\n  }\n\n  buildTicks() {\n    const opts = this.options;\n    const tickOpts = opts.ticks;\n\n    // Figure out what the max number of ticks we can support it is based on the size of\n    // the axis area. For now, we say that the minimum tick spacing in pixels must be 40\n    // We also limit the maximum number of ticks to 11 which gives a nice 10 squares on\n    // the graph. Make sure we always have at least 2 ticks\n    let maxTicks = this.getTickLimit();\n    maxTicks = Math.max(2, maxTicks);\n\n    const numericGeneratorOptions = {\n      maxTicks,\n      bounds: opts.bounds,\n      min: opts.min,\n      max: opts.max,\n      precision: tickOpts.precision,\n      step: tickOpts.stepSize,\n      count: tickOpts.count,\n      maxDigits: this._maxDigits(),\n      horizontal: this.isHorizontal(),\n      minRotation: tickOpts.minRotation || 0,\n      includeBounds: tickOpts.includeBounds !== false\n    };\n    const dataRange = this._range || this;\n    const ticks = generateTicks(numericGeneratorOptions, dataRange);\n\n    // At this point, we need to update our max and min given the tick values,\n    // since we probably have expanded the range of the scale\n    if (opts.bounds === 'ticks') {\n      _setMinAndMaxByKey(ticks, this, 'value');\n    }\n\n    if (opts.reverse) {\n      ticks.reverse();\n\n      this.start = this.max;\n      this.end = this.min;\n    } else {\n      this.start = this.min;\n      this.end = this.max;\n    }\n\n    return ticks;\n  }\n\n  /**\n\t * @protected\n\t */\n  configure() {\n    const ticks = this.ticks;\n    let start = this.min;\n    let end = this.max;\n\n    super.configure();\n\n    if (this.options.offset && ticks.length) {\n      const offset = (end - start) / Math.max(ticks.length - 1, 1) / 2;\n      start -= offset;\n      end += offset;\n    }\n    this._startValue = start;\n    this._endValue = end;\n    this._valueRange = end - start;\n  }\n\n  getLabelForValue(value) {\n    return formatNumber(value, this.chart.options.locale, this.options.ticks.format);\n  }\n}\n","import {isFinite} from '../helpers/helpers.core.js';\nimport LinearScaleBase from './scale.linearbase.js';\nimport Ticks from '../core/core.ticks.js';\nimport {toRadians} from '../helpers/index.js';\n\nexport default class LinearScale extends LinearScaleBase {\n\n  static id = 'linear';\n\n  /**\n   * @type {any}\n   */\n  static defaults = {\n    ticks: {\n      callback: Ticks.formatters.numeric\n    }\n  };\n\n\n  determineDataLimits() {\n    const {min, max} = this.getMinMax(true);\n\n    this.min = isFinite(min) ? min : 0;\n    this.max = isFinite(max) ? max : 1;\n\n    // Common base implementation to handle min, max, beginAtZero\n    this.handleTickRangeOptions();\n  }\n\n  /**\n\t * Returns the maximum number of ticks based on the scale dimension\n\t * @protected\n \t */\n  computeTickLimit() {\n    const horizontal = this.isHorizontal();\n    const length = horizontal ? this.width : this.height;\n    const minRotation = toRadians(this.options.ticks.minRotation);\n    const ratio = (horizontal ? Math.sin(minRotation) : Math.cos(minRotation)) || 0.001;\n    const tickFont = this._resolveTickFontOptions(0);\n    return Math.ceil(length / Math.min(40, tickFont.lineHeight / ratio));\n  }\n\n  // Utils\n  getPixelForValue(value) {\n    return value === null ? NaN : this.getPixelForDecimal((value - this._startValue) / this._valueRange);\n  }\n\n  getValueForPixel(pixel) {\n    return this._startValue + this.getDecimalForPixel(pixel) * this._valueRange;\n  }\n}\n","import {finiteOrDefault, isFinite} from '../helpers/helpers.core.js';\nimport {formatNumber} from '../helpers/helpers.intl.js';\nimport {_setMinAndMaxByKey, log10} from '../helpers/helpers.math.js';\nimport Scale from '../core/core.scale.js';\nimport LinearScaleBase from './scale.linearbase.js';\nimport Ticks from '../core/core.ticks.js';\n\nconst log10Floor = v => Math.floor(log10(v));\nconst changeExponent = (v, m) => Math.pow(10, log10Floor(v) + m);\n\nfunction isMajor(tickVal) {\n  const remain = tickVal / (Math.pow(10, log10Floor(tickVal)));\n  return remain === 1;\n}\n\nfunction steps(min, max, rangeExp) {\n  const rangeStep = Math.pow(10, rangeExp);\n  const start = Math.floor(min / rangeStep);\n  const end = Math.ceil(max / rangeStep);\n  return end - start;\n}\n\nfunction startExp(min, max) {\n  const range = max - min;\n  let rangeExp = log10Floor(range);\n  while (steps(min, max, rangeExp) > 10) {\n    rangeExp++;\n  }\n  while (steps(min, max, rangeExp) < 10) {\n    rangeExp--;\n  }\n  return Math.min(rangeExp, log10Floor(min));\n}\n\n\n/**\n * Generate a set of logarithmic ticks\n * @param generationOptions the options used to generate the ticks\n * @param dataRange the range of the data\n * @returns {object[]} array of tick objects\n */\nfunction generateTicks(generationOptions, {min, max}) {\n  min = finiteOrDefault(generationOptions.min, min);\n  const ticks = [];\n  const minExp = log10Floor(min);\n  let exp = startExp(min, max);\n  let precision = exp < 0 ? Math.pow(10, Math.abs(exp)) : 1;\n  const stepSize = Math.pow(10, exp);\n  const base = minExp > exp ? Math.pow(10, minExp) : 0;\n  const start = Math.round((min - base) * precision) / precision;\n  const offset = Math.floor((min - base) / stepSize / 10) * stepSize * 10;\n  let significand = Math.floor((start - offset) / Math.pow(10, exp));\n  let value = finiteOrDefault(generationOptions.min, Math.round((base + offset + significand * Math.pow(10, exp)) * precision) / precision);\n  while (value < max) {\n    ticks.push({value, major: isMajor(value), significand});\n    if (significand >= 10) {\n      significand = significand < 15 ? 15 : 20;\n    } else {\n      significand++;\n    }\n    if (significand >= 20) {\n      exp++;\n      significand = 2;\n      precision = exp >= 0 ? 1 : precision;\n    }\n    value = Math.round((base + offset + significand * Math.pow(10, exp)) * precision) / precision;\n  }\n  const lastTick = finiteOrDefault(generationOptions.max, value);\n  ticks.push({value: lastTick, major: isMajor(lastTick), significand});\n\n  return ticks;\n}\n\nexport default class LogarithmicScale extends Scale {\n\n  static id = 'logarithmic';\n\n  /**\n   * @type {any}\n   */\n  static defaults = {\n    ticks: {\n      callback: Ticks.formatters.logarithmic,\n      major: {\n        enabled: true\n      }\n    }\n  };\n\n\n  constructor(cfg) {\n    super(cfg);\n\n    /** @type {number} */\n    this.start = undefined;\n    /** @type {number} */\n    this.end = undefined;\n    /** @type {number} */\n    this._startValue = undefined;\n    this._valueRange = 0;\n  }\n\n  parse(raw, index) {\n    const value = LinearScaleBase.prototype.parse.apply(this, [raw, index]);\n    if (value === 0) {\n      this._zero = true;\n      return undefined;\n    }\n    return isFinite(value) && value > 0 ? value : null;\n  }\n\n  determineDataLimits() {\n    const {min, max} = this.getMinMax(true);\n\n    this.min = isFinite(min) ? Math.max(0, min) : null;\n    this.max = isFinite(max) ? Math.max(0, max) : null;\n\n    if (this.options.beginAtZero) {\n      this._zero = true;\n    }\n\n    // if data has `0` in it or `beginAtZero` is true, min (non zero) value is at bottom\n    // of scale, and it does not equal suggestedMin, lower the min bound by one exp.\n    if (this._zero && this.min !== this._suggestedMin && !isFinite(this._userMin)) {\n      this.min = min === changeExponent(this.min, 0) ? changeExponent(this.min, -1) : changeExponent(this.min, 0);\n    }\n\n    this.handleTickRangeOptions();\n  }\n\n  handleTickRangeOptions() {\n    const {minDefined, maxDefined} = this.getUserBounds();\n    let min = this.min;\n    let max = this.max;\n\n    const setMin = v => (min = minDefined ? min : v);\n    const setMax = v => (max = maxDefined ? max : v);\n\n    if (min === max) {\n      if (min <= 0) { // includes null\n        setMin(1);\n        setMax(10);\n      } else {\n        setMin(changeExponent(min, -1));\n        setMax(changeExponent(max, +1));\n      }\n    }\n    if (min <= 0) {\n      setMin(changeExponent(max, -1));\n    }\n    if (max <= 0) {\n\n      setMax(changeExponent(min, +1));\n    }\n\n    this.min = min;\n    this.max = max;\n  }\n\n  buildTicks() {\n    const opts = this.options;\n\n    const generationOptions = {\n      min: this._userMin,\n      max: this._userMax\n    };\n    const ticks = generateTicks(generationOptions, this);\n\n    // At this point, we need to update our max and min given the tick values,\n    // since we probably have expanded the range of the scale\n    if (opts.bounds === 'ticks') {\n      _setMinAndMaxByKey(ticks, this, 'value');\n    }\n\n    if (opts.reverse) {\n      ticks.reverse();\n\n      this.start = this.max;\n      this.end = this.min;\n    } else {\n      this.start = this.min;\n      this.end = this.max;\n    }\n\n    return ticks;\n  }\n\n  /**\n\t * @param {number} value\n\t * @return {string}\n\t */\n  getLabelForValue(value) {\n    return value === undefined\n      ? '0'\n      : formatNumber(value, this.chart.options.locale, this.options.ticks.format);\n  }\n\n  /**\n\t * @protected\n\t */\n  configure() {\n    const start = this.min;\n\n    super.configure();\n\n    this._startValue = log10(start);\n    this._valueRange = log10(this.max) - log10(start);\n  }\n\n  getPixelForValue(value) {\n    if (value === undefined || value === 0) {\n      value = this.min;\n    }\n    if (value === null || isNaN(value)) {\n      return NaN;\n    }\n    return this.getPixelForDecimal(value === this.min\n      ? 0\n      : (log10(value) - this._startValue) / this._valueRange);\n  }\n\n  getValueForPixel(pixel) {\n    const decimal = this.getDecimalForPixel(pixel);\n    return Math.pow(10, this._startValue + decimal * this._valueRange);\n  }\n}\n","import defaults from '../core/core.defaults.js';\nimport {_longestText, addRoundedRectPath, renderText, _isPointInArea} from '../helpers/helpers.canvas.js';\nimport {HALF_PI, TAU, toDegrees, toRadians, _normalizeAngle, PI} from '../helpers/helpers.math.js';\nimport LinearScaleBase from './scale.linearbase.js';\nimport Ticks from '../core/core.ticks.js';\nimport {valueOrDefault, isArray, isFinite, callback as callCallback, isNullOrUndef} from '../helpers/helpers.core.js';\nimport {createContext, toFont, toPadding, toTRBLCorners} from '../helpers/helpers.options.js';\n\nfunction getTickBackdropHeight(opts) {\n  const tickOpts = opts.ticks;\n\n  if (tickOpts.display && opts.display) {\n    const padding = toPadding(tickOpts.backdropPadding);\n    return valueOrDefault(tickOpts.font && tickOpts.font.size, defaults.font.size) + padding.height;\n  }\n  return 0;\n}\n\nfunction measureLabelSize(ctx, font, label) {\n  label = isArray(label) ? label : [label];\n  return {\n    w: _longestText(ctx, font.string, label),\n    h: label.length * font.lineHeight\n  };\n}\n\nfunction determineLimits(angle, pos, size, min, max) {\n  if (angle === min || angle === max) {\n    return {\n      start: pos - (size / 2),\n      end: pos + (size / 2)\n    };\n  } else if (angle < min || angle > max) {\n    return {\n      start: pos - size,\n      end: pos\n    };\n  }\n\n  return {\n    start: pos,\n    end: pos + size\n  };\n}\n\n/**\n * Helper function to fit a radial linear scale with point labels\n */\nfunction fitWithPointLabels(scale) {\n\n  // Right, this is really confusing and there is a lot of maths going on here\n  // The gist of the problem is here: https://gist.github.com/nnnick/696cc9c55f4b0beb8fe9\n  //\n  // Reaction: https://dl.dropboxusercontent.com/u/34601363/toomuchscience.gif\n  //\n  // Solution:\n  //\n  // We assume the radius of the polygon is half the size of the canvas at first\n  // at each index we check if the text overlaps.\n  //\n  // Where it does, we store that angle and that index.\n  //\n  // After finding the largest index and angle we calculate how much we need to remove\n  // from the shape radius to move the point inwards by that x.\n  //\n  // We average the left and right distances to get the maximum shape radius that can fit in the box\n  // along with labels.\n  //\n  // Once we have that, we can find the centre point for the chart, by taking the x text protrusion\n  // on each side, removing that from the size, halving it and adding the left x protrusion width.\n  //\n  // This will mean we have a shape fitted to the canvas, as large as it can be with the labels\n  // and position it in the most space efficient manner\n  //\n  // https://dl.dropboxusercontent.com/u/34601363/yeahscience.gif\n\n  // Get maximum radius of the polygon. Either half the height (minus the text width) or half the width.\n  // Use this to calculate the offset + change. - Make sure L/R protrusion is at least 0 to stop issues with centre points\n  const orig = {\n    l: scale.left + scale._padding.left,\n    r: scale.right - scale._padding.right,\n    t: scale.top + scale._padding.top,\n    b: scale.bottom - scale._padding.bottom\n  };\n  const limits = Object.assign({}, orig);\n  const labelSizes = [];\n  const padding = [];\n  const valueCount = scale._pointLabels.length;\n  const pointLabelOpts = scale.options.pointLabels;\n  const additionalAngle = pointLabelOpts.centerPointLabels ? PI / valueCount : 0;\n\n  for (let i = 0; i < valueCount; i++) {\n    const opts = pointLabelOpts.setContext(scale.getPointLabelContext(i));\n    padding[i] = opts.padding;\n    const pointPosition = scale.getPointPosition(i, scale.drawingArea + padding[i], additionalAngle);\n    const plFont = toFont(opts.font);\n    const textSize = measureLabelSize(scale.ctx, plFont, scale._pointLabels[i]);\n    labelSizes[i] = textSize;\n\n    const angleRadians = _normalizeAngle(scale.getIndexAngle(i) + additionalAngle);\n    const angle = Math.round(toDegrees(angleRadians));\n    const hLimits = determineLimits(angle, pointPosition.x, textSize.w, 0, 180);\n    const vLimits = determineLimits(angle, pointPosition.y, textSize.h, 90, 270);\n    updateLimits(limits, orig, angleRadians, hLimits, vLimits);\n  }\n\n  scale.setCenterPoint(\n    orig.l - limits.l,\n    limits.r - orig.r,\n    orig.t - limits.t,\n    limits.b - orig.b\n  );\n\n  // Now that text size is determined, compute the full positions\n  scale._pointLabelItems = buildPointLabelItems(scale, labelSizes, padding);\n}\n\nfunction updateLimits(limits, orig, angle, hLimits, vLimits) {\n  const sin = Math.abs(Math.sin(angle));\n  const cos = Math.abs(Math.cos(angle));\n  let x = 0;\n  let y = 0;\n  if (hLimits.start < orig.l) {\n    x = (orig.l - hLimits.start) / sin;\n    limits.l = Math.min(limits.l, orig.l - x);\n  } else if (hLimits.end > orig.r) {\n    x = (hLimits.end - orig.r) / sin;\n    limits.r = Math.max(limits.r, orig.r + x);\n  }\n  if (vLimits.start < orig.t) {\n    y = (orig.t - vLimits.start) / cos;\n    limits.t = Math.min(limits.t, orig.t - y);\n  } else if (vLimits.end > orig.b) {\n    y = (vLimits.end - orig.b) / cos;\n    limits.b = Math.max(limits.b, orig.b + y);\n  }\n}\n\nfunction createPointLabelItem(scale, index, itemOpts) {\n  const outerDistance = scale.drawingArea;\n  const {extra, additionalAngle, padding, size} = itemOpts;\n  const pointLabelPosition = scale.getPointPosition(index, outerDistance + extra + padding, additionalAngle);\n  const angle = Math.round(toDegrees(_normalizeAngle(pointLabelPosition.angle + HALF_PI)));\n  const y = yForAngle(pointLabelPosition.y, size.h, angle);\n  const textAlign = getTextAlignForAngle(angle);\n  const left = leftForTextAlign(pointLabelPosition.x, size.w, textAlign);\n  return {\n    // if to draw or overlapped\n    visible: true,\n\n    // Text position\n    x: pointLabelPosition.x,\n    y,\n\n    // Text rendering data\n    textAlign,\n\n    // Bounding box\n    left,\n    top: y,\n    right: left + size.w,\n    bottom: y + size.h\n  };\n}\n\nfunction isNotOverlapped(item, area) {\n  if (!area) {\n    return true;\n  }\n  const {left, top, right, bottom} = item;\n  const apexesInArea = _isPointInArea({x: left, y: top}, area) || _isPointInArea({x: left, y: bottom}, area) ||\n    _isPointInArea({x: right, y: top}, area) || _isPointInArea({x: right, y: bottom}, area);\n  return !apexesInArea;\n}\n\nfunction buildPointLabelItems(scale, labelSizes, padding) {\n  const items = [];\n  const valueCount = scale._pointLabels.length;\n  const opts = scale.options;\n  const {centerPointLabels, display} = opts.pointLabels;\n  const itemOpts = {\n    extra: getTickBackdropHeight(opts) / 2,\n    additionalAngle: centerPointLabels ? PI / valueCount : 0\n  };\n  let area;\n\n  for (let i = 0; i < valueCount; i++) {\n    itemOpts.padding = padding[i];\n    itemOpts.size = labelSizes[i];\n\n    const item = createPointLabelItem(scale, i, itemOpts);\n    items.push(item);\n    if (display === 'auto') {\n      item.visible = isNotOverlapped(item, area);\n      if (item.visible) {\n        area = item;\n      }\n    }\n  }\n  return items;\n}\n\nfunction getTextAlignForAngle(angle) {\n  if (angle === 0 || angle === 180) {\n    return 'center';\n  } else if (angle < 180) {\n    return 'left';\n  }\n\n  return 'right';\n}\n\nfunction leftForTextAlign(x, w, align) {\n  if (align === 'right') {\n    x -= w;\n  } else if (align === 'center') {\n    x -= (w / 2);\n  }\n  return x;\n}\n\nfunction yForAngle(y, h, angle) {\n  if (angle === 90 || angle === 270) {\n    y -= (h / 2);\n  } else if (angle > 270 || angle < 90) {\n    y -= h;\n  }\n  return y;\n}\n\nfunction drawPointLabelBox(ctx, opts, item) {\n  const {left, top, right, bottom} = item;\n  const {backdropColor} = opts;\n\n  if (!isNullOrUndef(backdropColor)) {\n    const borderRadius = toTRBLCorners(opts.borderRadius);\n    const padding = toPadding(opts.backdropPadding);\n    ctx.fillStyle = backdropColor;\n\n    const backdropLeft = left - padding.left;\n    const backdropTop = top - padding.top;\n    const backdropWidth = right - left + padding.width;\n    const backdropHeight = bottom - top + padding.height;\n\n    if (Object.values(borderRadius).some(v => v !== 0)) {\n      ctx.beginPath();\n      addRoundedRectPath(ctx, {\n        x: backdropLeft,\n        y: backdropTop,\n        w: backdropWidth,\n        h: backdropHeight,\n        radius: borderRadius,\n      });\n      ctx.fill();\n    } else {\n      ctx.fillRect(backdropLeft, backdropTop, backdropWidth, backdropHeight);\n    }\n  }\n}\n\nfunction drawPointLabels(scale, labelCount) {\n  const {ctx, options: {pointLabels}} = scale;\n\n  for (let i = labelCount - 1; i >= 0; i--) {\n    const item = scale._pointLabelItems[i];\n    if (!item.visible) {\n      // overlapping\n      continue;\n    }\n    const optsAtIndex = pointLabels.setContext(scale.getPointLabelContext(i));\n    drawPointLabelBox(ctx, optsAtIndex, item);\n    const plFont = toFont(optsAtIndex.font);\n    const {x, y, textAlign} = item;\n\n    renderText(\n      ctx,\n      scale._pointLabels[i],\n      x,\n      y + (plFont.lineHeight / 2),\n      plFont,\n      {\n        color: optsAtIndex.color,\n        textAlign: textAlign,\n        textBaseline: 'middle'\n      }\n    );\n  }\n}\n\nfunction pathRadiusLine(scale, radius, circular, labelCount) {\n  const {ctx} = scale;\n  if (circular) {\n    // Draw circular arcs between the points\n    ctx.arc(scale.xCenter, scale.yCenter, radius, 0, TAU);\n  } else {\n    // Draw straight lines connecting each index\n    let pointPosition = scale.getPointPosition(0, radius);\n    ctx.moveTo(pointPosition.x, pointPosition.y);\n\n    for (let i = 1; i < labelCount; i++) {\n      pointPosition = scale.getPointPosition(i, radius);\n      ctx.lineTo(pointPosition.x, pointPosition.y);\n    }\n  }\n}\n\nfunction drawRadiusLine(scale, gridLineOpts, radius, labelCount, borderOpts) {\n  const ctx = scale.ctx;\n  const circular = gridLineOpts.circular;\n\n  const {color, lineWidth} = gridLineOpts;\n\n  if ((!circular && !labelCount) || !color || !lineWidth || radius < 0) {\n    return;\n  }\n\n  ctx.save();\n  ctx.strokeStyle = color;\n  ctx.lineWidth = lineWidth;\n  ctx.setLineDash(borderOpts.dash);\n  ctx.lineDashOffset = borderOpts.dashOffset;\n\n  ctx.beginPath();\n  pathRadiusLine(scale, radius, circular, labelCount);\n  ctx.closePath();\n  ctx.stroke();\n  ctx.restore();\n}\n\nfunction createPointLabelContext(parent, index, label) {\n  return createContext(parent, {\n    label,\n    index,\n    type: 'pointLabel'\n  });\n}\n\nexport default class RadialLinearScale extends LinearScaleBase {\n\n  static id = 'radialLinear';\n\n  /**\n   * @type {any}\n   */\n  static defaults = {\n    display: true,\n\n    // Boolean - Whether to animate scaling the chart from the centre\n    animate: true,\n    position: 'chartArea',\n\n    angleLines: {\n      display: true,\n      lineWidth: 1,\n      borderDash: [],\n      borderDashOffset: 0.0\n    },\n\n    grid: {\n      circular: false\n    },\n\n    startAngle: 0,\n\n    // label settings\n    ticks: {\n      // Boolean - Show a backdrop to the scale label\n      showLabelBackdrop: true,\n\n      callback: Ticks.formatters.numeric\n    },\n\n    pointLabels: {\n      backdropColor: undefined,\n\n      // Number - The backdrop padding above & below the label in pixels\n      backdropPadding: 2,\n\n      // Boolean - if true, show point labels\n      display: true,\n\n      // Number - Point label font size in pixels\n      font: {\n        size: 10\n      },\n\n      // Function - Used to convert point labels\n      callback(label) {\n        return label;\n      },\n\n      // Number - Additionl padding between scale and pointLabel\n      padding: 5,\n\n      // Boolean - if true, center point labels to slices in polar chart\n      centerPointLabels: false\n    }\n  };\n\n  static defaultRoutes = {\n    'angleLines.color': 'borderColor',\n    'pointLabels.color': 'color',\n    'ticks.color': 'color'\n  };\n\n  static descriptors = {\n    angleLines: {\n      _fallback: 'grid'\n    }\n  };\n\n  constructor(cfg) {\n    super(cfg);\n\n    /** @type {number} */\n    this.xCenter = undefined;\n    /** @type {number} */\n    this.yCenter = undefined;\n    /** @type {number} */\n    this.drawingArea = undefined;\n    /** @type {string[]} */\n    this._pointLabels = [];\n    this._pointLabelItems = [];\n  }\n\n  setDimensions() {\n    // Set the unconstrained dimension before label rotation\n    const padding = this._padding = toPadding(getTickBackdropHeight(this.options) / 2);\n    const w = this.width = this.maxWidth - padding.width;\n    const h = this.height = this.maxHeight - padding.height;\n    this.xCenter = Math.floor(this.left + w / 2 + padding.left);\n    this.yCenter = Math.floor(this.top + h / 2 + padding.top);\n    this.drawingArea = Math.floor(Math.min(w, h) / 2);\n  }\n\n  determineDataLimits() {\n    const {min, max} = this.getMinMax(false);\n\n    this.min = isFinite(min) && !isNaN(min) ? min : 0;\n    this.max = isFinite(max) && !isNaN(max) ? max : 0;\n\n    // Common base implementation to handle min, max, beginAtZero\n    this.handleTickRangeOptions();\n  }\n\n  /**\n\t * Returns the maximum number of ticks based on the scale dimension\n\t * @protected\n\t */\n  computeTickLimit() {\n    return Math.ceil(this.drawingArea / getTickBackdropHeight(this.options));\n  }\n\n  generateTickLabels(ticks) {\n    LinearScaleBase.prototype.generateTickLabels.call(this, ticks);\n\n    // Point labels\n    this._pointLabels = this.getLabels()\n      .map((value, index) => {\n        const label = callCallback(this.options.pointLabels.callback, [value, index], this);\n        return label || label === 0 ? label : '';\n      })\n      .filter((v, i) => this.chart.getDataVisibility(i));\n  }\n\n  fit() {\n    const opts = this.options;\n\n    if (opts.display && opts.pointLabels.display) {\n      fitWithPointLabels(this);\n    } else {\n      this.setCenterPoint(0, 0, 0, 0);\n    }\n  }\n\n  setCenterPoint(leftMovement, rightMovement, topMovement, bottomMovement) {\n    this.xCenter += Math.floor((leftMovement - rightMovement) / 2);\n    this.yCenter += Math.floor((topMovement - bottomMovement) / 2);\n    this.drawingArea -= Math.min(this.drawingArea / 2, Math.max(leftMovement, rightMovement, topMovement, bottomMovement));\n  }\n\n  getIndexAngle(index) {\n    const angleMultiplier = TAU / (this._pointLabels.length || 1);\n    const startAngle = this.options.startAngle || 0;\n\n    return _normalizeAngle(index * angleMultiplier + toRadians(startAngle));\n  }\n\n  getDistanceFromCenterForValue(value) {\n    if (isNullOrUndef(value)) {\n      return NaN;\n    }\n\n    // Take into account half font size + the yPadding of the top value\n    const scalingFactor = this.drawingArea / (this.max - this.min);\n    if (this.options.reverse) {\n      return (this.max - value) * scalingFactor;\n    }\n    return (value - this.min) * scalingFactor;\n  }\n\n  getValueForDistanceFromCenter(distance) {\n    if (isNullOrUndef(distance)) {\n      return NaN;\n    }\n\n    const scaledDistance = distance / (this.drawingArea / (this.max - this.min));\n    return this.options.reverse ? this.max - scaledDistance : this.min + scaledDistance;\n  }\n\n  getPointLabelContext(index) {\n    const pointLabels = this._pointLabels || [];\n\n    if (index >= 0 && index < pointLabels.length) {\n      const pointLabel = pointLabels[index];\n      return createPointLabelContext(this.getContext(), index, pointLabel);\n    }\n  }\n\n  getPointPosition(index, distanceFromCenter, additionalAngle = 0) {\n    const angle = this.getIndexAngle(index) - HALF_PI + additionalAngle;\n    return {\n      x: Math.cos(angle) * distanceFromCenter + this.xCenter,\n      y: Math.sin(angle) * distanceFromCenter + this.yCenter,\n      angle\n    };\n  }\n\n  getPointPositionForValue(index, value) {\n    return this.getPointPosition(index, this.getDistanceFromCenterForValue(value));\n  }\n\n  getBasePosition(index) {\n    return this.getPointPositionForValue(index || 0, this.getBaseValue());\n  }\n\n  getPointLabelPosition(index) {\n    const {left, top, right, bottom} = this._pointLabelItems[index];\n    return {\n      left,\n      top,\n      right,\n      bottom,\n    };\n  }\n\n  /**\n\t * @protected\n\t */\n  drawBackground() {\n    const {backgroundColor, grid: {circular}} = this.options;\n    if (backgroundColor) {\n      const ctx = this.ctx;\n      ctx.save();\n      ctx.beginPath();\n      pathRadiusLine(this, this.getDistanceFromCenterForValue(this._endValue), circular, this._pointLabels.length);\n      ctx.closePath();\n      ctx.fillStyle = backgroundColor;\n      ctx.fill();\n      ctx.restore();\n    }\n  }\n\n  /**\n\t * @protected\n\t */\n  drawGrid() {\n    const ctx = this.ctx;\n    const opts = this.options;\n    const {angleLines, grid, border} = opts;\n    const labelCount = this._pointLabels.length;\n\n    let i, offset, position;\n\n    if (opts.pointLabels.display) {\n      drawPointLabels(this, labelCount);\n    }\n\n    if (grid.display) {\n      this.ticks.forEach((tick, index) => {\n        if (index !== 0 || (index === 0 && this.min < 0)) {\n          offset = this.getDistanceFromCenterForValue(tick.value);\n          const context = this.getContext(index);\n          const optsAtIndex = grid.setContext(context);\n          const optsAtIndexBorder = border.setContext(context);\n\n          drawRadiusLine(this, optsAtIndex, offset, labelCount, optsAtIndexBorder);\n        }\n      });\n    }\n\n    if (angleLines.display) {\n      ctx.save();\n\n      for (i = labelCount - 1; i >= 0; i--) {\n        const optsAtIndex = angleLines.setContext(this.getPointLabelContext(i));\n        const {color, lineWidth} = optsAtIndex;\n\n        if (!lineWidth || !color) {\n          continue;\n        }\n\n        ctx.lineWidth = lineWidth;\n        ctx.strokeStyle = color;\n\n        ctx.setLineDash(optsAtIndex.borderDash);\n        ctx.lineDashOffset = optsAtIndex.borderDashOffset;\n\n        offset = this.getDistanceFromCenterForValue(opts.ticks.reverse ? this.min : this.max);\n        position = this.getPointPosition(i, offset);\n        ctx.beginPath();\n        ctx.moveTo(this.xCenter, this.yCenter);\n        ctx.lineTo(position.x, position.y);\n        ctx.stroke();\n      }\n\n      ctx.restore();\n    }\n  }\n\n  /**\n\t * @protected\n\t */\n  drawBorder() {}\n\n  /**\n\t * @protected\n\t */\n  drawLabels() {\n    const ctx = this.ctx;\n    const opts = this.options;\n    const tickOpts = opts.ticks;\n\n    if (!tickOpts.display) {\n      return;\n    }\n\n    const startAngle = this.getIndexAngle(0);\n    let offset, width;\n\n    ctx.save();\n    ctx.translate(this.xCenter, this.yCenter);\n    ctx.rotate(startAngle);\n    ctx.textAlign = 'center';\n    ctx.textBaseline = 'middle';\n\n    this.ticks.forEach((tick, index) => {\n      if ((index === 0 && this.min >= 0) && !opts.reverse) {\n        return;\n      }\n\n      const optsAtIndex = tickOpts.setContext(this.getContext(index));\n      const tickFont = toFont(optsAtIndex.font);\n      offset = this.getDistanceFromCenterForValue(this.ticks[index].value);\n\n      if (optsAtIndex.showLabelBackdrop) {\n        ctx.font = tickFont.string;\n        width = ctx.measureText(tick.label).width;\n        ctx.fillStyle = optsAtIndex.backdropColor;\n\n        const padding = toPadding(optsAtIndex.backdropPadding);\n        ctx.fillRect(\n          -width / 2 - padding.left,\n          -offset - tickFont.size / 2 - padding.top,\n          width + padding.width,\n          tickFont.size + padding.height\n        );\n      }\n\n      renderText(ctx, tick.label, 0, -offset, tickFont, {\n        color: optsAtIndex.color,\n        strokeColor: optsAtIndex.textStrokeColor,\n        strokeWidth: optsAtIndex.textStrokeWidth,\n      });\n    });\n\n    ctx.restore();\n  }\n\n  /**\n\t * @protected\n\t */\n  drawTitle() {}\n}\n","import adapters from '../core/core.adapters.js';\nimport {callback as call, isFinite, isNullOrUndef, mergeIf, valueOrDefault} from '../helpers/helpers.core.js';\nimport {toRadians, isNumber, _limitValue} from '../helpers/helpers.math.js';\nimport Scale from '../core/core.scale.js';\nimport {_arrayUnique, _filterBetween, _lookup} from '../helpers/helpers.collection.js';\n\n/**\n * @typedef { import('../core/core.adapters.js').TimeUnit } Unit\n * @typedef {{common: boolean, size: number, steps?: number}} Interval\n * @typedef { import('../core/core.adapters.js').DateAdapter } DateAdapter\n */\n\n/**\n * @type {Object<Unit, Interval>}\n */\nconst INTERVALS = {\n  millisecond: {common: true, size: 1, steps: 1000},\n  second: {common: true, size: 1000, steps: 60},\n  minute: {common: true, size: 60000, steps: 60},\n  hour: {common: true, size: 3600000, steps: 24},\n  day: {common: true, size: 86400000, steps: 30},\n  week: {common: false, size: 604800000, steps: 4},\n  month: {common: true, size: 2.628e9, steps: 12},\n  quarter: {common: false, size: 7.884e9, steps: 4},\n  year: {common: true, size: 3.154e10}\n};\n\n/**\n * @type {Unit[]}\n */\nconst UNITS = /** @type Unit[] */ /* #__PURE__ */ (Object.keys(INTERVALS));\n\n/**\n * @param {number} a\n * @param {number} b\n */\nfunction sorter(a, b) {\n  return a - b;\n}\n\n/**\n * @param {TimeScale} scale\n * @param {*} input\n * @return {number}\n */\nfunction parse(scale, input) {\n  if (isNullOrUndef(input)) {\n    return null;\n  }\n\n  const adapter = scale._adapter;\n  const {parser, round, isoWeekday} = scale._parseOpts;\n  let value = input;\n\n  if (typeof parser === 'function') {\n    value = parser(value);\n  }\n\n  // Only parse if it's not a timestamp already\n  if (!isFinite(value)) {\n    value = typeof parser === 'string'\n      ? adapter.parse(value, /** @type {Unit} */ (parser))\n      : adapter.parse(value);\n  }\n\n  if (value === null) {\n    return null;\n  }\n\n  if (round) {\n    value = round === 'week' && (isNumber(isoWeekday) || isoWeekday === true)\n      ? adapter.startOf(value, 'isoWeek', isoWeekday)\n      : adapter.startOf(value, round);\n  }\n\n  return +value;\n}\n\n/**\n * Figures out what unit results in an appropriate number of auto-generated ticks\n * @param {Unit} minUnit\n * @param {number} min\n * @param {number} max\n * @param {number} capacity\n * @return {object}\n */\nfunction determineUnitForAutoTicks(minUnit, min, max, capacity) {\n  const ilen = UNITS.length;\n\n  for (let i = UNITS.indexOf(minUnit); i < ilen - 1; ++i) {\n    const interval = INTERVALS[UNITS[i]];\n    const factor = interval.steps ? interval.steps : Number.MAX_SAFE_INTEGER;\n\n    if (interval.common && Math.ceil((max - min) / (factor * interval.size)) <= capacity) {\n      return UNITS[i];\n    }\n  }\n\n  return UNITS[ilen - 1];\n}\n\n/**\n * Figures out what unit to format a set of ticks with\n * @param {TimeScale} scale\n * @param {number} numTicks\n * @param {Unit} minUnit\n * @param {number} min\n * @param {number} max\n * @return {Unit}\n */\nfunction determineUnitForFormatting(scale, numTicks, minUnit, min, max) {\n  for (let i = UNITS.length - 1; i >= UNITS.indexOf(minUnit); i--) {\n    const unit = UNITS[i];\n    if (INTERVALS[unit].common && scale._adapter.diff(max, min, unit) >= numTicks - 1) {\n      return unit;\n    }\n  }\n\n  return UNITS[minUnit ? UNITS.indexOf(minUnit) : 0];\n}\n\n/**\n * @param {Unit} unit\n * @return {object}\n */\nfunction determineMajorUnit(unit) {\n  for (let i = UNITS.indexOf(unit) + 1, ilen = UNITS.length; i < ilen; ++i) {\n    if (INTERVALS[UNITS[i]].common) {\n      return UNITS[i];\n    }\n  }\n}\n\n/**\n * @param {object} ticks\n * @param {number} time\n * @param {number[]} [timestamps] - if defined, snap to these timestamps\n */\nfunction addTick(ticks, time, timestamps) {\n  if (!timestamps) {\n    ticks[time] = true;\n  } else if (timestamps.length) {\n    const {lo, hi} = _lookup(timestamps, time);\n    const timestamp = timestamps[lo] >= time ? timestamps[lo] : timestamps[hi];\n    ticks[timestamp] = true;\n  }\n}\n\n/**\n * @param {TimeScale} scale\n * @param {object[]} ticks\n * @param {object} map\n * @param {Unit} majorUnit\n * @return {object[]}\n */\nfunction setMajorTicks(scale, ticks, map, majorUnit) {\n  const adapter = scale._adapter;\n  const first = +adapter.startOf(ticks[0].value, majorUnit);\n  const last = ticks[ticks.length - 1].value;\n  let major, index;\n\n  for (major = first; major <= last; major = +adapter.add(major, 1, majorUnit)) {\n    index = map[major];\n    if (index >= 0) {\n      ticks[index].major = true;\n    }\n  }\n  return ticks;\n}\n\n/**\n * @param {TimeScale} scale\n * @param {number[]} values\n * @param {Unit|undefined} [majorUnit]\n * @return {object[]}\n */\nfunction ticksFromTimestamps(scale, values, majorUnit) {\n  const ticks = [];\n  /** @type {Object<number,object>} */\n  const map = {};\n  const ilen = values.length;\n  let i, value;\n\n  for (i = 0; i < ilen; ++i) {\n    value = values[i];\n    map[value] = i;\n\n    ticks.push({\n      value,\n      major: false\n    });\n  }\n\n  // We set the major ticks separately from the above loop because calling startOf for every tick\n  // is expensive when there is a large number of ticks\n  return (ilen === 0 || !majorUnit) ? ticks : setMajorTicks(scale, ticks, map, majorUnit);\n}\n\nexport default class TimeScale extends Scale {\n\n  static id = 'time';\n\n  /**\n   * @type {any}\n   */\n  static defaults = {\n    /**\n     * Scale boundary strategy (bypassed by min/max time options)\n     * - `data`: make sure data are fully visible, ticks outside are removed\n     * - `ticks`: make sure ticks are fully visible, data outside are truncated\n     * @see https://github.com/chartjs/Chart.js/pull/4556\n     * @since 2.7.0\n     */\n    bounds: 'data',\n\n    adapters: {},\n    time: {\n      parser: false, // false == a pattern string from or a custom callback that converts its argument to a timestamp\n      unit: false, // false == automatic or override with week, month, year, etc.\n      round: false, // none, or override with week, month, year, etc.\n      isoWeekday: false, // override week start day\n      minUnit: 'millisecond',\n      displayFormats: {}\n    },\n    ticks: {\n      /**\n       * Ticks generation input values:\n       * - 'auto': generates \"optimal\" ticks based on scale size and time options.\n       * - 'data': generates ticks from data (including labels from data {t|x|y} objects).\n       * - 'labels': generates ticks from user given `data.labels` values ONLY.\n       * @see https://github.com/chartjs/Chart.js/pull/4507\n       * @since 2.7.0\n       */\n      source: 'auto',\n\n      callback: false,\n\n      major: {\n        enabled: false\n      }\n    }\n  };\n\n  /**\n\t * @param {object} props\n\t */\n  constructor(props) {\n    super(props);\n\n    /** @type {{data: number[], labels: number[], all: number[]}} */\n    this._cache = {\n      data: [],\n      labels: [],\n      all: []\n    };\n\n    /** @type {Unit} */\n    this._unit = 'day';\n    /** @type {Unit=} */\n    this._majorUnit = undefined;\n    this._offsets = {};\n    this._normalized = false;\n    this._parseOpts = undefined;\n  }\n\n  init(scaleOpts, opts = {}) {\n    const time = scaleOpts.time || (scaleOpts.time = {});\n    /** @type {DateAdapter} */\n    const adapter = this._adapter = new adapters._date(scaleOpts.adapters.date);\n\n    adapter.init(opts);\n\n    // Backward compatibility: before introducing adapter, `displayFormats` was\n    // supposed to contain *all* unit/string pairs but this can't be resolved\n    // when loading the scale (adapters are loaded afterward), so let's populate\n    // missing formats on update\n    mergeIf(time.displayFormats, adapter.formats());\n\n    this._parseOpts = {\n      parser: time.parser,\n      round: time.round,\n      isoWeekday: time.isoWeekday\n    };\n\n    super.init(scaleOpts);\n\n    this._normalized = opts.normalized;\n  }\n\n  /**\n\t * @param {*} raw\n\t * @param {number?} [index]\n\t * @return {number}\n\t */\n  parse(raw, index) { // eslint-disable-line no-unused-vars\n    if (raw === undefined) {\n      return null;\n    }\n    return parse(this, raw);\n  }\n\n  beforeLayout() {\n    super.beforeLayout();\n    this._cache = {\n      data: [],\n      labels: [],\n      all: []\n    };\n  }\n\n  determineDataLimits() {\n    const options = this.options;\n    const adapter = this._adapter;\n    const unit = options.time.unit || 'day';\n    // eslint-disable-next-line prefer-const\n    let {min, max, minDefined, maxDefined} = this.getUserBounds();\n\n    /**\n\t\t * @param {object} bounds\n\t\t */\n    function _applyBounds(bounds) {\n      if (!minDefined && !isNaN(bounds.min)) {\n        min = Math.min(min, bounds.min);\n      }\n      if (!maxDefined && !isNaN(bounds.max)) {\n        max = Math.max(max, bounds.max);\n      }\n    }\n\n    // If we have user provided `min` and `max` labels / data bounds can be ignored\n    if (!minDefined || !maxDefined) {\n      // Labels are always considered, when user did not force bounds\n      _applyBounds(this._getLabelBounds());\n\n      // If `bounds` is `'ticks'` and `ticks.source` is `'labels'`,\n      // data bounds are ignored (and don't need to be determined)\n      if (options.bounds !== 'ticks' || options.ticks.source !== 'labels') {\n        _applyBounds(this.getMinMax(false));\n      }\n    }\n\n    min = isFinite(min) && !isNaN(min) ? min : +adapter.startOf(Date.now(), unit);\n    max = isFinite(max) && !isNaN(max) ? max : +adapter.endOf(Date.now(), unit) + 1;\n\n    // Make sure that max is strictly higher than min (required by the timeseries lookup table)\n    this.min = Math.min(min, max - 1);\n    this.max = Math.max(min + 1, max);\n  }\n\n  /**\n\t * @private\n\t */\n  _getLabelBounds() {\n    const arr = this.getLabelTimestamps();\n    let min = Number.POSITIVE_INFINITY;\n    let max = Number.NEGATIVE_INFINITY;\n\n    if (arr.length) {\n      min = arr[0];\n      max = arr[arr.length - 1];\n    }\n    return {min, max};\n  }\n\n  /**\n\t * @return {object[]}\n\t */\n  buildTicks() {\n    const options = this.options;\n    const timeOpts = options.time;\n    const tickOpts = options.ticks;\n    const timestamps = tickOpts.source === 'labels' ? this.getLabelTimestamps() : this._generate();\n\n    if (options.bounds === 'ticks' && timestamps.length) {\n      this.min = this._userMin || timestamps[0];\n      this.max = this._userMax || timestamps[timestamps.length - 1];\n    }\n\n    const min = this.min;\n    const max = this.max;\n\n    const ticks = _filterBetween(timestamps, min, max);\n\n    // PRIVATE\n    // determineUnitForFormatting relies on the number of ticks so we don't use it when\n    // autoSkip is enabled because we don't yet know what the final number of ticks will be\n    this._unit = timeOpts.unit || (tickOpts.autoSkip\n      ? determineUnitForAutoTicks(timeOpts.minUnit, this.min, this.max, this._getLabelCapacity(min))\n      : determineUnitForFormatting(this, ticks.length, timeOpts.minUnit, this.min, this.max));\n    this._majorUnit = !tickOpts.major.enabled || this._unit === 'year' ? undefined\n      : determineMajorUnit(this._unit);\n    this.initOffsets(timestamps);\n\n    if (options.reverse) {\n      ticks.reverse();\n    }\n\n    return ticksFromTimestamps(this, ticks, this._majorUnit);\n  }\n\n  afterAutoSkip() {\n    // Offsets for bar charts need to be handled with the auto skipped\n    // ticks. Once ticks have been skipped, we re-compute the offsets.\n    if (this.options.offsetAfterAutoskip) {\n      this.initOffsets(this.ticks.map(tick => +tick.value));\n    }\n  }\n\n  /**\n\t * Returns the start and end offsets from edges in the form of {start, end}\n\t * where each value is a relative width to the scale and ranges between 0 and 1.\n\t * They add extra margins on the both sides by scaling down the original scale.\n\t * Offsets are added when the `offset` option is true.\n\t * @param {number[]} timestamps\n\t * @protected\n\t */\n  initOffsets(timestamps = []) {\n    let start = 0;\n    let end = 0;\n    let first, last;\n\n    if (this.options.offset && timestamps.length) {\n      first = this.getDecimalForValue(timestamps[0]);\n      if (timestamps.length === 1) {\n        start = 1 - first;\n      } else {\n        start = (this.getDecimalForValue(timestamps[1]) - first) / 2;\n      }\n      last = this.getDecimalForValue(timestamps[timestamps.length - 1]);\n      if (timestamps.length === 1) {\n        end = last;\n      } else {\n        end = (last - this.getDecimalForValue(timestamps[timestamps.length - 2])) / 2;\n      }\n    }\n    const limit = timestamps.length < 3 ? 0.5 : 0.25;\n    start = _limitValue(start, 0, limit);\n    end = _limitValue(end, 0, limit);\n\n    this._offsets = {start, end, factor: 1 / (start + 1 + end)};\n  }\n\n  /**\n\t * Generates a maximum of `capacity` timestamps between min and max, rounded to the\n\t * `minor` unit using the given scale time `options`.\n\t * Important: this method can return ticks outside the min and max range, it's the\n\t * responsibility of the calling code to clamp values if needed.\n\t * @protected\n\t */\n  _generate() {\n    const adapter = this._adapter;\n    const min = this.min;\n    const max = this.max;\n    const options = this.options;\n    const timeOpts = options.time;\n    // @ts-ignore\n    const minor = timeOpts.unit || determineUnitForAutoTicks(timeOpts.minUnit, min, max, this._getLabelCapacity(min));\n    const stepSize = valueOrDefault(options.ticks.stepSize, 1);\n    const weekday = minor === 'week' ? timeOpts.isoWeekday : false;\n    const hasWeekday = isNumber(weekday) || weekday === true;\n    const ticks = {};\n    let first = min;\n    let time, count;\n\n    // For 'week' unit, handle the first day of week option\n    if (hasWeekday) {\n      first = +adapter.startOf(first, 'isoWeek', weekday);\n    }\n\n    // Align first ticks on unit\n    first = +adapter.startOf(first, hasWeekday ? 'day' : minor);\n\n    // Prevent browser from freezing in case user options request millions of milliseconds\n    if (adapter.diff(max, min, minor) > 100000 * stepSize) {\n      throw new Error(min + ' and ' + max + ' are too far apart with stepSize of ' + stepSize + ' ' + minor);\n    }\n\n    const timestamps = options.ticks.source === 'data' && this.getDataTimestamps();\n    for (time = first, count = 0; time < max; time = +adapter.add(time, stepSize, minor), count++) {\n      addTick(ticks, time, timestamps);\n    }\n\n    if (time === max || options.bounds === 'ticks' || count === 1) {\n      addTick(ticks, time, timestamps);\n    }\n\n    // @ts-ignore\n    return Object.keys(ticks).sort(sorter).map(x => +x);\n  }\n\n  /**\n\t * @param {number} value\n\t * @return {string}\n\t */\n  getLabelForValue(value) {\n    const adapter = this._adapter;\n    const timeOpts = this.options.time;\n\n    if (timeOpts.tooltipFormat) {\n      return adapter.format(value, timeOpts.tooltipFormat);\n    }\n    return adapter.format(value, timeOpts.displayFormats.datetime);\n  }\n\n  /**\n\t * @param {number} value\n\t * @param {string|undefined} format\n\t * @return {string}\n\t */\n  format(value, format) {\n    const options = this.options;\n    const formats = options.time.displayFormats;\n    const unit = this._unit;\n    const fmt = format || formats[unit];\n    return this._adapter.format(value, fmt);\n  }\n\n  /**\n\t * Function to format an individual tick mark\n\t * @param {number} time\n\t * @param {number} index\n\t * @param {object[]} ticks\n\t * @param {string|undefined} [format]\n\t * @return {string}\n\t * @private\n\t */\n  _tickFormatFunction(time, index, ticks, format) {\n    const options = this.options;\n    const formatter = options.ticks.callback;\n\n    if (formatter) {\n      return call(formatter, [time, index, ticks], this);\n    }\n\n    const formats = options.time.displayFormats;\n    const unit = this._unit;\n    const majorUnit = this._majorUnit;\n    const minorFormat = unit && formats[unit];\n    const majorFormat = majorUnit && formats[majorUnit];\n    const tick = ticks[index];\n    const major = majorUnit && majorFormat && tick && tick.major;\n\n    return this._adapter.format(time, format || (major ? majorFormat : minorFormat));\n  }\n\n  /**\n\t * @param {object[]} ticks\n\t */\n  generateTickLabels(ticks) {\n    let i, ilen, tick;\n\n    for (i = 0, ilen = ticks.length; i < ilen; ++i) {\n      tick = ticks[i];\n      tick.label = this._tickFormatFunction(tick.value, i, ticks);\n    }\n  }\n\n  /**\n\t * @param {number} value - Milliseconds since epoch (1 January 1970 00:00:00 UTC)\n\t * @return {number}\n\t */\n  getDecimalForValue(value) {\n    return value === null ? NaN : (value - this.min) / (this.max - this.min);\n  }\n\n  /**\n\t * @param {number} value - Milliseconds since epoch (1 January 1970 00:00:00 UTC)\n\t * @return {number}\n\t */\n  getPixelForValue(value) {\n    const offsets = this._offsets;\n    const pos = this.getDecimalForValue(value);\n    return this.getPixelForDecimal((offsets.start + pos) * offsets.factor);\n  }\n\n  /**\n\t * @param {number} pixel\n\t * @return {number}\n\t */\n  getValueForPixel(pixel) {\n    const offsets = this._offsets;\n    const pos = this.getDecimalForPixel(pixel) / offsets.factor - offsets.end;\n    return this.min + pos * (this.max - this.min);\n  }\n\n  /**\n\t * @param {string} label\n\t * @return {{w:number, h:number}}\n\t * @private\n\t */\n  _getLabelSize(label) {\n    const ticksOpts = this.options.ticks;\n    const tickLabelWidth = this.ctx.measureText(label).width;\n    const angle = toRadians(this.isHorizontal() ? ticksOpts.maxRotation : ticksOpts.minRotation);\n    const cosRotation = Math.cos(angle);\n    const sinRotation = Math.sin(angle);\n    const tickFontSize = this._resolveTickFontOptions(0).size;\n\n    return {\n      w: (tickLabelWidth * cosRotation) + (tickFontSize * sinRotation),\n      h: (tickLabelWidth * sinRotation) + (tickFontSize * cosRotation)\n    };\n  }\n\n  /**\n\t * @param {number} exampleTime\n\t * @return {number}\n\t * @private\n\t */\n  _getLabelCapacity(exampleTime) {\n    const timeOpts = this.options.time;\n    const displayFormats = timeOpts.displayFormats;\n\n    // pick the longest format (milliseconds) for guesstimation\n    const format = displayFormats[timeOpts.unit] || displayFormats.millisecond;\n    const exampleLabel = this._tickFormatFunction(exampleTime, 0, ticksFromTimestamps(this, [exampleTime], this._majorUnit), format);\n    const size = this._getLabelSize(exampleLabel);\n    // subtract 1 - if offset then there's one less label than tick\n    // if not offset then one half label padding is added to each end leaving room for one less label\n    const capacity = Math.floor(this.isHorizontal() ? this.width / size.w : this.height / size.h) - 1;\n    return capacity > 0 ? capacity : 1;\n  }\n\n  /**\n\t * @protected\n\t */\n  getDataTimestamps() {\n    let timestamps = this._cache.data || [];\n    let i, ilen;\n\n    if (timestamps.length) {\n      return timestamps;\n    }\n\n    const metas = this.getMatchingVisibleMetas();\n\n    if (this._normalized && metas.length) {\n      return (this._cache.data = metas[0].controller.getAllParsedValues(this));\n    }\n\n    for (i = 0, ilen = metas.length; i < ilen; ++i) {\n      timestamps = timestamps.concat(metas[i].controller.getAllParsedValues(this));\n    }\n\n    return (this._cache.data = this.normalize(timestamps));\n  }\n\n  /**\n\t * @protected\n\t */\n  getLabelTimestamps() {\n    const timestamps = this._cache.labels || [];\n    let i, ilen;\n\n    if (timestamps.length) {\n      return timestamps;\n    }\n\n    const labels = this.getLabels();\n    for (i = 0, ilen = labels.length; i < ilen; ++i) {\n      timestamps.push(parse(this, labels[i]));\n    }\n\n    return (this._cache.labels = this._normalized ? timestamps : this.normalize(timestamps));\n  }\n\n  /**\n\t * @param {number[]} values\n\t * @protected\n\t */\n  normalize(values) {\n    // It seems to be somewhat faster to do sorting first\n    return _arrayUnique(values.sort(sorter));\n  }\n}\n","import TimeScale from './scale.time.js';\nimport {_lookupByKey} from '../helpers/helpers.collection.js';\n\n/**\n * Linearly interpolates the given source `val` using the table. If value is out of bounds, values\n * at edges are used for the interpolation.\n * @param {object} table\n * @param {number} val\n * @param {boolean} [reverse] lookup time based on position instead of vice versa\n * @return {object}\n */\nfunction interpolate(table, val, reverse) {\n  let lo = 0;\n  let hi = table.length - 1;\n  let prevSource, nextSource, prevTarget, nextTarget;\n  if (reverse) {\n    if (val >= table[lo].pos && val <= table[hi].pos) {\n      ({lo, hi} = _lookupByKey(table, 'pos', val));\n    }\n    ({pos: prevSource, time: prevTarget} = table[lo]);\n    ({pos: nextSource, time: nextTarget} = table[hi]);\n  } else {\n    if (val >= table[lo].time && val <= table[hi].time) {\n      ({lo, hi} = _lookupByKey(table, 'time', val));\n    }\n    ({time: prevSource, pos: prevTarget} = table[lo]);\n    ({time: nextSource, pos: nextTarget} = table[hi]);\n  }\n\n  const span = nextSource - prevSource;\n  return span ? prevTarget + (nextTarget - prevTarget) * (val - prevSource) / span : prevTarget;\n}\n\nclass TimeSeriesScale extends TimeScale {\n\n  static id = 'timeseries';\n\n  /**\n   * @type {any}\n   */\n  static defaults = TimeScale.defaults;\n\n  /**\n\t * @param {object} props\n\t */\n  constructor(props) {\n    super(props);\n\n    /** @type {object[]} */\n    this._table = [];\n    /** @type {number} */\n    this._minPos = undefined;\n    /** @type {number} */\n    this._tableRange = undefined;\n  }\n\n  /**\n\t * @protected\n\t */\n  initOffsets() {\n    const timestamps = this._getTimestampsForTable();\n    const table = this._table = this.buildLookupTable(timestamps);\n    this._minPos = interpolate(table, this.min);\n    this._tableRange = interpolate(table, this.max) - this._minPos;\n    super.initOffsets(timestamps);\n  }\n\n  /**\n\t * Returns an array of {time, pos} objects used to interpolate a specific `time` or position\n\t * (`pos`) on the scale, by searching entries before and after the requested value. `pos` is\n\t * a decimal between 0 and 1: 0 being the start of the scale (left or top) and 1 the other\n\t * extremity (left + width or top + height). Note that it would be more optimized to directly\n\t * store pre-computed pixels, but the scale dimensions are not guaranteed at the time we need\n\t * to create the lookup table. The table ALWAYS contains at least two items: min and max.\n\t * @param {number[]} timestamps\n\t * @return {object[]}\n\t * @protected\n\t */\n  buildLookupTable(timestamps) {\n    const {min, max} = this;\n    const items = [];\n    const table = [];\n    let i, ilen, prev, curr, next;\n\n    for (i = 0, ilen = timestamps.length; i < ilen; ++i) {\n      curr = timestamps[i];\n      if (curr >= min && curr <= max) {\n        items.push(curr);\n      }\n    }\n\n    if (items.length < 2) {\n      // In case there is less that 2 timestamps between min and max, the scale is defined by min and max\n      return [\n        {time: min, pos: 0},\n        {time: max, pos: 1}\n      ];\n    }\n\n    for (i = 0, ilen = items.length; i < ilen; ++i) {\n      next = items[i + 1];\n      prev = items[i - 1];\n      curr = items[i];\n\n      // only add points that breaks the scale linearity\n      if (Math.round((next + prev) / 2) !== curr) {\n        table.push({time: curr, pos: i / (ilen - 1)});\n      }\n    }\n    return table;\n  }\n\n  /**\n    * Generates all timestamps defined in the data.\n    * Important: this method can return ticks outside the min and max range, it's the\n    * responsibility of the calling code to clamp values if needed.\n    * @protected\n    */\n  _generate() {\n    const min = this.min;\n    const max = this.max;\n    let timestamps = super.getDataTimestamps();\n    if (!timestamps.includes(min) || !timestamps.length) {\n      timestamps.splice(0, 0, min);\n    }\n    if (!timestamps.includes(max) || timestamps.length === 1) {\n      timestamps.push(max);\n    }\n    return timestamps.sort((a, b) => a - b);\n  }\n\n  /**\n\t * Returns all timestamps\n\t * @return {number[]}\n\t * @private\n\t */\n  _getTimestampsForTable() {\n    let timestamps = this._cache.all || [];\n\n    if (timestamps.length) {\n      return timestamps;\n    }\n\n    const data = this.getDataTimestamps();\n    const label = this.getLabelTimestamps();\n    if (data.length && label.length) {\n      // If combining labels and data (data might not contain all labels),\n      // we need to recheck uniqueness and sort\n      timestamps = this.normalize(data.concat(label));\n    } else {\n      timestamps = data.length ? data : label;\n    }\n    timestamps = this._cache.all = timestamps;\n\n    return timestamps;\n  }\n\n  /**\n\t * @param {number} value - Milliseconds since epoch (1 January 1970 00:00:00 UTC)\n\t * @return {number}\n\t */\n  getDecimalForValue(value) {\n    return (interpolate(this._table, value) - this._minPos) / this._tableRange;\n  }\n\n  /**\n\t * @param {number} pixel\n\t * @return {number}\n\t */\n  getValueForPixel(pixel) {\n    const offsets = this._offsets;\n    const decimal = this.getDecimalForPixel(pixel) / offsets.factor - offsets.end;\n    return interpolate(this._table, decimal * this._tableRange + this._minPos, true);\n  }\n}\n\nexport default TimeSeriesScale;\n","import type { MouseEvent } from 'react';\nimport type {\n  ChartType,\n  ChartData,\n  DefaultDataPoint,\n  ChartDataset,\n  ChartOptions,\n  Chart,\n} from 'chart.js';\n\nimport type { ForwardedRef } from './types.js';\n\nconst defaultDatasetIdKey = 'label';\n\nexport function reforwardRef<T>(ref: ForwardedRef<T>, value: T) {\n  if (typeof ref === 'function') {\n    ref(value);\n  } else if (ref) {\n    ref.current = value;\n  }\n}\n\nexport function setOptions<\n  TType extends ChartType = ChartType,\n  TData = DefaultDataPoint<TType>,\n  TLabel = unknown\n>(chart: Chart<TType, TData, TLabel>, nextOptions: ChartOptions<TType>) {\n  const options = chart.options;\n\n  if (options && nextOptions) {\n    Object.assign(options, nextOptions);\n  }\n}\n\nexport function setLabels<\n  TType extends ChartType = ChartType,\n  TData = DefaultDataPoint<TType>,\n  TLabel = unknown\n>(\n  currentData: ChartData<TType, TData, TLabel>,\n  nextLabels: TLabel[] | undefined\n) {\n  currentData.labels = nextLabels;\n}\n\nexport function setDatasets<\n  TType extends ChartType = ChartType,\n  TData = DefaultDataPoint<TType>,\n  TLabel = unknown\n>(\n  currentData: ChartData<TType, TData, TLabel>,\n  nextDatasets: ChartDataset<TType, TData>[],\n  datasetIdKey = defaultDatasetIdKey\n) {\n  const addedDatasets: ChartDataset<TType, TData>[] = [];\n\n  currentData.datasets = nextDatasets.map(\n    (nextDataset: Record<string, unknown>) => {\n      // given the new set, find it's current match\n      const currentDataset = currentData.datasets.find(\n        (dataset: Record<string, unknown>) =>\n          dataset[datasetIdKey] === nextDataset[datasetIdKey]\n      );\n\n      // There is no original to update, so simply add new one\n      if (\n        !currentDataset ||\n        !nextDataset.data ||\n        addedDatasets.includes(currentDataset)\n      ) {\n        return { ...nextDataset } as ChartDataset<TType, TData>;\n      }\n\n      addedDatasets.push(currentDataset);\n\n      Object.assign(currentDataset, nextDataset);\n\n      return currentDataset;\n    }\n  );\n}\n\nexport function cloneData<\n  TType extends ChartType = ChartType,\n  TData = DefaultDataPoint<TType>,\n  TLabel = unknown\n>(data: ChartData<TType, TData, TLabel>, datasetIdKey = defaultDatasetIdKey) {\n  const nextData: ChartData<TType, TData, TLabel> = {\n    labels: [],\n    datasets: [],\n  };\n\n  setLabels(nextData, data.labels);\n  setDatasets(nextData, data.datasets, datasetIdKey);\n\n  return nextData;\n}\n\n/**\n * Get dataset from mouse click event\n * @param chart - Chart.js instance\n * @param event - Mouse click event\n * @returns Dataset\n */\nexport function getDatasetAtEvent(\n  chart: Chart,\n  event: MouseEvent<HTMLCanvasElement>\n) {\n  return chart.getElementsAtEventForMode(\n    event.nativeEvent,\n    'dataset',\n    { intersect: true },\n    false\n  );\n}\n\n/**\n * Get single dataset element from mouse click event\n * @param chart - Chart.js instance\n * @param event - Mouse click event\n * @returns Dataset\n */\nexport function getElementAtEvent(\n  chart: Chart,\n  event: MouseEvent<HTMLCanvasElement>\n) {\n  return chart.getElementsAtEventForMode(\n    event.nativeEvent,\n    'nearest',\n    { intersect: true },\n    false\n  );\n}\n\n/**\n * Get all dataset elements from mouse click event\n * @param chart - Chart.js instance\n * @param event - Mouse click event\n * @returns Dataset\n */\nexport function getElementsAtEvent(\n  chart: Chart,\n  event: MouseEvent<HTMLCanvasElement>\n) {\n  return chart.getElementsAtEventForMode(\n    event.nativeEvent,\n    'index',\n    { intersect: true },\n    false\n  );\n}\n","import React, { useEffect, useRef, forwardRef } from 'react';\nimport { Chart as ChartJS } from 'chart.js';\nimport type { ChartType, DefaultDataPoint } from 'chart.js';\n\nimport type { ForwardedRef, ChartProps, BaseChartComponent } from './types.js';\nimport {\n  reforwardRef,\n  cloneData,\n  setOptions,\n  setLabels,\n  setDatasets,\n} from './utils.js';\n\nfunction ChartComponent<\n  TType extends ChartType = ChartType,\n  TData = DefaultDataPoint<TType>,\n  TLabel = unknown\n>(\n  props: ChartProps<TType, TData, TLabel>,\n  ref: ForwardedRef<ChartJS<TType, TData, TLabel>>\n) {\n  const {\n    height = 150,\n    width = 300,\n    redraw = false,\n    datasetIdKey,\n    type,\n    data,\n    options,\n    plugins = [],\n    fallbackContent,\n    updateMode,\n    ...canvasProps\n  } = props as ChartProps;\n  const canvasRef = useRef<HTMLCanvasElement>(null);\n  const chartRef = useRef<ChartJS | null>();\n\n  const renderChart = () => {\n    if (!canvasRef.current) return;\n\n    chartRef.current = new ChartJS(canvasRef.current, {\n      type,\n      data: cloneData(data, datasetIdKey),\n      options: options && { ...options },\n      plugins,\n    });\n\n    reforwardRef(ref, chartRef.current);\n  };\n\n  const destroyChart = () => {\n    reforwardRef(ref, null);\n\n    if (chartRef.current) {\n      chartRef.current.destroy();\n      chartRef.current = null;\n    }\n  };\n\n  useEffect(() => {\n    if (!redraw && chartRef.current && options) {\n      setOptions(chartRef.current, options);\n    }\n  }, [redraw, options]);\n\n  useEffect(() => {\n    if (!redraw && chartRef.current) {\n      setLabels(chartRef.current.config.data, data.labels);\n    }\n  }, [redraw, data.labels]);\n\n  useEffect(() => {\n    if (!redraw && chartRef.current && data.datasets) {\n      setDatasets(chartRef.current.config.data, data.datasets, datasetIdKey);\n    }\n  }, [redraw, data.datasets]);\n\n  useEffect(() => {\n    if (!chartRef.current) return;\n\n    if (redraw) {\n      destroyChart();\n      setTimeout(renderChart);\n    } else {\n      chartRef.current.update(updateMode);\n    }\n  }, [redraw, options, data.labels, data.datasets, updateMode]);\n\n  useEffect(() => {\n    if (!chartRef.current) return;\n\n    destroyChart();\n    setTimeout(renderChart);\n  }, [type]);\n\n  useEffect(() => {\n    renderChart();\n\n    return () => destroyChart();\n  }, []);\n\n  return (\n    <canvas\n      ref={canvasRef}\n      role='img'\n      height={height}\n      width={width}\n      {...canvasProps}\n    >\n      {fallbackContent}\n    </canvas>\n  );\n}\n\nexport const Chart = forwardRef(ChartComponent) as BaseChartComponent;\n","import React, { forwardRef } from 'react';\nimport {\n  Chart as ChartJS,\n  LineController,\n  BarController,\n  RadarController,\n  DoughnutController,\n  PolarAreaController,\n  BubbleController,\n  PieController,\n  ScatterController,\n} from 'chart.js';\nimport type { ChartType, ChartComponentLike } from 'chart.js';\n\nimport type {\n  ChartProps,\n  ChartJSOrUndefined,\n  TypedChartComponent,\n} from './types.js';\nimport { Chart } from './chart.js';\n\nfunction createTypedChart<T extends ChartType>(\n  type: T,\n  registerables: ChartComponentLike\n) {\n  ChartJS.register(registerables);\n\n  return forwardRef<ChartJSOrUndefined<T>, Omit<ChartProps<T>, 'type'>>(\n    (props, ref) => <Chart {...props} ref={ref} type={type} />\n  ) as TypedChartComponent<T>;\n}\n\nexport const Line = /* #__PURE__ */ createTypedChart('line', LineController);\n\nexport const Bar = /* #__PURE__ */ createTypedChart('bar', BarController);\n\nexport const Radar = /* #__PURE__ */ createTypedChart('radar', RadarController);\n\nexport const Doughnut = /* #__PURE__ */ createTypedChart(\n  'doughnut',\n  DoughnutController\n);\n\nexport const PolarArea = /* #__PURE__ */ createTypedChart(\n  'polarArea',\n  PolarAreaController\n);\n\nexport const Bubble = /* #__PURE__ */ createTypedChart(\n  'bubble',\n  BubbleController\n);\n\nexport const Pie = /* #__PURE__ */ createTypedChart('pie', PieController);\n\nexport const Scatter = /* #__PURE__ */ createTypedChart(\n  'scatter',\n  ScatterController\n);\n"],"names":["SIZE","CircularProgress","React","props","ref","classes","className","_props$color","color","_props$disableShrink","disableShrink","_props$size","size","style","_props$thickness","thickness","_props$value","value","_props$variant","variant","other","_objectWithoutProperties","circleStyle","rootStyle","rootProps","circumference","Math","PI","strokeDasharray","toFixed","round","strokeDashoffset","concat","transform","_extends","clsx","root","capitalize","determinate","indeterminate","static","width","height","role","svg","viewBox","circle","circleDisableShrink","circleDeterminate","circleIndeterminate","circleStatic","cx","cy","r","fill","strokeWidth","withStyles","theme","display","transition","transitions","create","animation","colorPrimary","palette","primary","main","colorSecondary","secondary","stroke","transformOrigin","name","flip","LinearProgress","valueBuffer","useTheme","inlineStyles","bar1","bar2","undefined","direction","process","_transform","buffer","query","dashed","bar","bar1Indeterminate","bar1Determinate","bar1Buffer","bar2Indeterminate","bar2Buffer","getColor","type","lighten","darken","backgroundPrimary","backgroundSecondary","position","overflow","colorAdjust","backgroundColor","marginTop","dashedColorPrimary","backgroundImage","backgroundSize","backgroundPosition","dashedColorSecondary","left","bottom","top","barColorPrimary","barColorSecondary","zIndex","right","opacity","exports","byteLength","b64","lens","getLens","validLen","placeHoldersLen","toByteArray","tmp","i","arr","Arr","_byteLength","curByte","len","revLookup","charCodeAt","fromByteArray","uint8","length","extraBytes","parts","maxChunkLength","len2","push","encodeChunk","lookup","join","Uint8Array","Array","code","Error","indexOf","start","end","num","output","base64","require","ieee754","customInspectSymbol","Symbol","Buffer","SlowBuffer","alloc","INSPECT_MAX_BYTES","K_MAX_LENGTH","createBuffer","RangeError","buf","Object","setPrototypeOf","prototype","arg","encodingOrOffset","TypeError","allocUnsafe","from","string","encoding","isEncoding","actual","write","slice","fromString","ArrayBuffer","isView","arrayView","isInstance","copy","fromArrayBuffer","byteOffset","fromArrayLike","fromArrayView","SharedArrayBuffer","valueOf","b","obj","isBuffer","checked","numberIsNaN","isArray","data","fromObject","toPrimitive","assertSize","array","toString","mustMatch","arguments","loweredCase","utf8ToBytes","base64ToBytes","toLowerCase","slowToString","this","hexSlice","utf8Slice","asciiSlice","latin1Slice","base64Slice","utf16leSlice","swap","n","m","bidirectionalIndexOf","val","dir","arrayIndexOf","call","lastIndexOf","indexSize","arrLength","valLength","String","read","readUInt16BE","foundIndex","found","j","hexWrite","offset","Number","remaining","strLen","parsed","parseInt","substr","utf8Write","blitBuffer","asciiWrite","str","byteArray","asciiToBytes","base64Write","ucs2Write","units","c","hi","lo","utf16leToBytes","min","res","firstByte","codePoint","bytesPerSequence","secondByte","thirdByte","fourthByte","tempCodePoint","codePoints","MAX_ARGUMENTS_LENGTH","fromCharCode","apply","decodeCodePointsArray","kMaxLength","TYPED_ARRAY_SUPPORT","proto","foo","e","typedArraySupport","console","error","defineProperty","enumerable","get","poolSize","allocUnsafeSlow","_isBuffer","compare","a","x","y","list","pos","set","swap16","swap32","swap64","toLocaleString","equals","inspect","max","replace","trim","target","thisStart","thisEnd","thisCopy","targetCopy","includes","isFinite","toJSON","_arr","ret","out","hexSliceLookupTable","bytes","checkOffset","ext","checkInt","wrtBigUInt64LE","checkIntBI","BigInt","wrtBigUInt64BE","checkIEEE754","writeFloat","littleEndian","noAssert","writeDouble","newBuf","subarray","readUintLE","readUIntLE","mul","readUintBE","readUIntBE","readUint8","readUInt8","readUint16LE","readUInt16LE","readUint16BE","readUint32LE","readUInt32LE","readUint32BE","readUInt32BE","readBigUInt64LE","defineBigIntMethod","validateNumber","first","last","boundsError","readBigUInt64BE","readIntLE","pow","readIntBE","readInt8","readInt16LE","readInt16BE","readInt32LE","readInt32BE","readBigInt64LE","readBigInt64BE","readFloatLE","readFloatBE","readDoubleLE","readDoubleBE","writeUintLE","writeUIntLE","writeUintBE","writeUIntBE","writeUint8","writeUInt8","writeUint16LE","writeUInt16LE","writeUint16BE","writeUInt16BE","writeUint32LE","writeUInt32LE","writeUint32BE","writeUInt32BE","writeBigUInt64LE","writeBigUInt64BE","writeIntLE","limit","sub","writeIntBE","writeInt8","writeInt16LE","writeInt16BE","writeInt32LE","writeInt32BE","writeBigInt64LE","writeBigInt64BE","writeFloatLE","writeFloatBE","writeDoubleLE","writeDoubleBE","targetStart","copyWithin","errors","E","sym","getMessage","Base","constructor","super","writable","configurable","stack","message","addNumericalSeparator","range","ERR_OUT_OF_RANGE","checkBounds","ERR_INVALID_ARG_TYPE","floor","ERR_BUFFER_OUT_OF_BOUNDS","input","msg","received","isInteger","abs","INVALID_BASE64_RE","Infinity","leadSurrogate","split","base64clean","src","dst","alphabet","table","i16","fn","BufferBigIntNotDefined","ReflectOwnKeys","R","Reflect","ReflectApply","receiver","args","Function","ownKeys","getOwnPropertySymbols","getOwnPropertyNames","NumberIsNaN","isNaN","EventEmitter","init","module","once","emitter","Promise","resolve","reject","errorListener","err","removeListener","resolver","eventTargetAgnosticAddListener","handler","flags","on","addErrorHandlerIfEventEmitter","_events","_eventsCount","_maxListeners","defaultMaxListeners","checkListener","listener","_getMaxListeners","that","_addListener","prepend","events","existing","warning","newListener","emit","unshift","warned","w","count","warn","onceWrapper","fired","wrapFn","_onceWrap","state","wrapped","bind","_listeners","unwrap","evlistener","unwrapListeners","arrayClone","listenerCount","addEventListener","wrapListener","removeEventListener","getPrototypeOf","setMaxListeners","getMaxListeners","doError","er","context","listeners","addListener","prependListener","prependOnceListener","originalListener","shift","index","pop","spliceOne","off","removeAllListeners","key","keys","rawListeners","eventNames","isLE","mLen","nBytes","eLen","eMax","eBias","nBits","d","s","NaN","rt","log","LN2","ctor","superCtor","super_","TempCtor","html","_ref","_ref$decodeEntities","decodeEntities","_ref$preprocessNodes","preprocessNodes","nodes","_htmlparser2","default","parseDOM","_processNodes2","_interopRequireDefault","__esModule","node","_elementTypes2","_elementTypes","accept","accesskey","action","allowfullscreen","allowtransparency","alt","as","async","autocomplete","autoplay","capture","cellpadding","cellspacing","charset","challenge","cite","classid","class","cols","colspan","content","contenteditable","contextmenu","controls","controlsList","coords","crossorigin","datetime","defer","disabled","download","draggable","enctype","form","formaction","formenctype","formmethod","formnovalidate","formtarget","frameborder","headers","hidden","high","href","hreflang","for","icon","id","inputmode","integrity","is","keyparams","keytype","kind","label","lang","loop","low","manifest","marginheight","marginwidth","maxlength","media","mediagroup","method","minlength","multiple","muted","nonce","novalidate","open","optimum","pattern","placeholder","playsinline","poster","preload","profile","radiogroup","readonly","referrerpolicy","rel","required","reversed","rows","rowspan","sandbox","scope","scoped","scrolling","seamless","selected","shape","sizes","slot","span","spellcheck","srcdoc","srclang","srcset","step","summary","tabindex","title","usemap","wmode","wrap","about","datatype","inlist","prefix","property","resource","typeof","vocab","autocapitalize","autocorrect","autosave","itemprop","itemscope","itemtype","itemid","itemref","results","security","unselectable","styles","children","_generatePropsFromAttributes2","attribs","_react2","createElement","tagName","_isValidTagOrAttributeName2","_VoidElements2","_ElementType$Text$Ele","_htmlparser","_TextElementType2","_TagElementType2","_StyleElementType2","_UnsupportedElementType2","_defineProperty","ElementType","Text","Tag","Style","Directive","Comment","Script","CDATA","Doctype","_processNodes","_convertNodeToElement","_HtmlParser2","filter","_isEmptyTextNode2","map","transformed","_convertNodeToElement2","assign","source","hasOwnProperty","attributes","_htmlAttributesToReact2","_inlineStyleToObject2","attr","reduce","mappedAttributes","attribute","lowerCaseAttribute","_ReactAttributes2","getParsedAttributeValue","_BooleanAttributes2","_slicedToArray","iterator","_n","_d","_e","_s","_i","next","done","sliceIterator","inlineStyle","styleObject","stylePropertyValue","_stylePropertyValue$s","item","_stylePropertyValue$s2","_","character","toUpperCase","test","nameCache","VALID_TAG_REGEX","entities","foreignNames","elementNames","__proto__","attributeNames","unencodedElements","script","xmp","iframe","noembed","noframes","plaintext","noscript","singleTag","area","base","basefont","br","col","command","embed","frame","hr","img","isindex","keygen","link","meta","param","track","wbr","render","dom","opts","cheerio","elem","isTag","renderTag","renderDirective","renderComment","renderCdata","renderText","foreignModeIntegrationPoints","xmlMode","parent","tag","encodeXML","formatAttrs","Root","__importDefault","mod","decodeHTML","decodeHTMLStrict","decodeXML","entities_json_1","legacy_json_1","xml_json_1","decode_codepoint_1","strictEntityRe","getStrictDecoder","getReplacer","sorter","charAt","secondChar","legacy","sort","re","RegExp","replacer","decode_json_1","fromCodePoint","escapeUTF8","escape","encodeNonAsciiHTML","encodeHTML","inverseXML","getInverseObj","xmlReplacer","getInverseReplacer","getASCIIEncoder","inverse","inverseHTML","htmlReplacer","single","_a","k","splice","reNonASCII","singleCharReplacer","getCodePoint","codePointAt","reEscapeChars","decodeXMLStrict","decodeHTML5Strict","decodeHTML4Strict","decodeHTML5","decodeHTML4","encodeHTML5","encodeHTML4","encode","decodeStrict","decode","decode_1","encode_1","level","encode_2","decode_2","re_whitespace","NodePrototype","ElementPrototype","DomHandler","callback","options","elementCB","defaultOpts","_callback","_options","_elementCB","_done","_tagStack","_parser","normalizeWhitespace","withStartIndices","withEndIndices","onparserinit","parser","onreset","onend","_handleCallback","onerror","onclosetag","endIndex","_createDomElement","properties","withDomLvl1","element","_addDomElement","siblings","previousSibling","startIndex","prev","onopentag","ontext","lastTag","normalize","ignoreWhitespace","oncomment","oncdatastart","oncommentend","oncdataend","onprocessinginstruction","domLvl1","forEach","shorthand","firstChild","lastChild","nodeType","nodeTypes","childNodes","parentNode","nextSibling","nodeValue","text","cdata","comment","DomUtils","removeSubsets","ancestor","idx","POSITION","comparePos","compareDocumentPosition","nodeA","nodeB","current","sharedParent","aSibling","bSibling","aParents","bParents","uniqueSort","relative","testElement","tag_name","tag_type","tag_contains","Checks","getAttribCheck","attrib","combineFuncs","getElements","recurse","funcs","getElementById","findOne","getElementsByTagName","getElementsByTagType","removeElement","childs","replaceElement","replacement","appendChild","child","sibling","append","currNext","find","elems","result","findOneChild","l","existsOne","findAll","rootElems","getOuterHTML","getInnerHTML","getText","getChildren","getParent","getSiblings","getAttributeValue","hasAttrib","getName","decodeMap","CollectingHandler","cbs","_cbs","EVENTS","restart","FeedHandler","what","where","getOneElement","fetch","addConditionally","prop","isValidFeed","feed","feedRoot","updated","Date","items","entry","description","pubDate","Tokenizer","formTags","option","optgroup","select","button","datalist","textarea","openImpliesClose","tr","th","td","thead","body","head","li","p","h1","h2","h3","h4","h5","h6","voidElements","foreignContextElements","math","htmlIntegrationElements","mi","mo","mn","ms","mtext","foreignObject","desc","re_nameEnd","Parser","_tagname","_attribname","_attribvalue","_attribs","_stack","_foreignContext","_lowerCaseTagNames","lowerCaseTags","_lowerCaseAttributeNames","lowerCaseAttributeNames","_tokenizer","_updatePosition","initialOffset","_sectionStart","getAbsoluteIndex","onopentagname","el","onopentagend","_closeCurrentTag","onselfclosingtag","recognizeSelfClosing","onattribname","onattribdata","onattribend","onattribute","_getInstructionName","search","ondeclaration","oncdata","recognizeCDATA","reset","parseComplete","chunk","pause","resume","parseChunk","ProxyHandler","Stream","Cbs","readable","decodeCodePoint","entityMap","legacyMap","xmlMap","TEXT","BEFORE_TAG_NAME","IN_TAG_NAME","IN_SELF_CLOSING_TAG","BEFORE_CLOSING_TAG_NAME","IN_CLOSING_TAG_NAME","AFTER_CLOSING_TAG_NAME","BEFORE_ATTRIBUTE_NAME","IN_ATTRIBUTE_NAME","AFTER_ATTRIBUTE_NAME","BEFORE_ATTRIBUTE_VALUE","IN_ATTRIBUTE_VALUE_DQ","IN_ATTRIBUTE_VALUE_SQ","IN_ATTRIBUTE_VALUE_NQ","BEFORE_DECLARATION","IN_DECLARATION","IN_PROCESSING_INSTRUCTION","BEFORE_COMMENT","IN_COMMENT","AFTER_COMMENT_1","AFTER_COMMENT_2","BEFORE_CDATA_1","BEFORE_CDATA_2","BEFORE_CDATA_3","BEFORE_CDATA_4","BEFORE_CDATA_5","BEFORE_CDATA_6","IN_CDATA","AFTER_CDATA_1","AFTER_CDATA_2","BEFORE_SPECIAL","BEFORE_SPECIAL_END","BEFORE_SCRIPT_1","BEFORE_SCRIPT_2","BEFORE_SCRIPT_3","BEFORE_SCRIPT_4","BEFORE_SCRIPT_5","AFTER_SCRIPT_1","AFTER_SCRIPT_2","AFTER_SCRIPT_3","AFTER_SCRIPT_4","AFTER_SCRIPT_5","BEFORE_STYLE_1","BEFORE_STYLE_2","BEFORE_STYLE_3","BEFORE_STYLE_4","AFTER_STYLE_1","AFTER_STYLE_2","AFTER_STYLE_3","AFTER_STYLE_4","BEFORE_ENTITY","BEFORE_NUMERIC_ENTITY","IN_NAMED_ENTITY","IN_NUMERIC_ENTITY","IN_HEX_ENTITY","SPECIAL_NONE","SPECIAL_SCRIPT","SPECIAL_STYLE","whitespace","ifElseState","upper","SUCCESS","FAILURE","lower","_state","_index","consumeSpecialNameChar","NEXT_STATE","_buffer","_bufferOffset","_baseState","_special","_running","_ended","_xmlMode","_decodeEntities","_stateText","_getSection","_stateBeforeTagName","_stateInTagName","_emitToken","_stateBeforeCloseingTagName","_stateInCloseingTagName","_stateAfterCloseingTagName","_stateBeforeAttributeName","_stateInSelfClosingTag","_stateInAttributeName","_stateAfterAttributeName","_stateBeforeAttributeValue","_stateInAttributeValueDoubleQuotes","_stateInAttributeValueSingleQuotes","_stateInAttributeValueNoQuotes","_stateBeforeDeclaration","_stateInDeclaration","_stateInProcessingInstruction","_stateBeforeComment","_stateInComment","_stateAfterComment1","_stateAfterComment2","substring","_stateBeforeCdata1","_stateBeforeCdata2","_stateBeforeCdata3","_stateBeforeCdata4","_stateBeforeCdata5","_stateBeforeCdata6","_stateInCdata","_stateAfterCdata1","_stateAfterCdata2","_stateBeforeSpecial","_stateBeforeSpecialEnd","_stateBeforeScript1","_stateBeforeScript2","_stateBeforeScript3","_stateBeforeScript4","_stateBeforeScript5","_stateAfterScript1","_stateAfterScript2","_stateAfterScript3","_stateAfterScript4","_stateAfterScript5","_stateBeforeStyle1","_stateBeforeStyle2","_stateBeforeStyle3","_stateBeforeStyle4","_stateAfterStyle1","_stateAfterStyle2","_stateAfterStyle3","_stateAfterStyle4","_stateBeforeEntity","_stateBeforeNumericEntity","_parseNamedEntityStrict","entity","_emitPartial","_parseLegacyEntity","_stateInNamedEntity","_decodeNumericEntity","sectionStart","_stateInNumericEntity","_stateInHexEntity","_cleanup","_parse","_finish","_handleTrailingData","WritableStream","StringDecoder","decoder","_decoder","decodeStrings","_write","cb","defineProp","DefaultHandler","RssHandler","parseFeed","createDomStream","elementCb","cdatastart","cdataend","processinginstruction","commentend","closetag","opentag","opentagname","copyProps","SafeBuffer","nb","enc","nenc","retried","_normalizeEncoding","normalizeEncoding","utf16Text","utf16End","fillLast","utf8FillLast","base64Text","base64End","simpleWrite","simpleEnd","lastNeed","lastTotal","lastChar","utf8CheckByte","byte","self","utf8CheckExtraBytes","total","utf8CheckIncomplete","v","lim","h","p2b","n2b","b2n","n2p","map$1","A","B","C","D","F","f","hex","eq","hexString","g","isShort","alpha","HUE_RE","hsl2rgbn","hsv2rgbn","hwb2rgbn","rgb","rgb2hsl","hueValue","calln","hsl2rgb","hue","hueParse","exec","p1","p2","hwb2rgb","hsv2rgb","Z","Y","X","W","V","U","T","S","Q","P","O","N","M","L","K","G","H","I","J","names$1","OiceXe","antiquewEte","aqua","aquamarRe","azuY","beige","bisque","black","blanKedOmond","Xe","XeviTet","bPwn","burlywood","caMtXe","KartYuse","KocTate","cSO","cSnflowerXe","cSnsilk","crimson","cyan","xXe","xcyan","xgTMnPd","xWay","xgYF","xgYy","xkhaki","xmagFta","xTivegYF","xSange","xScEd","xYd","xsOmon","xsHgYF","xUXe","xUWay","xUgYy","xQe","xviTet","dAppRk","dApskyXe","dimWay","dimgYy","dodgerXe","fiYbrick","flSOwEte","foYstWAn","fuKsia","gaRsbSo","ghostwEte","gTd","gTMnPd","Way","gYF","gYFLw","gYy","honeyMw","hotpRk","RdianYd","Rdigo","ivSy","khaki","lavFMr","lavFMrXsh","lawngYF","NmoncEffon","ZXe","ZcSO","Zcyan","ZgTMnPdLw","ZWay","ZgYF","ZgYy","ZpRk","ZsOmon","ZsHgYF","ZskyXe","ZUWay","ZUgYy","ZstAlXe","ZLw","lime","limegYF","lRF","magFta","maPon","VaquamarRe","VXe","VScEd","VpurpN","VsHgYF","VUXe","VsprRggYF","VQe","VviTetYd","midnightXe","mRtcYam","mistyPse","moccasR","navajowEte","navy","Tdlace","Tive","TivedBb","Sange","SangeYd","ScEd","pOegTMnPd","pOegYF","pOeQe","pOeviTetYd","papayawEp","pHKpuff","peru","pRk","plum","powMrXe","purpN","YbeccapurpN","Yd","Psybrown","PyOXe","saddNbPwn","sOmon","sandybPwn","sHgYF","sHshell","siFna","silver","skyXe","UXe","UWay","UgYy","snow","sprRggYF","stAlXe","tan","teO","tEstN","tomato","Qe","viTet","JHt","wEte","wEtesmoke","Lw","LwgYF","names","nameParse","unpacked","tkeys","ok","nk","unpack","transparent","RGB_RE","to","modHSL","ratio","clone","functionParse","rgbParse","Color","hexParse","_rgb","_valid","valid","rgbString","hslString","mix","weight","c1","c2","w2","w1","interpolate","t","rgb1","rgb2","clearer","greyscale","opaquer","negate","saturate","desaturate","rotate","deg","noop","uid","isNullOrUndef","isObject","isNumberFinite","finiteOrDefault","defaultValue","valueOrDefault","toDimension","dimension","endsWith","parseFloat","thisArg","each","loopable","reverse","_elementsEqual","a0","a1","ilen","v0","v1","datasetIndex","klen","isValidKey","_merger","tval","sval","merge","sources","merger","mergeIf","_mergerIf","keyResolvers","o","resolveObjectKey","part","_splitKey","_getKeyResolver","_capitalize","defined","isFunction","setsEqual","has","TAU","PITAU","INFINITY","POSITIVE_INFINITY","RAD_PER_DEG","HALF_PI","QUARTER_PI","TWO_THIRDS_PI","log10","sign","almostEquals","epsilon","niceNum","roundedRange","niceRange","fraction","isNumber","_setMinAndMaxByKey","toRadians","degrees","toDegrees","radians","_decimalPlaces","getAngleFromPoint","centrePoint","anglePoint","distanceFromXCenter","distanceFromYCenter","radialDistanceFromCenter","sqrt","angle","atan2","distance","distanceBetweenPoints","pt1","pt2","_angleDiff","_normalizeAngle","_angleBetween","sameAngleIsFullCircle","angleToStart","angleToEnd","startToAngle","endToAngle","_limitValue","_isBetween","_lookup","cmp","mid","_lookupByKey","ti","_rlookupByKey","arrayEvents","unlistenArrayEvents","stub","_chartjs","_arrayUnique","Set","requestAnimFrame","window","requestAnimationFrame","throttled","argsToUse","ticking","_len2","_key2","_toLeftRightCenter","align","_alignStartEnd","_getStartAndCountOfVisiblePoints","points","animationsDisabled","pointCount","_sorted","iScale","_parsed","axis","minDefined","maxDefined","getUserBounds","getPixelForValue","_scaleRangesChanged","xScale","yScale","_scaleRanges","newRanges","xmin","xmax","ymin","ymax","changed","atEdge","elasticIn","sin","elasticOut","effects","linear","easeInQuad","easeOutQuad","easeInOutQuad","easeInCubic","easeOutCubic","easeInOutCubic","easeInQuart","easeOutQuart","easeInOutQuart","easeInQuint","easeOutQuint","easeInOutQuint","easeInSine","cos","easeOutSine","easeInOutSine","easeInExpo","easeOutExpo","easeInOutExpo","easeInCirc","easeOutCirc","easeInOutCirc","easeInElastic","easeOutElastic","easeInOutElastic","easeInBack","easeOutBack","easeInOutBack","easeInBounce","easeOutBounce","easeInOutBounce","isPatternOrGradient","getHoverColor","numbers","colors","intlCache","Map","formatNumber","locale","cacheKey","JSON","stringify","formatter","Intl","NumberFormat","getNumberFormat","format","formatters","values","numeric","tickValue","ticks","chart","notation","delta","maxTick","calculateDelta","logDelta","numDecimal","minimumFractionDigits","maximumFractionDigits","logarithmic","remain","significand","Ticks","overrides","descriptors","getScope$1","Defaults","_descriptors","_appliers","borderColor","datasets","devicePixelRatio","platform","getDevicePixelRatio","elements","font","family","lineHeight","hover","hoverBackgroundColor","ctx","hoverBorderColor","hoverColor","indexAxis","interaction","mode","intersect","includeInvisible","maintainAspectRatio","onHover","onClick","parsing","plugins","responsive","scale","scales","showLine","drawActiveElementsOnTop","describe","override","route","targetScope","targetName","scopeObject","targetScopeObject","privateName","defineProperties","local","appliers","defaults","_scriptable","startsWith","_indexable","_fallback","delay","duration","easing","active","resize","show","animations","visible","hide","autoPadding","padding","beginAtZero","bounds","clip","grace","grid","lineWidth","drawOnChartArea","drawTicks","tickLength","tickWidth","_ctx","tickColor","border","dash","dashOffset","minRotation","maxRotation","mirror","textStrokeWidth","textStrokeColor","autoSkip","autoSkipPadding","labelOffset","minor","major","crossAlign","showLabelBackdrop","backdropColor","backdropPadding","_measureText","gc","longest","textWidth","measureText","_longestText","arrayOfThings","cache","garbageCollect","save","jlen","thing","nestedThing","restore","gcLen","_alignPixel","pixel","currentDevicePixelRatio","halfWidth","clearCanvas","canvas","getContext","resetTransform","clearRect","drawPoint","drawPointLegend","xOffset","yOffset","cornerRadius","xOffsetW","yOffsetW","pointStyle","rotation","radius","rad","translate","drawImage","beginPath","ellipse","arc","closePath","moveTo","lineTo","SQRT1_2","rect","borderWidth","_isPointInArea","point","margin","clipArea","unclipArea","_steppedLineTo","previous","midpoint","_bezierCurveTo","bezierCurveTo","cp1x","cp2x","cp1y","cp2y","decorateText","line","strikethrough","underline","metrics","actualBoundingBoxLeft","actualBoundingBoxRight","actualBoundingBoxAscent","actualBoundingBoxDescent","yDecoration","strokeStyle","fillStyle","decorationWidth","drawBackdrop","oldColor","fillRect","lines","strokeColor","translation","textAlign","textBaseline","setRenderOpts","backdrop","strokeText","maxWidth","fillText","addRoundedRectPath","topLeft","bottomLeft","bottomRight","topRight","LINE_HEIGHT","FONT_STYLE","toLineHeight","matches","match","numberOrZero","_readValueToProps","objProps","toTRBL","toTRBLCorners","toPadding","toFont","fallback","toFontString","inputs","info","cacheable","createContext","parentContext","_createResolver","scopes","prefixes","getTarget","finalRootScopes","_resolve","toStringTag","_cacheable","_scopes","_rootScopes","_getTarget","Proxy","deleteProperty","_keys","_cached","proxy","readKey","needsSubResolver","createSubResolver","_resolveWithPrefixes","getOwnPropertyDescriptor","getKeysFromAllScopes","storage","_storage","_attachContext","subProxy","descriptorDefaults","_proxy","_context","_subProxy","setContext","isScriptable","getValue","add","delete","_resolveScriptable","isIndexable","_resolveArray","_resolveWithContext","allKeys","scriptable","indexable","_allKeys","resolveFallback","getScope","addScopes","parentScopes","parentFallback","rootScopes","allScopes","addScopesFromKey","subGetTarget","resolveKeysFromAllScopes","_parseObjectDataRadialScale","_parsing","parse","EPSILON","getPoint","skip","getValueAxis","splineCurve","firstPoint","middlePoint","afterPoint","d01","d12","s01","s12","fa","fb","splineCurveMonotone","valueAxis","pointsLen","deltaK","mK","pointBefore","pointCurrent","pointAfter","slopeDelta","alphaK","betaK","tauK","squaredMagnitude","monotoneAdjust","iPixel","vPixel","monotoneCompute","capControlPoint","pt","_updateBezierControlPoints","controlPoints","spanGaps","cubicInterpolationMode","tension","capBezierPoints","inArea","inAreaPrev","inAreaNext","_isDomSupported","document","_getParentNode","domNode","host","parseMaxStyle","styleValue","parentProperty","valueInPixels","getComputedStyle","ownerDocument","defaultView","positions","getPositionedStyle","suffix","useOffsetPos","shadowRoot","getRelativePosition","event","borderBox","boxSizing","paddings","borders","box","touches","offsetX","offsetY","getBoundingClientRect","clientX","clientY","getCanvasPosition","round1","getMaximumSize","bbWidth","bbHeight","aspectRatio","margins","maxHeight","containerSize","container","containerStyle","containerBorder","containerPadding","clientWidth","clientHeight","getContainerSize","retinaScale","forceRatio","forceStyle","pixelRatio","deviceHeight","deviceWidth","setTransform","supportsEventListenerOptions","passiveSupported","passive","readUsedSize","getPropertyValue","getStyle","_pointInLine","_steppedInterpolation","_bezierInterpolation","cp1","cp2","getRtlAdapter","rtl","rectX","setWidth","xPlus","leftForLtr","itemWidth","getRightToLeftAdapter","_itemWidth","overrideTextDirection","original","getPropertyPriority","setProperty","prevTextDirection","restoreTextDirection","propertyFn","between","normalizeSegment","_boundSegment","segment","startBound","endBound","getSegment","prevValue","inside","subStart","shouldStart","shouldStop","_boundSegments","segments","splitByStyles","segmentOptions","chartContext","_chart","baseStyle","readStyle","_datasetIndex","prevStyle","addStyle","st","p0","p0DataIndex","p1DataIndex","styleChanged","doSplitByStyles","borderCapStyle","borderDash","borderDashOffset","borderJoinStyle","Animator","_request","_charts","_lastDate","_notify","anims","date","callbacks","numSteps","initial","currentStep","_refresh","_update","now","running","draw","_active","_total","tick","_getAnims","charts","complete","progress","listen","acc","cur","_duration","stop","cancel","remove","animator","interpolators","boolean","factor","c0","number","Animation","cfg","currentValue","_fn","_easing","_start","_loop","_target","_prop","_from","_to","_promises","update","elapsed","wait","promises","rej","resolved","Animations","config","_properties","configure","animationOptions","animatedProps","_animateOptions","newOptions","$shared","$animations","resolveTargetOptions","_createAnimations","anim","all","awaitAll","then","scaleClip","allowedOverflow","getSortedDatasetIndices","filterVisible","metasets","_getSortedDatasetMetas","applyStack","dsIndex","singleMode","otherValue","isStacked","stacked","getOrCreateStack","stacks","stackKey","indexValue","subStack","getLastIndexInStack","vScale","positive","getMatchingVisibleMetas","updateStacks","controller","_cachedMeta","_stacks","iAxis","vAxis","indexScale","valueScale","getStackKey","_top","_bottom","_visualValues","getFirstScaleId","clearStacks","isDirectUpdateMode","cloneIfNotShared","cached","shared","DatasetController","_cachedDataOpts","getMeta","_type","_data","_objectData","_sharedOptions","_drawStart","_drawCount","enableOptionSharing","supportsDecimation","$context","_syncList","datasetElementType","dataElementType","initialize","linkScales","_stacked","addElements","isPluginEnabled","updateIndex","dataset","getDataset","chooseId","xid","xAxisID","yid","yAxisID","rid","rAxisID","iid","iAxisID","vid","vAxisID","getScaleForId","rScale","getDatasetMeta","scaleID","_getOtherScale","_destroy","_dataCheck","adata","convertObjectDataToArray","isExtensible","_len","_key","object","buildOrUpdateElements","resetNewElements","stackChanged","oldStacked","_resyncElements","scopeKeys","datasetScopeKeys","getOptionScopes","createResolver","sorted","parseArrayData","parseObjectData","parsePrimitiveData","isNotInOrderComparedToPrev","labels","getLabels","singleScale","xAxisKey","yAxisKey","getParsed","getDataElement","updateRangeFromParsed","parsedValue","getMinMax","canStack","otherScale","createStack","NEGATIVE_INFINITY","otherMin","otherMax","_skip","getAllParsedValues","getMaxOverflow","getLabelAndValue","getLabelForValue","_clip","toClip","defaultClip","chartArea","resolveDatasetElementOptions","resolveDataElementOptions","dataIndex","raw","createDataContext","createDatasetContext","_resolveElementOptions","elementType","sharing","datasetElementScopeKeys","resolveNamedOptions","freeze","_resolveAnimations","datasetAnimationScopeKeys","getSharedOptions","includeOptions","sharedOptions","_animationsDisabled","_getSharedOptions","firstOpts","previouslySharedOptions","updateSharedOptions","updateElement","_setStyle","removeHoverStyle","setHoverStyle","_removeDatasetHoverStyle","_setDatasetHoverStyle","arg1","arg2","numMeta","numData","_insertElements","_removeElements","move","updateElements","removed","_sync","_dataChanges","_onDataPush","_onDataPop","_onDataShift","_onDataSplice","newCount","_onDataUnshift","computeMinSampleSize","_cache","$bar","visibleMetas","getAllScaleValues","curr","_length","updateMinAndPrev","getPixelForTick","parseValue","startValue","endValue","barStart","barEnd","_custom","parseFloatBar","parseArrayOrPrimitive","isFloatBar","custom","setBorderSkipped","edge","borderSkipped","horizontal","borderProps","enableBorderRadius","parseEdge","orig","v2","startEnd","setInflateAmount","inflateAmount","BarController","iAxisKey","vAxisKey","bars","getBasePixel","isHorizontal","ruler","_getRuler","vpixels","_calculateBarValuePixels","ipixels","_calculateBarIndexPixels","center","_getStacks","grouped","skipNull","_getStackCount","_getStackIndex","pixels","barThickness","_startPixel","_endPixel","stackCount","categoryPercentage","barPercentage","baseValue","minBarLength","actualBase","floating","getDataVisibility","barSign","startPixel","getPixelForDecimal","endPixel","getValueForPixel","halfGrid","getLineWidthForValue","maxBarThickness","percent","computeFlexCategoryTraits","computeFitCategoryTraits","stackIndex","rects","_index_","_value_","BubbleController","DoughnutController","innerRadius","outerRadius","getter","_getRotation","_getCircumference","_getRotationExtents","isDatasetVisible","arcs","spacing","getMaxBorderWidth","getMaxOffset","maxSize","cutout","toPercentage","chartWeight","_getRingWeight","ratioX","ratioY","startAngle","endAngle","startX","startY","endX","endY","calcMax","calcMin","maxX","maxY","minX","minY","getRatioAndOffset","maxRadius","radiusLength","_getVisibleDatasetWeightTotal","calculateTotal","_getRingWeightOffset","_circumference","animateRotate","calculateCircumference","animationOpts","centerX","centerY","animateScale","metaData","borderAlign","hoverBorderWidth","hoverOffset","ringWeightOffset","legend","generateLabels","fontColor","legendItem","toggleDataVisibility","LineController","_dataset","_decimated","animated","maxGapLength","directUpdate","pointsCount","prevParsed","nullData","lastPoint","updateControlPoints","PolarAreaController","_updateRadius","minSize","cutoutPercentage","getVisibleDatasetCount","xCenter","yCenter","datasetStartAngle","getIndexAngle","defaultAngle","countVisibleElements","_computeAngle","getDistanceFromCenterForValue","angleLines","circular","pointLabels","PieController","RadarController","_fullLoop","pointPosition","getPointPositionForValue","ScatterController","registry","getElement","abstract","DateAdapterBase","members","formats","diff","startOf","endOf","adapters","binarySearch","metaset","lookupMethod","_reversePixels","getRange","evaluateInteractionItems","getSortedVisibleDatasetMetas","getIntersectItems","useFinalPosition","isPointInArea","inRange","getNearestCartesianItems","distanceMetric","useX","useY","deltaX","deltaY","getDistanceMetricForAxis","minDistance","getCenterPoint","getNearestItems","getProps","getNearestRadialItems","getAxisItems","rangeMethod","intersectsItem","Interaction","modes","nearest","STATIC_POSITIONS","filterByPosition","filterDynamicPositionByAxis","sortByWeight","setLayoutDims","layouts","params","stackWeight","placed","buildStacks","vBoxMaxWidth","hBoxMaxHeight","layout","fullSize","availableWidth","availableHeight","getCombinedMax","maxPadding","updateMaxPadding","boxPadding","updateDims","getPadding","newWidth","outerWidth","newHeight","outerHeight","widthChanged","heightChanged","same","getMargins","marginForPositions","fitBoxes","boxes","refitBoxes","refit","setBoxDims","placeBoxes","userPadding","addBox","_layers","z","removeBox","layoutItem","minPadding","layoutBoxes","wrapBoxes","centerHorizontal","centerVertical","leftAndTop","rightAndBottom","vertical","buildLayoutBoxes","verticalBoxes","horizontalBoxes","beforeLayout","visibleVerticalBoxCount","updatePos","change","handleMaxPadding","BasePlatform","acquireContext","releaseContext","isAttached","updateConfig","BasicPlatform","EXPANDO_KEY","EVENT_TYPES","touchstart","touchmove","touchend","pointerenter","pointerdown","pointermove","pointerup","pointerleave","pointerout","isNullOrEmpty","eventListenerOptions","nodeListContains","nodeList","contains","createAttachObserver","observer","MutationObserver","entries","trigger","addedNodes","removedNodes","observe","childList","subtree","createDetachObserver","drpListeningCharts","oldDevicePixelRatio","onWindowResize","dpr","createResizeObserver","ResizeObserver","contentRect","listenDevicePixelRatioChanges","releaseObserver","disconnect","unlistenDevicePixelRatioChanges","createProxyAndListen","native","fromNativeEvent","DomPlatform","renderHeight","getAttribute","renderWidth","displayWidth","displayHeight","initCanvas","removeAttribute","setAttribute","proxies","$proxies","attach","detach","isConnected","Element","tooltipPosition","hasValue","final","tickOpts","determinedMaxTicks","_tickSize","maxScale","maxChart","_maxLength","determineMaxTicks","ticksLimit","maxTicksLimit","majorIndices","enabled","getMajorIndices","numMajorIndices","newTicks","ceil","skipMajors","evenMajorSpacing","getEvenSpacing","factors","_factorize","calculateSpacing","avgMajorSpacing","majorStart","majorEnd","offsetFromEdge","getTicksLimit","ticksLength","sample","numItems","increment","getPixelForGridLine","offsetGridLines","validIndex","lineValue","getTickMarkLength","getTitleHeight","titleAlign","reverseAlign","Scale","_margins","paddingTop","paddingBottom","paddingLeft","paddingRight","labelRotation","_range","_gridLineItems","_labelItems","_labelSizes","_longestTextCache","_userMax","_userMin","_suggestedMax","_suggestedMin","_ticksLength","_borderValue","_dataLimitsCached","suggestedMin","suggestedMax","metas","getTicks","xLabels","yLabels","getLabelItems","_computeLabelItems","beforeUpdate","sampleSize","beforeSetDimensions","setDimensions","afterSetDimensions","beforeDataLimits","determineDataLimits","afterDataLimits","minmax","keepZero","_addGrace","beforeBuildTicks","buildTicks","afterBuildTicks","samplingEnabled","_convertTicksToLabels","beforeCalculateLabelRotation","calculateLabelRotation","afterCalculateLabelRotation","afterAutoSkip","beforeFit","fit","afterFit","afterUpdate","reversePixels","_alignToPixels","alignToPixels","_callHooks","notifyPlugins","beforeTickToLabelConversion","generateTickLabels","afterTickToLabelConversion","numTicks","maxLabelDiagonal","_isVisible","labelSizes","_getLabelSizes","maxLabelWidth","widest","maxLabelHeight","highest","asin","titleOpts","gridOpts","titleHeight","tickPadding","angleRadians","labelHeight","labelWidth","_calculatePadding","_handleMargins","isRotated","labelsBelowTicks","offsetLeft","offsetRight","isFullSize","_computeLabelSizes","caches","widths","heights","tickFont","fontString","nestedLabel","widestLabelSize","highestLabelSize","_resolveTickFontOptions","valueAt","decimal","getDecimalForPixel","getBaseValue","createTickContext","optionTicks","rot","_computeGridLineItems","tl","borderOpts","axisWidth","axisHalfWidth","alignBorderValue","borderValue","alignedLineValue","tx1","ty1","tx2","ty2","x1","y1","x2","y2","positionAxisID","optsAtIndex","optsAtIndexBorder","lineColor","tickBorderDash","tickBorderDashOffset","tickAndPadding","hTickAndPadding","lineCount","textOffset","_getXAxisLabelAlignment","_getYAxisLabelAlignment","halfCount","tickTextAlign","labelPadding","_computeLabelArea","drawBackground","findIndex","drawGrid","drawLine","setLineDash","lineDashOffset","drawBorder","lastLineWidth","drawLabels","renderTextOptions","drawTitle","titleX","titleY","titleArgs","tz","gz","bz","axisID","_maxDigits","fontSize","TypedRegistry","isForType","isPrototypeOf","register","parentScope","isIChartComponent","itemDefaults","defaultRoutes","routes","propertyParts","sourceName","sourceScope","routeDefaults","registerDefaults","unregister","Registry","controllers","_typedRegistries","_each","addControllers","_len3","_key3","_len4","_key4","addPlugins","_len5","_key5","addScales","_len6","_key6","getController","_get","getPlugin","getScale","removeControllers","_len7","_key7","removeElements","_len8","_key8","removePlugins","_len9","_key9","removeScales","_len10","_key10","typedRegistry","reg","_getRegistryForType","_exec","itemReg","component","camelMethod","PluginService","_init","notify","hook","_createDescriptors","descriptor","plugin","cancelable","invalidate","_oldCache","_notifyStateChanges","localIds","allPlugins","_ref2","getOpts","pluginOpts","createDescriptors","previousDescriptors","some","_ref3","pluginScopeKeys","getIndexAxis","datasetDefaults","idMatchesAxis","determineAxis","_len11","scaleOptions","_key11","getAxisFromDataset","mergeScaleConfig","chartDefaults","configScales","chartIndexAxis","scaleConf","boundDs","retrieveAxisFromDatasets","defaultId","getDefaultScaleIDFromAxis","defaultScaleOptions","defaultID","getAxisFromDefaultScaleID","initOptions","initData","keyCache","keysCached","cachedKeys","generate","addIfFound","Config","_config","initConfig","_scopeCache","_resolverCache","clearCache","clear","datasetType","additionalOptionScopes","_cachedScopes","mainScope","resetCache","keyLists","chartOptionScopes","subPrefixes","getResolver","hasFunction","needContext","resolverCache","KNOWN_POSITIONS","positionIsHorizontal","compare2Level","l1","l2","onAnimationsComplete","onComplete","onAnimationProgress","onProgress","getCanvas","instances","getChart","moveNumericKeys","intKey","getSizeForArea","field","Chart","invalidatePlugins","userConfig","initialCanvas","existingChart","OffscreenCanvas","_detectPlatform","_aspectRatio","_metasets","_lastEvent","_responsiveListeners","_sortedMetasets","_plugins","_hiddenIndices","attached","_doResize","timeout","clearTimeout","setTimeout","debounce","resizeDelay","_initialize","bindEvents","_resizeBeforeDraw","_resize","newSize","newRatio","onResize","ensureScalesHaveIDs","axisOptions","buildOrUpdateScales","scaleOpts","isRadial","dposition","dtype","scaleType","hasUpdated","_updateMetasets","_destroyDatasetMeta","_removeUnreferencedMetasets","buildOrUpdateControllers","newControllers","order","ControllerClass","_resetElements","animsDisabled","_updateScales","_checkEventBindings","_updateHiddenIndices","_minPadding","_updateLayout","_updateDatasets","_eventHandler","_updateHoverStyles","existingEvents","newEvents","unbindEvents","changes","_getUniformDataChanges","datasetCount","makeSet","changeSet","noArea","_idx","_updateDataset","layers","_drawDatasets","_drawDataset","useClip","getDatasetArea","getElementsAtEventForMode","setDatasetVisibility","_updateVisibility","_stop","destroy","toBase64Image","toDataURL","bindUserEvents","bindResponsiveEvents","_add","_remove","detached","updateHoverStyle","getActiveElements","setActiveElements","activeElements","lastActive","_ref4","pluginId","replay","hoverOptions","deactivated","activated","inChartArea","eventFilter","_handleEvent","_getActiveElements","isClick","_isClickEvent","lastEvent","determineLastEvent","parseBorderRadius$1","angleDelta","borderRadius","halfThickness","innerLimit","computeOuterLimit","outerArcLimit","outerStart","outerEnd","innerStart","innerEnd","rThetaToXY","theta","pathArc","pixelMargin","innerR","spacingOffset","avNogSpacingRadius","angleOffset","outerStartAdjustedRadius","outerEndAdjustedRadius","outerStartAdjustedAngle","outerEndAdjustedAngle","innerStartAdjustedRadius","innerEndAdjustedRadius","innerStartAdjustedAngle","innerEndAdjustedAngle","outerMidAdjustedAngle","pCenter","p4","innerMidAdjustedAngle","p8","outerStartX","outerStartY","outerEndX","outerEndY","fullCircles","inner","lineJoin","angleMargin","clipArc","ArcElement","chartX","chartY","rAdjust","betweenAngles","withinRadius","halfAngle","halfRadius","radiusOffset","drawArc","setStyle","lineCap","pathVars","paramsStart","paramsEnd","segmentStart","segmentEnd","outside","pathSegment","lineMethod","stepped","getLineMethod","fastPathSegment","prevX","lastY","avgX","countX","pointIndex","drawX","truncX","_getSegmentMethod","usePath2D","Path2D","path","_path","strokePathWithCache","segmentMethod","strokePathDirect","LineElement","_points","_segments","_pointsUpdated","findStartAndEnd","solidSegments","_computeSegments","_interpolate","_getInterpolationMethod","interpolated","inRange$1","hitRadius","PointElement","mouseX","mouseY","inXRange","inYRange","hoverRadius","getBarBounds","half","skipOrLimit","boundingRects","maxW","maxH","parseBorderWidth","maxR","enableBorder","parseBorderRadius","outer","skipX","skipY","addNormalRectPath","inflateRect","amount","refRect","BarElement","addRectPath","WeakMap","positioners","average","xSet","eventPosition","nearestElement","tp","pushOrConcat","toPush","splitNewlines","createTooltipItem","formattedValue","getTooltipSize","tooltip","footer","boxWidth","boxHeight","bodyFont","titleFont","footerFont","titleLineCount","footerLineCount","bodyLineItemCount","combinedBodyLength","bodyItem","before","after","beforeBody","afterBody","titleSpacing","titleMarginBottom","displayColors","bodySpacing","footerMarginTop","footerSpacing","widthPadding","maxLineWidth","determineXAlign","yAlign","chartWidth","xAlign","caret","caretSize","caretPadding","doesNotFitWithAlign","determineAlignment","determineYAlign","getBackgroundPoint","alignment","paddingAndSize","alignX","alignY","getAlignedX","getBeforeAfterBodyLines","overrideCallbacks","defaultCallbacks","beforeTitle","tooltipItems","labelCount","afterTitle","beforeLabel","tooltipItem","labelColor","labelTextColor","bodyColor","labelPointStyle","afterLabel","beforeFooter","afterFooter","invokeCallbackWithFallback","Tooltip","_eventPosition","_size","_cachedAnimations","_tooltipItems","dataPoints","caretX","caretY","labelColors","labelPointStyles","labelTextColors","getTitle","getBeforeBody","getBody","bodyItems","getAfterBody","getFooter","_createItems","itemSort","positionAndSize","backgroundPoint","external","drawCaret","tooltipPoint","caretPosition","getCaretPosition","x3","y3","ptX","ptY","rtlHelper","titleColor","_drawColorBox","colorX","rtlColorX","yOffSet","colorY","usePointStyle","drawOptions","multiKeyBackground","outerX","innerX","strokeRect","drawBody","bodyAlign","bodyLineHeight","xLinePadding","fillLineOfText","bodyAlignForCalculation","textColor","drawFooter","footerAlign","footerColor","tooltipSize","quadraticCurveTo","_updateAnimationTarget","animX","animY","_willRender","hasTooltipContent","globalAlpha","textDirection","_ref6","positionChanged","_positionChanged","_ignoreReplayEvents","handleEvent","findOrAddLabel","addedLabels","addIfString","_getLabelForValue","CategoryScale","_startValue","_valueRange","_addedLabels","added","generateTicks$1","generationOptions","dataRange","precision","maxTicks","maxDigits","includeBounds","unit","maxSpaces","rmin","rmax","countDefined","minSpacing","niceMin","niceMax","numSpaces","rounded","almostWhole","decimalPlaces","relativeLabelSize","_ref7","LinearScaleBase","_endValue","handleTickRangeOptions","setMin","setMax","minSign","maxSign","getTickLimit","stepSize","computeTickLimit","LinearScale","log10Floor","changeExponent","isMajor","tickVal","steps","rangeExp","rangeStep","generateTicks","_ref8","minExp","exp","startExp","lastTick","LogarithmicScale","_zero","getTickBackdropHeight","determineLimits","fitWithPointLabels","_padding","limits","valueCount","_pointLabels","pointLabelOpts","additionalAngle","centerPointLabels","getPointLabelContext","getPointPosition","drawingArea","plFont","textSize","updateLimits","setCenterPoint","_pointLabelItems","itemOpts","extra","createPointLabelItem","isNotOverlapped","buildPointLabelItems","hLimits","vLimits","outerDistance","pointLabelPosition","yForAngle","getTextAlignForAngle","leftForTextAlign","drawPointLabelBox","backdropLeft","backdropTop","backdropWidth","backdropHeight","pathRadiusLine","RadialLinearScale","leftMovement","rightMovement","topMovement","bottomMovement","scalingFactor","getValueForDistanceFromCenter","scaledDistance","pointLabel","createPointLabelContext","distanceFromCenter","getBasePosition","getPointLabelPosition","drawPointLabels","gridLineOpts","drawRadiusLine","animate","INTERVALS","millisecond","common","second","minute","hour","day","week","month","quarter","year","UNITS","adapter","_adapter","isoWeekday","_parseOpts","determineUnitForAutoTicks","minUnit","capacity","interval","MAX_SAFE_INTEGER","addTick","time","timestamps","ticksFromTimestamps","majorUnit","setMajorTicks","TimeScale","_unit","_majorUnit","_offsets","_normalized","displayFormats","normalized","_applyBounds","_getLabelBounds","getLabelTimestamps","timeOpts","_generate","_filterBetween","_getLabelCapacity","determineUnitForFormatting","determineMajorUnit","initOffsets","offsetAfterAutoskip","getDecimalForValue","weekday","hasWeekday","getDataTimestamps","tooltipFormat","fmt","_tickFormatFunction","minorFormat","majorFormat","offsets","_getLabelSize","ticksOpts","tickLabelWidth","cosRotation","sinRotation","tickFontSize","exampleTime","exampleLabel","prevSource","nextSource","prevTarget","nextTarget","TimeSeriesScale","_table","_minPos","_tableRange","_getTimestampsForTable","buildLookupTable","defaultDatasetIdKey","reforwardRef","setLabels","currentData","nextLabels","setDatasets","nextDatasets","datasetIdKey","addedDatasets","nextDataset","currentDataset","cloneData","nextData","ChartComponent","redraw","fallbackContent","updateMode","canvasProps","canvasRef","useRef","chartRef","renderChart","Chart$1","destroyChart","useEffect","nextOptions","setOptions","forwardRef","createTypedChart","registerables","Line"],"sourceRoot":""}